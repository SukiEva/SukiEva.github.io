<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="msvalidate.01" content="AFC59628FC88BD6352D3E7A5AE5FE303"><meta name="google-site-verification" content="uAa2fbb800RIF4HzoIvwlhtlNh7J2m24V8LizLrlCu4"><title>《图解HTTP》笔记 - 千反田</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#3273dc"><meta name="application-name" content="千反田"><meta name="msapplication-TileImage" content="/img/favicon.ico"><meta name="msapplication-TileColor" content="#3273dc"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="千反田"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="本书图文并茂，大量图片穿插文中，生动形象地向读者介绍每一个应 用案例，减少了读者阅读时的枯燥感。 借助一张张配图，读者们不仅会加深视觉记忆，在轻松愉悦的氛围中，还可以更深刻地理解通信机 制等背后的工作原理。 正所谓一图胜千文。"><meta property="og:type" content="blog"><meta property="og:title" content="《图解HTTP》笔记"><meta property="og:url" content="http://blog.sukiu.top/Computer-network/Graphic-Http-Notes/"><meta property="og:site_name" content="千反田"><meta property="og:description" content="本书图文并茂，大量图片穿插文中，生动形象地向读者介绍每一个应 用案例，减少了读者阅读时的枯燥感。 借助一张张配图，读者们不仅会加深视觉记忆，在轻松愉悦的氛围中，还可以更深刻地理解通信机 制等背后的工作原理。 正所谓一图胜千文。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061341784.png"><meta property="article:published_time" content="2022-03-06T05:36:25.000Z"><meta property="article:modified_time" content="2022-03-06T14:42:00.036Z"><meta property="article:author" content="SukiEva"><meta property="article:tag" content="HTTP"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061341784.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://blog.sukiu.top/Computer-network/Graphic-Http-Notes/"},"headline":"《图解HTTP》笔记","image":["https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061341784.png"],"datePublished":"2022-03-06T05:36:25.000Z","dateModified":"2022-03-06T14:42:00.036Z","author":{"@type":"Person","name":"SukiEva"},"publisher":{"@type":"Organization","name":"千反田","logo":{"@type":"ImageObject","url":"https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/blog/favicon.ico"}},"description":"本书图文并茂，大量图片穿插文中，生动形象地向读者介绍每一个应 用案例，减少了读者阅读时的枯燥感。 借助一张张配图，读者们不仅会加深视觉记忆，在轻松愉悦的氛围中，还可以更深刻地理解通信机 制等背后的工作原理。 正所谓一图胜千文。"}</script><link rel="canonical" href="http://blog.sukiu.top/Computer-network/Graphic-Http-Notes/"><link rel="alternate" href="/rss.xml" title="千反田" type="application/atom+xml"><link rel="icon" href="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/blog/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://unpkg.com/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?46b8feda6aa9434cccdff91f797b76ad";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><meta name="msvalidate.01" content="AFC59628FC88BD6352D3E7A5AE5FE303"><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><link rel="stylesheet" href="https://unpkg.com/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://unpkg.com/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://unpkg.com/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-YW921Z6076" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-YW921Z6076');</script><!--!--><!--!--><link rel="stylesheet" href="https://unpkg.com/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://unpkg.com/pace-js@1.2.4/pace.min.js"></script><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><script type="text/javascript" src="/js/night.js"></script><canvas id="universe"></canvas><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><span class="logolink"><a class="navbar-item navbar-logo" href="/"><span class="sakuraso">千反田</span><span class="no">の</span><span class="shironeko">μ&#039;s</span></a></span></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">🌈首页</a><a class="navbar-item" href="/archives">🗂️归档</a><a class="navbar-item" href="/categories">🪁分类</a><a class="navbar-item" href="/tags">🏷️标签</a><a class="navbar-item" href="/friends">🎉友链</a><a class="navbar-item" href="/donate">💕赞赏</a><a class="navbar-item" href="/about">🎐关于</a></div><div class="navbar-end"><a class="navbar-item night" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Travelling" href="https://travellings.link"><i class="fas fa-subway"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061341784.png" alt="《图解HTTP》笔记"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-06T05:36:25.000Z" title="2022/3/6 13:36:25">2022-03-06</time>发表</span><span class="level-item"><time dateTime="2022-03-06T14:42:00.036Z" title="2022/3/6 22:42:00">2022-03-06</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Computer-network/">Computer network</a></span><span class="level-item">34 分钟读完 (大约5086个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">《图解HTTP》笔记</h1><div class="content"><blockquote>
<p>本书图文并茂，大量图片穿插文中，生动形象地向读者介绍每一个应 用案例，减少了读者阅读时的枯燥感。</p>
<p>借助一张张配图，读者们不仅会加深视觉记忆，在轻松愉悦的氛围中，还可以更深刻地理解通信机 制等背后的工作原理。</p>
<p>正所谓一图胜千文。</p>
</blockquote>
<span id="more"></span>

<h2 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h2><h3 id="请求-响应通信"><a href="#请求-响应通信" class="headerlink" title="请求/响应通信"></a>请求/响应通信</h3><p>请求报文由<strong>请求方法、请求 URI、协议版本、可选的请求首部字段和内容实体</strong>构成。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061347720.png" style="zoom:80%;" />

<p>响应报文由<strong>协议版本、状态码（原因短语）、可选的响应首部字段和主体</strong>构成。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061349516.png" style="zoom:80%;" />

<h3 id="不保存状态"><a href="#不保存状态" class="headerlink" title="不保存状态"></a>不保存状态</h3><p>HTTP 是一种不保存状态，即无状态（stateless）协议。</p>
<p>HTTP 协议自身不对请求和响应之间的通信状态进行保存，协议对于发送过的请求或响应都不做持久化处理。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061351286.png" style="zoom: 80%;" />

<h3 id="HTTP方法"><a href="#HTTP方法" class="headerlink" title="HTTP方法"></a>HTTP方法</h3><h4 id="GET：获取资源"><a href="#GET：获取资源" class="headerlink" title="GET：获取资源"></a>GET：获取资源</h4><p>GET 方法用来请求访问已被 URI 识别的资源。</p>
<p>指定的资源经服务器端解析后返回响应内容。</p>
<blockquote>
<p>如果请求的资源是文本，那就保持原样返回；</p>
<p>如果是像 CGI（Common Gateway Interface，通用网关接 口）那样的程序，则返回经过执行后的输出结果。</p>
</blockquote>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061355943.png" style="zoom: 80%;" />

<h4 id="POST：传输实体主体"><a href="#POST：传输实体主体" class="headerlink" title="POST：传输实体主体"></a>POST：传输实体主体</h4><p>POST 方法用来传输实体的主体。</p>
<p>虽然用 GET 方法也可以传输实体的主体，但一般不用 GET 方法进行 传输，而是用 POST 方法。</p>
<p>虽说 POST 的功能与 GET 很相似，但 POST 的主要目的并不是获取响应的主体内容。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061356954.png" style="zoom: 80%;" />

<h4 id="PUT：传输文件"><a href="#PUT：传输文件" class="headerlink" title="PUT：传输文件"></a>PUT：传输文件</h4><p>PUT 方法用来传输文件。</p>
<p>就像 FTP 协议的文件上传一样，要求在请求报文的主体中包含文件内容，然后保存到请求 URI 指定的位置。</p>
<p>但是，鉴于 HTTP/1.1 的 PUT 方法自身不带验证机制，任何人都可以上传文件 , 存在安全性问题，因此一般的 Web 网站不使用该方法。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061359052.png" style="zoom: 80%;" />

<h4 id="HEAD：获得报文首部"><a href="#HEAD：获得报文首部" class="headerlink" title="HEAD：获得报文首部"></a>HEAD：获得报文首部</h4><p>HEAD 方法和 GET 方法一样，只是不返回报文主体部分。</p>
<p>用于确认 URI 的有效性及资源更新的日期时间等。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061359184.png" style="zoom: 80%;" />

<h4 id="DELETE：删除文件"><a href="#DELETE：删除文件" class="headerlink" title="DELETE：删除文件"></a>DELETE：删除文件</h4><p>DELETE 方法用来删除文件，是与 PUT 相反的方法。</p>
<p>DELETE 方法按请求 URI 删除指定的资源。</p>
<p>但是，HTTP/1.1 的 DELETE 方法本身和 PUT 方法一样不带验证机制，所以一般的 Web 网站也不使用 DELETE 方法。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061400518.png" style="zoom:80%;" />

<h4 id="OPTIONS：询问支持的方法"><a href="#OPTIONS：询问支持的方法" class="headerlink" title="OPTIONS：询问支持的方法"></a>OPTIONS：询问支持的方法</h4><p>OPTIONS 方法用来查询针对请求 URI 指定的资源支持的方法。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061406769.png" style="zoom: 80%;" />

<h4 id="TRACE：追踪路径"><a href="#TRACE：追踪路径" class="headerlink" title="TRACE：追踪路径"></a>TRACE：追踪路径</h4><p>TRACE 方法是让 Web 服务器端将之前的请求通信环回给客户端的方法。</p>
<p>发送请求时，在 Max-Forwards 首部字段中填入数值，每经过一个服务器端就将该数字减 1，当数值刚好减到 0 时，就停止继续传输，最后接收到请求的服务器端则返回状态码 200 OK 的响应。</p>
<p>但是，TRACE 方法本来就不怎么常用，再加上它容易引发 XST（Cross-Site Tracing，跨站追踪）攻击，通常就更不会用到了。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061402888.png" style="zoom: 80%;" />

<h4 id="CONNECT：要求用隧道协议连接代理"><a href="#CONNECT：要求用隧道协议连接代理" class="headerlink" title="CONNECT：要求用隧道协议连接代理"></a>CONNECT：要求用隧道协议连接代理</h4><p>CONNECT 方法要求在与代理服务器通信时建立隧道，实现用隧道协议进行 TCP 通信。</p>
<p>主要使用 SSL（Secure Sockets Layer，安全套接层）和 TLS（Transport Layer Security，传输层安全）协议把通信内容加密后经网络隧道传输。</p>
<p>格式：<code>CONNECT 代理服务器名:端口号 HTTP版本</code></p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061404359.png" style="zoom: 80%;" />

<h3 id="持久连接"><a href="#持久连接" class="headerlink" title="持久连接"></a>持久连接</h3><img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061407328.png" alt="image-20220306140731254" style="zoom: 67%;" />

<p>为解决上述 TCP 连接的问题，HTTP/1.1 和一部分的 HTTP/1.0 想出了持久连接（HTTP Persistent Connections，也称为 HTTP keep-alive 或 HTTP connection reuse）的方法。</p>
<p>持久连接的特点是，<strong>只要任意一端没有明确提出断开连接，则保持 TCP 连接状态</strong>。</p>
<p>在 HTTP/1.1 中，所有的连接默认都是持久连接。</p>
<h4 id="管线化-pipelining"><a href="#管线化-pipelining" class="headerlink" title="管线化 pipelining"></a>管线化 pipelining</h4><p>持久连接使得多数请求以管线化（pipelining）方式发送成为可能。</p>
<p>从前发送请求后需等待并收到响应，才能发送下一个请求。管线化技术出现后，不用等待响应亦可直接发送下一个请求。</p>
<p>这样就能够做到同时<strong>并行发送多个请求</strong>，而不需要一个接一个地等待响应了。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061410650.png" style="zoom: 67%;" />

<h3 id="使用COOKIE"><a href="#使用COOKIE" class="headerlink" title="使用COOKIE"></a>使用COOKIE</h3><img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061412524.png" style="zoom: 67%;" />

<p>保留无状态协议这个特征的同时又要解决类似的矛盾问题，于是引入了 Cookie 技术。Cookie 技术通过在请求和响应报文中写入 Cookie 信息来控制客户端的状态。</p>
<ul>
<li><p>Cookie 会根据从服务器端发送的响应报文内的一个叫做 Set-Cookie 的首部字段信息，通知客户端保存 Cookie。当下次客户端再往该服务器发送请求时，客户端会自动在请求报文中加入 Cookie 值后发送出去。</p>
</li>
<li><p>服务器端发现客户端发送过来的 Cookie 后，会去检查究竟是从哪一个客户端发来的连接请求，然后对比服务器上的记录，最后得到之前的状态信息。</p>
</li>
</ul>
<table>
    <tr>
        <td><img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061414206.png"  /></td>
        <td><img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061415535.png"  /></td>
    </tr>
</table>

<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061417981.png" style="zoom: 67%;" />

<h2 id="HTTP报文"><a href="#HTTP报文" class="headerlink" title="HTTP报文"></a>HTTP报文</h2><p>用于 HTTP 协议交互的信息被称为 HTTP 报文。请求端（客户端）的 HTTP 报文叫做请求报文，响应端（服务器端）的叫做响应报文。</p>
<p>HTTP 报文本身是由多行（用 CR+LF 作换行符）数据构成的字符串文本。</p>
<p>HTTP 报文大致可分为报文首部和报文主体两块。两者由最初出现的 空行（CR+LF）来划分。通常，并不一定要有报文主体。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061435574.png" style="zoom:67%;" />

<ul>
<li>请求行包含用于请求的方法，请求 URI 和 HTTP 版本。</li>
<li>状态行包含表明响应结果的状态码，原因短语和 HTTP 版本。</li>
<li>首部字段包含表示请求和响应的各种条件和属性的各类首部。</li>
</ul>
<h3 id="编码传输"><a href="#编码传输" class="headerlink" title="编码传输"></a>编码传输</h3><p>HTTP 在传输数据时可以按照数据原貌直接传输，但也可以在传输过 程中通过编码提升传输速率。但是，编码的操作需要计算机来完成，因此会消耗更多的 CPU 等资源。</p>
<h4 id="报文-实体主体"><a href="#报文-实体主体" class="headerlink" title="报文/实体主体"></a>报文/实体主体</h4><ul>
<li><p>报文（message）：HTTP 通信中的基本单位，由 8 位组字节流（octet sequence， 其中 octet 为 8 个比特）组成，通过 HTTP 通信传输。</p>
</li>
<li><p>实体（entity）：作为请求或响应的有效载荷数据（补充项）被传输，其内容由实体首部和实体主体组成。</p>
</li>
</ul>
<p>HTTP 报文的主体用于传输请求或响应的<strong>实体主体</strong>。</p>
<blockquote>
<p>通常，报文主体等于实体主体。</p>
<p>只有当传输中进行编码操作时，实体主体的<strong>内容发生变化</strong>，才导致它和报文主体产生差异。</p>
</blockquote>
<h4 id="压缩传输的内容编码"><a href="#压缩传输的内容编码" class="headerlink" title="压缩传输的内容编码"></a>压缩传输的内容编码</h4><p>向待发送邮件内增加附件时，为了使邮件容量变小，我们会先用 ZIP 压缩文件之后再添加附件发送。</p>
<p>HTTP 协议中有一种被称为内容编码的功能也能进行类似的操作。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061442983.png" style="zoom:67%;" />

<p>常用的内容编码有以下几种：</p>
<ul>
<li>gzip（GNU zip）</li>
<li>compress（UNIX 系统的标准压缩）</li>
<li>deflate（zlib）</li>
<li>identity（不进行编码）</li>
</ul>
<h4 id="分割发送的分块传输编码"><a href="#分割发送的分块传输编码" class="headerlink" title="分割发送的分块传输编码"></a>分割发送的分块传输编码</h4><p>在传输大容量数据时，通过把数据分割成多块，能够让浏览器逐步显示页面。</p>
<p>这种把实体主体分块的功能称为分块传输编码（Chunked Transfer Coding）。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061443064.png" style="zoom:67%;" />

<ul>
<li><p>分块传输编码会将实体主体分成多个部分（块）。每一块都会用十六 进制来标记块的大小，而实体主体的最后一块会使用“0(CR+LF)”来标记。</p>
</li>
<li><p>使用分块传输编码的实体主体会由接收的客户端负责解码，恢复到编码前的实体主体。</p>
</li>
</ul>
<p>HTTP/1.1 中存在一种称为传输编码（Transfer Coding）的机制，它可以在通信时按某种编码方式传输，但只定义作用于分块传输编码中。</p>
<h3 id="对象集合"><a href="#对象集合" class="headerlink" title="对象集合"></a>对象集合</h3><p>发送邮件时，我们可以在邮件里写入文字并添加多份附件。</p>
<p>这是因为采用了 MIME（Multipurpose Internet Mail Extensions，多用途因特网邮件扩展）机制，它允许邮件处理文本、图片、视频等多个不同类型的数据。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061445336.png" style="zoom:80%;" />

<p>HTTP 协议中也采纳了多部分对象集合（Multipart），发送的一份报文主体内可含有多类型实体。通常是在图片或文本文件等上传时使用。</p>
<p>在 HTTP 报文中使用多部分对象集合时，需要在首部字段里加上 Content-type。</p>
<h3 id="获取部分内容的范围请求"><a href="#获取部分内容的范围请求" class="headerlink" title="获取部分内容的范围请求"></a>获取部分内容的范围请求</h3><p>如果下载过程中遇到网络中断的情况，那就必须重头开始。为了解决上述问题，需要一种可恢复的机制。所谓恢复是指能从之前下载中断处恢复下载。</p>
<p>要实现该功能需要指定下载的实体范围。像这样，指定范围发送的请求叫做范围请求（Range Request）。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203061450934.png" style="zoom: 67%;" />

<p>执行范围请求时，会用到首部字段 Range 来指定资源的 byte 范围。</p>
<blockquote>
<p>针对范围请求，响应会返回状态码为 206 Partial Content 的响应报文。</p>
<p>另外，对于多重范围的范围请求，响应会在首部字段 ContentType 标明 multipart/byteranges 后返回响应报文。</p>
</blockquote>
<h2 id="HTTP协作"><a href="#HTTP协作" class="headerlink" title="HTTP协作"></a>HTTP协作</h2><h3 id="通信数据转发"><a href="#通信数据转发" class="headerlink" title="通信数据转发"></a>通信数据转发</h3><p>HTTP 通信时，除客户端和服务器以外，还有一些用于通信数据转发的应用程序，例如代理、网关和隧道。它们可以配合服务器工作。</p>
<h4 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h4><p>代理是一种有转发功能的应用程序，它扮演了位于服务器和客户端“中间人”的角色，接收由客户端发送的请求并转发给服务器，同时也接收服务器返回的响应并转发给客户端。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203062113232.png" style="zoom:80%;" />

<p>使用代理服务器的理由有：利用缓存技术（稍后讲解）减少网络带宽的流量，组织内部针对特定网站的访问控制，以获取访问日志为主要目的等等。</p>
<p>代理有多种使用方法，按两种基准分类。一种是是否使用缓存，另一种是是否会修改报文。</p>
<ul>
<li>缓存代理：代理转发响应时，缓存代理（Caching Proxy）会预先将资源的副本（缓存）保存在代理服务器上。当代理再次接收到对相同资源的请求时，就可以不从源服务器那里获取资源，而是将之前缓存的资源作为响应返回。</li>
<li>透明代理：转发请求或响应时，不对报文做任何加工的代理类型被称为透明代理（Transparent Proxy）。反之，对报文内容进行加工的代理被称为非透明代理。</li>
</ul>
<h4 id="网关"><a href="#网关" class="headerlink" title="网关"></a>网关</h4><p>网关是转发其他服务器通信数据的服务器，接收从客户端发送来的请求时，它就像自己拥有资源的源服务器一样对请求进行处理。有时客户端可能都不会察觉，自己的通信目标是一个网关。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203062135522.png" style="zoom:80%;" />

<p>网关的工作机制和代理十分相似。而网关能使通信线路上的服务器提供非 HTTP 协议服务。</p>
<p>利用网关能提高通信的安全性，因为可以在客户端与网关之间的通信线路上加密以确保连接的安全。</p>
<p>比如，网关可以连接数据库，使用SQL语句查询数据。另外，在 Web 购物网站上进行信用卡结算时，网关可以和信用卡结算系统联动。</p>
<h4 id="隧道"><a href="#隧道" class="headerlink" title="隧道"></a>隧道</h4><p>隧道是在相隔甚远的客户端和服务器两者之间进行中转，并保持双方通信连接的应用程序。</p>
<p>隧道可按要求建立起一条与其他服务器的通信线路，届时使用SSL等加密手段进行通信。隧道的目的是确保客户端能与服务器进行安全的通信。</p>
<p>隧道本身不会去解析 HTTP 请求。也就是说，请求保持原样中转给之 后的服务器。隧道会在通信双方断开连接时结束。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203062138636.png" style="zoom:80%;" />

<h3 id="保存资源的缓存"><a href="#保存资源的缓存" class="headerlink" title="保存资源的缓存"></a>保存资源的缓存</h3><p>缓存是指代理服务器或客户端本地磁盘内保存的资源副本。利用缓存可减少对源服务器的访问，因此也就节省了通信流量和通信时间。</p>
<p>缓存服务器是代理服务器的一种，并归类在缓存代理类型中。换句话说，当代理转发从服务器返回的响应时，代理服务器将会保存一份资源的副本。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203062144618.png" style="zoom:67%;" />

<p>缓存服务器的优势在于利用缓存可避免多次从源服务器转发资源。因此客户端可就近从缓存服务器上获取资源，而源服务器也不必多次处理相同的请求了。</p>
<h2 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h2><h3 id="HTTP缺点"><a href="#HTTP缺点" class="headerlink" title="HTTP缺点"></a>HTTP缺点</h3><p>HTTP 主要有这些不足：</p>
<ul>
<li>通信使用明文（不加密），内容可能会被窃听</li>
<li>不验证通信方的身份，因此有可能遭遇伪装</li>
<li>无法证明报文的完整性，所以有可能已遭篡改</li>
</ul>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203062156625.png" style="zoom:80%;" />

<h3 id="HTTP-加密-认证-完整性保护-HTTPS"><a href="#HTTP-加密-认证-完整性保护-HTTPS" class="headerlink" title="HTTP + 加密 + 认证 + 完整性保护 = HTTPS"></a>HTTP + 加密 + 认证 + 完整性保护 = HTTPS</h3><img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203062201021.png" style="zoom:80%;" />

<h4 id="HTTPS-是身披-SSL-外壳的-HTTP"><a href="#HTTPS-是身披-SSL-外壳的-HTTP" class="headerlink" title="HTTPS 是身披 SSL 外壳的 HTTP"></a>HTTPS 是身披 SSL 外壳的 HTTP</h4><p>HTTPS 并非是应用层的一种新协议。只是 HTTP 通信接口部分用 SSL（Secure Socket Layer）和 TLS（Transport Layer Security）协议代替而已。</p>
<p>通常，HTTP 直接和 TCP 通信。当使用 SSL时，则演变成先和 SSL通信，再由 SSL和 TCP 通信了。简言之，所谓 HTTPS，其实就是身披 SSL协议这层外壳的 HTTP。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203062217085.png" style="zoom: 80%;" />

<blockquote>
<p>SSL是独立于 HTTP 的协议，所以不光是 HTTP 协议，其他运行在应用层的 SMTP 和 Telnet 等协议均可配合 SSL协议使用。</p>
<p>可以说 SSL是 当今世界上应用最为广泛的网络安全技术。</p>
</blockquote>
<h4 id="相互交换密钥的公开密钥加密技术"><a href="#相互交换密钥的公开密钥加密技术" class="headerlink" title="相互交换密钥的公开密钥加密技术"></a>相互交换密钥的公开密钥加密技术</h4><p>SSL采用一种叫做公开密钥加密（Public-key cryptography）的加密处理方式。</p>
<p>近代的加密方法中加密算法是公开的，而密钥却是保密的。通过这种方式得以保持加密方法的安全性。</p>
<blockquote>
<p>对称加密：加密和解密同用一个密钥</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203062221048.png" style="zoom:80%;" />

<p>非对称加密：公开密钥加密使用一对非对称的密钥。一把叫做私有密钥（private key），另一把叫做公开密钥（public key）</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203062223969.png" style="zoom:67%;" />
</blockquote>
<p>HTTPS 采用共享密钥加密和公开密钥加密两者并用的混合加密机制。</p>
<p>若密钥能够实现安全交换，那么有可能会考虑仅使用公开密钥加密来通信。但是公开密钥加密与共享密钥加密相比，其处理速度要慢。</p>
<p>所以应充分利用两者各自的优势，将多种方法组合起来用于通信。在交换密钥环节使用公开密钥加密方式，之后的建立通信交 换报文阶段则使用共享密钥加密方式。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203062225654.png" style="zoom: 80%;" />

<h4 id="证明公开密钥正确性的证书"><a href="#证明公开密钥正确性的证书" class="headerlink" title="证明公开密钥正确性的证书"></a>证明公开密钥正确性的证书</h4><p>遗憾的是，公开密钥加密方式还是存在一些问题的。那就是无法证明公开密钥本身就是货真价实的公开密钥。或许在公开密钥传输途中，真正的公开密钥已经被攻击者替换掉了。</p>
<p>为了解决上述问题，可以使用由数字证书认证机构（CA，Certificate Authority）和其相关机关颁发的公开密钥证书。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203062230419.png" style="zoom:80%;" />

<h3 id="HTTPS通信"><a href="#HTTPS通信" class="headerlink" title="HTTPS通信"></a>HTTPS通信</h3><img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203062235169.png" style="zoom:80%;" />

<ul>
<li><p>步骤 1： 客户端通过发送 Client Hello 报文开始 SSL通信。报文中包含客户端支持的 SSL的指定版本、加密组件（Cipher Suite）列表（所使用的加密算法及密钥长度等）。</p>
</li>
<li><p>步骤 2： 服务器可进行SSL通信时，会以 Server Hello 报文作为应答。和客户端一样，在报文中包含 SSL版本以及加密组件。服务器的加密组件内容是从接收到的客户端加密组件内筛选出来的。</p>
</li>
<li><p>步骤 3： 之后服务器发送 Certificate 报文。报文中包含公开密钥证书。</p>
</li>
<li><p>步骤 4： 最后服务器发送 Server Hello Done 报文通知客户端，最初阶段的SSL握手协商部分结束。</p>
</li>
<li><p>步骤 5： SSL第一次握手结束之后，客户端以 Client Key Exchange 报 文作为回应。报文中包含通信加密中使用的一种被称为 Pre-master secret 的随机密码串。该报文已用步骤 3 中的公开密钥进行加密。</p>
</li>
<li><p>步骤 6： 接着客户端继续发送 Change Cipher Spec 报文。该报文会提示服务器，在此报文之后的通信会采用 Pre-master secret 密钥加密。</p>
</li>
<li><p>步骤 7： 客户端发送 Finished 报文。该报文包含连接至今全部报文的整体校验值。这次握手协商是否能够成功，要以服务器是否能够正确解密该报文作为判定标准。</p>
</li>
<li><p>步骤 8： 服务器同样发送 Change Cipher Spec 报文。</p>
</li>
<li><p>步骤 9： 服务器同样发送 Finished 报文。</p>
</li>
<li><p>步骤 10： 服务器和客户端的 Finished 报文交换完毕之后，SSL连接 就算建立完成。当然，通信会受到 SSL的保护。从此处开始进行应用层协议的通信，即发送 HTTP 请求。</p>
</li>
<li><p>步骤 11： 应用层协议通信，即发送 HTTP 响应。</p>
</li>
<li><p>步骤 12： 最后由客户端断开连接。断开连接时，发送 close_notify 报文。上图做了一些省略，这步之后再发送 TCP FIN 报文来关闭与 TCP 的通信。</p>
</li>
</ul>
<h3 id="HTTPS缺点"><a href="#HTTPS缺点" class="headerlink" title="HTTPS缺点"></a>HTTPS缺点</h3><p>HTTPS 也存在一些问题，那就是当使用 SSL 时，它的处理速度会变慢。</p>
<p>SSL的慢分两种：一种是指通信慢，另一种是指由于大量消耗 CPU 及内存等资源，导致处理速度变慢。</p>
<img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/img/202203062239123.png" style="zoom:80%;" />

<blockquote>
<p>如果是非敏感信息则使用 HTTP 通信，只有在包含个人信息等敏感数据时，才利用 HTTPS 加密通信。</p>
<p>特别是每当那些访问量较多的 Web 网站在进行加密处理时，它们所承担着的负载不容小觑。在进行加密处理时，并非对所有内容都进行加密处理，而是仅在那些需要信息隐藏时才会加密，以节约资源。</p>
<p>除此之外，想要节约购买证书的开销也是原因之一。</p>
</blockquote>
</div><div class="article-licensing box"><div class="licensing-title"><p>《图解HTTP》笔记</p><p><a href="http://blog.sukiu.top/Computer-network/Graphic-Http-Notes/">http://blog.sukiu.top/Computer-network/Graphic-Http-Notes/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>SukiEva</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2022-03-06</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2022-03-06</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="" rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/HTTP/">HTTP</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/Database/Redis-Pro/"><span class="level-item">Redis设计与实现</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="comment-container"></div><link rel="stylesheet" href="https://unpkg.com/gitalk@1.7.2/dist/gitalk.css"><script src="https://unpkg.com/gitalk@1.7.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: "bdb7f4b32b8f88d9337b340191fbe8cf",
            repo: "SukiEva.github.io",
            owner: "SukiEva",
            clientID: "8542444b11c2adac4574",
            clientSecret: "3bfc002a0a942d7dfb1eeada021f62c499ec2af9",
            admin: ["SukiEva"],
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 10,
            pagerDirection: "last",
            
            
            enableHotKey: true,
            language: "zh-CN",
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#HTTP协议"><span class="level-left"><span class="level-item">1</span><span class="level-item">HTTP协议</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#请求-响应通信"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">请求/响应通信</span></span></a></li><li><a class="level is-mobile" href="#不保存状态"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">不保存状态</span></span></a></li><li><a class="level is-mobile" href="#HTTP方法"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">HTTP方法</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#GET：获取资源"><span class="level-left"><span class="level-item">1.3.1</span><span class="level-item">GET：获取资源</span></span></a></li><li><a class="level is-mobile" href="#POST：传输实体主体"><span class="level-left"><span class="level-item">1.3.2</span><span class="level-item">POST：传输实体主体</span></span></a></li><li><a class="level is-mobile" href="#PUT：传输文件"><span class="level-left"><span class="level-item">1.3.3</span><span class="level-item">PUT：传输文件</span></span></a></li><li><a class="level is-mobile" href="#HEAD：获得报文首部"><span class="level-left"><span class="level-item">1.3.4</span><span class="level-item">HEAD：获得报文首部</span></span></a></li><li><a class="level is-mobile" href="#DELETE：删除文件"><span class="level-left"><span class="level-item">1.3.5</span><span class="level-item">DELETE：删除文件</span></span></a></li><li><a class="level is-mobile" href="#OPTIONS：询问支持的方法"><span class="level-left"><span class="level-item">1.3.6</span><span class="level-item">OPTIONS：询问支持的方法</span></span></a></li><li><a class="level is-mobile" href="#TRACE：追踪路径"><span class="level-left"><span class="level-item">1.3.7</span><span class="level-item">TRACE：追踪路径</span></span></a></li><li><a class="level is-mobile" href="#CONNECT：要求用隧道协议连接代理"><span class="level-left"><span class="level-item">1.3.8</span><span class="level-item">CONNECT：要求用隧道协议连接代理</span></span></a></li></ul></li><li><a class="level is-mobile" href="#持久连接"><span class="level-left"><span class="level-item">1.4</span><span class="level-item">持久连接</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#管线化-pipelining"><span class="level-left"><span class="level-item">1.4.1</span><span class="level-item">管线化 pipelining</span></span></a></li></ul></li><li><a class="level is-mobile" href="#使用COOKIE"><span class="level-left"><span class="level-item">1.5</span><span class="level-item">使用COOKIE</span></span></a></li></ul></li><li><a class="level is-mobile" href="#HTTP报文"><span class="level-left"><span class="level-item">2</span><span class="level-item">HTTP报文</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#编码传输"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">编码传输</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#报文-实体主体"><span class="level-left"><span class="level-item">2.1.1</span><span class="level-item">报文/实体主体</span></span></a></li><li><a class="level is-mobile" href="#压缩传输的内容编码"><span class="level-left"><span class="level-item">2.1.2</span><span class="level-item">压缩传输的内容编码</span></span></a></li><li><a class="level is-mobile" href="#分割发送的分块传输编码"><span class="level-left"><span class="level-item">2.1.3</span><span class="level-item">分割发送的分块传输编码</span></span></a></li></ul></li><li><a class="level is-mobile" href="#对象集合"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">对象集合</span></span></a></li><li><a class="level is-mobile" href="#获取部分内容的范围请求"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">获取部分内容的范围请求</span></span></a></li></ul></li><li><a class="level is-mobile" href="#HTTP协作"><span class="level-left"><span class="level-item">3</span><span class="level-item">HTTP协作</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#通信数据转发"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">通信数据转发</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#代理"><span class="level-left"><span class="level-item">3.1.1</span><span class="level-item">代理</span></span></a></li><li><a class="level is-mobile" href="#网关"><span class="level-left"><span class="level-item">3.1.2</span><span class="level-item">网关</span></span></a></li><li><a class="level is-mobile" href="#隧道"><span class="level-left"><span class="level-item">3.1.3</span><span class="level-item">隧道</span></span></a></li></ul></li><li><a class="level is-mobile" href="#保存资源的缓存"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">保存资源的缓存</span></span></a></li></ul></li><li><a class="level is-mobile" href="#HTTPS"><span class="level-left"><span class="level-item">4</span><span class="level-item">HTTPS</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#HTTP缺点"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">HTTP缺点</span></span></a></li><li><a class="level is-mobile" href="#HTTP-加密-认证-完整性保护-HTTPS"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">HTTP + 加密 + 认证 + 完整性保护 = HTTPS</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#HTTPS-是身披-SSL-外壳的-HTTP"><span class="level-left"><span class="level-item">4.2.1</span><span class="level-item">HTTPS 是身披 SSL 外壳的 HTTP</span></span></a></li><li><a class="level is-mobile" href="#相互交换密钥的公开密钥加密技术"><span class="level-left"><span class="level-item">4.2.2</span><span class="level-item">相互交换密钥的公开密钥加密技术</span></span></a></li><li><a class="level is-mobile" href="#证明公开密钥正确性的证书"><span class="level-left"><span class="level-item">4.2.3</span><span class="level-item">证明公开密钥正确性的证书</span></span></a></li></ul></li><li><a class="level is-mobile" href="#HTTPS通信"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">HTTPS通信</span></span></a></li><li><a class="level is-mobile" href="#HTTPS缺点"><span class="level-left"><span class="level-item">4.4</span><span class="level-item">HTTPS缺点</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/blog/avatar.jpg" alt="SukiEva"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">SukiEva</p><p class="is-size-6 is-block">Developer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">53</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">12</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">31</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/SukiEva" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Navigation" href="https://sukiu.top"><i class="fas fa-compass"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/SukiEva"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="Mailto:dev.suki@outlook.com"><i class="fa fa-envelope"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Rss" href="/rss.xml"><i class="fas fa-rss"></i></a></div><div><hr><center><p id="hitokoto">取次花丛懒回顾，半缘修道半缘君。</p></center></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="https://picgo-1303870432.cos.ap-shanghai.myqcloud.com/blog/favicon.ico" alt="千反田" height="28"></a><p class="is-size-7"><span>&copy; 2022 SukiEva</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="GitHub" href="https://github.com/"><i class="fab fa-github"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="https://unpkg.com/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://unpkg.com/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://unpkg.com/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://unpkg.com/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://unpkg.com/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://unpkg.com/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><link rel="stylesheet" href="https://unpkg.com/katex@0.15.1/dist/katex.min.css"><script src="https://unpkg.com/katex@0.15.1/dist/katex.min.js" defer></script><script src="https://unpkg.com/katex@0.15.1/dist/contrib/auto-render.min.js" defer></script><script src="https://unpkg.com/katex@0.15.1/dist/contrib/mhchem.min.js" defer></script><script>window.addEventListener("load", function() {
            document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
                renderMathInElement(element);
            });
        });</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://unpkg.com/mathjax@2.7.9/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://unpkg.com/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><!--!--><script src="/js/main.js" defer></script><script src="/js/custom.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>