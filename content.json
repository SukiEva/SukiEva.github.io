{"meta":{"title":"åƒåç”°","subtitle":"Kanna","description":"One simple blog","author":"SukiEva","url":"http://blog.sukiu.top","root":"/"},"pages":[{"title":"","date":"2022-06-24T10:20:32.935Z","updated":"2022-06-12T09:23:00.000Z","comments":false,"path":"404.html","permalink":"http://blog.sukiu.top/404.html","excerpt":"","text":"404 å¾ˆæŠ±æ­‰ï¼Œæ‚¨è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨ å¯èƒ½æ˜¯è¾“å…¥åœ°å€æœ‰è¯¯æˆ–è¯¥åœ°å€å·²è¢«åˆ é™¤"},{"title":"","date":"2022-07-11T05:38:40.589Z","updated":"2022-07-11T05:38:40.589Z","comments":true,"path":"about/index.html","permalink":"http://blog.sukiu.top/about/index.html","excerpt":"","text":"#l_header { display: none; } ç®€ä»‹çŠ¶æ€é¡¹ç›®å£°æ˜é¦–å…ˆæ¬¢è¿æ‚¨çš„åˆ°æ¥ï¼ä¸ªäººæƒ…å†µï¼š å¤§å­¦æ¯•ä¸š æ”¶åˆ°åä¸ºoffer å‰å¾€åä¸ºå·¥ä½œ ç‰ˆæƒå£°æ˜åšå®¢å†…çš„æ‰€æœ‰åŸåˆ›å†…å®¹ï¼ˆåŒ…æ‹¬ä½†ä¸é™äºæ–‡ç« ã€å›¾åƒç­‰ï¼‰é™¤ç‰¹åˆ«å£°æ˜å¤–å‡é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®ï¼Œä»»ä½•äººéƒ½å¯ä»¥è‡ªç”±ä¼ æ’­ï¼Œä½†ä¸å¾—ç”¨äºå•†ç”¨ä¸”å¿…é¡»ç½²åå¹¶ä»¥ç›¸åŒæ–¹å¼åˆ†äº«ã€‚ éšç§åŸåˆ™æœ¬ç«™å†…ç›®å‰æ¶‰åŠåˆ°æµè§ˆè€…éšç§çš„åªæœ‰ä¸€ä¸ªåœ°æ–¹ï¼Œå°±æ˜¯ç•™è¨€åŒºï¼ˆæ–‡ç« è¯„è®ºï¼‰ã€‚å½“ä½ ç•™è¨€æ—¶ï¼Œä½ çš„ç”µå­é‚®ç®±ã€Cookiesä¿¡æ¯å’ŒIPv4&#x2F;IPv6åœ°å€éƒ½ä¼šè¢«è®°å½•ã€‚è¿™äº›ä¿¡æ¯ä»…ä¸ºäº†æ”¹è¿›æˆ‘ä»¬çš„ç½‘ç«™è´¨é‡å’Œå¯èƒ½çš„äº¤æµæ²Ÿé€šã€‚æˆ‘ä»¬ä¸ä¼šå°†è¿™äº›ä¿¡æ¯è¿›è¡Œå±•ç¤ºã€å‡ºç§Ÿæˆ–å‡ºå”®ç»™ä»»ä½•äººã€‚ä½†ä»¥ä¸‹æƒ…å†µé™¤å¤–ï¼š åªæœ‰é€éœ²æ‚¨çš„ä¸ªäººèµ„æ–™ï¼Œæ‰èƒ½æä¾›æ‚¨æ‰€è¦æ±‚çš„äº§å“å’ŒæœåŠ¡ï¼› æˆ‘ä»¬éœ€è¦å¬ä»æ³•åº­ä¼ ç¥¨ã€æ³•å¾‹å‘½ä»¤æˆ–éµå¾ªæ³•å¾‹ç¨‹åºï¼› æˆ‘ä»¬å‘ç°æ‚¨è¿åäº†æœ¬ç«™å·²å‘å¸ƒçš„æ¡æ¬¾æˆ–å£°æ˜ã€‚"},{"title":"æ ‡ç­¾","date":"2022-07-10T13:17:36.284Z","updated":"2022-07-10T13:17:36.284Z","comments":true,"path":"tags/index.html","permalink":"http://blog.sukiu.top/tags/index.html","excerpt":"","text":"#l_header { display: none; }"},{"title":"åˆ†ç±»","date":"2022-07-10T13:17:30.133Z","updated":"2022-07-10T13:17:30.133Z","comments":true,"path":"categories/index.html","permalink":"http://blog.sukiu.top/categories/index.html","excerpt":"","text":"#l_header { display: none; } .fa-folder-open{ color: #fc0; }"},{"title":"","date":"2022-06-24T10:20:32.684Z","updated":"2022-06-14T01:38:00.000Z","comments":true,"path":"friends/index.html","permalink":"http://blog.sukiu.top/friends/index.html","excerpt":"#l_header { display: none; } æœ‹å‹åœˆ ç”³è¯·å‹é“¾é¡»çŸ¥ åŸåˆ™ä¸Šåªå’ŒæŠ€æœ¯ç±»åšå®¢äº¤æ¢ï¼Œä½†ä¸åŒ…æ‹¬å«æœ‰å’Œè‰²æƒ…ã€æš´åŠ›ã€æ”¿æ²»æ•æ„Ÿçš„ç½‘ç«™ã€‚ä¸å’Œå‰½çªƒã€ä¾µæƒã€æ— è¯šä¿¡çš„ç½‘ç«™äº¤æ¢ï¼Œä¼˜å…ˆå’Œå…·æœ‰åŸåˆ›ä½œå“çš„ç½‘ç«™äº¤æ¢ã€‚ç”³è¯·è¯·æä¾›ï¼šç«™ç‚¹åç§°ã€ç«™ç‚¹é“¾æ¥ã€ç«™ç‚¹æè¿°ã€logoæˆ–å¤´åƒï¼ˆä¸è¦è®¾ç½®é˜²ç›—é“¾ï¼‰ã€‚æ’åä¸åˆ†å…ˆåï¼Œæ›´æ–°ä¿¡æ¯åè¯·ç•™è¨€å‘ŠçŸ¥ã€‚ä¼šå®šæœŸæ¸…ç†å¾ˆä¹…å¾ˆä¹…ä¸æ›´æ–°çš„ã€ä¸ç¬¦åˆè¦æ±‚çš„å‹é“¾ï¼Œä¸å†å¦è¡Œé€šçŸ¥ã€‚ æ·»åŠ æœ¬ç«™é“¾æ¥ ç½‘ç«™å›¾æ ‡ï¼šhttps://cdn.jsdelivr.net/gh/SukiEva/assets/blog/avatar.jpgç½‘ç«™åç§°ï¼šåƒåç”°ç½‘ç«™åœ°å€ï¼šhttps://blog.sukiu.top/ç½‘ç«™ç®€ä»‹ï¼šæˆ‘å¾ˆå¥½å¥‡~ è¯„è®ºåŒºå›å¤ æ”¶åˆ°è¯„è®ºåæœ¬ç«™æ·»åŠ å‹é“¾ğŸ‰","text":"#l_header { display: none; } æœ‹å‹åœˆ ç”³è¯·å‹é“¾é¡»çŸ¥ åŸåˆ™ä¸Šåªå’ŒæŠ€æœ¯ç±»åšå®¢äº¤æ¢ï¼Œä½†ä¸åŒ…æ‹¬å«æœ‰å’Œè‰²æƒ…ã€æš´åŠ›ã€æ”¿æ²»æ•æ„Ÿçš„ç½‘ç«™ã€‚ä¸å’Œå‰½çªƒã€ä¾µæƒã€æ— è¯šä¿¡çš„ç½‘ç«™äº¤æ¢ï¼Œä¼˜å…ˆå’Œå…·æœ‰åŸåˆ›ä½œå“çš„ç½‘ç«™äº¤æ¢ã€‚ç”³è¯·è¯·æä¾›ï¼šç«™ç‚¹åç§°ã€ç«™ç‚¹é“¾æ¥ã€ç«™ç‚¹æè¿°ã€logoæˆ–å¤´åƒï¼ˆä¸è¦è®¾ç½®é˜²ç›—é“¾ï¼‰ã€‚æ’åä¸åˆ†å…ˆåï¼Œæ›´æ–°ä¿¡æ¯åè¯·ç•™è¨€å‘ŠçŸ¥ã€‚ä¼šå®šæœŸæ¸…ç†å¾ˆä¹…å¾ˆä¹…ä¸æ›´æ–°çš„ã€ä¸ç¬¦åˆè¦æ±‚çš„å‹é“¾ï¼Œä¸å†å¦è¡Œé€šçŸ¥ã€‚ æ·»åŠ æœ¬ç«™é“¾æ¥ ç½‘ç«™å›¾æ ‡ï¼šhttps://cdn.jsdelivr.net/gh/SukiEva/assets/blog/avatar.jpgç½‘ç«™åç§°ï¼šåƒåç”°ç½‘ç«™åœ°å€ï¼šhttps://blog.sukiu.top/ç½‘ç«™ç®€ä»‹ï¼šæˆ‘å¾ˆå¥½å¥‡~ è¯„è®ºåŒºå›å¤ æ”¶åˆ°è¯„è®ºåæœ¬ç«™æ·»åŠ å‹é“¾ğŸ‰"}],"posts":[{"title":"Lombok","slug":"Lombok","date":"2022-10-16T08:49:00.000Z","updated":"2022-10-16T10:18:00.000Z","comments":true,"path":"Programming-Language/Java/Lombok/","link":"","permalink":"http://blog.sukiu.top/Programming-Language/Java/Lombok/","excerpt":"lombok é€šè¿‡æ³¨è§£æ¶ˆé™¤å®é™…å¼€å‘ä¸­çš„æ ·æ¿å¼ä»£ç ï¼šgetterã€setter æ–¹æ³•ï¼Œé‡å†™ toStringã€equals æ–¹æ³•ç­‰ã€‚","text":"lombok é€šè¿‡æ³¨è§£æ¶ˆé™¤å®é™…å¼€å‘ä¸­çš„æ ·æ¿å¼ä»£ç ï¼šgetterã€setter æ–¹æ³•ï¼Œé‡å†™ toStringã€equals æ–¹æ³•ç­‰ã€‚ æ³¨è§£@NonNull@NonNull @NonNull æ³¨è§£å¯ä»¥æ”¾åœ¨æ–¹æ³•ï¼Œå‚æ•°æˆ–å­—æ®µä¸Šã€‚ è¯¥æ³¨è§£ä¸æ˜¯æ–­è¨€éç©ºï¼Œè€Œæ˜¯åœ¨èµ‹å€¼è¯¥å­—æ®µæ—¶å¯¹å‚æ•°è¿›è¡Œåˆ¤ç©ºæ£€æŸ¥ï¼Œå¦‚æœå·²ç»æœ‰äº† if (xxx == null) åˆ™ä¸ä¼šæœ‰å…¶ä»–æ“ä½œã€‚ With Lombok 12345678910import lombok.NonNull;public class NonNullExample extends Something &#123; private String name; public NonNullExample(@NonNull Person person) &#123; super(&quot;Hello&quot;); this.name = person.getName(); &#125;&#125; Vanilla Java 12345678910111213import lombok.NonNull;public class NonNullExample extends Something &#123; private String name; public NonNullExample(@NonNull Person person) &#123; super(&quot;Hello&quot;); if (person == null) &#123; throw new NullPointerException(&quot;person is marked non-null but is null&quot;); &#125; this.name = person.getName(); &#125;&#125; @Cleanup@Cleanup è‡ªåŠ¨è°ƒç”¨ close() æ–¹æ³•ï¼Œå¦‚æœè¿˜éœ€è¦åšå¼‚å¸¸å¤„ç†ï¼Œæ˜æ˜¾ä¸å¦‚ try-with æ–¹ä¾¿ã€‚ With Lombok 12345678910111213141516import lombok.Cleanup;import java.io.*;public class CleanupExample &#123; public static void main(String[] args) throws IOException &#123; @Cleanup InputStream in = new FileInputStream(args[0]); @Cleanup OutputStream out = new FileOutputStream(args[1]); byte[] b = new byte[10000]; while (true) &#123; int r = in.read(b); if (r == -1) break; out.write(b, 0, r); &#125; &#125;&#125; Vanilla Java 1234567891011121314151617181920212223242526import java.io.*;public class CleanupExample &#123; public static void main(String[] args) throws IOException &#123; InputStream in = new FileInputStream(args[0]); try &#123; OutputStream out = new FileOutputStream(args[1]); try &#123; byte[] b = new byte[10000]; while (true) &#123; int r = in.read(b); if (r == -1) break; out.write(b, 0, r); &#125; &#125; finally &#123; if (out != null) &#123; out.close(); &#125; &#125; &#125; finally &#123; if (in != null) &#123; in.close(); &#125; &#125; &#125;&#125; @Getter&#x2F;@Setter@Getter and @Setter è‡ªåŠ¨ç”Ÿæˆå±æ€§çš„ get&#x2F;set æ–¹æ³•ï¼Œé»˜è®¤éƒ½æ˜¯ publicï¼Œå¯é€šè¿‡ AccessLevel è®¾ç½®å¯è§æ€§ã€‚ ä½œç”¨ç±»ä¸Šï¼Œç”Ÿæˆæ‰€æœ‰éé™æ€æˆå‘˜å˜é‡çš„ getter&#x2F;setter æ–¹æ³• ä½œç”¨äºæˆå‘˜å˜é‡ä¸Šï¼Œç”Ÿæˆè¯¥æˆå‘˜å˜é‡çš„ getter&#x2F;setter æ–¹æ³• Getter(lazy&#x3D;true) æ‡’åŠ è½½ With Lombok 1234567891011121314import lombok.AccessLevel;import lombok.Getter;import lombok.Setter;public class GetterSetterExample &#123; @Getter @Setter private int age = 10; @Setter(AccessLevel.PROTECTED) private String name; @Override public String toString() &#123; return String.format(&quot;%s (age: %d)&quot;, name, age); &#125;&#125; Vanilla Java 12345678910111213141516171819202122public class GetterSetterExample &#123; private int age = 10; private String name; @Override public String toString() &#123; return String.format(&quot;%s (age: %d)&quot;, name, age); &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125; protected void setName(String name) &#123; this.name = name; &#125;&#125; @ToString@ToString ä½œç”¨äºç±»ï¼Œè¦†ç›–é»˜è®¤çš„ toString() æ–¹æ³•ã€‚ é€šè¿‡ includeFieldNames å±æ€§é™å®šæ˜¾ç¤ºæŸäº›å­—æ®µ é€šè¿‡ exclude å±æ€§æ’é™¤æŸäº›å­—æ®µ callSuper æ˜¯å¦è¾“å‡ºè¶…ç±» With Lombok 123456789101112131415161718192021222324import lombok.ToString;@ToStringpublic class ToStringExample &#123; private static final int STATIC_VAR = 10; private String name; private Shape shape = new Square(5, 10); private String[] tags; @ToString.Exclude private int id; public String getName() &#123; return this.name; &#125; @ToString(callSuper=true, includeFieldNames=true) public static class Square extends Shape &#123; private final int width, height; public Square(int width, int height) &#123; this.width = width; this.height = height; &#125; &#125;&#125; Vanilla Java 12345678910111213141516171819202122232425262728293031import java.util.Arrays;public class ToStringExample &#123; private static final int STATIC_VAR = 10; private String name; private Shape shape = new Square(5, 10); private String[] tags; private int id; public String getName() &#123; return this.name; &#125; public static class Square extends Shape &#123; private final int width, height; public Square(int width, int height) &#123; this.width = width; this.height = height; &#125; @Override public String toString() &#123; return &quot;Square(super=&quot; + super.toString() + &quot;, width=&quot; + this.width + &quot;, height=&quot; + this.height + &quot;)&quot;; &#125; &#125; @Override public String toString() &#123; return &quot;ToStringExample(&quot; + this.getName() + &quot;, &quot; + this.shape + &quot;, &quot; + Arrays.deepToString(this.tags) + &quot;)&quot;; &#125;&#125; @EqualsAndHashCode@EqualsAndHashCode ä½œç”¨äºç±»ï¼Œè¦†ç›–é»˜è®¤çš„ equals å’Œ hashCodeã€‚ doNotUseGetters &#x3D; [true | false] (default: false) callSuper &#x3D; [call | skip | warn] (default: warn) flagUsage &#x3D; [warning | error] (default: not set) With Lombok 12345678910111213141516171819202122232425import lombok.EqualsAndHashCode;@EqualsAndHashCodepublic class EqualsAndHashCodeExample &#123; private transient int transientVar = 10; private String name; private double score; @EqualsAndHashCode.Exclude private Shape shape = new Square(5, 10); private String[] tags; @EqualsAndHashCode.Exclude private int id; public String getName() &#123; return this.name; &#125; @EqualsAndHashCode(callSuper=true) public static class Square extends Shape &#123; private final int width, height; public Square(int width, int height) &#123; this.width = width; this.height = height; &#125; &#125;&#125; Vanilla Java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576import java.util.Arrays;public class EqualsAndHashCodeExample &#123; private transient int transientVar = 10; private String name; private double score; private Shape shape = new Square(5, 10); private String[] tags; private int id; public String getName() &#123; return this.name; &#125; @Override public boolean equals(Object o) &#123; if (o == this) return true; if (!(o instanceof EqualsAndHashCodeExample)) return false; EqualsAndHashCodeExample other = (EqualsAndHashCodeExample) o; if (!other.canEqual((Object)this)) return false; if (this.getName() == null ? other.getName() != null : !this.getName().equals(other.getName())) return false; if (Double.compare(this.score, other.score) != 0) return false; if (!Arrays.deepEquals(this.tags, other.tags)) return false; return true; &#125; @Override public int hashCode() &#123; final int PRIME = 59; int result = 1; final long temp1 = Double.doubleToLongBits(this.score); result = (result*PRIME) + (this.name == null ? 43 : this.name.hashCode()); result = (result*PRIME) + (int)(temp1 ^ (temp1 &gt;&gt;&gt; 32)); result = (result*PRIME) + Arrays.deepHashCode(this.tags); return result; &#125; protected boolean canEqual(Object other) &#123; return other instanceof EqualsAndHashCodeExample; &#125; public static class Square extends Shape &#123; private final int width, height; public Square(int width, int height) &#123; this.width = width; this.height = height; &#125; @Override public boolean equals(Object o) &#123; if (o == this) return true; if (!(o instanceof Square)) return false; Square other = (Square) o; if (!other.canEqual((Object)this)) return false; if (!super.equals(o)) return false; if (this.width != other.width) return false; if (this.height != other.height) return false; return true; &#125; @Override public int hashCode() &#123; final int PRIME = 59; int result = 1; result = (result*PRIME) + super.hashCode(); result = (result*PRIME) + this.width; result = (result*PRIME) + this.height; return result; &#125; protected boolean canEqual(Object other) &#123; return other instanceof Square; &#125; &#125;&#125; @NoArgsConstructor, @RequiredArgsConstructor And @AllArgsConstructor@NoArgsConstructor, @RequiredArgsConstructor, @AllArgsConstructor ç”Ÿæˆå„ç§æ„é€ å‡½æ•°ï¼Œçœ‹åå­—çŸ¥ç”¨é€”ï¼Œå…¶ä¸­ @RequiredArgsConstructor é€šè¿‡ @NonNull è·å–éœ€è¦æ„é€ çš„å±æ€§ã€‚ With Lombok 12345678910111213141516import lombok.AccessLevel;import lombok.RequiredArgsConstructor;import lombok.AllArgsConstructor;import lombok.NonNull;@RequiredArgsConstructor(staticName = &quot;of&quot;)@AllArgsConstructor(access = AccessLevel.PROTECTED)public class ConstructorExample&lt;T&gt; &#123; private int x, y; @NonNull private T description; @NoArgsConstructor public static class NoArgsExample &#123; @NonNull private String field; &#125;&#125; Vanilla Java 12345678910111213141516171819202122232425262728public class ConstructorExample&lt;T&gt; &#123; private int x, y; @NonNull private T description; private ConstructorExample(T description) &#123; if (description == null) throw new NullPointerException(&quot;description&quot;); this.description = description; &#125; public static &lt;T&gt; ConstructorExample&lt;T&gt; of(T description) &#123; return new ConstructorExample&lt;T&gt;(description); &#125; @java.beans.ConstructorProperties(&#123;&quot;x&quot;, &quot;y&quot;, &quot;description&quot;&#125;) protected ConstructorExample(int x, int y, T description) &#123; if (description == null) throw new NullPointerException(&quot;description&quot;); this.x = x; this.y = y; this.description = description; &#125; public static class NoArgsExample &#123; @NonNull private String field; public NoArgsExample() &#123; &#125; &#125;&#125; @Data@Data ä½œç”¨äºç±»ä¸Šï¼Œæ˜¯ä»¥ä¸‹æ³¨è§£çš„é›†åˆï¼š @ToString @EqualsAndHashCode @Getter @Setter @RequiredArgsConstructor @Value@Value ç”¨äºä¸€ä¸ªä¸å¯å˜çš„å¯¹è±¡ç±»ï¼ŒåŒºåˆ«äº @Data åœ¨äºæ²¡æœ‰ @Setterï¼Œå±æ€§é»˜è®¤ finalï¼Œæ„é€ å‡½æ•°æ˜¯ @AllArgsConstructorã€‚ @Builder@Builder ä½œç”¨äºç±»ä¸Šï¼Œå°†ç±»è½¬å˜ä¸ºå»ºé€ è€…æ¨¡å¼ã€‚ With Lombok 1234567891011import lombok.Builder;import lombok.Singular;import java.util.Set;@Builderpublic class BuilderExample &#123; @Builder.Default private long created = System.currentTimeMillis(); private String name; private int age; @Singular private Set&lt;String&gt; occupations;&#125; Vanilla Java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586import java.util.Set;public class BuilderExample &#123; private long created; private String name; private int age; private Set&lt;String&gt; occupations; BuilderExample(String name, int age, Set&lt;String&gt; occupations) &#123; this.name = name; this.age = age; this.occupations = occupations; &#125; private static long $default$created() &#123; return System.currentTimeMillis(); &#125; public static BuilderExampleBuilder builder() &#123; return new BuilderExampleBuilder(); &#125; public static class BuilderExampleBuilder &#123; private long created; private boolean created$set; private String name; private int age; private java.util.ArrayList&lt;String&gt; occupations; BuilderExampleBuilder() &#123; &#125; public BuilderExampleBuilder created(long created) &#123; this.created = created; this.created$set = true; return this; &#125; public BuilderExampleBuilder name(String name) &#123; this.name = name; return this; &#125; public BuilderExampleBuilder age(int age) &#123; this.age = age; return this; &#125; public BuilderExampleBuilder occupation(String occupation) &#123; if (this.occupations == null) &#123; this.occupations = new java.util.ArrayList&lt;String&gt;(); &#125; this.occupations.add(occupation); return this; &#125; public BuilderExampleBuilder occupations(Collection&lt;? extends String&gt; occupations) &#123; if (this.occupations == null) &#123; this.occupations = new java.util.ArrayList&lt;String&gt;(); &#125; this.occupations.addAll(occupations); return this; &#125; public BuilderExampleBuilder clearOccupations() &#123; if (this.occupations != null) &#123; this.occupations.clear(); &#125; return this; &#125; public BuilderExample build() &#123; // complicated switch statement to produce a compact properly sized immutable set omitted. Set&lt;String&gt; occupations = ...; return new BuilderExample(created$set ? created : BuilderExample.$default$created(), name, age, occupations); &#125; @java.lang.Override public String toString() &#123; return &quot;BuilderExample.BuilderExampleBuilder(created = &quot; + this.created + &quot;, name = &quot; + this.name + &quot;, age = &quot; + this.age + &quot;, occupations = &quot; + this.occupations + &quot;)&quot;; &#125; &#125;&#125; @SneakyThrows@SneakyThrows å¯ä»¥å¯¹å—æ£€å¼‚å¸¸è¿›è¡Œæ•æ‰å¹¶æŠ›å‡ºï¼Œæ ¹æ®å®˜æ–¹ä»‹ç»å¤§æ¦‚æŠ›å‡ºä¹‹å‰æ²¡æ£€æŸ¥çš„å¼‚å¸¸ã€‚ To boldly throw checked exceptions where no one has thrown them before! With Lombok 12345678910111213import lombok.SneakyThrows;public class SneakyThrowsExample implements Runnable &#123; @SneakyThrows(UnsupportedEncodingException.class) public String utf8ToString(byte[] bytes) &#123; return new String(bytes, &quot;UTF-8&quot;); &#125; @SneakyThrows public void run() &#123; throw new Throwable(); &#125;&#125; Vanilla Java 12345678910111213141516171819import lombok.Lombok;public class SneakyThrowsExample implements Runnable &#123; public String utf8ToString(byte[] bytes) &#123; try &#123; return new String(bytes, &quot;UTF-8&quot;); &#125; catch (UnsupportedEncodingException e) &#123; throw Lombok.sneakyThrow(e); &#125; &#125; public void run() &#123; try &#123; throw new Throwable(); &#125; catch (Throwable t) &#123; throw Lombok.sneakyThrow(t); &#125; &#125;&#125; @Synchronized@Synchronized ä½œç”¨äºæ–¹æ³•çº§åˆ«ï¼Œå¯ä»¥æ›¿æ¢ synchronize å…³é”®å­—æˆ– lock é”ï¼Œç”¨å¤„ä¸å¤§ã€‚ With Lombok 123456789101112131415161718192021 import lombok.Synchronized;public class SynchronizedExample &#123; private final Object readLock = new Object(); @Synchronized public static void hello() &#123; System.out.println(&quot;world&quot;); &#125; @Synchronized public int answerToLife() &#123; return 42; &#125; @Synchronized(&quot;readLock&quot;) public void foo() &#123; System.out.println(&quot;bar&quot;); &#125;&#125; Vanilla Java 1234567891011121314151617181920212223 public class SynchronizedExample &#123; private static final Object $LOCK = new Object[0]; private final Object $lock = new Object[0]; private final Object readLock = new Object(); public static void hello() &#123; synchronized($LOCK) &#123; System.out.println(&quot;world&quot;); &#125; &#125; public int answerToLife() &#123; synchronized($lock) &#123; return 42; &#125; &#125; public void foo() &#123; synchronized(readLock) &#123; System.out.println(&quot;bar&quot;); &#125; &#125;&#125; @With@With å…‹éš†å¯¹è±¡ï¼Œä¿®æ”¹ä¸€ä¸ªå€¼è€Œä¿ç•™å…¶ä»–å€¼ä¸å˜ã€‚ With Lombok 12345678910111213 import lombok.AccessLevel;import lombok.NonNull;import lombok.With;public class WithExample &#123; @With(AccessLevel.PROTECTED) @NonNull private final String name; @With private final int age; public WithExample(@NonNull String name, int age) &#123; this.name = name; this.age = age; &#125;&#125; Vanilla Java 123456789101112131415161718192021 import lombok.NonNull;public class WithExample &#123; private @NonNull final String name; private final int age; public WithExample(String name, int age) &#123; if (name == null) throw new NullPointerException(); this.name = name; this.age = age; &#125; protected WithExample withName(@NonNull String name) &#123; if (name == null) throw new java.lang.NullPointerException(&quot;name&quot;); return this.name == name ? this : new WithExample(name, age); &#125; public WithExample withAge(int age) &#123; return this.age == age ? this : new WithExample(name, age); &#125;&#125; @Log@Log (and friends) ä½œç”¨äºç±»ä¸Šï¼Œç”Ÿæˆæ—¥å¿—å˜é‡ã€‚ é’ˆå¯¹ä¸åŒçš„æ—¥å¿—å®ç°äº§å“ï¼Œæœ‰ä¸åŒçš„æ³¨è§£ã€‚ 123@Log4j//=private static final org.apache.log4j.Logger log = org.apache.log4j.Logger.getLogger(LogExample.class); 123@Slf4j//=private static final org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(LogExample.class); SLF4J (Simple logging Facade for Java) ä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„æ—¥å¿—å®ç°ï¼Œè€Œæ˜¯ä¸€ä¸ªæŠ½è±¡å±‚ï¼ˆ abstraction layerï¼‰ï¼Œå®ƒå…è®¸ä½ åœ¨åå°ä½¿ç”¨ä»»æ„ä¸€ä¸ªæ—¥å¿—ç±»åº“ã€‚ è¯­æ³•ç³–Valval ç”¨åœ¨å±€éƒ¨å˜é‡å‰é¢ï¼Œå£°æ˜ä¸º final å¸¸é‡ã€‚ Varvar ç”¨åœ¨å±€éƒ¨å˜é‡å‰é¢ï¼Œå£°æ˜å˜é‡ã€‚ å®éªŒæ€§æ›´å¤šå¼€å‘ä¸­çš„åŠŸèƒ½è¯¦è§ï¼š Experimental","categories":[{"name":"Programming Language","slug":"Programming-Language","permalink":"http://blog.sukiu.top/categories/Programming-Language/"},{"name":"Java","slug":"Programming-Language/Java","permalink":"http://blog.sukiu.top/categories/Programming-Language/Java/"}],"tags":[{"name":"Annotation","slug":"Annotation","permalink":"http://blog.sukiu.top/tags/Annotation/"}]},{"title":"æ¶ˆæ¯é˜Ÿåˆ—","slug":"Message-Queue","date":"2022-10-15T13:27:00.000Z","updated":"2022-10-15T14:04:00.000Z","comments":true,"path":"Framework/Message-Queue/Message-Queue/","link":"","permalink":"http://blog.sukiu.top/Framework/Message-Queue/Message-Queue/","excerpt":"åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessage queueï¼‰æ˜¯ä¸€ç§è¿›ç¨‹é—´é€šä¿¡æˆ–åŒä¸€è¿›ç¨‹çš„ä¸åŒçº¿ç¨‹é—´çš„é€šä¿¡æ–¹å¼ã€‚ æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªå­˜æ”¾æ¶ˆæ¯çš„å®¹å™¨ï¼Œæ˜¯ä¸€ç§å¼‚æ­¥çš„é€šä¿¡æ–¹å¼ã€‚","text":"åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessage queueï¼‰æ˜¯ä¸€ç§è¿›ç¨‹é—´é€šä¿¡æˆ–åŒä¸€è¿›ç¨‹çš„ä¸åŒçº¿ç¨‹é—´çš„é€šä¿¡æ–¹å¼ã€‚ æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªå­˜æ”¾æ¶ˆæ¯çš„å®¹å™¨ï¼Œæ˜¯ä¸€ç§å¼‚æ­¥çš„é€šä¿¡æ–¹å¼ã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ— æ¯”è¾ƒæ ¸å¿ƒçš„æœ‰ 3 ä¸ªï¼šå¼‚æ­¥ã€å‰Šå³°ã€è§£è€¦ã€‚ å¼‚æ­¥é€šè¿‡å¼‚æ­¥å¤„ç†ï¼Œèƒ½å¤Ÿæé«˜ç³»ç»Ÿæ€§èƒ½ï¼ˆå‡å°‘å“åº”æ‰€éœ€æ—¶é—´ï¼‰ã€‚ ä¸€èˆ¬äº’è”ç½‘ç±»çš„ä¼ä¸šï¼Œå¯¹äºç”¨æˆ·ç›´æ¥çš„æ“ä½œï¼Œä¸€èˆ¬è¦æ±‚æ˜¯æ¯ä¸ªè¯·æ±‚éƒ½å¿…é¡»åœ¨ 200 ms ä»¥å†…å®Œæˆï¼Œå¯¹ç”¨æˆ·å‡ ä¹æ˜¯æ— æ„ŸçŸ¥çš„ã€‚ å‰Šå³°&#x2F;é™æµå…ˆå°†çŸ­æ—¶é—´é«˜å¹¶å‘äº§ç”Ÿçš„äº‹åŠ¡æ¶ˆæ¯å­˜å‚¨åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç„¶ååç«¯æœåŠ¡å†æ…¢æ…¢æ ¹æ®è‡ªå·±çš„èƒ½åŠ›å»æ¶ˆè´¹è¿™äº›æ¶ˆæ¯ï¼Œè¿™æ ·å°±é¿å…ç›´æ¥æŠŠåç«¯æœåŠ¡æ‰“å®æ‰ã€‚ ç”µå­å•†åŠ¡ä¸€äº›ç§’æ€ã€ä¿ƒé”€æ´»åŠ¨ä¸­ï¼Œåˆç†ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥æœ‰æ•ˆæŠµå¾¡ä¿ƒé”€æ´»åŠ¨åˆšå¼€å§‹å¤§é‡è®¢å•æ¶Œå…¥å¯¹ç³»ç»Ÿçš„å†²å‡»ã€‚ è§£è€¦æ¶ˆæ¯é˜Ÿåˆ—ä½¿ç”¨å‘å¸ƒ - è®¢é˜…æ¨¡å¼å·¥ä½œï¼Œæ¶ˆæ¯å‘é€è€…ï¼ˆç”Ÿäº§è€…ï¼‰å‘å¸ƒæ¶ˆæ¯ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªæ¶ˆæ¯æ¥å—è€…ï¼ˆæ¶ˆè´¹è€…ï¼‰è®¢é˜…æ¶ˆæ¯ã€‚ å¯¹æ–°å¢ä¸šåŠ¡ï¼Œåªè¦å¯¹è¯¥ç±»æ¶ˆæ¯æ„Ÿå…´è¶£ï¼Œå³å¯è®¢é˜…è¯¥æ¶ˆæ¯ï¼Œå¯¹åŸæœ‰ç³»ç»Ÿå’Œä¸šåŠ¡æ²¡æœ‰ä»»ä½•å½±å“ï¼Œä»è€Œå®ç°ç½‘ç«™ä¸šåŠ¡çš„å¯æ‰©å±•æ€§è®¾è®¡ã€‚ æ¶ˆæ¯é˜Ÿåˆ—çš„ç¼ºç‚¹ ç³»ç»Ÿå¯ç”¨æ€§é™ä½ï¼š éœ€è¦è€ƒè™‘æ¶ˆæ¯ä¸¢å¤±æˆ–è€… MQ æŒ‚æ‰ç­‰æƒ…å†µã€‚ ç³»ç»Ÿå¤æ‚æ€§æé«˜ï¼š éœ€è¦ä¿è¯æ¶ˆæ¯æ²¡æœ‰è¢«é‡å¤æ¶ˆè´¹ã€å¤„ç†æ¶ˆæ¯ä¸¢å¤±çš„æƒ…å†µã€ä¿è¯æ¶ˆæ¯ä¼ é€’çš„é¡ºåºæ€§ç­‰é—®é¢˜ã€‚ ä¸€è‡´æ€§é—®é¢˜ï¼š ä¸‡ä¸€æ¶ˆæ¯çš„çœŸæ­£æ¶ˆè´¹è€…å¹¶æ²¡æœ‰æ­£ç¡®æ¶ˆè´¹æ¶ˆæ¯ï¼Œå°±ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚ å¸¸è§çš„æ¶ˆæ¯é˜Ÿåˆ— ç‰¹æ€§ ActiveMQ RabbitMQ RocketMQ Kafka å•æœºååé‡ ä¸‡çº§ï¼Œæ¯” RocketMQã€Kafka ä½ä¸€ä¸ªæ•°é‡çº§ åŒ ActiveMQ 10 ä¸‡çº§ï¼Œæ”¯æ’‘é«˜åå 10 ä¸‡çº§ï¼Œé«˜ååï¼Œä¸€èˆ¬é…åˆå¤§æ•°æ®ç±»çš„ç³»ç»Ÿæ¥è¿›è¡Œå®æ—¶æ•°æ®è®¡ç®—ã€æ—¥å¿—é‡‡é›†ç­‰åœºæ™¯ topic æ•°é‡å¯¹ååé‡çš„å½±å“ topic å¯ä»¥è¾¾åˆ°å‡ ç™¾/å‡ åƒçš„çº§åˆ«ï¼Œååé‡ä¼šæœ‰è¾ƒå°å¹…åº¦çš„ä¸‹é™ï¼Œè¿™æ˜¯ RocketMQ çš„ä¸€å¤§ä¼˜åŠ¿ï¼Œåœ¨åŒç­‰æœºå™¨ä¸‹ï¼Œå¯ä»¥æ”¯æ’‘å¤§é‡çš„ topic topic ä»å‡ ååˆ°å‡ ç™¾ä¸ªæ—¶å€™ï¼Œååé‡ä¼šå¤§å¹…åº¦ä¸‹é™ï¼Œåœ¨åŒç­‰æœºå™¨ä¸‹ï¼ŒKafka å°½é‡ä¿è¯ topic æ•°é‡ä¸è¦è¿‡å¤šï¼Œå¦‚æœè¦æ”¯æ’‘å¤§è§„æ¨¡çš„ topicï¼Œéœ€è¦å¢åŠ æ›´å¤šçš„æœºå™¨èµ„æº æ—¶æ•ˆæ€§ ms çº§ å¾®ç§’çº§ï¼Œè¿™æ˜¯ RabbitMQ çš„ä¸€å¤§ç‰¹ç‚¹ï¼Œå»¶è¿Ÿæœ€ä½ ms çº§ å»¶è¿Ÿåœ¨ ms çº§ä»¥å†… å¯ç”¨æ€§ é«˜ï¼ŒåŸºäºä¸»ä»æ¶æ„å®ç°é«˜å¯ç”¨ åŒ ActiveMQ éå¸¸é«˜ï¼Œåˆ†å¸ƒå¼æ¶æ„ éå¸¸é«˜ï¼Œåˆ†å¸ƒå¼ï¼Œä¸€ä¸ªæ•°æ®å¤šä¸ªå‰¯æœ¬ï¼Œå°‘æ•°æœºå™¨å®•æœºï¼Œä¸ä¼šä¸¢å¤±æ•°æ®ï¼Œä¸ä¼šå¯¼è‡´ä¸å¯ç”¨ æ¶ˆæ¯å¯é æ€§ æœ‰è¾ƒä½çš„æ¦‚ç‡ä¸¢å¤±æ•°æ® åŸºæœ¬ä¸ä¸¢ ç»è¿‡å‚æ•°ä¼˜åŒ–é…ç½®ï¼Œå¯ä»¥åšåˆ° 0 ä¸¢å¤± åŒ RocketMQ åŠŸèƒ½æ”¯æŒ MQ é¢†åŸŸçš„åŠŸèƒ½æå…¶å®Œå¤‡ åŸºäº erlang å¼€å‘ï¼Œå¹¶å‘èƒ½åŠ›å¾ˆå¼ºï¼Œæ€§èƒ½æå¥½ï¼Œå»¶æ—¶å¾ˆä½ MQ åŠŸèƒ½è¾ƒä¸ºå®Œå–„ï¼Œè¿˜æ˜¯åˆ†å¸ƒå¼çš„ï¼Œæ‰©å±•æ€§å¥½ åŠŸèƒ½è¾ƒä¸ºç®€å•ï¼Œä¸»è¦æ”¯æŒç®€å•çš„ MQ åŠŸèƒ½ï¼Œåœ¨å¤§æ•°æ®é¢†åŸŸçš„å®æ—¶è®¡ç®—ä»¥åŠæ—¥å¿—é‡‡é›†è¢«å¤§è§„æ¨¡ä½¿ç”¨ ä¸­å°å‹å…¬å¸ï¼ŒæŠ€æœ¯å®åŠ›è¾ƒä¸ºä¸€èˆ¬ï¼ŒæŠ€æœ¯æŒ‘æˆ˜ä¸æ˜¯ç‰¹åˆ«é«˜ï¼Œç”¨ RabbitMQ æ˜¯ä¸é”™çš„é€‰æ‹©ï¼› å¤§å‹å…¬å¸ï¼ŒåŸºç¡€æ¶æ„ç ”å‘å®åŠ›è¾ƒå¼ºï¼Œç”¨ RocketMQ æ˜¯å¾ˆå¥½çš„é€‰æ‹©ï¼› å¦‚æœæ˜¯å¤§æ•°æ®é¢†åŸŸçš„å®æ—¶è®¡ç®—ã€æ—¥å¿—é‡‡é›†ç­‰åœºæ™¯ï¼Œç”¨ Kafka æ˜¯ä¸šå†…æ ‡å‡†çš„ã€‚","categories":[{"name":"Framework","slug":"Framework","permalink":"http://blog.sukiu.top/categories/Framework/"},{"name":"Message Queue","slug":"Framework/Message-Queue","permalink":"http://blog.sukiu.top/categories/Framework/Message-Queue/"}],"tags":[{"name":"Message Queue","slug":"Message-Queue","permalink":"http://blog.sukiu.top/tags/Message-Queue/"}]},{"title":"Flutter æ•°æ®/çŠ¶æ€å…±äº«","slug":"Flutter-Share-State","date":"2022-07-22T00:28:00.000Z","updated":"2022-07-22T01:43:00.000Z","comments":true,"path":"Framework/Flutter/Flutter-Share-State/","link":"","permalink":"http://blog.sukiu.top/Framework/Flutter/Flutter-Share-State/","excerpt":"å…±äº«åŸåˆ™ï¼š å¦‚æœçŠ¶æ€æ˜¯ç»„ä»¶ç§æœ‰çš„ï¼Œåˆ™åº”è¯¥ç”±ç»„ä»¶è‡ªå·±ç®¡ç†ï¼› å¦‚æœçŠ¶æ€è¦è·¨ç»„ä»¶å…±äº«ï¼Œåˆ™è¯¥çŠ¶æ€åº”è¯¥ç”±å„ä¸ªç»„ä»¶å…±åŒçš„çˆ¶å…ƒç´ æ¥ç®¡ç†ã€‚","text":"å…±äº«åŸåˆ™ï¼š å¦‚æœçŠ¶æ€æ˜¯ç»„ä»¶ç§æœ‰çš„ï¼Œåˆ™åº”è¯¥ç”±ç»„ä»¶è‡ªå·±ç®¡ç†ï¼› å¦‚æœçŠ¶æ€è¦è·¨ç»„ä»¶å…±äº«ï¼Œåˆ™è¯¥çŠ¶æ€åº”è¯¥ç”±å„ä¸ªç»„ä»¶å…±åŒçš„çˆ¶å…ƒç´ æ¥ç®¡ç†ã€‚ InheritedWidgetInheritedWidget æ˜¯ Flutter ä¸­éå¸¸é‡è¦çš„ä¸€ä¸ªåŠŸèƒ½å‹ç»„ä»¶ï¼Œå®ƒæä¾›äº†ä¸€ç§åœ¨ widget æ ‘ä¸­ä»ä¸Šåˆ°ä¸‹å…±äº«æ•°æ®çš„æ–¹å¼ã€‚ InheritedWidget çš„åœ¨ widget æ ‘ä¸­æ•°æ®ä¼ é€’æ–¹å‘æ˜¯ä»ä¸Šåˆ°ä¸‹çš„ï¼Œè¿™å’Œé€šçŸ¥ Notificationï¼ˆå°†åœ¨ä¸‹ä¸€ç« ä¸­ä»‹ç»ï¼‰çš„ä¼ é€’æ–¹å‘æ­£å¥½ç›¸åã€‚ ä¸‹é¢æ˜¯â€œè®¡æ•°å™¨â€ç¤ºä¾‹åº”ç”¨ç¨‹åºçš„ InheritedWidget ç‰ˆæœ¬ï¼š See the Pen InheritedWidget by SukiEva (@sukievaa) on CodePen. è¿™æ ·ï¼Œå­ç»„ä»¶å¯ä»¥è°ƒç”¨çˆ¶ç»„ä»¶é‡Œçš„ data å€¼è¿›è¡Œæ“ä½œã€‚ didChangeDependencies()ä¸€èˆ¬æ¥è¯´ï¼Œå­ widget å¾ˆå°‘ä¼šé‡å†™æ­¤æ–¹æ³•ï¼Œå› ä¸ºåœ¨ä¾èµ–æ”¹å˜å Flutter æ¡†æ¶ä¹Ÿéƒ½ä¼šè°ƒç”¨ build() æ–¹æ³•é‡æ–°æ„å»ºç»„ä»¶æ ‘ã€‚ ä½†æ˜¯ï¼Œå¦‚æœéœ€è¦åœ¨ä¾èµ–æ”¹å˜åæ‰§è¡Œä¸€äº›æ˜‚è´µçš„æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ï¼Œè¿™æ—¶æœ€å¥½çš„æ–¹å¼å°±æ˜¯åœ¨æ­¤æ–¹æ³•ä¸­æ‰§è¡Œï¼Œè¿™æ ·å¯ä»¥é¿å…æ¯æ¬¡ build() éƒ½æ‰§è¡Œè¿™äº›æ˜‚è´µæ“ä½œã€‚ å¦‚æœåªæƒ³åœ¨ __TestWidgetState ä¸­å¼•ç”¨ ShareDataWidget æ•°æ®ï¼Œä½†å´ä¸å¸Œæœ›åœ¨ ShareDataWidget å‘ç”Ÿå˜åŒ–æ—¶è°ƒç”¨ __TestWidgetState çš„ didChangeDependencies() æ–¹æ³•ï¼Œå°† ShareDataWidget.of() ä¿®æ”¹ä¸€ä¸‹ï¼š 1234static ShareDataWidget of(BuildContext context) &#123; //return context.dependOnInheritedWidgetOfExactType&lt;ShareDataWidget&gt;(); return context.getElementForInheritedWidgetOfExactType&lt;ShareDataWidget&gt;().widget;&#125; dependOnInheritedWidgetOfExactType() æ¯” getElementForInheritedWidgetOfExactType() å¤šè°ƒäº† dependOnInheritedElement æ–¹æ³•ï¼ŒdependOnInheritedElement æºç å¦‚ä¸‹ï¼š 12345678@overrideInheritedWidget dependOnInheritedElement(InheritedElement ancestor, &#123; Object aspect &#125;) &#123; assert(ancestor != null); _dependencies ??= HashSet&lt;InheritedElement&gt;(); _dependencies.add(ancestor); ancestor.updateDependencies(this, aspect); return ancestor.widget;&#125; è°ƒç”¨ dependOnInheritedWidgetOfExactType() å’Œ getElementForInheritedWidgetOfExactType() çš„åŒºåˆ«ï¼šå‰è€…ä¼šæ³¨å†Œä¾èµ–å…³ç³»ï¼Œè€Œåè€…ä¸ä¼š Providerå¯¹ InheritedWidget ç»„ä»¶çš„ä¸Šå±‚å°è£…ï¼Œä½¿å…¶æ›´æ˜“ç”¨ï¼Œæ›´æ˜“å¤ç”¨ã€‚ ä½¿ç”¨ provider è€Œéæ‰‹åŠ¨ä¹¦å†™ InheritedWidgetï¼Œæœ‰ä»¥ä¸‹çš„ä¼˜åŠ¿: ç®€åŒ–çš„èµ„æºåˆ†é…ä¸å¤„ç½® æ‡’åŠ è½½ åˆ›å»ºæ–°ç±»æ—¶å‡å°‘å¤§é‡çš„æ¨¡æ¿ä»£ç  æ”¯æŒ DevTools æ›´é€šç”¨çš„è°ƒç”¨ InheritedWidget çš„æ–¹å¼ï¼ˆå‚è€ƒ Provider.of&#x2F;Consumer&#x2F;Selectorï¼‰ æå‡ç±»çš„å¯æ‰©å±•æ€§ï¼Œæ•´ä½“çš„ç›‘å¬æ¶æ„æ—¶é—´å¤æ‚åº¦ä»¥æŒ‡æ•°çº§å¢é•¿ï¼ˆå¦‚ ChangeNotifierï¼Œ å…¶å¤æ‚åº¦ä¸º O(N)ï¼‰ æ›´å¤š provider ç›¸å…³å†…å®¹ï¼Œè¯·å‚è€ƒ æ–‡æ¡£ã€‚ Flutter Provider ä½¿ç”¨https://www.jianshu.com/p/db5a42074cdd","categories":[{"name":"Framework","slug":"Framework","permalink":"http://blog.sukiu.top/categories/Framework/"},{"name":"Flutter","slug":"Framework/Flutter","permalink":"http://blog.sukiu.top/categories/Framework/Flutter/"}],"tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://blog.sukiu.top/tags/Flutter/"}]},{"title":"Spring Bootï¼ˆKotlinï¼‰ä½¿ç”¨Redisçš„è¸©å‘è®°å½•","slug":"Redis-Usage-With-Kotlin","date":"2022-07-17T12:50:00.000Z","updated":"2022-07-17T14:15:00.000Z","comments":true,"path":"Projects/Problems/Redis-Usage-With-Kotlin/","link":"","permalink":"http://blog.sukiu.top/Projects/Problems/Redis-Usage-With-Kotlin/","excerpt":"è™½ç„¶ç†è®ºä¸Š Koltin â€œNTRâ€ äº† Java çš„ä¸€åˆ‡ï¼Œä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­æ€»èƒ½ç¢°åˆ°è®¸å¤šå¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜ã€‚","text":"è™½ç„¶ç†è®ºä¸Š Koltin â€œNTRâ€ äº† Java çš„ä¸€åˆ‡ï¼Œä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­æ€»èƒ½ç¢°åˆ°è®¸å¤šå¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜ã€‚ æ·»åŠ ä¾èµ–é¦–å…ˆæ˜¯ Redis çš„ä¾èµ–ï¼š 123dependencies &#123; implementation(&quot;org.springframework.boot:spring-boot-starter-data-redis&quot;)&#125; è¿™ä¸ªåŒ…ä¼šé€šè¿‡åå°„æ¥åŠ è½½ä¸€äº› classï¼Œè¿™å°±è¦æ±‚ class å¿…éœ€æœ‰ä¸€ä¸ªæ— å‚çš„æ„é€ å‡½æ•°ï¼Œè€Œ Kotlin çš„ data class é»˜è®¤æ²¡æœ‰æ— å‚æ„é€ å‡½æ•°ï¼Œå¹¶ä¸” data class é»˜è®¤ä¸º final ç±»å‹ï¼Œä¸å¯ä»¥è¢«ç»§æ‰¿ï¼Œä¼šå‡ºç°ä¸‹åˆ—é”™è¯¯ï¼š org.springframework.data.redis.serializer.SerializationException: Could not read JSON: Cannot construct instance of â€¦ Kotlin å®˜æ–¹ä¸ºæˆ‘ä»¬æä¾›äº†ä¸¤ä¸ªæ’ä»¶ï¼š æ— å‚ç¼–è¯‘å™¨æ’ä»¶ NoArg æ’ä»¶çš„ä½œç”¨æ˜¯ï¼šä¸ºæŒ‡å®šçš„ç±»åœ¨ç¼–è¯‘æ—¶æ·»åŠ ä¸€ä¸ªæ— å‚çš„æ„é€ ã€‚ å…¨å¼€æ”¾ç¼–è¯‘å™¨æ’ä»¶ AllOpen çš„ä½œç”¨æ˜¯ï¼šä½¿ç”¨æŒ‡å®šçš„æ³¨è§£æ ‡æ³¨ç±»è€Œå…¶æˆå‘˜æ— éœ€æ˜¾å¼ä½¿ç”¨ open å…³é”®å­—æ‰“å¼€ã€‚ Spring Boot åªéœ€è¦ NoArg æ’ä»¶ï¼Œå› ä¸ºæ·»åŠ çš„ kotlin-spring æ’ä»¶åŒ…å« AllOpen äº†ï¼Œä¼šè‡ªåŠ¨ç»™ Spring æ³¨è§£ç±» openï¼Œä¸‹é¢çš„åªä½œä¸ºæ¼”ç¤ºï¼š 1234567891011121314plugins &#123; val kotlinVersion = &quot;1.6.21&quot; id(&quot;org.jetbrains.kotlin.plugin.noarg&quot;) version kotlinVersion id(&quot;org.jetbrains.kotlin.plugin.allopen&quot;) version kotlinVersion kotlin(&quot;plugin.jpa&quot;) version kotlinVersion&#125;allOpen &#123; annotation(&quot;com.gitfy.gitfyapi.util.AllOpen&quot;)&#125;noArg &#123; annotation(&quot;com.gitfy.gitfyapi.util.NoArg&quot;)&#125; ç‰¹åˆ«è¯´æ˜ä¸€ä¸‹è¿™ä¿©æ’ä»¶çš„ä½¿ç”¨ï¼Œé™¤äº†åœ¨ plugins é‡Œæ·»åŠ ä¾èµ–ï¼Œè¿˜éœ€è¦åŠ ä¸Šä¸Šé¢çš„ä¿©æ³¨è§£å£°æ˜ï¼Œå…¶ä¸­å‰é¢çš„æ˜¯å£°æ˜çš„æ³¨è§£ç±»æ‰€åœ¨åŒ…ï¼Œæ¯”å¦‚æˆ‘åœ¨ om.gitfy.gitfyapi.util åŒ…ä¸‹æ–°å»º Annotations.ktï¼š 12345package com.gitfy.gitfyapi.utilannotation class NoArgannotation class AllOpen è¿™äº›å¼„å®Œå°±å¯ä»¥åœ¨ data class é‡Œä½¿ç”¨æ³¨è§£äº†ï¼š 123456@NoArgdata class Repo( var platform: String, var owner: String, var repo: String,) å¦‚æœé¡¹ç›®ä¸­å·²ç»æ·»åŠ äº† kotlin-jpa æ’ä»¶ï¼Œé‚£ä¹ˆåŸºæœ¬ä¸Šå°±ä¸å¿…å•ç‹¬æ·»åŠ æ— å‚æ’ä»¶äº†ã€‚ kotlin-jpa å¯¹æ— å‚æ’ä»¶åšäº†åŒ…è£…ï¼Œå½“ä½¿ç”¨ @Entityã€ @Embeddable ä¸ @MappedSuperclass è¿™å‡ ä¸ªæ³¨è§£æ—¶ï¼Œéƒ½ä¼šé»˜è®¤æ”¯æŒæ— å‚æ³¨è§£çš„ã€‚ å½“ç„¶ä¹Ÿå¯ä»¥æ‰‹åŠ¨ç»™ data class èµ‹åˆå§‹å€¼ã€‚ æ·»åŠ é…ç½®è¿™é‡Œå°† key åºåˆ—åŒ–ä¸º stringï¼Œvalue åºåˆ—åŒ–ä¸º jsonã€‚ SpringBoot çš„ç¼“å­˜ä½¿ç”¨ jackson æ¥åšæ•°æ®çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼Œå¦‚æœé»˜è®¤ä½¿ç”¨ Any ä½œä¸ºåºåˆ—åŒ–ä¸ååºåˆ—åŒ–çš„ç±»å‹ï¼Œåˆ™å…¶åªèƒ½è¯†åˆ«åŸºæœ¬ç±»å‹ï¼Œé‡åˆ°å¤æ‚ç±»å‹æ—¶ï¼Œjackson å°±ä¼šå…ˆåºåˆ—åŒ–æˆ LinkedHashMap ï¼Œç„¶åå†å°è¯•å¼ºè½¬ä¸ºæ‰€éœ€ç±»åˆ«ï¼Œè¿™æ ·å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¼šå¼ºè½¬å¤±è´¥ï¼Œå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š class java.util.LinkedHashMap cannot be cast to class â€¦ è§£å†³æ–¹æ³•æ˜¯ä¿®æ”¹ RedisTemplate è¿™ä¸ª bean çš„ valueSerializerï¼Œå³è®¾ç½®é»˜è®¤ç±»å‹ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354@Configurationclass RedisConfig &#123; /** * é…ç½®Jackson2JsonRedisSerializeråºåˆ—åŒ–ç­–ç•¥ * * @return Jackson2JsonRedisSerializer&lt;Any&gt; */ private fun serializer(): Jackson2JsonRedisSerializer&lt;Any&gt; &#123; // ä½¿ç”¨ Jackson2JsonRedisSerializer æ¥åºåˆ—åŒ–å’Œååºåˆ—åŒ– redis çš„ value å€¼ val jackson2JsonRedisSerializer = Jackson2JsonRedisSerializer(Any::class.java) val objectMapper = ObjectMapper().apply &#123; // æŒ‡å®šè¦åºåˆ—åŒ–çš„åŸŸï¼Œfield,getå’Œset,ä»¥åŠä¿®é¥°ç¬¦èŒƒå›´ï¼ŒANYæ˜¯éƒ½æœ‰åŒ…æ‹¬privateå’Œpublic setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY) // æŒ‡å®šåºåˆ—åŒ–è¾“å…¥çš„ç±»å‹ï¼Œç±»å¿…é¡»æ˜¯éfinalä¿®é¥°çš„ï¼Œfinalä¿®é¥°çš„ç±»ï¼Œæ¯”å¦‚String,Integerç­‰ä¼šè·‘å‡ºå¼‚å¸¸ // è¿™ä¸ªå¿…é¡»åŠ ï¼ï¼ï¼ä¸ç„¶ class java.util.LinkedHashMap cannot be cast to class XXX activateDefaultTyping( this.polymorphicTypeValidator, ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.PROPERTY ) &#125; jackson2JsonRedisSerializer.setObjectMapper(objectMapper) return jackson2JsonRedisSerializer &#125; /** * Redis template é…ç½® * * @param redisConnectionFactory redisè¿æ¥å·¥å‚ * @return RedisTemplate */ @Bean fun redisTemplate(redisConnectionFactory: RedisConnectionFactory): RedisTemplate&lt;String, Any&gt; &#123; val redisTemplate = RedisTemplate&lt;String, Any&gt;() val stringRedisSerializer = StringRedisSerializer() val jackson2JsonRedisSerializer = serializer() redisTemplate.apply &#123; // é…ç½®è¿æ¥å·¥å‚ setConnectionFactory(redisConnectionFactory) // é…ç½® key åºåˆ—åŒ–æ–¹å¼ keySerializer = stringRedisSerializer // é…ç½® value åºåˆ—åŒ–æ–¹å¼: ä½¿ç”¨ Jackson2JsonRedisSerializer valueSerializer = jackson2JsonRedisSerializer // é…ç½® hash key åºåˆ—åŒ–æ–¹å¼ hashKeySerializer = stringRedisSerializer // é…ç½® hash value åºåˆ—åŒ–æ–¹å¼ hashValueSerializer = jackson2JsonRedisSerializer afterPropertiesSet() &#125; return redisTemplate &#125;&#125; å°è£…å·¥å…·ä¸ºäº†æ–¹ä¾¿ï¼Œå°è£…ä¸€ä¸ªç®€å•çš„å·¥å…·ç±»ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344@Componentclass RedisUtil &#123; @Autowired private lateinit var redisTemplate: RedisTemplate&lt;String, Any&gt; /** * è¯»å–æ•°æ® * * @param key * @return Any? */ fun get(key: String): Any? &#123; if (key == &quot;&quot;) return null try &#123; return redisTemplate.opsForValue().get(key) &#125; catch (e: Exception) &#123; e.printStackTrace() &#125; return null &#125; /** * å†™å…¥æ•°æ® * * @param key * @param value * @param expireTime * @return Boolean */ fun set(key: String, value: Any, expireTime: Long? = null): Boolean &#123; if (key == &quot;&quot;) return false try &#123; redisTemplate.opsForValue().set(key, value) expireTime?.let &#123; redisTemplate.expire(key, it, TimeUnit.SECONDS) &#125; return true &#125; catch (e: Exception) &#123; e.printStackTrace() &#125; return false &#125;&#125; æµ‹è¯•ä½¿ç”¨123456789101112131415161718192021@RunWith(SpringJUnit4ClassRunner::class)@SpringBootTestclass RedisUtilTest &#123; @Autowired private lateinit var redisUtil: RedisUtil @Test fun get() &#123; val repo = redisUtil.get(&quot;github:SukiEva:GitfyApi&quot;) println(repo) val obj:Repo = repo as Repo println(obj) &#125; @Test fun set() &#123; val repo = Repo(&quot;github&quot;, &quot;SukiEva&quot;, &quot;GitfyApi&quot;) redisUtil.set(&quot;github:SukiEva:GitfyApi&quot;, repo) &#125;&#125; å¦‚æœä½ ä¹Ÿæ˜¯ Kotlin ç©å®¶ï¼Œè¿™é‡Œè‚¯å®šä¼šç¢°åˆ°æŠ¥é”™ï¼š org.springframework.data.redis.serializer.SerializationException: Could not read JSON: Could not resolve subtype of [simple type, class java.lang.Object]: missing type id property &#39;@class&#39; åœ¨ Java ä¸­ï¼Œå®ä½“ç±»æ²¡æœ‰ä»»ä½•é¢å¤–é…ç½®ï¼ŒRedis åºåˆ—åŒ–&#x2F;ååºåˆ—åŒ–ä¸€æ ·æ²¡æœ‰é—®é¢˜ï¼Œæ˜¯å› ä¸ºå€¼åºåˆ—åŒ–å™¨ GenericJackson2JsonRedisSerializerï¼Œè¯¥ç±»ä¼šè‡ªåŠ¨æ·»åŠ ä¸€ä¸ª @class å­—æ®µï¼Œå› æ­¤ä¸ä¼šå‡ºç°ä¸Šé¢çš„é—®é¢˜ã€‚ ä½†æ˜¯åœ¨ Kotlin ä¸­ï¼Œç±»é»˜è®¤ä¸æ˜¯ open çš„ï¼Œä¹Ÿå°±æ˜¯æ— æ³•æ·»åŠ  @class å­—æ®µï¼Œå› æ­¤ä¾¿ä¼šååºåˆ—åŒ–å¤±è´¥ã€‚ é¦–å…ˆå½“ç„¶å¯ä»¥é€šè¿‡ä¸ç”¨ data class æ¥è§£å†³ï¼Œç›´æ¥ç»™æ™®é€š class openï¼Œè¿™å½“ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæ‰€ä»¥éœ€è¦æ·»åŠ ä¸€ä¸ªç±»æ³¨è§£ @JsonTypeInfoï¼š 1234567@NoArg@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS)data class Repo( var platform: String, var owner: String, var repo: String,) è¯¥æ³¨è§£çš„ use ç”¨äºæŒ‡å®šç±»å‹æ ‡è¯†ç ï¼Œè¯¥å€¼åªèƒ½ä¸º JsonTypeInfo.Id.CLASSã€‚ è¿™æ—¶ Redis ä¸­çš„ç»“æ„æ˜¯ï¼š 123456&#123; &quot;@class&quot;: &quot;com.gitfy.gitfyapi.pojo.Repo&quot;, &quot;platform&quot;: &quot;github&quot;, &quot;owner&quot;: &quot;SukiEva&quot;, &quot;repo&quot;: &quot;GitfyApi&quot;&#125; å¹¶ä¸”æ­¤æ—¶ get æ–¹æ³•ä¹Ÿèƒ½æ­£å¸¸è·å–å€¼ï¼Œå¹¶å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºå¯¹åº”çš„å¯¹è±¡ã€‚","categories":[{"name":"Projects","slug":"Projects","permalink":"http://blog.sukiu.top/categories/Projects/"},{"name":"Problems","slug":"Projects/Problems","permalink":"http://blog.sukiu.top/categories/Projects/Problems/"}],"tags":[{"name":"Kotlin","slug":"Kotlin","permalink":"http://blog.sukiu.top/tags/Kotlin/"},{"name":"Redis","slug":"Redis","permalink":"http://blog.sukiu.top/tags/Redis/"},{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://blog.sukiu.top/tags/Spring-Boot/"}]},{"title":"Gradle","slug":"Gradle","date":"2022-07-15T02:20:00.000Z","updated":"2022-07-15T03:30:00.000Z","comments":true,"path":"Build-Tools/Gradle/Gradle/","link":"","permalink":"http://blog.sukiu.top/Build-Tools/Gradle/Gradle/","excerpt":"Gradle æ˜¯ä¸€ç§å¼€æºæ„å»ºè‡ªåŠ¨åŒ–çš„å·¥å…·ï¼Œæ—¨åœ¨çµæ´»åœ°æ„å»ºå‡ ä¹ä»»ä½•ç±»å‹çš„è½¯ä»¶ã€‚","text":"Gradle æ˜¯ä¸€ç§å¼€æºæ„å»ºè‡ªåŠ¨åŒ–çš„å·¥å…·ï¼Œæ—¨åœ¨çµæ´»åœ°æ„å»ºå‡ ä¹ä»»ä½•ç±»å‹çš„è½¯ä»¶ã€‚ æ¦‚è§ˆGradle æ˜¯ä¸€ç§å¼€æºæ„å»ºè‡ªåŠ¨åŒ–çš„å·¥å…·ï¼Œæ—¨åœ¨çµæ´»åœ°æ„å»ºå‡ ä¹ä»»ä½•ç±»å‹çš„è½¯ä»¶ã€‚ é«˜æ€§èƒ½ï¼šé¿å…é‡å¤ä»»åŠ¡ã€ç¼“å­˜å¤ç”¨ åŸºäº JVMï¼šéœ€è¦ JDK ç¯å¢ƒã€å¯ç”¨ Java APIã€è·¨å¹³å°ã€ä¹Ÿé€‚ç”¨äºå…¶ä»–åŸç”Ÿé¡¹ç›® çº¦å®šï¼šå€Ÿé‰´ Maven ç»éªŒã€å¯ç”¨å„ç§æ’ä»¶ã€å¯è‡ªå®šä¹‰æ’ä»¶å’Œä»»åŠ¡ å¯æ‹“å±•æ€§ï¼šå¯è‡ªå®šä¹‰ä»»åŠ¡ç±»å‹å’Œæ„å»ºæ¨¡å‹ï¼ˆæ¯”å¦‚ Androidï¼‰ IDE æ”¯æŒï¼šAndroid Studio, IntelliJ IDEA, Eclipse, and NetBeans. æ£€è§†ï¼šæ„å»ºæ—¶æä¾›è¾“å‡ºä¿¡æ¯ä¾›æŸ¥é”™ æ›´å¤šç‰¹ç‚¹å‚è€ƒï¼š Gradle ä¸­æ–‡æ–‡æ¡£https://doc.yonyoucloud.com/doc/wiki/project/GradleUserGuide-Wiki/overview/features.html åŸºç¡€Gradle åŸºäºä¸‹é¢ä¸¤ä¸ªåŸºç¡€æ¦‚å¿µ: projects (é¡¹ç›®)ï¼šæ¯ä¸€ä¸ª project æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ª tasks æ„æˆçš„ tasks (ä»»åŠ¡)ï¼šæ›´åŠ ç»†åŒ–çš„æ„å»ºï¼Œå¯èƒ½æ˜¯ç¼–è¯‘ä¸€äº› classesã€åˆ›å»ºä¸€ä¸ª JARã€ç”Ÿæˆ javadoc ç­‰ ä»»åŠ¡å®šä¹‰123456789task hello &lt;&lt; &#123; println &#x27;Hello world!&#x27;&#125;task upper &lt;&lt; &#123; String someString = &#x27;mY_nAmE&#x27; println &quot;Original: &quot; + someString println &quot;Upper case: &quot; + someString.toUpperCase()&#125; é€šè¿‡ gradle -q hello è¿è¡Œ -qï¼šä¸ä¼šç”Ÿæˆ Gradle çš„æ—¥å¿—ä¿¡æ¯ (log messages), æ‰€ä»¥ç”¨æˆ·åªèƒ½çœ‹åˆ° tasks çš„è¾“å‡º ä»»åŠ¡ä¾èµ–æ‰§è¡Œ gradle -q intro æ—¶ï¼Œä¼šå…ˆæ‰§è¡Œ hello ä»»åŠ¡ï¼š 1234567task hello &lt;&lt; &#123; println &#x27;Hello world!&#x27;&#125;task intro(dependsOn: hello) &lt;&lt; &#123; println &quot;I&#x27;m Gradle&quot;&#125; åœ¨åŠ å…¥ä¸€ä¸ªä¾èµ–ä¹‹å‰ï¼Œè¿™ä¸ªä¾èµ–çš„ä»»åŠ¡ä¸éœ€è¦æå‰å®šä¹‰ï¼Œå³é¡ºåºæ— æ‰€è°“ã€‚ åŠ¨æ€ä»»åŠ¡åŠ¨æ€åˆ›å»º task1, task2, task3, task4ï¼š 123454.times &#123; counter -&gt; task &quot;task$counter&quot; &lt;&lt; &#123; println &quot;I&#x27;m task number $counter&quot; &#125;&#125; è¾“å‡ºï¼š 12$ gradle -q task1I&#x27;m task number 1 ä½¿ç”¨å·²æœ‰ä»»åŠ¡ä½¿ç”¨ä¾èµ–ä½¿ç”¨ä¸Šé¢åŠ¨æ€ä»»åŠ¡çš„ä¾‹å­ï¼š 1task0.dependsOn task2, task3 è¾“å‡ºï¼š 1234$ gradle -q task0I&#x27;m task number 2I&#x27;m task number 3I&#x27;m task number 0 ä½¿ç”¨è¡Œä¸ºdoFirst å’Œ doLast å¯ä»¥è¢«æ‰§è¡Œè®¸å¤šæ¬¡ï¼Œ&lt;&lt; æ˜¯ doLast ç®€å†™ï¼š 123456789101112task hello &lt;&lt; &#123; println &#x27;Hello Earth&#x27;&#125;hello.doFirst &#123; println &#x27;Hello Venus&#x27;&#125;hello.doLast &#123; println &#x27;Hello Mars&#x27;&#125;hello &lt;&lt; &#123; println &#x27;Hello Jupiter&#x27;&#125; è¾“å‡ºï¼š 12345$ gradle -q helloHello VenusHello EarthHello MarsHello Jupiter çŸ­æ ‡è®°çŸ­æ ‡è®° $ å¯ä»¥è®¿é—®ä¸€ä¸ªå­˜åœ¨çš„ä»»åŠ¡ï¼š 123456task hello &lt;&lt; &#123; println &#x27;Hello world!&#x27;&#125;hello.doLast &#123; println &quot;Greetings from the $hello.name task.&quot;&#125; è¾“å‡ºï¼š 123$ gradle -q helloHello world!Greetings from the hello task. è‡ªå®šä¹‰å±æ€§1234567task myTask &#123; ext.myProperty = &quot;myValue&quot;&#125;task printTaskProperties &lt;&lt; &#123; println myTask.myProperty è¾“å‡ºï¼š 12$ gradle -q printTaskPropertiesmyValue è°ƒç”¨ Ant ä»»åŠ¡ä½¿ç”¨ AntBuilder æ¥æ‰§è¡Œ ant.loadfile ä»»åŠ¡ï¼š 12345678910task loadfile &lt;&lt; &#123; def files = file(&#x27;../antLoadfileResources&#x27;).listFiles().sort() files.each &#123; File file -&gt; if (file.isFile()) &#123; ant.loadfile(srcFile: file, property: file.name) println &quot; *** $file.name ***&quot; println &quot;$&#123;ant.properties[file.name]&#125;&quot; &#125; &#125;&#125; è¾“å‡ºï¼š 1234567$ gradle -q loadfile*** agile.manifesto.txt ***Individuals and interactions over processes and toolsWorking software over comprehensive documentationCustomer collaboration over contract negotiationResponding to change over following a plan *** gradle.manifesto.txt *** æ–¹æ³•1234567891011121314151617task checksum &lt;&lt; &#123; fileList(&#x27;../antLoadfileResources&#x27;).each &#123;File file -&gt; ant.checksum(file: file, property: &quot;cs_$file.name&quot;) println &quot;$file.name Checksum: $&#123;ant.properties[&quot;cs_$file.name&quot;]&#125;&quot; &#125;&#125;task loadfile &lt;&lt; &#123; fileList(&#x27;../antLoadfileResources&#x27;).each &#123;File file -&gt; ant.loadfile(srcFile: file, property: file.name) println &quot;I&#x27;m fond of $file.name&quot; &#125;&#125;File[] fileList(String dir) &#123; file(dir).listFiles(&#123;file -&gt; file.isFile() &#125; as FileFilter).sort()&#125; è¾“å‡ºï¼š 123$ gradle -q loadfileI&#x27;m fond of agile.manifesto.txtI&#x27;m fond of gradle.manifesto.txt é»˜è®¤ä»»åŠ¡Gradle å…è®¸åœ¨è„šæœ¬ä¸­å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªé»˜è®¤ä»»åŠ¡ï¼Œæ„å»ºæ—¶è‡ªåŠ¨æ‰§è¡Œï¼š 12345678910111213defaultTasks &#x27;clean&#x27;, &#x27;run&#x27;task clean &lt;&lt; &#123; println &#x27;Default Cleaning!&#x27;&#125;task run &lt;&lt; &#123; println &#x27;Default Running!&#x27;&#125;task other &lt;&lt; &#123; println &quot;I&#x27;m not a default task!&quot;&#125; è¾“å‡ºï¼š 123$ gradle -qDefault Cleaning!Default Running! DAG é…ç½®distribution ä»»åŠ¡å’Œ release ä»»åŠ¡å°†æ ¹æ®å˜é‡çš„ç‰ˆæœ¬äº§ç”Ÿä¸åŒçš„å€¼ï¼š 123456789101112131415task distribution &lt;&lt; &#123; println &quot;We build the zip with version=$version&quot;&#125;task release(dependsOn: &#x27;distribution&#x27;) &lt;&lt; &#123; println &#x27;We release now&#x27;&#125;gradle.taskGraph.whenReady &#123;taskGraph -&gt; if (taskGraph.hasTask(release)) &#123; version = &#x27;1.0&#x27; &#125; else &#123; version = &#x27;1.0-SNAPSHOT&#x27; &#125;&#125; è¾“å‡ºï¼š 123456$ gradle -q distributionWe build the zip with version=1.0-SNAPSHOTOutput of gradle -q release$ gradle -q releaseWe build the zip with version=1.0We release now","categories":[{"name":"Build Tools","slug":"Build-Tools","permalink":"http://blog.sukiu.top/categories/Build-Tools/"},{"name":"Gradle","slug":"Build-Tools/Gradle","permalink":"http://blog.sukiu.top/categories/Build-Tools/Gradle/"}],"tags":[{"name":"Gradle","slug":"Gradle","permalink":"http://blog.sukiu.top/tags/Gradle/"}]},{"title":"ä»€ä¹ˆæ˜¯POJOï¼Ÿ","slug":"What-Is-POJO","date":"2022-07-12T13:29:53.000Z","updated":"2022-07-12T13:56:00.000Z","comments":true,"path":"Programming-Language/Java/What-Is-POJO/","link":"","permalink":"http://blog.sukiu.top/Programming-Language/Java/What-Is-POJO/","excerpt":"åœ¨åˆ’åˆ†é¡¹ç›®ç»“æ„æ—¶ï¼Œå¯¹å®ä½“ç±»åˆ’åˆ†çš„å„ç§å‘½åã€‚ POJOï¼šç®€å•çš„ Java å¯¹è±¡ VOï¼šå€¼å¯¹è±¡ã€è§†å›¾å¯¹è±¡ POï¼šæŒä¹…å¯¹è±¡ QOï¼šæŸ¥è¯¢å¯¹è±¡ DAOï¼šæ•°æ®è®¿é—®å¯¹è±¡â€”â€”åŒæ—¶è¿˜æœ‰ DAO æ¨¡å¼ DTOï¼šæ•°æ®ä¼ è¾“å¯¹è±¡â€”â€”åŒæ—¶è¿˜æœ‰ DTO æ¨¡å¼","text":"åœ¨åˆ’åˆ†é¡¹ç›®ç»“æ„æ—¶ï¼Œå¯¹å®ä½“ç±»åˆ’åˆ†çš„å„ç§å‘½åã€‚ POJOï¼šç®€å•çš„ Java å¯¹è±¡ VOï¼šå€¼å¯¹è±¡ã€è§†å›¾å¯¹è±¡ POï¼šæŒä¹…å¯¹è±¡ QOï¼šæŸ¥è¯¢å¯¹è±¡ DAOï¼šæ•°æ®è®¿é—®å¯¹è±¡â€”â€”åŒæ—¶è¿˜æœ‰ DAO æ¨¡å¼ DTOï¼šæ•°æ®ä¼ è¾“å¯¹è±¡â€”â€”åŒæ—¶è¿˜æœ‰ DTO æ¨¡å¼ POJOPOJOï¼ˆPlain Ordinary Java Objectï¼‰ç®€å•çš„ Java å¯¹è±¡ï¼Œå®é™…å°±æ˜¯æ™®é€š JavaBeansï¼Œæ˜¯ä¸ºäº†é¿å…å’Œ EJBï¼ˆEnterprise JavaBeanï¼‰æ··æ·†æ‰€åˆ›é€ çš„ç®€ç§°ã€‚ å…·æœ‰ä¸€éƒ¨åˆ† getter&#x2F;setter æ–¹æ³•çš„é‚£ç§ç±»å°±å¯ä»¥ç§°ä½œ POJOï¼ŒPOJO ä¸æ‹…å½“ä»»ä½•çš„ç‰¹æ®Šçš„è§’è‰²ï¼Œä¹Ÿä¸å®ç°ä»»ä½• Java æ¡†æ¶æŒ‡å®šçš„æ¥å£ã€‚ 12345678public class DbHello &#123; //ç®€å•çš„Javaç±»ï¼Œç§°ä¹‹ä¸ºPOJOï¼Œä¸ç»§æ‰¿ï¼Œä¸å®ç°æ¥å£ private DictionaryDAO dao; public void setDao(DictionaryDAO dao) &#123; this.dao = dao; &#125;&#125; POJO å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªä¸­é—´å¯¹è±¡ï¼š ä¸€ä¸ªä¸­é—´å¯¹è±¡ï¼Œå¯ä»¥è½¬åŒ–ä¸º POã€DTOã€VOã€‚ 1 ï¼POJO æŒä¹…åŒ–ä¹‹å -&gt; POï¼ˆåœ¨è¿è¡ŒæœŸï¼Œç”± Hibernate ä¸­çš„ cglib åŠ¨æ€æŠŠ POJO è½¬æ¢ä¸º POï¼ŒPO ç›¸å¯¹äº POJO ä¼šå¢åŠ ä¸€äº›ç”¨æ¥ç®¡ç†æ•°æ®åº“ entity çŠ¶æ€çš„å±æ€§å’Œæ–¹æ³•ã€‚PO å¯¹äº programmer æ¥è¯´å®Œå…¨é€æ˜ï¼Œç”±äºæ˜¯è¿è¡ŒæœŸç”Ÿæˆ POï¼Œæ‰€ä»¥å¯ä»¥æ”¯æŒå¢é‡ç¼–è¯‘ï¼Œå¢é‡è°ƒè¯•ï¼‰ 2 ï¼POJO ä¼ è¾“è¿‡ç¨‹ä¸­ -&gt; DTO 3 ï¼POJO ç”¨ä½œè¡¨ç¤ºå±‚ -&gt; VO POPO å…¨ç§°æ˜¯ persistant object ï¼ˆæŒä¹…å¯¹è±¡ï¼‰ã€‚ æœ€å½¢è±¡çš„ç†è§£å°±æ˜¯ä¸€ä¸ª PO å°±æ˜¯æ•°æ®åº“ä¸­çš„ä¸€æ¡è®°å½•ã€‚å¥½å¤„æ˜¯å¯ä»¥æŠŠä¸€æ¡è®°å½•ä½œä¸ºä¸€ä¸ªå¯¹è±¡å¤„ç†ï¼Œå¯ä»¥æ–¹ä¾¿çš„è½¬ä¸ºå…¶å®ƒå¯¹è±¡ã€‚ 12345678910111213141516171819202122public class User &#123; private long id; private String name; public void setId(long id) &#123; this.id = id; &#125; public void setName(String name) &#123; this.name = name; &#125; public long getId() &#123; return id; &#125; public String getName() &#123; return name; &#125;&#125; VOVO å…¨ç§°æ˜¯ value object å€¼å¯¹è±¡ &#x2F; view object è¡¨ç°å±‚ï¼ˆè§†å›¾ï¼‰å¯¹è±¡ã€‚ Value Objectï¼šé€šå¸¸ç”¨äºä¸šåŠ¡å±‚ä¹‹é—´çš„æ•°æ®ä¼ é€’ï¼Œå’Œ PO ä¸€æ ·ä¹Ÿæ˜¯ä»…ä»…åŒ…å«æ•°æ®è€Œå·²ã€‚ View Objectï¼šç”¨ä¸€ä¸ª VO å¯¹è±¡å¯¹åº”æ•´ä¸ªç•Œé¢çš„å€¼ï¼Œå¦‚å¯¹äºä¸€ä¸ª WEB é¡µé¢ï¼Œæˆ–è€… SWTã€SWING çš„ä¸€ä¸ªç•Œé¢ï¼Œã€‚ DTODTO ï¼ˆTOï¼‰ å…¨ç§°æ˜¯ Data Transfer Object ï¼ˆæ•°æ®ä¼ è¾“å¯¹è±¡ï¼‰ï¼Œä¸»è¦ç”¨äºè¿œç¨‹è°ƒç”¨ç­‰éœ€è¦å¤§é‡ä¼ è¾“å¯¹è±¡çš„åœ°æ–¹ã€‚ å°† PO ä¸­çš„éƒ¨åˆ†å±æ€§æŠ½å–å‡ºæ¥ï¼Œå°±å½¢æˆäº† DTOã€‚ æ¯”å¦‚æˆ‘ä»¬ä¸€å¼ è¡¨æœ‰ 100 ä¸ªå­—æ®µï¼Œé‚£ä¹ˆå¯¹åº”çš„ PO å°±æœ‰ 100 ä¸ªå±æ€§ã€‚ ä½†æ˜¯æˆ‘ä»¬ç•Œé¢ä¸Šåªè¦æ˜¾ç¤º 10 ä¸ªå­—æ®µï¼Œå®¢æˆ·ç«¯ç”¨ WEB service æ¥è·å–æ•°æ®ï¼Œæ²¡æœ‰å¿…è¦æŠŠæ•´ä¸ª PO å¯¹è±¡ä¼ é€’åˆ°å®¢æˆ·ç«¯ï¼Œè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥ç”¨åªæœ‰è¿™ 10 ä¸ªå±æ€§çš„ DTO æ¥ä¼ é€’ç»“æœåˆ°å®¢æˆ·ç«¯ï¼Œè¿™æ ·ä¹Ÿä¸ä¼šæš´éœ²æœåŠ¡ç«¯è¡¨ç»“æ„.åˆ°è¾¾å®¢æˆ·ç«¯ä»¥åï¼Œå¦‚æœç”¨è¿™ä¸ªå¯¹è±¡æ¥å¯¹åº”ç•Œé¢æ˜¾ç¤ºï¼Œé‚£æ­¤æ—¶å®ƒçš„èº«ä»½å°±è½¬ä¸º VOã€‚ DAODAO å…¨ç§°æ˜¯ data access object ï¼ˆæ•°æ®è®¿é—®å¯¹è±¡ï¼‰ï¼Œä¸»è¦ç”¨æ¥å°è£…å¯¹æ•°æ®åº“çš„è®¿é—®ã€‚ é€šå¸¸å’Œ PO ç»“åˆä½¿ç”¨ï¼ŒDAO ä¸­åŒ…å«äº†å„ç§æ•°æ®åº“çš„æ“ä½œæ–¹æ³•ã€‚å®ƒå¯ä»¥æŠŠ POJO æŒä¹…åŒ–ä¸º POï¼Œç”¨ PO ç»„è£…å‡ºæ¥ VOã€DTO","categories":[{"name":"Programming Language","slug":"Programming-Language","permalink":"http://blog.sukiu.top/categories/Programming-Language/"},{"name":"Java","slug":"Programming-Language/Java","permalink":"http://blog.sukiu.top/categories/Programming-Language/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://blog.sukiu.top/tags/Java/"}]},{"title":"Java","slug":"Language-Java","date":"2022-07-09T12:26:00.000Z","updated":"2022-07-09T12:31:00.000Z","comments":true,"path":"Programming-Language/Java/Language-Java/","link":"","permalink":"http://blog.sukiu.top/Programming-Language/Java/Language-Java/","excerpt":"Write Once, Run Anywhere! ä¸€äº› Java å­¦ä¹ ç¬”è®°ã€‚","text":"Write Once, Run Anywhere! ä¸€äº› Java å­¦ä¹ ç¬”è®°ã€‚ æ¦‚å¿µJVM Vs JDK Vs JRE JVMï¼ˆJava Virtual Machineï¼‰ï¼šè¿è¡Œ Java å­—èŠ‚ç çš„è™šæ‹Ÿæœº JDKï¼ˆJava Development Kitï¼‰ï¼š åŠŸèƒ½é½å…¨çš„ Java å¼€å‘å·¥å…·ï¼ŒåŒ…å« JREã€ç¼–è¯‘å™¨ï¼ˆJavacï¼‰å’Œå·¥å…·ï¼ˆå¦‚ javadoc å’Œ jdbï¼‰ JREï¼ˆJava Runtime Environmentï¼‰ï¼šJava è¿è¡Œæ—¶ç¯å¢ƒï¼ŒåŒ…æ‹¬ JVMã€Java ç±»åº“ã€Java å‘½ä»¤å’Œå…¶ä»–çš„ä¸€äº›åŸºç¡€æ„ä»¶ å­—èŠ‚ç æ–‡ä»¶ .classJVM å¯ä»¥ç†è§£çš„ä»£ç å°±å«åšå­—èŠ‚ç ï¼ˆå³æ‰©å±•åä¸º .class çš„æ–‡ä»¶ï¼‰ï¼Œå®ƒä¸é¢å‘ä»»ä½•ç‰¹å®šçš„å¤„ç†å™¨ï¼Œåªé¢å‘è™šæ‹Ÿæœºã€‚ ä¸ºä»€ä¹ˆè¯´ Java è¯­è¨€â€œç¼–è¯‘ä¸è§£é‡Šå¹¶å­˜â€ï¼Ÿ Java è¯­è¨€æ—¢å…·æœ‰ç¼–è¯‘å‹è¯­è¨€çš„ç‰¹å¾ï¼Œä¹Ÿå…·æœ‰è§£é‡Šå‹è¯­è¨€çš„ç‰¹å¾ã€‚ ç”± Java ç¼–å†™çš„ç¨‹åºéœ€è¦å…ˆç»è¿‡ç¼–è¯‘æ­¥éª¤ï¼Œç”Ÿæˆå­—èŠ‚ç ï¼ˆ.class æ–‡ä»¶ï¼‰ è¿™ç§å­—èŠ‚ç å¿…é¡»ç”± Java è§£é‡Šå™¨æ¥è§£é‡Šæ‰§è¡Œã€‚ ä¸‰å¤§ç‰¹å¾å°è£…å°è£…æ˜¯æŒ‡æŠŠä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€ä¿¡æ¯ï¼ˆä¹Ÿå°±æ˜¯å±æ€§ï¼‰éšè—åœ¨å¯¹è±¡å†…éƒ¨ï¼Œä¸å…è®¸å¤–éƒ¨å¯¹è±¡ç›´æ¥è®¿é—®å¯¹è±¡çš„å†…éƒ¨ä¿¡æ¯ã€‚ ç»§æ‰¿ç»§æ‰¿æ˜¯ä½¿ç”¨å·²å­˜åœ¨çš„ç±»çš„å®šä¹‰ä½œä¸ºåŸºç¡€å»ºç«‹æ–°ç±»çš„åŸºç¡€ï¼Œæ–°ç±»çš„å®šä¹‰å¯ä»¥å¢åŠ æ–°çš„æ•°æ®æˆ–æ–°çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥ç”¨çˆ¶ç±»çš„åŠŸèƒ½ï¼Œä½†ä¸èƒ½é€‰æ‹©æ€§åœ°ç»§æ‰¿çˆ¶ç±»ã€‚ å­ç±»æ‹¥æœ‰çˆ¶ç±»å¯¹è±¡æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼ˆåŒ…æ‹¬ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•ï¼‰ï¼Œä½†æ˜¯çˆ¶ç±»ä¸­çš„ç§æœ‰å±æ€§å’Œæ–¹æ³•å­ç±»æ˜¯æ— æ³•è®¿é—®ï¼Œåªæ˜¯æ‹¥æœ‰ã€‚ å­ç±»å¯ä»¥æ‹¥æœ‰è‡ªå·±å±æ€§å’Œæ–¹æ³•ï¼Œå³å­ç±»å¯ä»¥å¯¹çˆ¶ç±»è¿›è¡Œæ‰©å±•ã€‚ å­ç±»å¯ä»¥ç”¨è‡ªå·±çš„æ–¹å¼å®ç°çˆ¶ç±»çš„æ–¹æ³•ã€‚ å¤šæ€å¤šæ€è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡å…·æœ‰å¤šç§çš„çŠ¶æ€ï¼Œå…·ä½“è¡¨ç°ä¸ºçˆ¶ç±»çš„å¼•ç”¨æŒ‡å‘å­ç±»çš„å®ä¾‹ã€‚ å¤šæ€çš„ç‰¹ç‚¹: å¯¹è±¡ç±»å‹å’Œå¼•ç”¨ç±»å‹ä¹‹é—´å…·æœ‰ç»§æ‰¿ï¼ˆç±»ï¼‰&#x2F;å®ç°ï¼ˆæ¥å£ï¼‰çš„å…³ç³»ï¼› å¼•ç”¨ç±»å‹å˜é‡å‘å‡ºçš„æ–¹æ³•è°ƒç”¨çš„åˆ°åº•æ˜¯å“ªä¸ªç±»ä¸­çš„æ–¹æ³•ï¼Œå¿…é¡»åœ¨ç¨‹åºè¿è¡ŒæœŸé—´æ‰èƒ½ç¡®å®šï¼› å¤šæ€ä¸èƒ½è°ƒç”¨â€œåªåœ¨å­ç±»å­˜åœ¨ä½†åœ¨çˆ¶ç±»ä¸å­˜åœ¨â€çš„æ–¹æ³•ï¼› å¦‚æœå­ç±»é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•ï¼ŒçœŸæ­£æ‰§è¡Œçš„æ˜¯å­ç±»è¦†ç›–çš„æ–¹æ³•ï¼Œå¦‚æœå­ç±»æ²¡æœ‰è¦†ç›–çˆ¶ç±»çš„æ–¹æ³•ï¼Œæ‰§è¡Œçš„æ˜¯çˆ¶ç±»çš„æ–¹æ³•ã€‚ åŸºç¡€é™æ€ Static é™æ€åŸŸï¼ˆé™æ€å˜é‡ï¼‰ï¼šå¦‚æœå°†åŸŸå®šä¹‰ä¸º static, æ¯ä¸ªç±»ä¸­åªæœ‰ä¸€ä¸ªè¿™æ ·çš„åŸŸã€‚ä¹Ÿå°±æ˜¯æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä¸ªé™æ€åŸŸï¼Œä¸éœ€è¦æ‹·è´ã€‚ é™æ€å¸¸é‡ï¼šç›¸è¾ƒäºé™æ€åŸŸï¼Œä½¿ç”¨çš„æ›´åŠ é¢‘ç¹ï¼Œç”¨ static final ä¿®é¥°ã€‚ é™æ€æ–¹æ³•ï¼šç‰¹æ€§åŒä¸Šï¼Œä¸æ™®é€šæ–¹æ³•çš„åŒºåˆ«æ˜¯ä¸èƒ½å‘å¯¹è±¡å®æ–½æ“ä½œï¼Œå³ä¸èƒ½è°ƒç”¨ thisï¼Œä½†æ˜¯å¯ä»¥è°ƒç”¨ç±»ä¸­çš„é™æ€åŸŸã€‚è°ƒç”¨é™æ€æ–¹æ³•å¯ä»¥æ— éœ€åˆ›å»ºå¯¹è±¡ï¼Œä¸€èˆ¬ä½¿ç”¨ ç±»å.æ–¹æ³•å çš„æ–¹å¼æ¥è°ƒç”¨é™æ€æ–¹æ³•ã€‚ é™æ€æ–¹æ³•ä¸ºä»€ä¹ˆä¸èƒ½è°ƒç”¨éé™æ€æˆå‘˜ é™æ€æ–¹æ³•æ˜¯å±äºç±»çš„ï¼Œåœ¨ç±»åŠ è½½çš„æ—¶å€™å°±ä¼šåˆ†é…å†…å­˜ï¼Œå¯ä»¥é€šè¿‡ç±»åç›´æ¥è®¿é—®ã€‚è€Œéé™æ€æˆå‘˜å±äºå®ä¾‹å¯¹è±¡ï¼Œåªæœ‰åœ¨å¯¹è±¡å®ä¾‹åŒ–ä¹‹åæ‰å­˜åœ¨ï¼Œéœ€è¦é€šè¿‡ç±»çš„å®ä¾‹å¯¹è±¡å»è®¿é—®ã€‚ åœ¨ç±»çš„éé™æ€æˆå‘˜ä¸å­˜åœ¨çš„æ—¶å€™é™æ€æˆå‘˜å°±å·²ç»å­˜åœ¨äº†ï¼Œæ­¤æ—¶è°ƒç”¨åœ¨å†…å­˜ä¸­è¿˜ä¸å­˜åœ¨çš„éé™æ€æˆå‘˜ï¼Œå±äºéæ³•æ“ä½œã€‚ é‡è½½ &amp; é‡å†™ é‡è½½ï¼šå¤šä¸ªæ–¹æ³•æœ‰ç›¸åŒçš„åå­—ã€ä¸åŒçš„å‚æ•°ã€‚åŒæ ·çš„ä¸€ä¸ªæ–¹æ³•èƒ½å¤Ÿæ ¹æ®è¾“å…¥æ•°æ®çš„ä¸åŒï¼Œåšå‡ºä¸åŒçš„å¤„ç†ã€‚ é‡å†™ï¼šå­ç±»ç»§æ‰¿è‡ªçˆ¶ç±»çš„ç›¸åŒæ–¹æ³•ï¼Œ@Override å¯å˜é•¿å‚æ•°ä» Java5 å¼€å§‹ï¼ŒJava æ”¯æŒå®šä¹‰å¯å˜é•¿å‚æ•°ï¼Œå³å…è®¸åœ¨è°ƒç”¨æ–¹æ³•æ—¶ä¼ å…¥ä¸å®šé•¿åº¦çš„å‚æ•°ã€‚ å¯å˜å‚æ•°åªèƒ½ä½œä¸ºå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°ï¼Œä½†å…¶å‰é¢å¯ä»¥æœ‰ä¹Ÿå¯ä»¥æ²¡æœ‰ä»»ä½•å…¶ä»–å‚æ•°ã€‚ æ–¹æ³•é‡è½½ä¼šä¼˜å…ˆåŒ¹é…å›ºå®šå‚æ•° 123public static void method(String arg1, String... args) &#123; //......&#125; åŸºæœ¬ç±»å‹ &amp; åŒ…è£…ç±» åŸºæœ¬ç±»å‹ï¼š 6 ç§æ•°å­—ç±»å‹ï¼š 4 ç§æ•´æ•°å‹ï¼šbyteã€shortã€intã€longï¼ˆæ•°å€¼åé¢åŠ  Lï¼‰ 2 ç§æµ®ç‚¹å‹ï¼šfloatã€double 1 ç§å­—ç¬¦ç±»å‹ï¼šchar 1 ç§å¸ƒå°”å‹ï¼šboolean åŒ…è£…ç±»ï¼šByteã€Shortã€Integerã€Longã€Floatã€Doubleã€Characterã€Boolean æ‰€æœ‰æ•´å‹åŒ…è£…ç±»å¯¹è±¡ä¹‹é—´å€¼çš„æ¯”è¾ƒï¼Œå…¨éƒ¨ä½¿ç”¨ equals æ–¹æ³•æ¯”è¾ƒ åŸºæœ¬ç±»å‹å’ŒåŒ…è£…ç±»å‹çš„åŒºåˆ« æˆå‘˜å˜é‡åŒ…è£…ç±»å‹ä¸èµ‹å€¼å°±æ˜¯ null ï¼Œè€ŒåŸºæœ¬ç±»å‹æœ‰é»˜è®¤å€¼ä¸”ä¸æ˜¯ nullã€‚ åŒ…è£…ç±»å‹å¯ç”¨äºæ³›å‹ï¼Œè€ŒåŸºæœ¬ç±»å‹ä¸å¯ä»¥ã€‚ åŸºæœ¬æ•°æ®ç±»å‹çš„å±€éƒ¨å˜é‡å­˜æ”¾åœ¨ Java è™šæ‹Ÿæœºæ ˆä¸­çš„å±€éƒ¨å˜é‡è¡¨ä¸­ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹çš„æˆå‘˜å˜é‡ï¼ˆæœªè¢« static ä¿®é¥° ï¼‰å­˜æ”¾åœ¨ Java è™šæ‹Ÿæœºçš„å †ä¸­ã€‚åŒ…è£…ç±»å‹å±äºå¯¹è±¡ç±»å‹ï¼Œæˆ‘ä»¬çŸ¥é“å‡ ä¹æ‰€æœ‰å¯¹è±¡å®ä¾‹éƒ½å­˜åœ¨äºå †ä¸­ã€‚ ç›¸æ¯”äºå¯¹è±¡ç±»å‹ï¼Œ åŸºæœ¬æ•°æ®ç±»å‹å ç”¨çš„ç©ºé—´éå¸¸å°ã€‚ åŒ…è£…ç±»å‹çš„ç¼“å­˜æœºåˆ¶ Java åŸºæœ¬æ•°æ®ç±»å‹çš„åŒ…è£…ç±»å‹çš„å¤§éƒ¨åˆ†éƒ½ç”¨åˆ°äº†ç¼“å­˜æœºåˆ¶æ¥æå‡æ€§èƒ½: Byte,Short,Integer,Long è¿™ 4 ç§åŒ…è£…ç±»é»˜è®¤åˆ›å»ºäº†æ•°å€¼ [-128ï¼Œ127] çš„ç›¸åº”ç±»å‹çš„ç¼“å­˜æ•°æ® Character åˆ›å»ºäº†æ•°å€¼åœ¨ [0,127] èŒƒå›´çš„ç¼“å­˜æ•°æ® Boolean ç›´æ¥è¿”å› True or False è£…ç®± &amp; æ‹†ç®± è£…ç®±ï¼šå°†åŸºæœ¬ç±»å‹ç”¨å®ƒä»¬å¯¹åº”çš„å¼•ç”¨ç±»å‹åŒ…è£…èµ·æ¥ æ‹†ç®±ï¼šå°†åŒ…è£…ç±»å‹è½¬æ¢ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ 12Integer i = 10; //è£…ç®±int n = i; //æ‹†ç®± å°½é‡é¿å…ä¸å¿…è¦çš„æ‹†è£…ç®±æ“ä½œï¼Œé¢‘ç¹æ‹†è£…ç®±ä¼šä¸¥é‡å½±å“ç³»ç»Ÿçš„æ€§èƒ½ã€‚ å¯¹è±¡å’Œç±»æŠ½è±¡ç±» &amp; æ¥å£æŠ½è±¡ç±»é™¤äº†ä¸èƒ½å®ä¾‹åŒ–å¯¹è±¡ä¹‹å¤–ï¼Œç±»çš„å…¶å®ƒåŠŸèƒ½å’Œæ™®é€šç±»ä¸€æ ·ã€‚ ç”±äºæŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–å¯¹è±¡ï¼Œæ‰€ä»¥æŠ½è±¡ç±»å¿…é¡»è¢«ç»§æ‰¿ï¼Œæ‰èƒ½è¢«ä½¿ç”¨ã€‚ä¹Ÿæ˜¯å› ä¸ºè¿™ä¸ªåŸå› ï¼Œé€šå¸¸åœ¨è®¾è®¡é˜¶æ®µå†³å®šè¦ä¸è¦è®¾è®¡æŠ½è±¡ç±»ã€‚ çˆ¶ç±»åŒ…å«äº†å­ç±»é›†åˆçš„å¸¸è§çš„æ–¹æ³•ï¼Œä½†æ˜¯ç”±äºçˆ¶ç±»æœ¬èº«æ˜¯æŠ½è±¡çš„ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨è¿™äº›æ–¹æ³•ã€‚ åœ¨ Java ä¸­æŠ½è±¡ç±»è¡¨ç¤ºçš„æ˜¯ä¸€ç§ç»§æ‰¿å…³ç³»ï¼Œä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œè€Œä¸€ä¸ªç±»å´å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚ æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ« å…±åŒç‚¹ï¼šæ¥å£å’ŒæŠ½è±¡ç±»éƒ½æ˜¯ç»§æ‰¿æ ‘çš„ä¸Šå±‚ éƒ½æ˜¯ä¸Šå±‚çš„æŠ½è±¡å±‚ éƒ½ä¸èƒ½è¢«å®ä¾‹åŒ– éƒ½èƒ½åŒ…å«æŠ½è±¡çš„æ–¹æ³•ï¼Œè¿™äº›æŠ½è±¡çš„æ–¹æ³•ç”¨äºæè¿°ç±»å…·å¤‡çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¸æ¯”æä¾›å…·ä½“çš„å®ç° éƒ½å¯ä»¥æœ‰é»˜è®¤å®ç°çš„æ–¹æ³•ï¼ˆJava 8 å¯ä»¥ç”¨ default å…³é”®å­—åœ¨æ¥å£ä¸­å®šä¹‰é»˜è®¤æ–¹æ³•ï¼‰ åŒºåˆ«ï¼š æŠ½è±¡ç±»ä¸­å¯æœ‰éæŠ½è±¡çš„æ–¹æ³•ï¼Œå¯ä»¥ä»£ç å¤ç”¨ï¼›æ¥å£åªèƒ½æœ‰æŠ½è±¡æ–¹æ³• ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªç±»ï¼Œä½†æ˜¯å¯ä»¥å®ç°å¤šä¸ªæ¥å£ æ¥å£ä¸­çš„æˆå‘˜å˜é‡åªèƒ½æ˜¯ public static final ç±»å‹çš„ï¼Œä¸èƒ½è¢«ä¿®æ”¹ä¸”å¿…é¡»æœ‰åˆå§‹å€¼ï¼Œè€ŒæŠ½è±¡ç±»çš„æˆå‘˜å˜é‡é»˜è®¤ defaultï¼Œå¯åœ¨å­ç±»ä¸­è¢«é‡æ–°å®šä¹‰ï¼Œä¹Ÿå¯è¢«é‡æ–°èµ‹å€¼ã€‚ è®¿é—®ä¿®é¥°ç¬¦ ä»…å¯¹æœ¬ç±»å¯è§ private å¯¹æ‰€æœ‰ç±»å¯è§ public å¯¹æœ¬åŒ…å’Œæ‰€æœ‰å­ç±»å¯è§ protected å¯¹æœ¬åŒ…å¯è§â€”é»˜è®¤ ä¸éœ€è¦ä¿®é¥°ç¬¦ æ·±æ‹·è´ &amp; æµ…æ‹·è´ å¼•ç”¨æ‹·è´ï¼šä¸¤ä¸ªä¸åŒçš„å¼•ç”¨æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚ æµ…æ‹·è´ï¼šæµ…æ‹·è´ä¼šåœ¨å †ä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ˆåŒºåˆ«äºå¼•ç”¨æ‹·è´çš„ä¸€ç‚¹ï¼‰ï¼Œä¸è¿‡ï¼Œå¦‚æœåŸå¯¹è±¡å†…éƒ¨çš„å±æ€§æ˜¯å¼•ç”¨ç±»å‹çš„è¯ï¼Œæµ…æ‹·è´ä¼šç›´æ¥å¤åˆ¶å†…éƒ¨å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼Œä¹Ÿå°±æ˜¯è¯´æ‹·è´å¯¹è±¡å’ŒåŸå¯¹è±¡å…±ç”¨åŒä¸€ä¸ªå†…éƒ¨å¯¹è±¡ã€‚ æ·±æ‹·è´ ï¼šæ·±æ‹·è´ä¼šå®Œå…¨å¤åˆ¶æ•´ä¸ªå¯¹è±¡ï¼ŒåŒ…æ‹¬è¿™ä¸ªå¯¹è±¡æ‰€åŒ…å«çš„å†…éƒ¨å¯¹è±¡ã€‚ 123456789101112131415161718192021// æµ…æ‹·è´@Overridepublic Address clone() &#123; try &#123; return (Address) super.clone(); &#125; catch (CloneNotSupportedException e) &#123; throw new AssertionError(); &#125;&#125;// æ·±æ‹·è´@Overridepublic Person clone() &#123; try &#123; Person person = (Person) super.clone(); // æ‹·è´å¯¹è±¡ person.setAddress(person.getAddress().clone()); return person; &#125; catch (CloneNotSupportedException e) &#123; throw new AssertionError(); &#125;&#125; Object: æ‰€æœ‰ç±»çš„è¶…ç±»å¯ä»¥ä½¿ç”¨ Object ç±»å‹çš„å˜é‡å¼•ç”¨ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼š Object obj = new Employee(&quot;Harry Hacker&quot;, 35000); è¦æƒ³å¯¹å…¶ä¸­çš„å†…å®¹è¿›è¡Œå…·ä½“çš„æ“ä½œï¼Œ è¿˜éœ€è¦æ¸…æ¥šå¯¹è±¡çš„åŸå§‹ç±»å‹ï¼Œ å¹¶è¿›è¡Œç›¸åº”çš„ç±»å‹è½¬æ¢ï¼š Employee e = (Employee) obj; hashcode() å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„ hashCode å€¼ç›¸ç­‰ï¼Œé‚£è¿™ä¸¤ä¸ªå¯¹è±¡ä¸ä¸€å®šç›¸ç­‰ï¼ˆå“ˆå¸Œç¢°æ’ï¼‰ã€‚ å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„ hashCode å€¼ç›¸ç­‰å¹¶ä¸” equals() æ–¹æ³•ä¹Ÿè¿”å› trueï¼Œæˆ‘ä»¬æ‰è®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ã€‚ å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„ hashCode å€¼ä¸ç›¸ç­‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ä¸ç›¸ç­‰ã€‚ String String ä¸­çš„å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œä¹Ÿå°±å¯ä»¥ç†è§£ä¸ºå¸¸é‡ï¼Œçº¿ç¨‹å®‰å…¨ã€‚ StringBuffer å¯¹æ–¹æ³•åŠ äº†åŒæ­¥é”æˆ–è€…å¯¹è°ƒç”¨çš„æ–¹æ³•åŠ äº†åŒæ­¥é”ï¼Œæ‰€ä»¥æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ StringBuilder å¹¶æ²¡æœ‰å¯¹æ–¹æ³•è¿›è¡ŒåŠ åŒæ­¥é”ï¼Œæ‰€ä»¥æ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚ å¯¹äºä¸‰è€…ä½¿ç”¨çš„æ€»ç»“ï¼š æ“ä½œå°‘é‡çš„æ•°æ®: é€‚ç”¨ String å•çº¿ç¨‹æ“ä½œå­—ç¬¦ä¸²ç¼“å†²åŒºä¸‹æ“ä½œå¤§é‡æ•°æ®: é€‚ç”¨ StringBuilder å¤šçº¿ç¨‹æ“ä½œå­—ç¬¦ä¸²ç¼“å†²åŒºä¸‹æ“ä½œå¤§é‡æ•°æ®: é€‚ç”¨ StringBuffer èŒƒå‹ç¼–è¯‘å™¨å¯ä»¥å¯¹æ³›å‹å‚æ•°è¿›è¡Œæ£€æµ‹ï¼Œå¹¶ä¸”é€šè¿‡æ³›å‹å‚æ•°å¯ä»¥æŒ‡å®šä¼ å…¥çš„å¯¹è±¡ç±»å‹ã€‚ èŒƒå‹ç±»12345678910111213141516//æ­¤å¤„Tå¯ä»¥éšä¾¿å†™ä¸ºä»»æ„æ ‡è¯†ï¼Œå¸¸è§çš„å¦‚Tã€Eã€Kã€Vç­‰å½¢å¼çš„å‚æ•°å¸¸ç”¨äºè¡¨ç¤ºæ³›å‹//åœ¨å®ä¾‹åŒ–æ³›å‹ç±»æ—¶ï¼Œå¿…é¡»æŒ‡å®šTçš„å…·ä½“ç±»å‹public class Generic&lt;T&gt;&#123; private T key; public Generic(T key) &#123; this.key = key; &#125; public T getKey()&#123; return key; &#125;&#125;Generic&lt;Integer&gt; genericInteger = new Generic&lt;Integer&gt;(123456); èŒƒå‹æ¥å£12345678910111213141516171819public interface Generator&lt;T&gt; &#123; public T method();&#125;// ä¸æŒ‡å®šç±»å‹å®ç°æ¥å£class GeneratorImpl&lt;T&gt; implements Generator&lt;T&gt;&#123; @Override public T method() &#123; return null; &#125;&#125;// æŒ‡å®šç±»å‹å®ç°æ¥å£class GeneratorImpl&lt;T&gt; implements Generator&lt;String&gt;&#123; @Override public String method() &#123; return &quot;hello&quot;; &#125;&#125; èŒƒå‹æ–¹æ³•123456789101112 public static &lt; E &gt; void printArray( E[] inputArray ) &#123; for ( E element : inputArray )&#123; System.out.printf( &quot;%s &quot;, element ); &#125; System.out.println(); &#125;// åˆ›å»ºä¸åŒç±»å‹æ•°ç»„ï¼š Integer, Double å’Œ CharacterInteger[] intArray = &#123; 1, 2, 3 &#125;;String[] stringArray = &#123; &quot;Hello&quot;, &quot;World&quot; &#125;;printArray( intArray );printArray( stringArray );","categories":[{"name":"Programming Language","slug":"Programming-Language","permalink":"http://blog.sukiu.top/categories/Programming-Language/"},{"name":"Java","slug":"Programming-Language/Java","permalink":"http://blog.sukiu.top/categories/Programming-Language/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://blog.sukiu.top/tags/Java/"}]},{"title":"Spring Boot æ³¨è§£","slug":"Spring-Boot","date":"2022-07-07T03:35:00.000Z","updated":"2022-07-11T04:59:00.000Z","comments":true,"path":"Framework/SSM/Spring-Boot/","link":"https://javaguide.cn/system-design/framework/spring/spring-common-annotations.html","permalink":"http://blog.sukiu.top/Framework/SSM/Spring-Boot/","excerpt":"Spring Boot makes it easy to create stand-alone, production-grade Spring based Applications that you can â€œjust runâ€â€¦Most Spring Boot applications need very little Spring configuration.","text":"Spring Boot makes it easy to create stand-alone, production-grade Spring based Applications that you can â€œjust runâ€â€¦Most Spring Boot applications need very little Spring configuration.","categories":[{"name":"Framework","slug":"Framework","permalink":"http://blog.sukiu.top/categories/Framework/"},{"name":"SSM","slug":"Framework/SSM","permalink":"http://blog.sukiu.top/categories/Framework/SSM/"}],"tags":[{"name":"SSM","slug":"SSM","permalink":"http://blog.sukiu.top/tags/SSM/"}],"author":"JavaGuide"},{"title":"Spring MVC","slug":"Spring-MVC","date":"2022-07-05T01:16:00.000Z","updated":"2022-07-05T01:24:00.000Z","comments":true,"path":"Framework/SSM/Spring-MVC/","link":"http://www.bjpowernode.com/tutorial_springmvc/","permalink":"http://blog.sukiu.top/Framework/SSM/Spring-MVC/","excerpt":"Spring MVC æä¾›äº†æ¨¡å‹ - è§†å›¾ - æ§åˆ¶çš„ä½“ç³»ç»“æ„å’Œå¯ä»¥ç”¨æ¥å¼€å‘çµæ´»ã€æ¾æ•£è€¦åˆçš„ web åº”ç”¨ç¨‹åºçš„ç»„ä»¶ã€‚ MVC æ¨¡å¼å¯¼è‡´äº†åº”ç”¨ç¨‹åºçš„ä¸åŒæ–¹é¢ (è¾“å…¥é€»è¾‘ã€ä¸šåŠ¡é€»è¾‘å’Œ UI é€»è¾‘) çš„åˆ†ç¦»ï¼ŒåŒæ—¶æä¾›äº†åœ¨è¿™äº›å…ƒç´ ä¹‹é—´çš„æ¾æ•£è€¦åˆã€‚ æ¨¡å‹ï¼ˆmodelï¼‰ï¼šå°è£…äº†åº”ç”¨ç¨‹åºæ•°æ®ï¼Œå¹¶ä¸”é€šå¸¸å®ƒä»¬ç”± POJO ç»„æˆã€‚ è§†å›¾ï¼ˆviewï¼‰ï¼šä¸»è¦ç”¨äºå‘ˆç°æ¨¡å‹æ•°æ®ï¼Œå¹¶ä¸”é€šå¸¸å®ƒç”Ÿæˆå®¢æˆ·ç«¯çš„æµè§ˆå™¨å¯ä»¥è§£é‡Šçš„ HTML è¾“å‡ºã€‚ æ§åˆ¶å™¨ï¼ˆcontrollerï¼‰ï¼šä¸»è¦ç”¨äºå¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œå¹¶ä¸”æ„å»ºåˆé€‚çš„æ¨¡å‹å¹¶å°†å…¶ä¼ é€’åˆ°è§†å›¾å‘ˆç°ã€‚","text":"Spring MVC æä¾›äº†æ¨¡å‹ - è§†å›¾ - æ§åˆ¶çš„ä½“ç³»ç»“æ„å’Œå¯ä»¥ç”¨æ¥å¼€å‘çµæ´»ã€æ¾æ•£è€¦åˆçš„ web åº”ç”¨ç¨‹åºçš„ç»„ä»¶ã€‚ MVC æ¨¡å¼å¯¼è‡´äº†åº”ç”¨ç¨‹åºçš„ä¸åŒæ–¹é¢ (è¾“å…¥é€»è¾‘ã€ä¸šåŠ¡é€»è¾‘å’Œ UI é€»è¾‘) çš„åˆ†ç¦»ï¼ŒåŒæ—¶æä¾›äº†åœ¨è¿™äº›å…ƒç´ ä¹‹é—´çš„æ¾æ•£è€¦åˆã€‚ æ¨¡å‹ï¼ˆmodelï¼‰ï¼šå°è£…äº†åº”ç”¨ç¨‹åºæ•°æ®ï¼Œå¹¶ä¸”é€šå¸¸å®ƒä»¬ç”± POJO ç»„æˆã€‚ è§†å›¾ï¼ˆviewï¼‰ï¼šä¸»è¦ç”¨äºå‘ˆç°æ¨¡å‹æ•°æ®ï¼Œå¹¶ä¸”é€šå¸¸å®ƒç”Ÿæˆå®¢æˆ·ç«¯çš„æµè§ˆå™¨å¯ä»¥è§£é‡Šçš„ HTML è¾“å‡ºã€‚ æ§åˆ¶å™¨ï¼ˆcontrollerï¼‰ï¼šä¸»è¦ç”¨äºå¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œå¹¶ä¸”æ„å»ºåˆé€‚çš„æ¨¡å‹å¹¶å°†å…¶ä¼ é€’åˆ°è§†å›¾å‘ˆç°ã€‚","categories":[{"name":"Framework","slug":"Framework","permalink":"http://blog.sukiu.top/categories/Framework/"},{"name":"SSM","slug":"Framework/SSM","permalink":"http://blog.sukiu.top/categories/Framework/SSM/"}],"tags":[{"name":"SSM","slug":"SSM","permalink":"http://blog.sukiu.top/tags/SSM/"}]},{"title":"Spring","slug":"Spring","date":"2022-07-05T01:08:00.000Z","updated":"2022-07-05T01:16:00.000Z","comments":true,"path":"Framework/SSM/Spring/","link":"","permalink":"http://blog.sukiu.top/Framework/SSM/Spring/","excerpt":"Spring æ˜¯ä¸€ä¸ªå®¹å™¨ã€‚ Spring æ¡†æ¶çš„ç›®æ ‡æ˜¯ä½¿ J2EE å¼€å‘å˜å¾—æ›´å®¹æ˜“ä½¿ç”¨ï¼Œé€šè¿‡å¯ç”¨åŸºäº POJO çš„ç¼–ç¨‹æ¨¡å‹æ¥ä¿ƒè¿›è‰¯å¥½çš„ç¼–ç¨‹å®è·µã€‚","text":"Spring æ˜¯ä¸€ä¸ªå®¹å™¨ã€‚ Spring æ¡†æ¶çš„ç›®æ ‡æ˜¯ä½¿ J2EE å¼€å‘å˜å¾—æ›´å®¹æ˜“ä½¿ç”¨ï¼Œé€šè¿‡å¯ç”¨åŸºäº POJO çš„ç¼–ç¨‹æ¨¡å‹æ¥ä¿ƒè¿›è‰¯å¥½çš„ç¼–ç¨‹å®è·µã€‚ ä»‹ç»ç‰¹ç‚¹ è½»é‡çº§ï¼š20 å¤šä¸ªæ¨¡å—ï¼Œæ¯éš” jar åŒ…åŸºæœ¬å°äº 1Mï¼Œæ ¸å¿ƒåŒ… 3M å·¦å³ é¢å‘æ¥å£ç¼–ç¨‹ï¼šå¯æ‹“å±•ã€å¯ç»´æŠ¤ AOPï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œåº•å±‚åŸç†æ˜¯åŠ¨æ€ä»£ç†ã€‚åˆå¹¶å…¬å…±ä»£ç ï¼Œå•ç‹¬å¼€å‘ æ•´åˆå…¶ä»–æ¡†æ¶ æ ¸å¿ƒ æ§åˆ¶åè½¬ï¼ˆIoCï¼‰ï¼šâ€œè§£è€¦åˆâ€ï¼Œé€šè¿‡ä¾èµ–æ³¨å…¥ DIï¼ˆDependency Injectionï¼‰å®ç° é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰ï¼šâ€œæ³¨å…¥â€ï¼Œä¸‹é¢é€šè¿‡ AspectJ å®ç° ä¸‰å±‚æ¶æ„é Spring å®ä½“ç±» æ•°æ®è®¿é—®å±‚ dao Mapper.javaï¼ˆæ¥å£ï¼‰ MapperImpl.javaï¼ˆå®ç°ç±»ï¼‰ ä¸šåŠ¡é€»è¾‘å±‚ Service.javaï¼ˆæ¥å£ï¼‰ ServiceImpl.javaï¼ˆå®ç°ç±»ï¼‰ ç•Œé¢å±‚ controller Spring æ¥ç®¡ä¸ new å¯¹è±¡ï¼Œä½¿ç”¨ IoC åœ¨ applicationContext.xml ä¸­åˆ›å»ºï¼Œæ³¨æ„é¦–å…ˆéœ€è¦ç©ºæ„é€ æ–¹æ³•å’Œ setXXX()ã€‚ IoCIoC æ˜¯ä¸€ç§æ€æƒ³ï¼Œç”± Spring å®¹å™¨è¿›è¡Œå¯¹è±¡åˆ›å»ºå’Œä¾èµ–æ³¨å…¥ï¼Œç¨‹åºå‘˜ç›´æ¥ä½¿ç”¨ã€‚ æ­£è½¬ï¼šç¨‹åºå‘˜å¯¹è±¡åˆ›å»ºå’Œä¾èµ–æ³¨å…¥ Student stu = new Student() åè½¬ï¼šSpring å®¹å™¨å¯¹è±¡åˆ›å»ºå’Œä¾èµ–æ³¨å…¥ &lt;bean id=&quot;stu&quot; class=&quot;â€¦&quot;&gt;&lt;/bean&gt; åŸºäº XML åˆ›å»ºå¯¹è±¡ï¼š&lt;bean id=&quot;stu&quot; class=&quot;â€¦&quot;&gt;&lt;/bean&gt; å¯¹è±¡èµ‹å€¼ï¼š setter æ³¨å…¥ï¼šå¿…é¡»æä¾›æ— å‚æ„é€ æ–¹æ³•ï¼Œå¿…é¡»æä¾› setXXX() ç®€å•ç±»å‹æ³¨å…¥ï¼švalue å±æ€§ &lt;property name=&quot;age&quot; value=&quot;11&quot;/&gt; å¼•ç”¨ç±»å‹æ³¨å…¥ï¼šref å±æ€§ &lt;property name=&quot;school&quot; ref=&quot;sch&quot;/&gt; æ„é€ æ–¹æ³•æ³¨å…¥ï¼š ä½¿ç”¨æ„é€ æ–¹æ³•çš„å‚æ•°åç§°ï¼š&lt;constructor-arg name=&quot;school&quot; value=&quot;Hohai&quot;/&gt; ä½¿ç”¨æ„é€ æ–¹æ³•çš„å‚æ•°ä¸‹æ ‡ï¼š&lt;constructor-arg index=&quot;0&quot; value=&quot;Hohai&quot;/&gt; ä½¿ç”¨é»˜è®¤æ„é€ æ–¹æ³•çš„å‚æ•°é¡ºåºï¼š&lt;constructor-arg value=&quot;Hohai&quot;/&gt; åŸºäºæ³¨è§£çš„ IoCä¹Ÿç§° DIï¼Œæ˜¯ IoC æ˜¯å…·ä½“å®ç°çš„æŠ€æœ¯ã€‚å³ä» xml æ¢ä¸ºæ³¨è§£ annotationã€‚ åˆ›å»ºå¯¹è±¡çš„æ³¨è§£ @Componentï¼šåˆ›å»ºä»»æ„å¯¹è±¡ @Controllerï¼šåˆ›å»ºæ§åˆ¶å™¨å¯¹è±¡ï¼Œæ¥æ”¶ç”¨æˆ·è¯·æ±‚ï¼Œè¿”å›ç»“æœç»™å®¢æˆ·ç«¯ @Serviceï¼šåˆ›å»ºä¸šåŠ¡é€»è¾‘å±‚å¯¹è±¡ï¼Œè´Ÿè´£å‘ä¸‹è®¿é—®æ•°æ®è®¿é—®å±‚ï¼Œå¤„ç†å®Œæ¯•è¿”å›ç»“æœç»™ç•Œé¢å±‚ @Respositoryï¼šåˆ›å»ºæ•°æ®è®¿é—®å±‚å¯¹è±¡ï¼Œè´Ÿè´£æ•°æ®åº“å¢åˆ æ”¹æŸ¥æ“ä½œ ä¾èµ–æ³¨å…¥çš„æ³¨è§£ å€¼ç±»å‹ï¼ˆ8 ç§åŸºæœ¬ç±»å‹å’Œ Stringï¼‰çš„æ³¨å…¥ @Valueï¼šç»™ç®€å•ç±»å‹æ³¨å…¥å€¼ å¼•ç”¨ç±»å‹çš„æ³¨å…¥ @Autowiredï¼šä½¿ç”¨ç±»å‹æ³¨å…¥å€¼ï¼Œä»æ•´ä¸ª Bean å·¥å‚æœç´¢åŒæºç±»å‹çš„å¯¹è±¡è¿›è¡Œæ³¨å…¥ åŒæºï¼šè¢«æ³¨å…¥çš„ç±»å‹ï¼ˆStudent ä¸­çš„ Schoolï¼‰ä¸æ³¨å…¥çš„ç±»å‹å®Œå…¨ç›¸åŒ&#x2F;çˆ¶å­&#x2F;æ¥å£å’Œå®ç°ç±»çš„ç±»å‹ çˆ¶å­ç±»ç”¨ä¸‹é¢çš„æ³¨è§£åŒºåˆ« @Qualifierï¼šä½¿ç”¨åç§°æ³¨å…¥å€¼ï¼Œä»æ•´ä¸ª Bean å·¥å‚æœç´¢ç›¸åŒåç§°çš„å¯¹è±¡è¿›è¡Œæ³¨å…¥ éœ€è¦ä¸Šé¢é‚£ä¸ªæ³¨è§£ï¼Œå¦åˆ™æ— æ³•æ³¨å…¥ è¦åœ¨ Spring çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ·»åŠ åŒ…æ‰«æï¼š&lt;context:component-scan base-package=&quot;top.sukiu.annotation&quot;/&gt; å•ä¸ªåŒ…æ‰«æï¼ˆæ¨èï¼‰ï¼šä¸€ä¸ªä¸ªåŒ…æ‰« å¤šä¸ªåŒ…æ‰«æï¼šä»¥é€—å·&#x2F;ç©ºæ ¼&#x2F;åˆ†å·åˆ†éš” æ‰«ææ ¹åŒ…ï¼ˆä¸æ¨èï¼‰ AspectJä¸€ä¸ªä¼˜ç§€çš„é¢å‘åˆ‡é¢çš„æ¡†æ¶ï¼Œæ‹“å±• Java è¯­è¨€ï¼Œæä¾›å¼ºå¤§çš„åˆ‡é¢å®ç°ã€‚ åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼šexecution(è®¿é—®æƒé™ æ–¹æ³•è¿”å›å€¼ æ–¹æ³•å£°æ˜ï¼ˆå‚æ•°ï¼‰å¼‚å¸¸ç±»å‹)ï¼Œç®€åŒ–å execution(æ–¹æ³•è¿”å›å€¼ æ–¹æ³•å£°æ˜ï¼ˆå‚æ•°ï¼‰ *ï¼šä»»æ„å­—ç¬¦ ..ï¼šå‡ºç°åœ¨ æ–¹æ³•å£°æ˜çš„å‚æ•°ä¸­ï¼šä»»æ„å‚æ•° è·¯å¾„ä¸­ï¼šæœ¬è·¯å¾„åŠå…¶æ‰€æœ‰å­è·¯å¾„ ä¾‹å­ï¼š execution(public * *(..))ï¼šä»»æ„çš„å…¬å…±æ–¹æ³• execution(* set*(..))ï¼šä»»æ„ä»¥ set å¼€å¤´çš„æ–¹æ³• execution(* com.xyz.service.impl.*.*(..))ï¼šä»»æ„è¿”å›å€¼ç±»å‹ï¼Œåœ¨æ­¤åŒ…ä»»æ„ç±»å‹çš„ä»»æ„æ–¹æ³•çš„ä»»æ„å‚æ•° å¸¸ç”¨çš„é€šçŸ¥ç±»å‹ï¼š å‰ç½®é€šçŸ¥ @Beforeï¼šåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰åˆ‡å…¥åˆ‡é¢åŠŸèƒ½ã€‚ 1234567891011/** å‰ç½®é€šçŸ¥è§„èŒƒï¼š* 1ï¼‰æƒé™public* 2ï¼‰è¿”å›å€¼void* 3ï¼‰æ–¹æ³•åè‡ªå®šä¹‰* 4ï¼‰æ–¹æ³•æ— å‚æ•°ï¼Œæœ‰åªèƒ½æ˜¯JoinPointç±»å‹ï¼ˆåŒ…å«ç›®æ ‡æ–¹æ³•çš„ç­¾åå’Œå‚æ•°ï¼‰*/@Before(value = &quot;execution(public * com.aspect.SomeServiceImpl.*(..))&quot;)public void myBefore() &#123; System.out.println(&quot;å‰ç½®åŠŸèƒ½åˆ‡å…¥&quot;);&#125; åç½®é€šçŸ¥ @AfterReturningï¼šåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œååˆ‡å…¥åˆ‡é¢åŠŸèƒ½ã€‚ 123456789101112/** åç½®é€šçŸ¥è§„èŒƒï¼š* 1ï¼‰æƒé™public* 2ï¼‰è¿”å›å€¼void* 3ï¼‰æ–¹æ³•åè‡ªå®šä¹‰* 4ï¼‰æ–¹æ³•æœ‰/æ— å‚æ•°ï¼ˆä¸€èˆ¬æœ‰ï¼‰*/@AfterReturning(value = &quot;execution(public * com.aspect.SomeServiceImpl.*(..))&quot;, returning = &quot;obj&quot;)public void myAfterReturning(Object obj) &#123; System.out.println(&quot;åç½®åŠŸèƒ½åˆ‡å…¥&quot;);&#125;// åŸºæœ¬ç±»å‹å’ŒStringçš„è¿”å›å€¼æ— æ³•æ”¹å˜ ç¯ç»•é€šçŸ¥ @Aroundï¼šé€šè¿‡æ‹¦æˆªç›®æ ‡æ–¹æ³•ï¼Œåœ¨å‰åå¢å¼ºåŠŸèƒ½çš„é€šçŸ¥ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œä¸€èˆ¬äº‹åŠ¡ä½¿ç”¨ã€‚ 123456789101112131415161718/** ç¯ç»•é€šçŸ¥è§„èŒƒï¼š* 1ï¼‰æƒé™public* 2ï¼‰è¿”å›å€¼ = ç›®æ ‡æ–¹æ³•è¿”å›å€¼* 3ï¼‰æ–¹æ³•åè‡ªå®šä¹‰* 4ï¼‰æ–¹æ³•æœ‰å‚æ•° = ç›®æ ‡æ–¹æ³•*/ @Around(value = &quot;execution(public * com.aspect.SomeServiceImpl.*(..))&quot;)public String myAround(ProceedingJoinPoint p) throws Throwable&#123; // å‰ç½® System.out.println(&quot;Before&quot;); // ç›®æ ‡æ–¹æ³• Object obj = p.proceed(p.getArgs()); // åç½® System.out.println(&quot;After&quot;); return obj.toString().toUpperCase();&#125;// å¯ä»¥ä¿®æ”¹è¿”å›å€¼ æœ€ç»ˆé€šçŸ¥ @Afterï¼šæ— è®ºç›®æ ‡æ–¹æ³•æ˜¯å¦æ­£å¸¸æ‰§è¡Œï¼Œæœ€ç»ˆé€šçŸ¥éƒ½ä¼šæ‰§è¡Œã€‚ 1234567891011/** æœ€ç»ˆé€šçŸ¥è§„èŒƒï¼š* 1ï¼‰æƒé™public* 2ï¼‰è¿”å›å€¼void* 3ï¼‰æ–¹æ³•åè‡ªå®šä¹‰* 4ï¼‰æ–¹æ³•æ— å‚æ•°ï¼Œæœ‰åªèƒ½æ˜¯JoinPointç±»å‹ï¼ˆåŒ…å«ç›®æ ‡æ–¹æ³•çš„ç­¾åå’Œå‚æ•°ï¼‰*/@After(value = &quot;execution(public * com.aspect.SomeServiceImpl.*(..))&quot;)public void myAfter() &#123; System.out.println(&quot;æœ€ç»ˆåŠŸèƒ½åˆ‡å…¥&quot;);&#125; å®šä¹‰åˆ‡å…¥ç‚¹ @Pointcutï¼šå¤šä¸ªåˆ‡é¢åˆ‡å…¥åŒä¸€ä¸ªåˆ‡å…¥ç‚¹ï¼Œèµ·åˆ«å 1234567@Pointcut(value = &quot;execution(public * com.aspect.SomeServiceImpl.*(..))&quot;)public void myCut()&#123;&#125;@Before(value = &quot;myCut()&quot;)public void myBefore() &#123; System.out.println(&quot;å‰ç½®åŠŸèƒ½åˆ‡å…¥&quot;);&#125; JDK&#x2F;CGLib åŠ¨æ€ä»£ç†applicationContext.xml ä¸­ï¼š &lt;aop:aspectj-autoproxy/&gt;ï¼šé»˜è®¤ JDK åŠ¨æ€ä»£ç†ï¼Œå¿…é¡»ä½¿ç”¨æ¥å£ç±»å‹ &lt;aop:aspectj-autoproxy proxy-target-class=&quot;true&quot;/&gt;ï¼šåˆ‡æ¢ CGLib å­ç±»ä»£ç†ï¼Œå¯ä»¥ç”¨æ¥å£æˆ–è€…å®ç°ç±» ä¸€ç›´ç”¨æ¥å£å³å¯ï¼ï¼ï¼","categories":[{"name":"Framework","slug":"Framework","permalink":"http://blog.sukiu.top/categories/Framework/"},{"name":"SSM","slug":"Framework/SSM","permalink":"http://blog.sukiu.top/categories/Framework/SSM/"}],"tags":[{"name":"SSM","slug":"SSM","permalink":"http://blog.sukiu.top/tags/SSM/"}]},{"title":"MyBatis","slug":"MyBatis","date":"2022-06-30T08:48:10.000Z","updated":"2022-07-03T13:51:00.000Z","comments":true,"path":"Framework/SSM/MyBatis/","link":"","permalink":"http://blog.sukiu.top/Framework/SSM/MyBatis/","excerpt":"MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæ”¯æŒè‡ªå®šä¹‰ SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚ å…é™¤äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç ä»¥åŠè®¾ç½®å‚æ•°å’Œè·å–ç»“æœé›†çš„å·¥ä½œã€‚ å¯ä»¥é€šè¿‡ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸå§‹ç±»å‹ã€æ¥å£å’Œ Java POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚","text":"MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæ”¯æŒè‡ªå®šä¹‰ SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚ å…é™¤äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç ä»¥åŠè®¾ç½®å‚æ•°å’Œè·å–ç»“æœé›†çš„å·¥ä½œã€‚ å¯ä»¥é€šè¿‡ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸå§‹ç±»å‹ã€æ¥å£å’Œ Java POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚ XML é…ç½®æ›´å¤šé…ç½®å‚è€ƒï¼šå®˜æ–¹æ–‡æ¡£ XMLé…ç½®é¡¹ 12345678910111213141516171819202122232425262728293031323334353637383940&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE configuration PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;&lt;configuration&gt; &lt;!-- è¯»å–æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt; &lt;properties resource=&quot;jdbc.properties&quot;/&gt; &lt;!-- è®¾ç½®æ—¥å¿—è¾“å‡º --&gt; &lt;settings&gt; &lt;setting name=&quot;logImpl&quot; value=&quot;STDOUT_LOGGING&quot;/&gt; &lt;/settings&gt; &lt;!-- æ³¨å†Œå®ä½“ç±»åˆ«å --&gt; &lt;typeAliases&gt; &lt;!-- å•ä¸ªæ³¨å†Œåˆ«å --&gt; &lt;typeAlias type=&quot;com.proj.Student&quot; alias=&quot;student&quot;/&gt; &lt;!-- æ‰¹é‡æ³¨å†Œåˆ«åï¼šç±»åçš„é©¼å³°å‘½å --&gt; &lt;!-- &lt;package name=&quot;com.proj&quot;/&gt; --&gt; &lt;/typeAliases&gt; &lt;!-- æ•°æ®åº“é…ç½® --&gt; &lt;environments default=&quot;development&quot;&gt; &lt;environment id=&quot;development&quot;&gt; &lt;!-- typeï¼šäº‹åŠ¡ç®¡ç†å™¨ JDBCï¼šç¨‹åºå‘˜ç®¡ç† MANAGEDï¼šSpringç®¡ç† --&gt; &lt;transactionManager type=&quot;JDBC&quot;/&gt; &lt;!-- æ•°æ®åº“è¿æ¥æ±  --&gt; &lt;dataSource type=&quot;POOLED&quot;&gt; &lt;property name=&quot;driver&quot; value=&quot;$&#123;driver&#125;&quot;/&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;url&#125;&quot;/&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;username&#125;&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;password&#125;&quot;/&gt; &lt;/dataSource&gt; &lt;/environment&gt; &lt;/environments&gt; &lt;!-- æ³¨å†Œmapper --&gt; &lt;mappers&gt; &lt;mapper resource=&quot;StudentMapper.xml&quot;/&gt; &lt;/mappers&gt;&lt;/configuration&gt; æ•°æ®åº“è¿æ¥æ± ï¼š ä¸€ä¸ªä¸­é—´å±‚ï¼Œåˆå§‹åŒ–å¤šä¸ªè¿æ¥ï¼Œå»ºç«‹è¿æ¥ä»è¿æ¥æ± å–å‡ºï¼Œæ–­å¼€è¿æ¥æ”¾å›è¿æ¥æ± ï¼Œå¼€é”€æ¯”ç›´æ¥è¿æ¥æ–­å¼€å°å¾—å¤šã€‚ XML æ˜ å°„å ä½ç¬¦çš„åŒºåˆ« #&#123;&#125;: å¯¹éå­—ç¬¦ä¸²å‚æ•°çš„å ä½ç¬¦ï¼Œå¯ä»¥æœ‰æ•ˆé˜²æ­¢ SQL æ³¨å…¥ å…¥å‚æ˜¯ç®€å•æ•°æ®ç±»å‹ï¼ˆé™¤ Stringï¼‰ï¼Œ#&#123;&#125; å†…å¯ä»¥ä»»æ„å†™ å…¥å‚æ˜¯å¯¹è±¡ç±»å‹ï¼Œ#&#123;&#125; å†…å¿…é¡»æ˜¯å¯¹è±¡æˆå‘˜å˜é‡åç§° $&#123;&#125;: å¯¹å­—ç¬¦ä¸²çš„æ‹¼æ¥æ›¿æ¢ï¼Œå¯ä»¥æ›¿æ¢åˆ—åå’Œè¡¨åï¼Œå­˜åœ¨ SQL æ³¨å…¥é£é™©ï¼Œå°½é‡å°‘ç”¨ å…¥å‚æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆæœ‰ Stringï¼‰ï¼Œ$&#123;&#125; å†…å¿…é¡»æ˜¯ value å…¥å‚æ˜¯å¯¹è±¡ç±»å‹ï¼Œ$&#123;&#125; å†…å¿…é¡»æ˜¯å¯¹è±¡æˆå‘˜å˜é‡åç§° ä½¿ç”¨ #&#123;&#125; é˜²æ­¢ SQL æ³¨å…¥ï¼š é‡åˆ°æ¨¡ç³ŠæŸ¥è¯¢éœ€è¦æ‹¼æ¥å­—ç¬¦ä¸²æ—¶ï¼šwhere name like &#39;%$&#123;name&#125;%&#39; ä½¿ç”¨ concat å‡½æ•°æ”¹ä¸ºï¼šwhere name like concat(&#39;%&#39;,#&#123;name&#125;,&#39;%&#39;) å­—ç¬¦ä¸²æ›¿æ¢åªèƒ½ä½¿ç”¨ $&#123;&#125; ï¼Œè¯¦è§ä¸‹ä¸€èŠ‚ä»£ç  åˆ›å»ºæ˜ å°„é…ç½®æ–‡ä»¶æ›´å¤šé…ç½®å‚è€ƒï¼šå®˜æ–¹æ–‡æ¡£ XMLæ˜ å°„å™¨ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;!-- namespaceï¼šå‘½åç©ºé—´ï¼ˆåŒ…åï¼‰ï¼Œç”¨æ¥åŒºåˆ†ä¸åŒæ–‡ä»¶ä¸­ç›¸åŒçš„idå±æ€§ --&gt;&lt;mapper namespace=&quot;com.proj.mapper.UsersMapper&quot;&gt; &lt;!-- æŸ¥è¯¢å…¨éƒ¨æ•°æ® --&gt; &lt;select id=&quot;getAll&quot; resultType=&quot;users&quot;&gt; select id, username, birthday, sex, address from users &lt;/select&gt; &lt;!-- é€šè¿‡ä¸»é”®idæŸ¥è¯¢ --&gt; &lt;select id=&quot;getById&quot; parameterType=&quot;int&quot; resultType=&quot;users&quot;&gt; select id, username, birthday, sex, address from users where id = #&#123;id&#125; &lt;/select&gt; &lt;!-- é€šè¿‡åç§°æ¨¡ç³ŠæŸ¥è¯¢ --&gt; &lt;select id=&quot;getByName&quot; parameterType=&quot;string&quot; resultType=&quot;users&quot;&gt; select id, username, birthday, sex, address from users where username like concat(&#x27;%&#x27;, #&#123;userName&#125;, &#x27;%&#x27;) &lt;/select&gt; &lt;!-- æ’å…¥æ•°æ® - å‚æ•°å¯¹åº”å®ä½“ç±»å±æ€§ - è·å–æ’å…¥åçš„ä¸»é”®id --&gt; &lt;insert id=&quot;insert&quot; parameterType=&quot;users&quot;&gt; &lt;selectKey keyProperty=&quot;id&quot; resultType=&quot;int&quot; order=&quot;AFTER&quot;&gt; select last_insert_id() &lt;/selectKey&gt; insert into users (username, birthday, sex, address) values (#&#123;userName&#125;, #&#123;birthday&#125;, #&#123;sex&#125;, #&#123;address&#125;) &lt;/insert&gt; &lt;!-- æŒ‰ä¸»é”®åˆ é™¤æ•°æ® --&gt; &lt;delete id=&quot;delete&quot; parameterType=&quot;int&quot;&gt; delete from users where id = #&#123;id&#125; &lt;/delete&gt; &lt;!-- æ›´æ–°æ•°æ® --&gt; &lt;update id=&quot;update&quot; parameterType=&quot;users&quot;&gt; update users set username=#&#123;userName&#125;, birthday=#&#123;birthday&#125;, sex=#&#123;sex&#125;, address=#&#123;address&#125; where id = #&#123;id&#125; &lt;/update&gt; &lt;!-- å‚æ•°è¶…è¿‡ä¸€ä¸ªå‚æ•°å°±ä¸å†™ --&gt; &lt;select id=&quot;getByNameOrAddress&quot; resultType=&quot;users&quot;&gt; select id, username, birthday, sex, address from users where $&#123;col&#125; like concat(&#x27;%&#x27;, #&#123;val&#125;, &#x27;%&#x27;) &lt;/select&gt;&lt;/mapper&gt; æµ‹è¯•ä½¿ç”¨å¢åˆ æ”¹éœ€è¦ commit ï¼ï¼ï¼ 12345678910111213141516171819202122232425262728public class MyTest &#123; SqlSession sqlSession; @Before public void openSqlSession() throws IOException &#123; // æ–‡ä»¶æµè¯»å–æ ¸å¿ƒé…ç½®æ–‡ä»¶ InputStream in = Resources.getResourceAsStream(&quot;SqlMapConfig.xml&quot;); // åˆ›å»ºSqlSessionFactoryå·¥å‚ SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in); // å–å‡ºsqlSessionå¯¹è±¡ sqlSession = factory.openSession(); &#125; @After public void closeSqlSession() &#123; // å…³é—­sqlSession sqlSession.close(); &#125; @Test public void test() &#123; // å®ŒæˆæŸ¥è¯¢æ“ä½œ List&lt;Student&gt; list = sqlSession.selectList(&quot;om.proj.mapper.UsersMapper&quot;); list.forEach(System.out::println); // å¢åˆ æ”¹éœ€è¦commit // sqlSession.commit(); &#125;&#125; åŠ¨æ€ä»£ç†åŠ¨æ€ä»£ç†åå°±ä¸éœ€è¦ä» xml ä¸­å–å‡ºæ‰§è¡Œæ–¹æ³•ï¼Œé€šè¿‡ç»Ÿä¸€çš„ä»£ç†æ¥å£ç›´æ¥è°ƒç”¨ã€‚ åˆ›å»ºä»£ç†æ¥å£123456789101112131415161718192021222324252627282930package com.proj.mapper;import com.proj.pojo.Users;import org.apache.ibatis.annotations.Param;import java.util.List;public interface UsersMapper &#123; List&lt;Users&gt; getAll(); Users getById(int id); List&lt;Users&gt; getByName(String userName); int insert(Users users); int delete(int id); int update(Users users); // å¤šä¸ªå‚æ•°ä½¿ç”¨@Param List&lt;Users&gt; getByNameOrAddress( @Param(&quot;col&quot;) String col, @Param(&quot;val&quot;) String val );&#125; ä¿®æ”¹é…ç½®æ–‡ä»¶æ›´æ”¹ä¸ºä»£ç†æ¥å£çš„ reference 123456789&lt;mappers&gt; &lt;!-- ä¿®æ”¹å‰ &lt;mapper resource=&quot;StudentMapper.xml&quot;/&gt;--&gt; &lt;!-- å•ä¸ªæ³¨å†Œ --&gt; &lt;mapper class=&quot;com.proj.mapper.UsersMapper&quot;/&gt; &lt;!-- æ‰¹é‡æ³¨å†Œï¼šæ¨è --&gt; &lt;package name=&quot;com.proj.mapper&quot;/&gt;&lt;/mappers&gt; æµ‹è¯•ä½¿ç”¨1234567891011121314151617181920212223242526272829303132333435363738394041424344454647public class MyTest &#123; SqlSession sqlSession; UsersMapper usersMapper; SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;); @Before public void openSqlSession() throws IOException &#123; // æ–‡ä»¶æµè¯»å–æ ¸å¿ƒé…ç½®æ–‡ä»¶ InputStream in = Resources.getResourceAsStream(&quot;SqlMapConfig.xml&quot;); // åˆ›å»ºSqlSessionFactoryå·¥å‚ SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in); // å–å‡ºsqlSessionå¯¹è±¡ sqlSession = factory.openSession(); // åŠ¨æ€ä»£ç†å¯¹è±¡ usersMapper = sqlSession.getMapper(UsersMapper.class); &#125; @After public void closeSqlSession() &#123; // å…³é—­sqlSession sqlSession.close(); &#125; @Test public void testGetAll() &#123; List&lt;Users&gt; list = usersMapper.getAll(); list.forEach(System.out::println); &#125; @Test public void testGetByNameOrAddress()&#123; // List&lt;Users&gt; list1 = usersMapper.getByNameOrAddress(&quot;username&quot;,&quot;å°&quot;); // list1.forEach(System.out::println); List&lt;Users&gt; list2= usersMapper.getByNameOrAddress(&quot;address&quot;,&quot;å¸‚&quot;); list2.forEach(System.out::println); &#125; @Test public void testInsert() throws ParseException &#123; Users u = new Users(&quot;æ–°å¢&quot;, dateFormat.parse(&quot;2000-01-01&quot;), &quot;1&quot;, &quot;åŒ—äº¬å¸‚&quot;); int num = usersMapper.insert(u); sqlSession.commit(); // è·å–ä¸»é”® System.out.println(u.getId()); &#125; åŠ¨æ€ SQLå®˜æ–¹æ–‡æ¡£ï¼šåŠ¨æ€SQL åŠ¨æ€ SQL ä½¿æ¡ä»¶åˆ¤æ–­æ›´ä¸ºç®€å•ï¼š å®šä¹‰ä»£ç ç‰‡æ®µ é€»è¾‘åˆ¤æ–­ å¾ªç¯ï¼ˆæ‰¹é‡ï¼‰å¤„ç† &lt;sql&gt; å’Œ &lt;include&gt; &lt;sql&gt;ï¼šå®šä¹‰ä»£ç ç‰‡æ®µ &lt;include&gt;ï¼šä½¿ç”¨ä»£ç ç‰‡æ®µã€‚ 123456789101112&lt;mapper namespace=&quot;com.proj.mapper.UsersMapper&quot;&gt; &lt;!-- å®šä¹‰ä»£ç ç‰‡æ®µ --&gt; &lt;sql id=&quot;allCols&quot;&gt; id, username, birthday, sex, address &lt;/sql&gt; &lt;!-- æŸ¥è¯¢å…¨éƒ¨æ•°æ® --&gt; &lt;select id=&quot;getAll&quot; resultType=&quot;users&quot;&gt; select &lt;include refid=&quot;allCols&quot;/&gt; from users &lt;/select&gt;&lt;/mapper&gt; &lt;if&gt; &lt;if&gt;ï¼šæ¡ä»¶åˆ¤æ–­ &lt;where&gt; &lt;where&gt;ï¼šå¤šæ¡ä»¶æ‹¼æ¥ï¼Œåœ¨æŸ¥åˆ æ”¹ä½¿ç”¨ å¤šæ¡ä»¶æ‹¼æ¥ï¼š 12345678910111213141516171819&lt;select id=&quot;getByCondition&quot; parameterType=&quot;users&quot; resultType=&quot;users&quot;&gt; select &lt;include refid=&quot;allCols&quot;/&gt; from users &lt;where&gt; &lt;if test=&quot;userName!=null and userName!=&#x27;&#x27;&quot;&gt; and username like concat(&#x27;%&#x27;,##&#123;userName&#125;,&#x27;%&#x27;) &lt;/if&gt; &lt;if test=&quot;birthday!=null&quot;&gt; and birthday=##&#123;userName&#125; &lt;/if&gt; &lt;if test=&quot;sex!=null and sex!=&#x27;&#x27;&quot;&gt; and sex=##&#123;sex&#125; &lt;/if&gt; &lt;if test=&quot;address!=null and address!=&#x27;&#x27;&quot;&gt; and address like concat(&#x27;%&#x27;,##&#123;address&#125;,&#x27;%&#x27;) &lt;/if&gt; &lt;/where&gt; &lt;/select&gt; æµ‹è¯•ï¼š 12345678@Testpublic void testGetByCondition() &#123; Users u = new Users(); u.setSex(&quot;1&quot;); u.setUserName(&quot;å°&quot;); List&lt;Users&gt; list = usersMapper.getByCondition(u); list.forEach(System.out::println);&#125; &lt;set&gt; setï¼šæœ‰é€‰æ‹©åœ°è¿›è¡Œæ›´æ–°å¤„ç†ï¼Œè‡³å°‘æ›´æ–°ä¸€åˆ— æœ‰é€‰æ‹©åœ°æ›´æ–°ï¼š 123456789101112131415161718&lt;update id=&quot;updateBySet&quot; parameterType=&quot;users&quot;&gt; update users &lt;set&gt; &lt;if test=&quot;userName!=null and userName!=&#x27;&#x27;&quot;&gt; username=##&#123;userName&#125;, &lt;/if&gt; &lt;if test=&quot;birthday!=null&quot;&gt; birthday=##&#123;userName&#125;, &lt;/if&gt; &lt;if test=&quot;sex!=null and sex!=&#x27;&#x27;&quot;&gt; sex=##&#123;sex&#125;, &lt;/if&gt; &lt;if test=&quot;address!=null and address!=&#x27;&#x27;&quot;&gt; address=##&#123;address&#125;, &lt;/if&gt; &lt;/set&gt; where id = ##&#123;id&#125; &lt;/update&gt; æµ‹è¯•ï¼š 12345678@Testpublic void testUpdateBySet()&#123; Users u = new Users(); u.setId(3); u.setUserName(&quot;æ–°åå­—&quot;); usersMapper.updateBySet(u); sqlSession.commit();&#125; &lt;foreach&gt; &lt;foreach&gt;ï¼šå¾ªç¯éå†ï¼Œå®Œæˆå¾ªç¯æ¡ä»¶æŸ¥è¯¢ï¼Œæ‰¹é‡å¢åˆ æ”¹ æ‰¹é‡æ“ä½œï¼š 12345678910111213141516 &lt;select id=&quot;getByIds&quot; resultType=&quot;users&quot;&gt; select &lt;include refid=&quot;allCols&quot;/&gt; from users where id in &lt;foreach collection=&quot;array&quot; item=&quot;item&quot; separator=&quot;,&quot; open=&quot;(&quot; close=&quot;)&quot;&gt; ##&#123;item&#125; &lt;/foreach&gt; &lt;/select&gt;&lt;insert id=&quot;insertBatch&quot;&gt; insert into users (username, birthday, sex, address) values &lt;foreach collection=&quot;list&quot; item=&quot;u&quot; separator=&quot;,&quot;&gt; (##&#123;u.userName&#125;, #&#123;u.birthday&#125;, #&#123;u.sex&#125;, #&#123;u.address&#125;) &lt;/foreach&gt; &lt;/insert&gt; æµ‹è¯•ï¼š 123456@Testpublic void testGetByIds() &#123; Integer[] array = &#123;2, 4, 6&#125;; List&lt;Users&gt; list = usersMapper.getByIds(array); list.forEach(System.out::println);&#125; æ‰¹é‡æ›´æ–°å…è®¸å¤šè¡Œæ“ä½œï¼šåœ¨ jdbc.properties ä¸­çš„æ•°æ®åº“ url ä¸­æ·»åŠ  &amp;allowMultiQueries=true 1234567891011121314151617181920&lt;update id=&quot;updateBySet&quot; parameterType=&quot;users&quot;&gt; &lt;foreach collection=&quot;list&quot; item=&quot;u&quot; separator=&quot;;&quot;&gt; update users &lt;set&gt; &lt;if test=&quot;u.userName!=null and u.userName!=&#x27;&#x27;&quot;&gt; username=#&#123;u.userName&#125;, &lt;/if&gt; &lt;if test=&quot;u.birthday!=null&quot;&gt; birthday=#&#123;u.userName&#125;, &lt;/if&gt; &lt;if test=&quot;u.sex!=null and u.sex!=&#x27;&#x27;&quot;&gt; sex=#&#123;u.sex&#125;, &lt;/if&gt; &lt;if test=&quot;u.address!=null and u.address!=&#x27;&#x27;&quot;&gt; address=#&#123;u.address&#125;, &lt;/if&gt; &lt;/set&gt; where id = #&#123;u.id&#125; &lt;/foreach&gt; &lt;/update&gt; Mapå…¥å‚å¤šä¸ªå…¥å‚å¤šä¸ªï¼Œå¯ä»¥æŒ‡å®šå‚æ•°ä½ç½®ä¼ å‚ï¼Œæ˜¯å®ä½“ç±»åŒ…å«ä¸ä½çš„æ¡ä»¶ã€‚ å®ä½“ç±»åªèƒ½å°è£…æˆå‘˜å˜é‡çš„æ¡ä»¶ï¼Œå¦‚æœæŸä¸ªæˆå‘˜å˜é‡æœ‰åŒºé—´èŒƒå›´çš„åˆ¤æ–­ï¼Œæˆ–æœ‰ä¸¤ä¸ªå€¼å¤„ç†ï¼Œåˆ™å®ä½“ç±»æ— æ³•åŒ…å«ã€‚ æ ¹æ®ç”Ÿæ—¥èŒƒå›´æŸ¥è¯¢ï¼š 123456789 &lt;!-- List&lt;Users&gt; getByBirthday(Date begin, Date end); --&gt;&lt;select id=&quot;getByBirthday&quot; resultType=&quot;users&quot;&gt; select &lt;include refid=&quot;allCols&quot;/&gt; from users where birthday between #&#123;arg0&#125; and #&#123;arg1&#125; &lt;/select&gt; ä¹Ÿå¯ä»¥å’ŒåŠ¨æ€ä»£ç†é‡Œä¸€æ ·ï¼Œç”¨ @param åŒºåˆ†å‚æ•° å…¥å‚ Mapå…¥å‚è¶…è¿‡ 1 ä¸ªä»¥ä¸Šï¼Œä½¿ç”¨ map å°è£…æŸ¥è¯¢æ¡ä»¶ï¼ŒæŸ¥è¯¢æ¡ä»¶æ›´æ˜ç¡®ã€‚ map çš„ key å’Œ xml ä¸­çš„å‚æ•°åå¯¹åº” 123456789 &lt;!-- List&lt;Users&gt; getByMap(Map map); --&gt;&lt;select id=&quot;getByMap&quot; resultType=&quot;users&quot;&gt; select &lt;include refid=&quot;allCols&quot;/&gt; from users where birthday between #&#123;birthdayBegin&#125; and #&#123;birthdayEnd&#125; &lt;/select&gt; è¿”å› Mapå¦‚æœè¿”å›çš„æ•°æ®å®ä½“ç±»æ— æ³•åŒ…å«ï¼Œå¯ä»¥ä½¿ç”¨ map è¿”å›å¤šå¼ è¡¨çš„æ•°æ®ï¼Œè¿”å›æ•°æ®æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œéƒ½æ˜¯ Object ç±»å‹ã€‚ è¿”å›çš„ map çš„ key æ˜¯åˆ—åæˆ–åˆ«åã€‚ è¿”å›ä¸€è¡Œ map 123456789 &lt;!-- Map getMap(Integer id);--&gt;&lt;select id=&quot;getMap&quot; parameterType=&quot;int&quot; resultType=&quot;map&quot;&gt; select &lt;include refid=&quot;allCols&quot;/&gt; from users where id=#&#123;id&#125; &lt;/select&gt; 123456@Testpublic void testGetResultMap()&#123; Map map = usersMapper.getMap(1); System.out.println(map); System.out.println(map.get(&quot;username&quot;));&#125; è¿”å›å¤šè¡Œ map 12345678 &lt;!-- List&lt;Map&gt; getMulMap();--&gt;&lt;select id=&quot;getMulMap&quot; resultType=&quot;map&quot;&gt; select &lt;include refid=&quot;allCols&quot;/&gt; from users &lt;/select&gt; resultMapä½¿ç”¨ resultMap æ‰‹åŠ¨å®Œæˆæ˜ å°„ï¼š propertyï¼šå®ä½“ç±»æˆå‘˜å˜é‡å columnï¼šæ•°æ®åº“åˆ—å 12345678910111213 &lt;resultMap id=&quot;myMap&quot; type=&quot;users&quot;&gt; &lt;!-- ä¸»é”®ç»‘å®š --&gt; &lt;id property=&quot;id&quot; column=&quot;id&quot;/&gt; &lt;!-- éä¸»é”®ç»‘å®š --&gt; &lt;result property=&quot;userName&quot; column=&quot;username&quot;/&gt; &lt;/resultMap&gt;&lt;!-- List&lt;Users&gt; getAllMap();--&gt;&lt;select id=&quot;getAllMap&quot; resultMap=&quot;myMap&quot;&gt; select id, username from users &lt;/select&gt; 12345678 @Test public void testGetAllMap() &#123; List&lt;Users&gt; list = usersMapper.getAllMap(); list.forEach(System.out::println); &#125;/* æ²¡ç»‘å®šçš„ä¸ºç©ºå€¼Users&#123;id=1, userName=&#x27;ç‹äº”&#x27;, birthday=null, sex=&#x27;null&#x27;, address=&#x27;null&#x27;&#125;*/ ä¸€å¯¹å¤šå…³ç³»ä¸€ä¸ªè€å¸ˆæœ‰å¤šä¸ªå­¦ç”Ÿï¼Œå‡å®š è€å¸ˆï¼šidã€nameã€studentList å­¦ç”Ÿï¼šidã€name 12345678910111213 &lt;!-- ç»‘å®šè€å¸ˆ --&gt;&lt;resultMap id=&quot;teacherMap&quot; type=&quot;teachers&quot;&gt; &lt;!-- ä¸»é”®ç»‘å®š --&gt; &lt;id property=&quot;id&quot; column=&quot;id&quot;/&gt; &lt;!-- éä¸»é”®ç»‘å®š --&gt; &lt;result property=&quot;name&quot; column=&quot;name&quot;/&gt; &lt;!-- å¤–é”®å…³è” --&gt; &lt;collection property=&quot;studentList&quot; ofType=&quot;students&quot;&gt; &lt;!-- ç»‘å®šå­¦ç”Ÿ --&gt; &lt;id property=&quot;id&quot; column=&quot;id&quot;/&gt; &lt;result property=&quot;name&quot; column=&quot;name&quot;/&gt; &lt;/collection&gt; &lt;/resultMap&gt; å¤šå¯¹ä¸€å…³ç³»å­¦ç”Ÿå¯¹åº”ç»‘å®šçš„è€å¸ˆï¼Œå‡å®š è€å¸ˆï¼šidã€nameã€studentList å­¦ç”Ÿï¼šidã€nameã€teacher 12345678910111213 &lt;!-- ç»‘å®šå­¦ç”Ÿ --&gt;&lt;resultMap id=&quot;studentMap&quot; type=&quot;students&quot;&gt; &lt;!-- ä¸»é”®ç»‘å®š --&gt; &lt;id property=&quot;id&quot; column=&quot;id&quot;/&gt; &lt;!-- éä¸»é”®ç»‘å®š --&gt; &lt;result property=&quot;name&quot; column=&quot;name&quot;/&gt; &lt;!-- å¤–é”®å…³è” --&gt; &lt;association property=&quot;teacher&quot; javaType=&quot;teacher&quot;&gt; &lt;!-- javaTypeæ˜¯æ–¹æ³•è¿”å›å€¼ç±»å‹ --&gt; &lt;!-- ç»‘å®šè€å¸ˆ --&gt; &lt;id property=&quot;id&quot; column=&quot;id&quot;/&gt; &lt;result property=&quot;name&quot; column=&quot;name&quot;/&gt; &lt;/association&gt; &lt;/resultMap&gt; studentList ä¸ç”¨ç»‘å®šï¼Œå¦åˆ™å¾ªç¯ç»‘æ­» ä¸€å¯¹ä¸€å…³ç³»ä¸€ä¸ªç­çº§å¯¹åº”ä¸€ä¸ªç­çº§ï¼Œä¸€ä¸ªç­çº§å¯¹åº”ä¸€ä¸ªè€å¸ˆã€‚ ç”¨ association å¤šå¯¹å¤šå…³ç³»ä¸€ä¸ªæ–‡ç« å¯¹åº”å¤šä¸ªæ ‡ç­¾ï¼Œä¸€ä¸ªæ ‡ç­¾å¯¹åº”å¤šä¸ªæ–‡ç« ï¼Œä¸¤ä¸ªè¡¨å°±æ˜¯å¤šå¯¹å¤šå…³ç³»ã€‚ é€šè¿‡å»ºç«‹ä¸­é—´è¡¨å¤„ç†å¤šå¯¹å¤šå…³è”ã€‚ ç”¨ collection æ— è®ºä»€ä¹ˆå…³è”å…³ç³»ï¼š ä¸€æ–¹æŒæœ‰å¦ä¸€æ–¹çš„é›†åˆï¼Œä½¿ç”¨ &lt;collection&gt; ä¸€æ–¹æŒæœ‰å¦ä¸€æ–¹çš„å¯¹è±¡ï¼Œä½¿ç”¨ &lt;association&gt; äº‹åŠ¡ç®€è€Œè¨€ä¹‹ï¼Œå¤šä¸ª CRUD æ“ä½œå¯¹åº”ä¸€ä¸ªäº‹åŠ¡æ“ä½œã€‚ åœ¨ MyBatis æ¡†æ¶ä¸­è®¾ç½®äº‹åŠ¡ï¼š &lt;transactionManager type=&quot;JDBC&quot;/&gt;ï¼šç¨‹åºå‘˜è‡ªå·±æ§åˆ¶æäº¤å’Œå›æ»š å¯è®¾ç½®ä¸ºè‡ªåŠ¨æäº¤ï¼š sqlSession = factory.openSession(true);ï¼šé»˜è®¤æ˜¯ falseï¼Œæ‰‹åŠ¨æäº¤ä¹‹åä¸éœ€è¦æ‰‹åŠ¨ commit ç¼“å­˜Mybatis æä¾›ä¸¤çº§ç¼“å­˜ï¼šä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ï¼Œé»˜è®¤å¼€å¯ä¸€çº§ç¼“å­˜ã€‚ æŸ¥è¯¢æµç¨‹ç¼“å­˜æŸ¥è¯¢æµç¨‹ï¼š æŸ¥è¯¢å…ˆæŸ¥ç¼“å­˜ï¼Œå¦‚æœæ²¡æœ‰åˆ™æŸ¥è¯¢æ•°æ®åº“ï¼Œå­˜åœ¨ç¼“å­˜ä¸­ï¼Œå†è¿”å›ç»™å®¢æˆ·ç«¯ ä¸‹æ¬¡è®¿é—®ç›¸åŒæŸ¥è¯¢æ—¶ï¼Œç›´æ¥ä»ç¼“å­˜è¿”å› å¦‚æœæ•°æ®åº“å‘ç”Ÿ commit æ“ä½œï¼Œåˆ™æ¸…ç©ºç¼“å­˜ ä½œç”¨åŸŸ ä¸€çº§ç¼“å­˜ï¼šä½¿ç”¨ sqlSession çš„ä½œç”¨åŸŸï¼ŒåŒä¸€ä¸ª sqlSession å…±äº«ä¸€çº§ç¼“å­˜çš„æ•°æ® äºŒçº§ç¼“å­˜ï¼šä½¿ç”¨ mapper çš„ä½œç”¨åŸŸï¼Œä¸åŒ sqlSession åªè¦è®¿é—®åŒä¸€ä¸ª mapper.xml æ–‡ä»¶ï¼Œåˆ™å…±äº«äºŒçº§ç¼“å­˜çš„æ•°æ®ã€‚ ORMï¼ˆObject Relational Mappingï¼‰å³å¯¹è±¡å…³ç³»æ˜ å°„ï¼š Java è¯­è¨€ä¸­ä»¥å¯¹è±¡çš„æ–¹å¼æ“ä½œæ•°æ®ï¼Œæ•°æ®åº“ä¸­ä»¥è¡¨çš„æ–¹å¼å­˜å‚¨ï¼Œå¯¹è±¡ä¸­çš„æˆå‘˜å˜é‡ä¸è¡¨ä¸­çš„åˆ—ä¹‹é—´çš„æ•°æ®äº’æ¢ã€‚","categories":[{"name":"Framework","slug":"Framework","permalink":"http://blog.sukiu.top/categories/Framework/"},{"name":"SSM","slug":"Framework/SSM","permalink":"http://blog.sukiu.top/categories/Framework/SSM/"}],"tags":[{"name":"MyBatis","slug":"MyBatis","permalink":"http://blog.sukiu.top/tags/MyBatis/"},{"name":"SSM","slug":"SSM","permalink":"http://blog.sukiu.top/tags/SSM/"}]},{"title":"ä»£ç†æ¨¡å¼","slug":"Proxy-Pattern","date":"2022-06-30T02:23:00.000Z","updated":"2022-06-30T02:31:00.000Z","comments":true,"path":"System-Design/Design-Pattern/Proxy-Pattern/","link":"","permalink":"http://blog.sukiu.top/System-Design/Design-Pattern/Proxy-Pattern/","excerpt":"ç›®æ ‡å¯¹è±¡ä¸å¯è®¿é—®ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡å¢å¼ºè®¿é—®ã€‚ æ§åˆ¶ç›®æ ‡å¯¹è±¡çš„è®¿é—® å¢å¼ºåŠŸèƒ½","text":"ç›®æ ‡å¯¹è±¡ä¸å¯è®¿é—®ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡å¢å¼ºè®¿é—®ã€‚ æ§åˆ¶ç›®æ ‡å¯¹è±¡çš„è®¿é—® å¢å¼ºåŠŸèƒ½ é™æ€ä»£ç†å…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼š ç›®æ ‡å¯¹è±¡å’Œä»£ç†å¯¹è±¡å®ç°åŒä¸€ä¸ªä¸šåŠ¡æ¥å£ ç›®æ ‡å¯¹è±¡å¿…é¡»å®ç°æ¥å£ ä»£ç†å¯¹è±¡åœ¨ç¨‹åºè¿è¡Œå‰å°±å·²ç»å­˜åœ¨ èƒ½è¿‡çµæ´»è¿›è¡Œç›®æ ‡å¯¹è±¡çš„åˆ‡æ¢ï¼Œå´æ— æ³•è¿›è¡ŒåŠŸèƒ½çš„çµæ´»å¤„ç† æµç¨‹å®ç°ï¼š Serviceï¼šæ¥å£ Some implements Serviceï¼šç›®æ ‡å¯¹è±¡ Agent implements Serviceï¼šä»£ç†å¯¹è±¡ åœ¨å…¶ä¸­åˆ›å»ºç›®æ ‡å¯¹è±¡å®ç°å…·ä½“åŠŸèƒ½ é¢å‘æ¥å£ç¼–ç¨‹ï¼š ç±»ä¸­æˆå‘˜å˜é‡ è®¾è®¡ä¸ºæ¥å£ æ–¹æ³•çš„å½¢å‚ è®¾è®¡ä¸ºæ¥å£ æ–¹æ³•çš„è¿”å›å€¼ è®¾è®¡ä¸ºæ¥å£ è°ƒç”¨æ—¶æ¥å£æŒ‡å‘å®ç°ç±» 12345678910111213141516171819202122232425262728/** * é™æ€ä»£ç†æ‹†åˆ† */public class Agent implements Servcie&#123; // è®¾è®¡æˆå‘˜å˜é‡ç±»å‹ä¸ºæ¥å£ï¼Œä¸ºäº†çµæ´»åˆ‡æ¢ç›®æ ‡å¯¹è±¡ public Servcie target; // ä½¿ç”¨æ„é€ æ–¹æ³•ä¼ å…¥ç›®æ ‡å¯¹è±¡ public Agent(Servcie target) &#123; this.target = target; &#125; @Override public void buy() &#123; try &#123; // åˆ‡é¢ System.out.println(&quot;äº‹åŠ¡å¼€å¯&quot;); // ä¸šåŠ¡ target.buy(); // åˆ‡é¢ System.out.println(&quot;äº‹åŠ¡æäº¤&quot;); &#125; catch (Exception e) &#123; System.out.println(&quot;äº‹åŠ¡å›æ»š&quot;); &#125; &#125;&#125; åŠ¨æ€ä»£ç†ä»£ç†å¯¹è±¡åœ¨ç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ä¸­åœ¨å†…å­˜æ„å»ºï¼Œå¯ä»¥çµæ´»çš„è¿›è¡Œä¸šåŠ¡åŠŸèƒ½çš„åˆ‡æ¢ã€‚ JDK åŠ¨æ€ä»£ç† ç›®æ ‡å¯¹è±¡å¿…é¡»å®ç°ä¸šåŠ¡æ¥å£ ä»£ç†å¯¹è±¡ä¸å¿…å®ç°ä¸šåŠ¡æ¥å£ åŠ¨æ€ä»£ç†çš„å¯¹è±¡åœ¨ç¨‹åºè¿è¡Œå‰ä¸å­˜åœ¨ï¼Œåœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°åœ¨å†…å­˜æ„å»º åŠ¨æ€ä»£ç†èƒ½å¤Ÿçµæ´»è¿›è¡Œä¸šåŠ¡åŠŸèƒ½çš„åˆ‡æ¢ éæ¥å£ä¸­çš„æ–¹æ³•ä¸èƒ½è¢«ä»£ç† 12345678910111213141516171819202122232425262728293031323334353637383940public class ProxyFactory &#123; // ç±»ä¸­çš„æˆå‘˜å˜é‡æ¥å£ Service target; // ä¼ å…¥ç›®æ ‡å¯¹è±¡ public ProxyFactory(Service target)&#123; this.target = target; &#125; // è¿”å›åŠ¨æ€ä»£ç†å¯¹è±¡ public static Object getAgent(AOP aop) &#123; return Proxy.newProxyInstance( // ç±»åŠ è½½å™¨ target.getClass().getClassLoader(), // ç›®æ ‡å¯¹è±¡å®ç°çš„æ‰€æœ‰æ¥å£ target.getClass().getInterfaces(), // ä»£ç†åŠŸèƒ½å®ç° new InvocationHandler() &#123; @Override public Object invoke( Object proxy, // ä»£ç†å¯¹è±¡ Method method, // ç›®æ ‡æ–¹æ³• Object[] args // ç›®æ ‡æ–¹æ³•çš„å‚æ•° ) throws Throwable &#123; Object obj = null; try &#123; // åˆ‡é¢ aop.before(); // ä¸šåŠ¡ obj = method.invoke(target, args); // åˆ‡é¢ aop.after(); &#125; catch (Exception e) &#123; // åˆ‡é¢ aop.exception(); &#125; return obj; &#125; &#125; ); &#125;&#125; CGLib åŠ¨æ€ä»£ç†åˆç§°å­ç±»ä»£ç†ï¼Œé€šè¿‡åŠ¨æ€åœ°åœ¨å†…å­˜ä¸­æ„å»ºå­ç±»å¯¹è±¡ï¼Œé‡å†™çˆ¶ç±»çš„æ–¹æ³•è¿›è¡Œä»£ç†åŠŸèƒ½çš„å¢å¼ºã€‚ å¦‚æœç›®æ ‡å¯¹è±¡æ²¡æœ‰å®ç°æ¥å£ï¼Œåˆ™åªèƒ½é€šè¿‡ CSLib å­ç±»ä»£ç†è¿›è¡ŒåŠŸèƒ½å¢å¼ºã€‚ å­ç±»ä»£ç†æ˜¯å¯¹è±¡å­—èŠ‚ç æ¡†æ¶ ASM å®ç°ï¼Œä¸€èˆ¬é€šè¿‡ Spring è¿™äº›æ¡†æ¶ç›´æ¥ä½¿ç”¨ã€‚","categories":[{"name":"System Design","slug":"System-Design","permalink":"http://blog.sukiu.top/categories/System-Design/"},{"name":"Design Pattern","slug":"System-Design/Design-Pattern","permalink":"http://blog.sukiu.top/categories/System-Design/Design-Pattern/"}],"tags":[{"name":"Patterns","slug":"Patterns","permalink":"http://blog.sukiu.top/tags/Patterns/"}]},{"title":"Goé¡¹ç›®æµ‹è¯•","slug":"Go-Test","date":"2022-06-17T13:59:55.000Z","updated":"2022-06-25T08:38:00.000Z","comments":true,"path":"Programming-Language/Go/Go-Test/","link":"","permalink":"http://blog.sukiu.top/Programming-Language/Go/Go-Test/","excerpt":"æµ‹è¯•å…³ç³»ç€ç³»ç»Ÿçš„è´¨é‡ï¼Œè´¨é‡åˆ™å†³å®šçº¿ä¸Šç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚","text":"æµ‹è¯•å…³ç³»ç€ç³»ç»Ÿçš„è´¨é‡ï¼Œè´¨é‡åˆ™å†³å®šçº¿ä¸Šç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚ æµ‹è¯•è‡ªé¡¶å‘ä¸‹åˆ†ä¸ºï¼š å›å½’æµ‹è¯•ï¼šç”± QA æ‰‹åŠ¨é€šè¿‡ç»ˆç«¯å›å½’ä¸€äº›å›ºå®šçš„ä¸»æµç¨‹åœºæ™¯ é›†æˆæµ‹è¯•ï¼šå¯¹ç³»ç»ŸåŠŸèƒ½ç»´åº¦åšæµ‹è¯•éªŒè¯ å•å…ƒæµ‹è¯•ï¼šå¯¹å•ç‹¬çš„å‡½æ•°ã€æ¨¡å—åšåŠŸèƒ½éªŒè¯ ä»é¡¶å‘ä¸‹ï¼Œè¦†ç›–ç‡é€å±‚å¢åŠ ï¼Œæˆæœ¬é€å±‚é™ä½ å•å…ƒæµ‹è¯•çš„è¦†ç›–ç‡ä¸€å®šç¨‹åº¦ä¸Šå†³å®šäº†ä»£ç çš„è´¨é‡ å•å…ƒæµ‹è¯•","categories":[{"name":"Programming Language","slug":"Programming-Language","permalink":"http://blog.sukiu.top/categories/Programming-Language/"},{"name":"Go","slug":"Programming-Language/Go","permalink":"http://blog.sukiu.top/categories/Programming-Language/Go/"}],"tags":[{"name":"Go","slug":"Go","permalink":"http://blog.sukiu.top/tags/Go/"},{"name":"Test","slug":"Test","permalink":"http://blog.sukiu.top/tags/Test/"}]},{"title":"CloudFlare Workeræ­å»ºéšæœºå›¾ç‰‡API","slug":"Random-Image-Worker","date":"2022-06-17T04:30:00.000Z","updated":"2022-06-17T04:30:00.000Z","comments":true,"path":"Mixed/Random-Image-Worker/","link":"","permalink":"http://blog.sukiu.top/Mixed/Random-Image-Worker/","excerpt":"ä¹‹å‰åœ¨ CSDN ä¸Šå‘è¡¨è¿‡ åˆ¶ä½œè‡ªå·±çš„éšæœºå›¾APIï¼Œå¿«é€Ÿã€ç¨³å®šã€ç®€æ˜“ï¼ï¼Œä¸»è¦é€šè¿‡ä¸€ä¸ªç®€å•çš„ php è„šæœ¬éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šã€‚ è¿™æ¬¡é€šè¿‡ CloudFlare Worker å®ç°ä¸€ä¸ªå®Œå…¨æ— æˆæœ¬çš„éšæœºå›¾ç‰‡ APIï¼","text":"ä¹‹å‰åœ¨ CSDN ä¸Šå‘è¡¨è¿‡ åˆ¶ä½œè‡ªå·±çš„éšæœºå›¾APIï¼Œå¿«é€Ÿã€ç¨³å®šã€ç®€æ˜“ï¼ï¼Œä¸»è¦é€šè¿‡ä¸€ä¸ªç®€å•çš„ php è„šæœ¬éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šã€‚ è¿™æ¬¡é€šè¿‡ CloudFlare Worker å®ç°ä¸€ä¸ªå®Œå…¨æ— æˆæœ¬çš„éšæœºå›¾ç‰‡ APIï¼ å›¾ç‰‡è½¬ Webpè¿™æ­¥éª¤å¯é€‰ï¼Œè½¬æ¢ä¸º webp æ ¼å¼åï¼Œå›¾ç‰‡ä½“ç§¯å‹ç¼©è€Œåˆ†è¾¨ç‡ä¸å˜ï¼Œå¯ä»¥æ›´å¿«åœ°åŠ è½½ã€‚ ä¸ºäº†åœ¨å¼•ç”¨æ—¶æ–¹ä¾¿ï¼Œå…ˆæŠŠåç§°æŒ‰ 1ã€2ã€3â€¦é¡ºåºæ ‡å·ï¼Œå†é€šè¿‡ PIL åº“ï¼Œå°† jpg å’Œ png æ ¼å¼çš„å›¾ç‰‡è½¬æ¢æˆ webpã€‚ å› ä¸ºç”¨äº†æ–‡ä»¶åæŒ‰æ•°å­—æ’åºï¼Œæ‰€ä»¥åŸå§‹å›¾ç‰‡éœ€è¦å…¨ä¸ºæ•°å­—ï¼Œå¦‚ä¸ºå…¶ä»–è‡ªè¡Œä¿®æ”¹ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647import osfrom PIL import Imagedef to_webp(src_dir, dist_dir, img): img_path = os.path.join(src_dir, img) dist_path = os.path.join(dist_dir, img.split(&quot;.&quot;)[0] + &quot;.webp&quot;) if os.path.exists(dist_path): return image = Image.open(img_path) image.save(dist_path, format=&quot;webp&quot;) print(img_path + &#x27; convert to &#x27; + dist_path)def convert(src_dir, dist_dir): print(&quot;Convert: start&quot;) images = os.listdir(src_dir) images.sort(key=lambda x: int(x[:-4])) for img in images: to_webp(src_dir, dist_dir, img) print(&quot;Convert: end&quot;)def rename(dir_path): print(&quot;Rename: start&quot;) num = 1 files = os.listdir(dir_path) files.sort(key=lambda x: int(x[:-4])) for file in files: src_path = os.path.join(dir_path, file) dist_path = os.path.join(dir_path, str(num)) + os.path.splitext(file)[-1] num = num + 1 if src_path == dist_path: # print(&quot;Skip: &quot; + src_path) continue os.rename(src_path, dist_path) print(src_path + &#x27; rename to &#x27; + dist_path) print(&quot;Rename: end&quot;)if __name__ == &#x27;__main__&#x27;: srcDir = r&quot;E:\\Onedrive\\å›¾ç‰‡\\æ¬¡å…ƒå£çº¸&quot; distDir = &#x27;pc&#x27; rename(srcDir) convert(srcDir, distDir) æ–‡ä»¶ä¸Šä¼  Githubè¿™æ­¥éª¤ä¸å…·ä½“è¯´äº†ï¼Œå›¾ç‰‡é€šè¿‡ jsdeliver å¼•ç”¨ã€‚ CloudFlare Workeræ–°å»ºä¸€ä¸ª workerï¼Œä»£ç å‚è€ƒå¦‚ä¸‹ï¼š å› ä¸ºæ”¹äº†æ–‡ä»¶åï¼Œæ‰€ä»¥ä¸‹é¢åªéœ€è¦ä¿®æ”¹å›¾ç‰‡æ€»æ•° totalï¼Œå°±èƒ½ç”Ÿæˆä¸€ä¸ªéšæœºæ•°è®¿é—® ä¸ªäººé€šè¿‡ type åŒºåˆ«å®½å±å’Œç«–å±å›¾ç‰‡ï¼Œè‡ªå·±æŒ‰éœ€ä¿®æ”¹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849addEventListener(&#x27;fetch&#x27;, event =&gt; &#123; event.respondWith( handleRequest(event.request).catch((err) =&gt; new Response(&#x27;cfworker error:\\n&#x27; + err.stack, &#123; status: 502, &#125;) ) );&#125;);async function handleRequest(request) &#123; const url = new URL(request.url); switch (url.pathname) &#123; case &quot;/img&quot;: var type = url.searchParams.has(&quot;type&quot;) ? url.searchParams.get(&quot;type&quot;) : &quot;pc&quot;; const total = getTotal(type); if (total == 0) return handleImage(&quot;pc&quot;, getTotal(&quot;pc&quot;)); return handleImage(type, total); case &quot;/favicon.ico&quot;: return fetch(&quot;https://cdn.jsdelivr.net/gh/SukiEva/assets/blog/favicon.ico&quot;); default: return handleNotFound(); &#125;&#125;function getTotal(type) &#123; switch (type) &#123; case &quot;pc&quot;: return 175; case &quot;mb&quot;: return 0; default: return 0; &#125;&#125;async function handleImage(type, total) &#123; var index = Math.floor((Math.random() * total)) + 1; var img = &quot;https://cdn.jsdelivr.net/gh/SukiEva/assets/webp/&quot; + type + &quot;/&quot; + index + &quot;.webp&quot;; res = await fetch(img); return new Response(res.body, &#123; headers: &#123; &#x27;content-type&#x27;: &#x27;image/webp&#x27;, &#125;, &#125;);&#125;function handleNotFound() &#123; return new Response(&#x27;Not Found&#x27;, &#123; status: 404, &#125;);&#125; è‡ªå®šä¹‰åŸŸåé»˜è®¤æ˜¯ä¸€ä¸ª CF çš„åŸŸåï¼Œä½†æ˜¯ç›®å‰å·²ç»è¢«å›½å†… ban äº†ï¼Œéœ€è¦è‡ªè¡Œæ·»åŠ åŸŸåè·¯ç”±ã€‚ æ·»åŠ  DNS A è§£æåˆ° 2.2.2.2ï¼Œæˆ‘é…ç½®çš„ api ä¸‰çº§åŸŸå åœ¨ Worker é‡Œé¢é…ç½®è·¯ç”±ï¼Œæ¯”å¦‚æˆ‘çš„å°±æ˜¯ api.sukiu.top/img* å¯ä»¥é€šè¿‡ä¸‹é¢çš„é“¾æ¥æŸ¥çœ‹å®ç°æ•ˆæœï¼Œæ¯å¤©çš„å…è´¹æ¬¡æ•°æ˜¯ 10w æ¬¡ï¼Œè¯·è‡ªè¡Œæ­å»ºï¼Œç¦æ­¢æ»¥ç”¨ï¼ï¼ï¼ SukiEva çš„éšæœºå›¾ç‰‡ APIhttps://api.sukiu.top/img","categories":[{"name":"Mixed","slug":"Mixed","permalink":"http://blog.sukiu.top/categories/Mixed/"}],"tags":[{"name":"CloudFlare Worker","slug":"CloudFlare-Worker","permalink":"http://blog.sukiu.top/tags/CloudFlare-Worker/"}]},{"title":"ã€Šå›¾è§£HTTPã€‹ç¬”è®°","slug":"Graphic-Http-Notes","date":"2022-03-06T05:36:00.000Z","updated":"2022-03-06T05:36:00.000Z","comments":true,"path":"Computer-Basics/Computer-Network/Graphic-Http-Notes/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Computer-Network/Graphic-Http-Notes/","excerpt":"æœ¬ä¹¦å›¾æ–‡å¹¶èŒ‚ï¼Œå¤§é‡å›¾ç‰‡ç©¿æ’æ–‡ä¸­ï¼Œç”ŸåŠ¨å½¢è±¡åœ°å‘è¯»è€…ä»‹ç»æ¯ä¸€ä¸ªåº”ç”¨æ¡ˆä¾‹ï¼Œå‡å°‘äº†è¯»è€…é˜…è¯»æ—¶çš„æ¯ç‡¥æ„Ÿã€‚ å€ŸåŠ©ä¸€å¼ å¼ é…å›¾ï¼Œè¯»è€…ä»¬ä¸ä»…ä¼šåŠ æ·±è§†è§‰è®°å¿†ï¼Œåœ¨è½»æ¾æ„‰æ‚¦çš„æ°›å›´ä¸­ï¼Œè¿˜å¯ä»¥æ›´æ·±åˆ»åœ°ç†è§£é€šä¿¡æœº åˆ¶ç­‰èƒŒåçš„å·¥ä½œåŸç†ã€‚ æ­£æ‰€è°“ä¸€å›¾èƒœåƒæ–‡ã€‚","text":"æœ¬ä¹¦å›¾æ–‡å¹¶èŒ‚ï¼Œå¤§é‡å›¾ç‰‡ç©¿æ’æ–‡ä¸­ï¼Œç”ŸåŠ¨å½¢è±¡åœ°å‘è¯»è€…ä»‹ç»æ¯ä¸€ä¸ªåº”ç”¨æ¡ˆä¾‹ï¼Œå‡å°‘äº†è¯»è€…é˜…è¯»æ—¶çš„æ¯ç‡¥æ„Ÿã€‚ å€ŸåŠ©ä¸€å¼ å¼ é…å›¾ï¼Œè¯»è€…ä»¬ä¸ä»…ä¼šåŠ æ·±è§†è§‰è®°å¿†ï¼Œåœ¨è½»æ¾æ„‰æ‚¦çš„æ°›å›´ä¸­ï¼Œè¿˜å¯ä»¥æ›´æ·±åˆ»åœ°ç†è§£é€šä¿¡æœº åˆ¶ç­‰èƒŒåçš„å·¥ä½œåŸç†ã€‚ æ­£æ‰€è°“ä¸€å›¾èƒœåƒæ–‡ã€‚ HTTP åè®®è¯·æ±‚&#x2F;å“åº”é€šä¿¡è¯·æ±‚æŠ¥æ–‡ç”±è¯·æ±‚æ–¹æ³•ã€è¯·æ±‚ URIã€åè®®ç‰ˆæœ¬ã€å¯é€‰çš„è¯·æ±‚é¦–éƒ¨å­—æ®µå’Œå†…å®¹å®ä½“æ„æˆã€‚ å“åº”æŠ¥æ–‡ç”±åè®®ç‰ˆæœ¬ã€çŠ¶æ€ç ï¼ˆåŸå› çŸ­è¯­ï¼‰ã€å¯é€‰çš„å“åº”é¦–éƒ¨å­—æ®µå’Œä¸»ä½“æ„æˆã€‚ ä¸ä¿å­˜çŠ¶æ€HTTP æ˜¯ä¸€ç§ä¸ä¿å­˜çŠ¶æ€ï¼Œå³æ— çŠ¶æ€ï¼ˆstatelessï¼‰åè®®ã€‚ HTTP åè®®è‡ªèº«ä¸å¯¹è¯·æ±‚å’Œå“åº”ä¹‹é—´çš„é€šä¿¡çŠ¶æ€è¿›è¡Œä¿å­˜ï¼Œåè®®å¯¹äºå‘é€è¿‡çš„è¯·æ±‚æˆ–å“åº”éƒ½ä¸åšæŒä¹…åŒ–å¤„ç†ã€‚ HTTP æ–¹æ³•GETï¼šè·å–èµ„æºGET æ–¹æ³•ç”¨æ¥è¯·æ±‚è®¿é—®å·²è¢« URI è¯†åˆ«çš„èµ„æºã€‚ æŒ‡å®šçš„èµ„æºç»æœåŠ¡å™¨ç«¯è§£æåè¿”å›å“åº”å†…å®¹ã€‚ å¦‚æœè¯·æ±‚çš„èµ„æºæ˜¯æ–‡æœ¬ï¼Œé‚£å°±ä¿æŒåŸæ ·è¿”å›ï¼› å¦‚æœæ˜¯åƒ CGIï¼ˆCommon Gateway Interfaceï¼Œé€šç”¨ç½‘å…³æ¥ å£ï¼‰é‚£æ ·çš„ç¨‹åºï¼Œåˆ™è¿”å›ç»è¿‡æ‰§è¡Œåçš„è¾“å‡ºç»“æœã€‚ POSTï¼šä¼ è¾“å®ä½“ä¸»ä½“POST æ–¹æ³•ç”¨æ¥ä¼ è¾“å®ä½“çš„ä¸»ä½“ã€‚ è™½ç„¶ç”¨ GET æ–¹æ³•ä¹Ÿå¯ä»¥ä¼ è¾“å®ä½“çš„ä¸»ä½“ï¼Œä½†ä¸€èˆ¬ä¸ç”¨ GET æ–¹æ³•è¿›è¡Œ ä¼ è¾“ï¼Œè€Œæ˜¯ç”¨ POST æ–¹æ³•ã€‚ è™½è¯´ POST çš„åŠŸèƒ½ä¸ GET å¾ˆç›¸ä¼¼ï¼Œä½† POST çš„ä¸»è¦ç›®çš„å¹¶ä¸æ˜¯è·å–å“åº”çš„ä¸»ä½“å†…å®¹ã€‚ PUTï¼šä¼ è¾“æ–‡ä»¶PUT æ–¹æ³•ç”¨æ¥ä¼ è¾“æ–‡ä»¶ã€‚ å°±åƒ FTP åè®®çš„æ–‡ä»¶ä¸Šä¼ ä¸€æ ·ï¼Œè¦æ±‚åœ¨è¯·æ±‚æŠ¥æ–‡çš„ä¸»ä½“ä¸­åŒ…å«æ–‡ä»¶å†…å®¹ï¼Œç„¶åä¿å­˜åˆ°è¯·æ±‚ URI æŒ‡å®šçš„ä½ç½®ã€‚ ä½†æ˜¯ï¼Œé‰´äº HTTP&#x2F;1.1 çš„ PUT æ–¹æ³•è‡ªèº«ä¸å¸¦éªŒè¯æœºåˆ¶ï¼Œä»»ä½•äººéƒ½å¯ä»¥ä¸Šä¼ æ–‡ä»¶ , å­˜åœ¨å®‰å…¨æ€§é—®é¢˜ï¼Œå› æ­¤ä¸€èˆ¬çš„ Web ç½‘ç«™ä¸ä½¿ç”¨è¯¥æ–¹æ³•ã€‚ HEADï¼šè·å¾—æŠ¥æ–‡é¦–éƒ¨HEAD æ–¹æ³•å’Œ GET æ–¹æ³•ä¸€æ ·ï¼Œåªæ˜¯ä¸è¿”å›æŠ¥æ–‡ä¸»ä½“éƒ¨åˆ†ã€‚ ç”¨äºç¡®è®¤ URI çš„æœ‰æ•ˆæ€§åŠèµ„æºæ›´æ–°çš„æ—¥æœŸæ—¶é—´ç­‰ã€‚ DELETEï¼šåˆ é™¤æ–‡ä»¶DELETE æ–¹æ³•ç”¨æ¥åˆ é™¤æ–‡ä»¶ï¼Œæ˜¯ä¸ PUT ç›¸åçš„æ–¹æ³•ã€‚ DELETE æ–¹æ³•æŒ‰è¯·æ±‚ URI åˆ é™¤æŒ‡å®šçš„èµ„æºã€‚ ä½†æ˜¯ï¼ŒHTTP&#x2F;1.1 çš„ DELETE æ–¹æ³•æœ¬èº«å’Œ PUT æ–¹æ³•ä¸€æ ·ä¸å¸¦éªŒè¯æœºåˆ¶ï¼Œæ‰€ä»¥ä¸€èˆ¬çš„ Web ç½‘ç«™ä¹Ÿä¸ä½¿ç”¨ DELETE æ–¹æ³•ã€‚ OPTIONSï¼šè¯¢é—®æ”¯æŒçš„æ–¹æ³•OPTIONS æ–¹æ³•ç”¨æ¥æŸ¥è¯¢é’ˆå¯¹è¯·æ±‚ URI æŒ‡å®šçš„èµ„æºæ”¯æŒçš„æ–¹æ³•ã€‚ TRACEï¼šè¿½è¸ªè·¯å¾„TRACE æ–¹æ³•æ˜¯è®© Web æœåŠ¡å™¨ç«¯å°†ä¹‹å‰çš„è¯·æ±‚é€šä¿¡ç¯å›ç»™å®¢æˆ·ç«¯çš„æ–¹æ³•ã€‚ å‘é€è¯·æ±‚æ—¶ï¼Œåœ¨ Max-Forwards é¦–éƒ¨å­—æ®µä¸­å¡«å…¥æ•°å€¼ï¼Œæ¯ç»è¿‡ä¸€ä¸ªæœåŠ¡å™¨ç«¯å°±å°†è¯¥æ•°å­—å‡ 1ï¼Œå½“æ•°å€¼åˆšå¥½å‡åˆ° 0 æ—¶ï¼Œå°±åœæ­¢ç»§ç»­ä¼ è¾“ï¼Œæœ€åæ¥æ”¶åˆ°è¯·æ±‚çš„æœåŠ¡å™¨ç«¯åˆ™è¿”å›çŠ¶æ€ç  200 OK çš„å“åº”ã€‚ ä½†æ˜¯ï¼ŒTRACE æ–¹æ³•æœ¬æ¥å°±ä¸æ€ä¹ˆå¸¸ç”¨ï¼Œå†åŠ ä¸Šå®ƒå®¹æ˜“å¼•å‘ XSTï¼ˆCross-Site Tracingï¼Œè·¨ç«™è¿½è¸ªï¼‰æ”»å‡»ï¼Œé€šå¸¸å°±æ›´ä¸ä¼šç”¨åˆ°äº†ã€‚ CONNECTï¼šè¦æ±‚ç”¨éš§é“åè®®è¿æ¥ä»£ç†CONNECT æ–¹æ³•è¦æ±‚åœ¨ä¸ä»£ç†æœåŠ¡å™¨é€šä¿¡æ—¶å»ºç«‹éš§é“ï¼Œå®ç°ç”¨éš§é“åè®®è¿›è¡Œ TCP é€šä¿¡ã€‚ ä¸»è¦ä½¿ç”¨ SSLï¼ˆSecure Sockets Layerï¼Œå®‰å…¨å¥—æ¥å±‚ï¼‰å’Œ TLSï¼ˆTransport Layer Securityï¼Œä¼ è¾“å±‚å®‰å…¨ï¼‰åè®®æŠŠé€šä¿¡å†…å®¹åŠ å¯†åç»ç½‘ç»œéš§é“ä¼ è¾“ã€‚ æ ¼å¼ï¼šCONNECT ä»£ç†æœåŠ¡å™¨å: ç«¯å£å· HTTP ç‰ˆæœ¬ æŒä¹…è¿æ¥ ä¸ºè§£å†³ä¸Šè¿° TCP è¿æ¥çš„é—®é¢˜ï¼ŒHTTP&#x2F;1.1 å’Œä¸€éƒ¨åˆ†çš„ HTTP&#x2F;1.0 æƒ³å‡ºäº†æŒä¹…è¿æ¥ï¼ˆHTTP Persistent Connectionsï¼Œä¹Ÿç§°ä¸º HTTP keep-alive æˆ– HTTP connection reuseï¼‰çš„æ–¹æ³•ã€‚ æŒä¹…è¿æ¥çš„ç‰¹ç‚¹æ˜¯ï¼Œåªè¦ä»»æ„ä¸€ç«¯æ²¡æœ‰æ˜ç¡®æå‡ºæ–­å¼€è¿æ¥ï¼Œåˆ™ä¿æŒ TCP è¿æ¥çŠ¶æ€ã€‚ åœ¨ HTTP&#x2F;1.1 ä¸­ï¼Œæ‰€æœ‰çš„è¿æ¥é»˜è®¤éƒ½æ˜¯æŒä¹…è¿æ¥ã€‚ ç®¡çº¿åŒ– PipeliningæŒä¹…è¿æ¥ä½¿å¾—å¤šæ•°è¯·æ±‚ä»¥ç®¡çº¿åŒ–ï¼ˆpipeliningï¼‰æ–¹å¼å‘é€æˆä¸ºå¯èƒ½ã€‚ ä»å‰å‘é€è¯·æ±‚åéœ€ç­‰å¾…å¹¶æ”¶åˆ°å“åº”ï¼Œæ‰èƒ½å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚ç®¡çº¿åŒ–æŠ€æœ¯å‡ºç°åï¼Œä¸ç”¨ç­‰å¾…å“åº”äº¦å¯ç›´æ¥å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚ è¿™æ ·å°±èƒ½å¤Ÿåšåˆ°åŒæ—¶å¹¶è¡Œå‘é€å¤šä¸ªè¯·æ±‚ï¼Œè€Œä¸éœ€è¦ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°ç­‰å¾…å“åº”äº†ã€‚ ä½¿ç”¨ COOKIE ä¿ç•™æ— çŠ¶æ€åè®®è¿™ä¸ªç‰¹å¾çš„åŒæ—¶åˆè¦è§£å†³ç±»ä¼¼çš„çŸ›ç›¾é—®é¢˜ï¼Œäºæ˜¯å¼•å…¥äº† Cookie æŠ€æœ¯ã€‚Cookie æŠ€æœ¯é€šè¿‡åœ¨è¯·æ±‚å’Œå“åº”æŠ¥æ–‡ä¸­å†™å…¥ Cookie ä¿¡æ¯æ¥æ§åˆ¶å®¢æˆ·ç«¯çš„çŠ¶æ€ã€‚ Cookie ä¼šæ ¹æ®ä»æœåŠ¡å™¨ç«¯å‘é€çš„å“åº”æŠ¥æ–‡å†…çš„ä¸€ä¸ªå«åš Set-Cookie çš„é¦–éƒ¨å­—æ®µä¿¡æ¯ï¼Œé€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜ Cookieã€‚å½“ä¸‹æ¬¡å®¢æˆ·ç«¯å†å¾€è¯¥æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨åœ¨è¯·æ±‚æŠ¥æ–‡ä¸­åŠ å…¥ Cookie å€¼åå‘é€å‡ºå»ã€‚ æœåŠ¡å™¨ç«¯å‘ç°å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„ Cookie åï¼Œä¼šå»æ£€æŸ¥ç©¶ç«Ÿæ˜¯ä»å“ªä¸€ä¸ªå®¢æˆ·ç«¯å‘æ¥çš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå¯¹æ¯”æœåŠ¡å™¨ä¸Šçš„è®°å½•ï¼Œæœ€åå¾—åˆ°ä¹‹å‰çš„çŠ¶æ€ä¿¡æ¯ã€‚ HTTP æŠ¥æ–‡ç”¨äº HTTP åè®®äº¤äº’çš„ä¿¡æ¯è¢«ç§°ä¸º HTTP æŠ¥æ–‡ã€‚è¯·æ±‚ç«¯ï¼ˆå®¢æˆ·ç«¯ï¼‰çš„ HTTP æŠ¥æ–‡å«åšè¯·æ±‚æŠ¥æ–‡ï¼Œå“åº”ç«¯ï¼ˆæœåŠ¡å™¨ç«¯ï¼‰çš„å«åšå“åº”æŠ¥æ–‡ã€‚ HTTP æŠ¥æ–‡æœ¬èº«æ˜¯ç”±å¤šè¡Œï¼ˆç”¨ CR+LF ä½œæ¢è¡Œç¬¦ï¼‰æ•°æ®æ„æˆçš„å­—ç¬¦ä¸²æ–‡æœ¬ã€‚ HTTP æŠ¥æ–‡å¤§è‡´å¯åˆ†ä¸ºæŠ¥æ–‡é¦–éƒ¨å’ŒæŠ¥æ–‡ä¸»ä½“ä¸¤å—ã€‚ä¸¤è€…ç”±æœ€åˆå‡ºç°çš„ ç©ºè¡Œï¼ˆCR+LFï¼‰æ¥åˆ’åˆ†ã€‚é€šå¸¸ï¼Œå¹¶ä¸ä¸€å®šè¦æœ‰æŠ¥æ–‡ä¸»ä½“ã€‚ è¯·æ±‚è¡ŒåŒ…å«ç”¨äºè¯·æ±‚çš„æ–¹æ³•ï¼Œè¯·æ±‚ URI å’Œ HTTP ç‰ˆæœ¬ã€‚ çŠ¶æ€è¡ŒåŒ…å«è¡¨æ˜å“åº”ç»“æœçš„çŠ¶æ€ç ï¼ŒåŸå› çŸ­è¯­å’Œ HTTP ç‰ˆæœ¬ã€‚ é¦–éƒ¨å­—æ®µåŒ…å«è¡¨ç¤ºè¯·æ±‚å’Œå“åº”çš„å„ç§æ¡ä»¶å’Œå±æ€§çš„å„ç±»é¦–éƒ¨ã€‚ ç¼–ç ä¼ è¾“HTTP åœ¨ä¼ è¾“æ•°æ®æ—¶å¯ä»¥æŒ‰ç…§æ•°æ®åŸè²Œç›´æ¥ä¼ è¾“ï¼Œä½†ä¹Ÿå¯ä»¥åœ¨ä¼ è¾“è¿‡ ç¨‹ä¸­é€šè¿‡ç¼–ç æå‡ä¼ è¾“é€Ÿç‡ã€‚ä½†æ˜¯ï¼Œç¼–ç çš„æ“ä½œéœ€è¦è®¡ç®—æœºæ¥å®Œæˆï¼Œå› æ­¤ä¼šæ¶ˆè€—æ›´å¤šçš„ CPU ç­‰èµ„æºã€‚ æŠ¥æ–‡&#x2F;å®ä½“ä¸»ä½“ æŠ¥æ–‡ï¼ˆmessageï¼‰ï¼šHTTP é€šä¿¡ä¸­çš„åŸºæœ¬å•ä½ï¼Œç”± 8 ä½ç»„å­—èŠ‚æµï¼ˆoctet sequenceï¼Œ å…¶ä¸­ octet ä¸º 8 ä¸ªæ¯”ç‰¹ï¼‰ç»„æˆï¼Œé€šè¿‡ HTTP é€šä¿¡ä¼ è¾“ã€‚ å®ä½“ï¼ˆentityï¼‰ï¼šä½œä¸ºè¯·æ±‚æˆ–å“åº”çš„æœ‰æ•ˆè½½è·æ•°æ®ï¼ˆè¡¥å……é¡¹ï¼‰è¢«ä¼ è¾“ï¼Œå…¶å†…å®¹ç”±å®ä½“é¦–éƒ¨å’Œå®ä½“ä¸»ä½“ç»„æˆã€‚ HTTP æŠ¥æ–‡çš„ä¸»ä½“ç”¨äºä¼ è¾“è¯·æ±‚æˆ–å“åº”çš„å®ä½“ä¸»ä½“ã€‚ é€šå¸¸ï¼ŒæŠ¥æ–‡ä¸»ä½“ç­‰äºå®ä½“ä¸»ä½“ã€‚ åªæœ‰å½“ä¼ è¾“ä¸­è¿›è¡Œç¼–ç æ“ä½œæ—¶ï¼Œå®ä½“ä¸»ä½“çš„å†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œæ‰å¯¼è‡´å®ƒå’ŒæŠ¥æ–‡ä¸»ä½“äº§ç”Ÿå·®å¼‚ã€‚ å‹ç¼©ä¼ è¾“çš„å†…å®¹ç¼–ç å‘å¾…å‘é€é‚®ä»¶å†…å¢åŠ é™„ä»¶æ—¶ï¼Œä¸ºäº†ä½¿é‚®ä»¶å®¹é‡å˜å°ï¼Œæˆ‘ä»¬ä¼šå…ˆç”¨ ZIP å‹ç¼©æ–‡ä»¶ä¹‹åå†æ·»åŠ é™„ä»¶å‘é€ã€‚ HTTP åè®®ä¸­æœ‰ä¸€ç§è¢«ç§°ä¸ºå†…å®¹ç¼–ç çš„åŠŸèƒ½ä¹Ÿèƒ½è¿›è¡Œç±»ä¼¼çš„æ“ä½œã€‚ å¸¸ç”¨çš„å†…å®¹ç¼–ç æœ‰ä»¥ä¸‹å‡ ç§ï¼š gzipï¼ˆGNU zipï¼‰ compressï¼ˆUNIX ç³»ç»Ÿçš„æ ‡å‡†å‹ç¼©ï¼‰ deflateï¼ˆzlibï¼‰ identityï¼ˆä¸è¿›è¡Œç¼–ç ï¼‰ åˆ†å‰²å‘é€çš„åˆ†å—ä¼ è¾“ç¼–ç åœ¨ä¼ è¾“å¤§å®¹é‡æ•°æ®æ—¶ï¼Œé€šè¿‡æŠŠæ•°æ®åˆ†å‰²æˆå¤šå—ï¼Œèƒ½å¤Ÿè®©æµè§ˆå™¨é€æ­¥æ˜¾ç¤ºé¡µé¢ã€‚ è¿™ç§æŠŠå®ä½“ä¸»ä½“åˆ†å—çš„åŠŸèƒ½ç§°ä¸ºåˆ†å—ä¼ è¾“ç¼–ç ï¼ˆChunked Transfer Codingï¼‰ã€‚ åˆ†å—ä¼ è¾“ç¼–ç ä¼šå°†å®ä½“ä¸»ä½“åˆ†æˆå¤šä¸ªéƒ¨åˆ†ï¼ˆå—ï¼‰ã€‚æ¯ä¸€å—éƒ½ä¼šç”¨åå…­ è¿›åˆ¶æ¥æ ‡è®°å—çš„å¤§å°ï¼Œè€Œå®ä½“ä¸»ä½“çš„æœ€åä¸€å—ä¼šä½¿ç”¨â€œ0(CR+LF)â€æ¥æ ‡è®°ã€‚ ä½¿ç”¨åˆ†å—ä¼ è¾“ç¼–ç çš„å®ä½“ä¸»ä½“ä¼šç”±æ¥æ”¶çš„å®¢æˆ·ç«¯è´Ÿè´£è§£ç ï¼Œæ¢å¤åˆ°ç¼–ç å‰çš„å®ä½“ä¸»ä½“ã€‚ HTTP&#x2F;1.1 ä¸­å­˜åœ¨ä¸€ç§ç§°ä¸ºä¼ è¾“ç¼–ç ï¼ˆTransfer Codingï¼‰çš„æœºåˆ¶ï¼Œå®ƒå¯ä»¥åœ¨é€šä¿¡æ—¶æŒ‰æŸç§ç¼–ç æ–¹å¼ä¼ è¾“ï¼Œä½†åªå®šä¹‰ä½œç”¨äºåˆ†å—ä¼ è¾“ç¼–ç ä¸­ã€‚ å¯¹è±¡é›†åˆå‘é€é‚®ä»¶æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é‚®ä»¶é‡Œå†™å…¥æ–‡å­—å¹¶æ·»åŠ å¤šä»½é™„ä»¶ã€‚ è¿™æ˜¯å› ä¸ºé‡‡ç”¨äº† MIMEï¼ˆMultipurpose Internet Mail Extensionsï¼Œå¤šç”¨é€”å› ç‰¹ç½‘é‚®ä»¶æ‰©å±•ï¼‰æœºåˆ¶ï¼Œå®ƒå…è®¸é‚®ä»¶å¤„ç†æ–‡æœ¬ã€å›¾ç‰‡ã€è§†é¢‘ç­‰å¤šä¸ªä¸åŒç±»å‹çš„æ•°æ®ã€‚ HTTP åè®®ä¸­ä¹Ÿé‡‡çº³äº†å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆï¼ˆMultipartï¼‰ï¼Œå‘é€çš„ä¸€ä»½æŠ¥æ–‡ä¸»ä½“å†…å¯å«æœ‰å¤šç±»å‹å®ä½“ã€‚é€šå¸¸æ˜¯åœ¨å›¾ç‰‡æˆ–æ–‡æœ¬æ–‡ä»¶ç­‰ä¸Šä¼ æ—¶ä½¿ç”¨ã€‚ åœ¨ HTTP æŠ¥æ–‡ä¸­ä½¿ç”¨å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆæ—¶ï¼Œéœ€è¦åœ¨é¦–éƒ¨å­—æ®µé‡ŒåŠ ä¸Š Content-typeã€‚ è·å–éƒ¨åˆ†å†…å®¹çš„èŒƒå›´è¯·æ±‚å¦‚æœä¸‹è½½è¿‡ç¨‹ä¸­é‡åˆ°ç½‘ç»œä¸­æ–­çš„æƒ…å†µï¼Œé‚£å°±å¿…é¡»é‡å¤´å¼€å§‹ã€‚ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œéœ€è¦ä¸€ç§å¯æ¢å¤çš„æœºåˆ¶ã€‚æ‰€è°“æ¢å¤æ˜¯æŒ‡èƒ½ä»ä¹‹å‰ä¸‹è½½ä¸­æ–­å¤„æ¢å¤ä¸‹è½½ã€‚ è¦å®ç°è¯¥åŠŸèƒ½éœ€è¦æŒ‡å®šä¸‹è½½çš„å®ä½“èŒƒå›´ã€‚åƒè¿™æ ·ï¼ŒæŒ‡å®šèŒƒå›´å‘é€çš„è¯·æ±‚å«åšèŒƒå›´è¯·æ±‚ï¼ˆRange Requestï¼‰ã€‚ æ‰§è¡ŒèŒƒå›´è¯·æ±‚æ—¶ï¼Œä¼šç”¨åˆ°é¦–éƒ¨å­—æ®µ Range æ¥æŒ‡å®šèµ„æºçš„ byte èŒƒå›´ã€‚ é’ˆå¯¹èŒƒå›´è¯·æ±‚ï¼Œå“åº”ä¼šè¿”å›çŠ¶æ€ç ä¸º 206 Partial Content çš„å“åº”æŠ¥æ–‡ã€‚ å¦å¤–ï¼Œå¯¹äºå¤šé‡èŒƒå›´çš„èŒƒå›´è¯·æ±‚ï¼Œå“åº”ä¼šåœ¨é¦–éƒ¨å­—æ®µ ContentType æ ‡æ˜ multipart&#x2F;byteranges åè¿”å›å“åº”æŠ¥æ–‡ã€‚ HTTP åä½œé€šä¿¡æ•°æ®è½¬å‘HTTP é€šä¿¡æ—¶ï¼Œé™¤å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€äº›ç”¨äºé€šä¿¡æ•°æ®è½¬å‘çš„åº”ç”¨ç¨‹åºï¼Œä¾‹å¦‚ä»£ç†ã€ç½‘å…³å’Œéš§é“ã€‚å®ƒä»¬å¯ä»¥é…åˆæœåŠ¡å™¨å·¥ä½œã€‚ ä»£ç†ä»£ç†æ˜¯ä¸€ç§æœ‰è½¬å‘åŠŸèƒ½çš„åº”ç”¨ç¨‹åºï¼Œå®ƒæ‰®æ¼”äº†ä½äºæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯â€œä¸­é—´äººâ€çš„è§’è‰²ï¼Œæ¥æ”¶ç”±å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚å¹¶è½¬å‘ç»™æœåŠ¡å™¨ï¼ŒåŒæ—¶ä¹Ÿæ¥æ”¶æœåŠ¡å™¨è¿”å›çš„å“åº”å¹¶è½¬å‘ç»™å®¢æˆ·ç«¯ã€‚ ä½¿ç”¨ä»£ç†æœåŠ¡å™¨çš„ç†ç”±æœ‰ï¼šåˆ©ç”¨ç¼“å­˜æŠ€æœ¯ï¼ˆç¨åè®²è§£ï¼‰å‡å°‘ç½‘ç»œå¸¦å®½çš„æµé‡ï¼Œç»„ç»‡å†…éƒ¨é’ˆå¯¹ç‰¹å®šç½‘ç«™çš„è®¿é—®æ§åˆ¶ï¼Œä»¥è·å–è®¿é—®æ—¥å¿—ä¸ºä¸»è¦ç›®çš„ç­‰ç­‰ã€‚ ä»£ç†æœ‰å¤šç§ä½¿ç”¨æ–¹æ³•ï¼ŒæŒ‰ä¸¤ç§åŸºå‡†åˆ†ç±»ã€‚ä¸€ç§æ˜¯æ˜¯å¦ä½¿ç”¨ç¼“å­˜ï¼Œå¦ä¸€ç§æ˜¯æ˜¯å¦ä¼šä¿®æ”¹æŠ¥æ–‡ã€‚ ç¼“å­˜ä»£ç†ï¼šä»£ç†è½¬å‘å“åº”æ—¶ï¼Œç¼“å­˜ä»£ç†ï¼ˆCaching Proxyï¼‰ä¼šé¢„å…ˆå°†èµ„æºçš„å‰¯æœ¬ï¼ˆç¼“å­˜ï¼‰ä¿å­˜åœ¨ä»£ç†æœåŠ¡å™¨ä¸Šã€‚å½“ä»£ç†å†æ¬¡æ¥æ”¶åˆ°å¯¹ç›¸åŒèµ„æºçš„è¯·æ±‚æ—¶ï¼Œå°±å¯ä»¥ä¸ä»æºæœåŠ¡å™¨é‚£é‡Œè·å–èµ„æºï¼Œè€Œæ˜¯å°†ä¹‹å‰ç¼“å­˜çš„èµ„æºä½œä¸ºå“åº”è¿”å›ã€‚ é€æ˜ä»£ç†ï¼šè½¬å‘è¯·æ±‚æˆ–å“åº”æ—¶ï¼Œä¸å¯¹æŠ¥æ–‡åšä»»ä½•åŠ å·¥çš„ä»£ç†ç±»å‹è¢«ç§°ä¸ºé€æ˜ä»£ç†ï¼ˆTransparent Proxyï¼‰ã€‚åä¹‹ï¼Œå¯¹æŠ¥æ–‡å†…å®¹è¿›è¡ŒåŠ å·¥çš„ä»£ç†è¢«ç§°ä¸ºéé€æ˜ä»£ç†ã€‚ ç½‘å…³ç½‘å…³æ˜¯è½¬å‘å…¶ä»–æœåŠ¡å™¨é€šä¿¡æ•°æ®çš„æœåŠ¡å™¨ï¼Œæ¥æ”¶ä»å®¢æˆ·ç«¯å‘é€æ¥çš„è¯·æ±‚æ—¶ï¼Œå®ƒå°±åƒè‡ªå·±æ‹¥æœ‰èµ„æºçš„æºæœåŠ¡å™¨ä¸€æ ·å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚æœ‰æ—¶å®¢æˆ·ç«¯å¯èƒ½éƒ½ä¸ä¼šå¯Ÿè§‰ï¼Œè‡ªå·±çš„é€šä¿¡ç›®æ ‡æ˜¯ä¸€ä¸ªç½‘å…³ã€‚ ç½‘å…³çš„å·¥ä½œæœºåˆ¶å’Œä»£ç†ååˆ†ç›¸ä¼¼ã€‚è€Œç½‘å…³èƒ½ä½¿é€šä¿¡çº¿è·¯ä¸Šçš„æœåŠ¡å™¨æä¾›é HTTP åè®®æœåŠ¡ã€‚ åˆ©ç”¨ç½‘å…³èƒ½æé«˜é€šä¿¡çš„å®‰å…¨æ€§ï¼Œå› ä¸ºå¯ä»¥åœ¨å®¢æˆ·ç«¯ä¸ç½‘å…³ä¹‹é—´çš„é€šä¿¡çº¿è·¯ä¸ŠåŠ å¯†ä»¥ç¡®ä¿è¿æ¥çš„å®‰å…¨ã€‚ æ¯”å¦‚ï¼Œç½‘å…³å¯ä»¥è¿æ¥æ•°æ®åº“ï¼Œä½¿ç”¨ SQL è¯­å¥æŸ¥è¯¢æ•°æ®ã€‚å¦å¤–ï¼Œåœ¨ Web è´­ç‰©ç½‘ç«™ä¸Šè¿›è¡Œä¿¡ç”¨å¡ç»“ç®—æ—¶ï¼Œç½‘å…³å¯ä»¥å’Œä¿¡ç”¨å¡ç»“ç®—ç³»ç»Ÿè”åŠ¨ã€‚ éš§é“éš§é“æ˜¯åœ¨ç›¸éš”ç”šè¿œçš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¸¤è€…ä¹‹é—´è¿›è¡Œä¸­è½¬ï¼Œå¹¶ä¿æŒåŒæ–¹é€šä¿¡è¿æ¥çš„åº”ç”¨ç¨‹åºã€‚ éš§é“å¯æŒ‰è¦æ±‚å»ºç«‹èµ·ä¸€æ¡ä¸å…¶ä»–æœåŠ¡å™¨çš„é€šä¿¡çº¿è·¯ï¼Œå±Šæ—¶ä½¿ç”¨ SSL ç­‰åŠ å¯†æ‰‹æ®µè¿›è¡Œé€šä¿¡ã€‚éš§é“çš„ç›®çš„æ˜¯ç¡®ä¿å®¢æˆ·ç«¯èƒ½ä¸æœåŠ¡å™¨è¿›è¡Œå®‰å…¨çš„é€šä¿¡ã€‚ éš§é“æœ¬èº«ä¸ä¼šå»è§£æ HTTP è¯·æ±‚ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯·æ±‚ä¿æŒåŸæ ·ä¸­è½¬ç»™ä¹‹ åçš„æœåŠ¡å™¨ã€‚éš§é“ä¼šåœ¨é€šä¿¡åŒæ–¹æ–­å¼€è¿æ¥æ—¶ç»“æŸã€‚ ä¿å­˜èµ„æºçš„ç¼“å­˜ç¼“å­˜æ˜¯æŒ‡ä»£ç†æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯æœ¬åœ°ç£ç›˜å†…ä¿å­˜çš„èµ„æºå‰¯æœ¬ã€‚åˆ©ç”¨ç¼“å­˜å¯å‡å°‘å¯¹æºæœåŠ¡å™¨çš„è®¿é—®ï¼Œå› æ­¤ä¹Ÿå°±èŠ‚çœäº†é€šä¿¡æµé‡å’Œé€šä¿¡æ—¶é—´ã€‚ ç¼“å­˜æœåŠ¡å™¨æ˜¯ä»£ç†æœåŠ¡å™¨çš„ä¸€ç§ï¼Œå¹¶å½’ç±»åœ¨ç¼“å­˜ä»£ç†ç±»å‹ä¸­ã€‚æ¢å¥è¯è¯´ï¼Œå½“ä»£ç†è½¬å‘ä»æœåŠ¡å™¨è¿”å›çš„å“åº”æ—¶ï¼Œä»£ç†æœåŠ¡å™¨å°†ä¼šä¿å­˜ä¸€ä»½èµ„æºçš„å‰¯æœ¬ã€‚ ç¼“å­˜æœåŠ¡å™¨çš„ä¼˜åŠ¿åœ¨äºåˆ©ç”¨ç¼“å­˜å¯é¿å…å¤šæ¬¡ä»æºæœåŠ¡å™¨è½¬å‘èµ„æºã€‚å› æ­¤å®¢æˆ·ç«¯å¯å°±è¿‘ä»ç¼“å­˜æœåŠ¡å™¨ä¸Šè·å–èµ„æºï¼Œè€ŒæºæœåŠ¡å™¨ä¹Ÿä¸å¿…å¤šæ¬¡å¤„ç†ç›¸åŒçš„è¯·æ±‚äº†ã€‚ HTTPSHTTP ç¼ºç‚¹HTTP ä¸»è¦æœ‰è¿™äº›ä¸è¶³ï¼š é€šä¿¡ä½¿ç”¨æ˜æ–‡ï¼ˆä¸åŠ å¯†ï¼‰ï¼Œå†…å®¹å¯èƒ½ä¼šè¢«çªƒå¬ ä¸éªŒè¯é€šä¿¡æ–¹çš„èº«ä»½ï¼Œå› æ­¤æœ‰å¯èƒ½é­é‡ä¼ªè£… æ— æ³•è¯æ˜æŠ¥æ–‡çš„å®Œæ•´æ€§ï¼Œæ‰€ä»¥æœ‰å¯èƒ½å·²é­ç¯¡æ”¹ HTTP + åŠ å¯† + è®¤è¯ + å®Œæ•´æ€§ä¿æŠ¤ &#x3D; HTTPS HTTPS æ˜¯èº«æŠ« SSL å¤–å£³çš„ HTTPHTTPS å¹¶éæ˜¯åº”ç”¨å±‚çš„ä¸€ç§æ–°åè®®ã€‚åªæ˜¯ HTTP é€šä¿¡æ¥å£éƒ¨åˆ†ç”¨ SSLï¼ˆSecure Socket Layerï¼‰å’Œ TLSï¼ˆTransport Layer Securityï¼‰åè®®ä»£æ›¿è€Œå·²ã€‚ é€šå¸¸ï¼ŒHTTP ç›´æ¥å’Œ TCP é€šä¿¡ã€‚å½“ä½¿ç”¨ SSL æ—¶ï¼Œåˆ™æ¼”å˜æˆå…ˆå’Œ SSL é€šä¿¡ï¼Œå†ç”± SSL å’Œ TCP é€šä¿¡äº†ã€‚ç®€è¨€ä¹‹ï¼Œæ‰€è°“ HTTPSï¼Œå…¶å®å°±æ˜¯èº«æŠ« SSL åè®®è¿™å±‚å¤–å£³çš„ HTTPã€‚ SSL æ˜¯ç‹¬ç«‹äº HTTP çš„åè®®ï¼Œæ‰€ä»¥ä¸å…‰æ˜¯ HTTP åè®®ï¼Œå…¶ä»–è¿è¡Œåœ¨åº”ç”¨å±‚çš„ SMTP å’Œ Telnet ç­‰åè®®å‡å¯é…åˆ SSL åè®®ä½¿ç”¨ã€‚ å¯ä»¥è¯´ SSL æ˜¯ å½“ä»Šä¸–ç•Œä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ç½‘ç»œå®‰å…¨æŠ€æœ¯ã€‚ ç›¸äº’äº¤æ¢å¯†é’¥çš„å…¬å¼€å¯†é’¥åŠ å¯†æŠ€æœ¯SSL é‡‡ç”¨ä¸€ç§å«åšå…¬å¼€å¯†é’¥åŠ å¯†ï¼ˆPublic-key cryptographyï¼‰çš„åŠ å¯†å¤„ç†æ–¹å¼ã€‚ è¿‘ä»£çš„åŠ å¯†æ–¹æ³•ä¸­åŠ å¯†ç®—æ³•æ˜¯å…¬å¼€çš„ï¼Œè€Œå¯†é’¥å´æ˜¯ä¿å¯†çš„ã€‚é€šè¿‡è¿™ç§æ–¹å¼å¾—ä»¥ä¿æŒåŠ å¯†æ–¹æ³•çš„å®‰å…¨æ€§ã€‚ å¯¹ç§°åŠ å¯†ï¼šåŠ å¯†å’Œè§£å¯†åŒç”¨ä¸€ä¸ªå¯†é’¥ éå¯¹ç§°åŠ å¯†ï¼šå…¬å¼€å¯†é’¥åŠ å¯†ä½¿ç”¨ä¸€å¯¹éå¯¹ç§°çš„å¯†é’¥ã€‚ä¸€æŠŠå«åšç§æœ‰å¯†é’¥ï¼ˆprivate keyï¼‰ï¼Œå¦ä¸€æŠŠå«åšå…¬å¼€å¯†é’¥ï¼ˆpublic keyï¼‰ HTTPS é‡‡ç”¨å…±äº«å¯†é’¥åŠ å¯†å’Œå…¬å¼€å¯†é’¥åŠ å¯†ä¸¤è€…å¹¶ç”¨çš„æ··åˆåŠ å¯†æœºåˆ¶ã€‚ è‹¥å¯†é’¥èƒ½å¤Ÿå®ç°å®‰å…¨äº¤æ¢ï¼Œé‚£ä¹ˆæœ‰å¯èƒ½ä¼šè€ƒè™‘ä»…ä½¿ç”¨å…¬å¼€å¯†é’¥åŠ å¯†æ¥é€šä¿¡ã€‚ä½†æ˜¯å…¬å¼€å¯†é’¥åŠ å¯†ä¸å…±äº«å¯†é’¥åŠ å¯†ç›¸æ¯”ï¼Œå…¶å¤„ç†é€Ÿåº¦è¦æ…¢ã€‚ æ‰€ä»¥åº”å……åˆ†åˆ©ç”¨ä¸¤è€…å„è‡ªçš„ä¼˜åŠ¿ï¼Œå°†å¤šç§æ–¹æ³•ç»„åˆèµ·æ¥ç”¨äºé€šä¿¡ã€‚åœ¨äº¤æ¢å¯†é’¥ç¯èŠ‚ä½¿ç”¨å…¬å¼€å¯†é’¥åŠ å¯†æ–¹å¼ï¼Œä¹‹åçš„å»ºç«‹é€šä¿¡äº¤ æ¢æŠ¥æ–‡é˜¶æ®µåˆ™ä½¿ç”¨å…±äº«å¯†é’¥åŠ å¯†æ–¹å¼ã€‚ è¯æ˜å…¬å¼€å¯†é’¥æ­£ç¡®æ€§çš„è¯ä¹¦é—æ†¾çš„æ˜¯ï¼Œå…¬å¼€å¯†é’¥åŠ å¯†æ–¹å¼è¿˜æ˜¯å­˜åœ¨ä¸€äº›é—®é¢˜çš„ã€‚é‚£å°±æ˜¯æ— æ³•è¯æ˜å…¬å¼€å¯†é’¥æœ¬èº«å°±æ˜¯è´§çœŸä»·å®çš„å…¬å¼€å¯†é’¥ã€‚æˆ–è®¸åœ¨å…¬å¼€å¯†é’¥ä¼ è¾“é€”ä¸­ï¼ŒçœŸæ­£çš„å…¬å¼€å¯†é’¥å·²ç»è¢«æ”»å‡»è€…æ›¿æ¢æ‰äº†ã€‚ ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ç”±æ•°å­—è¯ä¹¦è®¤è¯æœºæ„ï¼ˆCAï¼ŒCertificate Authorityï¼‰å’Œå…¶ç›¸å…³æœºå…³é¢å‘çš„å…¬å¼€å¯†é’¥è¯ä¹¦ã€‚ HTTPS é€šä¿¡ æ­¥éª¤ 1ï¼š å®¢æˆ·ç«¯é€šè¿‡å‘é€ Client Hello æŠ¥æ–‡å¼€å§‹ SSL é€šä¿¡ã€‚æŠ¥æ–‡ä¸­åŒ…å«å®¢æˆ·ç«¯æ”¯æŒçš„ SSL çš„æŒ‡å®šç‰ˆæœ¬ã€åŠ å¯†ç»„ä»¶ï¼ˆCipher Suiteï¼‰åˆ—è¡¨ï¼ˆæ‰€ä½¿ç”¨çš„åŠ å¯†ç®—æ³•åŠå¯†é’¥é•¿åº¦ç­‰ï¼‰ã€‚ æ­¥éª¤ 2ï¼š æœåŠ¡å™¨å¯è¿›è¡Œ SSL é€šä¿¡æ—¶ï¼Œä¼šä»¥ Server Hello æŠ¥æ–‡ä½œä¸ºåº”ç­”ã€‚å’Œå®¢æˆ·ç«¯ä¸€æ ·ï¼Œåœ¨æŠ¥æ–‡ä¸­åŒ…å« SSL ç‰ˆæœ¬ä»¥åŠåŠ å¯†ç»„ä»¶ã€‚æœåŠ¡å™¨çš„åŠ å¯†ç»„ä»¶å†…å®¹æ˜¯ä»æ¥æ”¶åˆ°çš„å®¢æˆ·ç«¯åŠ å¯†ç»„ä»¶å†…ç­›é€‰å‡ºæ¥çš„ã€‚ æ­¥éª¤ 3ï¼š ä¹‹åæœåŠ¡å™¨å‘é€ Certificate æŠ¥æ–‡ã€‚æŠ¥æ–‡ä¸­åŒ…å«å…¬å¼€å¯†é’¥è¯ä¹¦ã€‚ æ­¥éª¤ 4ï¼š æœ€åæœåŠ¡å™¨å‘é€ Server Hello Done æŠ¥æ–‡é€šçŸ¥å®¢æˆ·ç«¯ï¼Œæœ€åˆé˜¶æ®µçš„ SSL æ¡æ‰‹åå•†éƒ¨åˆ†ç»“æŸã€‚ æ­¥éª¤ 5ï¼š SSL ç¬¬ä¸€æ¬¡æ¡æ‰‹ç»“æŸä¹‹åï¼Œå®¢æˆ·ç«¯ä»¥ Client Key Exchange æŠ¥ æ–‡ä½œä¸ºå›åº”ã€‚æŠ¥æ–‡ä¸­åŒ…å«é€šä¿¡åŠ å¯†ä¸­ä½¿ç”¨çš„ä¸€ç§è¢«ç§°ä¸º Pre-master secret çš„éšæœºå¯†ç ä¸²ã€‚è¯¥æŠ¥æ–‡å·²ç”¨æ­¥éª¤ 3 ä¸­çš„å…¬å¼€å¯†é’¥è¿›è¡ŒåŠ å¯†ã€‚ æ­¥éª¤ 6ï¼š æ¥ç€å®¢æˆ·ç«¯ç»§ç»­å‘é€ Change Cipher Spec æŠ¥æ–‡ã€‚è¯¥æŠ¥æ–‡ä¼šæç¤ºæœåŠ¡å™¨ï¼Œåœ¨æ­¤æŠ¥æ–‡ä¹‹åçš„é€šä¿¡ä¼šé‡‡ç”¨ Pre-master secret å¯†é’¥åŠ å¯†ã€‚ æ­¥éª¤ 7ï¼š å®¢æˆ·ç«¯å‘é€ Finished æŠ¥æ–‡ã€‚è¯¥æŠ¥æ–‡åŒ…å«è¿æ¥è‡³ä»Šå…¨éƒ¨æŠ¥æ–‡çš„æ•´ä½“æ ¡éªŒå€¼ã€‚è¿™æ¬¡æ¡æ‰‹åå•†æ˜¯å¦èƒ½å¤ŸæˆåŠŸï¼Œè¦ä»¥æœåŠ¡å™¨æ˜¯å¦èƒ½å¤Ÿæ­£ç¡®è§£å¯†è¯¥æŠ¥æ–‡ä½œä¸ºåˆ¤å®šæ ‡å‡†ã€‚ æ­¥éª¤ 8ï¼š æœåŠ¡å™¨åŒæ ·å‘é€ Change Cipher Spec æŠ¥æ–‡ã€‚ æ­¥éª¤ 9ï¼š æœåŠ¡å™¨åŒæ ·å‘é€ Finished æŠ¥æ–‡ã€‚ æ­¥éª¤ 10ï¼š æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„ Finished æŠ¥æ–‡äº¤æ¢å®Œæ¯•ä¹‹åï¼ŒSSL è¿æ¥ å°±ç®—å»ºç«‹å®Œæˆã€‚å½“ç„¶ï¼Œé€šä¿¡ä¼šå—åˆ° SSL çš„ä¿æŠ¤ã€‚ä»æ­¤å¤„å¼€å§‹è¿›è¡Œåº”ç”¨å±‚åè®®çš„é€šä¿¡ï¼Œå³å‘é€ HTTP è¯·æ±‚ã€‚ æ­¥éª¤ 11ï¼š åº”ç”¨å±‚åè®®é€šä¿¡ï¼Œå³å‘é€ HTTP å“åº”ã€‚ æ­¥éª¤ 12ï¼š æœ€åç”±å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ã€‚æ–­å¼€è¿æ¥æ—¶ï¼Œå‘é€ close_notify æŠ¥æ–‡ã€‚ä¸Šå›¾åšäº†ä¸€äº›çœç•¥ï¼Œè¿™æ­¥ä¹‹åå†å‘é€ TCP FIN æŠ¥æ–‡æ¥å…³é—­ä¸ TCP çš„é€šä¿¡ã€‚ HTTPS ç¼ºç‚¹HTTPS ä¹Ÿå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œé‚£å°±æ˜¯å½“ä½¿ç”¨ SSL æ—¶ï¼Œå®ƒçš„å¤„ç†é€Ÿåº¦ä¼šå˜æ…¢ã€‚ SSL çš„æ…¢åˆ†ä¸¤ç§ï¼šä¸€ç§æ˜¯æŒ‡é€šä¿¡æ…¢ï¼Œå¦ä¸€ç§æ˜¯æŒ‡ç”±äºå¤§é‡æ¶ˆè€— CPU åŠå†…å­˜ç­‰èµ„æºï¼Œå¯¼è‡´å¤„ç†é€Ÿåº¦å˜æ…¢ã€‚ å¦‚æœæ˜¯éæ•æ„Ÿä¿¡æ¯åˆ™ä½¿ç”¨ HTTP é€šä¿¡ï¼Œåªæœ‰åœ¨åŒ…å«ä¸ªäººä¿¡æ¯ç­‰æ•æ„Ÿæ•°æ®æ—¶ï¼Œæ‰åˆ©ç”¨ HTTPS åŠ å¯†é€šä¿¡ã€‚ ç‰¹åˆ«æ˜¯æ¯å½“é‚£äº›è®¿é—®é‡è¾ƒå¤šçš„ Web ç½‘ç«™åœ¨è¿›è¡ŒåŠ å¯†å¤„ç†æ—¶ï¼Œå®ƒä»¬æ‰€æ‰¿æ‹…ç€çš„è´Ÿè½½ä¸å®¹å°è§‘ã€‚åœ¨è¿›è¡ŒåŠ å¯†å¤„ç†æ—¶ï¼Œå¹¶éå¯¹æ‰€æœ‰å†…å®¹éƒ½è¿›è¡ŒåŠ å¯†å¤„ç†ï¼Œè€Œæ˜¯ä»…åœ¨é‚£äº›éœ€è¦ä¿¡æ¯éšè—æ—¶æ‰ä¼šåŠ å¯†ï¼Œä»¥èŠ‚çº¦èµ„æºã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œæƒ³è¦èŠ‚çº¦è´­ä¹°è¯ä¹¦çš„å¼€é”€ä¹Ÿæ˜¯åŸå› ä¹‹ä¸€ã€‚ Web æ”»å‡»æŠ€æœ¯ç®€å•çš„ HTTP åè®®æœ¬èº«å¹¶ä¸å­˜åœ¨å®‰å…¨æ€§é—®é¢˜ï¼Œå› æ­¤åè®®æœ¬èº«å‡ ä¹ä¸ä¼š æˆä¸ºæ”»å‡»çš„å¯¹è±¡ã€‚ åº”ç”¨ HTTP åè®®çš„æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ï¼Œä»¥åŠè¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šçš„ Web åº”ç”¨ç­‰èµ„æºæ‰æ˜¯æ”»å‡»ç›®æ ‡ã€‚ ä»æ•´ä½“ä¸Šçœ‹ï¼ŒHTTP å°±æ˜¯ä¸€ä¸ªé€šç”¨çš„å•çº¯åè®®æœºåˆ¶ã€‚å› æ­¤å®ƒå…·å¤‡è¾ƒå¤šä¼˜åŠ¿ï¼Œä½†æ˜¯åœ¨å®‰å…¨æ€§æ–¹é¢åˆ™å‘ˆåŠ£åŠ¿ã€‚ æ‹¿è¿œç¨‹ç™»å½•æ—¶ä¼šç”¨åˆ°çš„ SSH åè®®æ¥è¯´ï¼ŒSSH å…·å¤‡åè®®çº§åˆ«çš„è®¤è¯åŠä¼šè¯ç®¡ç†ç­‰åŠŸèƒ½ï¼ŒHTTP åè®®åˆ™æ²¡æœ‰ã€‚å¦å¤–åœ¨æ¶è®¾ SSH æœåŠ¡æ–¹é¢ï¼Œä»»ä½•äººéƒ½å¯ä»¥è½»æ˜“åœ°åˆ›å»ºå®‰å…¨ç­‰çº§é«˜çš„æœåŠ¡ï¼Œè€Œ HTTP å³ä½¿å·²æ¶è®¾å¥½æœåŠ¡å™¨ï¼Œä½†è‹¥æƒ³æä¾›æœåŠ¡å™¨åŸºç¡€ä¸Šçš„ Web åº”ç”¨ï¼Œå¾ˆå¤šæƒ…å†µä¸‹éƒ½éœ€è¦é‡æ–°å¼€å‘ã€‚ å› æ­¤ï¼Œå¼€å‘è€…éœ€è¦è‡ªè¡Œè®¾è®¡å¹¶å¼€å‘è®¤è¯åŠä¼šè¯ç®¡ç†åŠŸèƒ½æ¥æ»¡è¶³ Web åº”ç”¨çš„å®‰å…¨ã€‚è€Œè‡ªè¡Œè®¾è®¡å°±æ„å‘³ç€ä¼šå‡ºç°å„ç§å½¢å½¢è‰²è‰²çš„å®ç°ã€‚ç»“æœï¼Œå®‰å…¨ç­‰çº§å¹¶ä¸å®Œå¤‡ï¼Œå¯ä»åœ¨è¿ä½œçš„ Web åº”ç”¨èƒŒåå´éšè—ç€å„ç§å®¹æ˜“è¢«æ”»å‡»è€…æ»¥ç”¨çš„å®‰å…¨æ¼æ´çš„ Bugã€‚ æ”»å‡»æ¨¡å¼ ä»¥æœåŠ¡å™¨ä¸ºç›®æ ‡çš„ä¸»åŠ¨æ”»å‡»ï¼ˆactive attackï¼‰ï¼šæ”»å‡»è€…é€šè¿‡ç›´æ¥è®¿é—® Web åº”ç”¨ï¼Œ æŠŠæ”»å‡»ä»£ç ä¼ å…¥çš„æ”»å‡»æ¨¡å¼ã€‚ç”±äºè¯¥æ¨¡å¼æ˜¯ç›´æ¥é’ˆå¯¹æœåŠ¡å™¨ä¸Šçš„èµ„æºè¿›è¡Œæ”»å‡»ï¼Œå› æ­¤æ”»å‡»è€…éœ€è¦èƒ½å¤Ÿè®¿é—®åˆ°é‚£äº›èµ„æºã€‚ SQL æ³¨å…¥æ”»å‡» OS å‘½ä»¤æ³¨å…¥æ”»å‡» ä»¥æœåŠ¡å™¨ä¸ºç›®æ ‡çš„è¢«åŠ¨æ”»å‡»ï¼ˆpassive attackï¼‰ï¼šåˆ©ç”¨åœˆå¥—ç­–ç•¥æ‰§è¡Œæ”»å‡»ä»£ç çš„æ”»å‡»æ¨¡å¼ã€‚åœ¨è¢«åŠ¨æ”»å‡»è¿‡ç¨‹ä¸­ï¼Œæ”»å‡»è€…ä¸ç›´æ¥å¯¹ç›®æ ‡ Web åº”ç”¨è®¿é—®å‘èµ·æ”»å‡»ã€‚ è·¨ç«™è„šæœ¬æ”»å‡» è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ ","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Computer Network","slug":"Computer-Basics/Computer-Network","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Computer-Network/"}],"tags":[{"name":"HTTP","slug":"HTTP","permalink":"http://blog.sukiu.top/tags/HTTP/"}]},{"title":"Redisè®¾è®¡ä¸å®ç°","slug":"Redis-Pro","date":"2022-03-03T04:02:00.000Z","updated":"2022-03-03T04:02:00.000Z","comments":true,"path":"Database/Redis/Redis-Pro/","link":"","permalink":"http://blog.sukiu.top/Database/Redis/Redis-Pro/","excerpt":"ã€ŠRedis è®¾è®¡ä¸å®ç°ã€‹ä¸€ä¹¦å…¨é¢è€Œå®Œæ•´åœ°è®²è§£äº† Redis çš„å†…éƒ¨è¿è¡Œæœºåˆ¶ï¼Œ å¯¹ Redis çš„å¤§å¤šæ•°å•æœºåŠŸèƒ½ä»¥åŠæ‰€æœ‰å¤šæœºåŠŸèƒ½çš„å®ç°åŸç†è¿›è¡Œäº†ä»‹ç»ï¼Œ å±•ç¤ºäº†è¿™äº›åŠŸèƒ½çš„æ ¸å¿ƒæ•°æ®ç»“æ„ä»¥åŠå…³é”®çš„ç®—æ³•æ€æƒ³ã€‚","text":"ã€ŠRedis è®¾è®¡ä¸å®ç°ã€‹ä¸€ä¹¦å…¨é¢è€Œå®Œæ•´åœ°è®²è§£äº† Redis çš„å†…éƒ¨è¿è¡Œæœºåˆ¶ï¼Œ å¯¹ Redis çš„å¤§å¤šæ•°å•æœºåŠŸèƒ½ä»¥åŠæ‰€æœ‰å¤šæœºåŠŸèƒ½çš„å®ç°åŸç†è¿›è¡Œäº†ä»‹ç»ï¼Œ å±•ç¤ºäº†è¿™äº›åŠŸèƒ½çš„æ ¸å¿ƒæ•°æ®ç»“æ„ä»¥åŠå…³é”®çš„ç®—æ³•æ€æƒ³ã€‚ åº•å±‚æ•°æ®ç»“æ„ç®€å•åŠ¨æ€å­—ç¬¦ä¸² Redis åªä¼šä½¿ç”¨ C å­—ç¬¦ä¸²ä½œä¸ºå­—é¢é‡ï¼Œ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ Redis ä½¿ç”¨ SDS ï¼ˆSimple Dynamic Stringï¼Œç®€å•åŠ¨æ€å­—ç¬¦ä¸²ï¼‰ä½œä¸ºå­—ç¬¦ä¸²è¡¨ç¤ºã€‚ æ¯”èµ· C å­—ç¬¦ä¸²ï¼Œ SDS å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š å¸¸æ•°å¤æ‚åº¦è·å–å­—ç¬¦ä¸²é•¿åº¦ã€‚ æœç»ç¼“å†²åŒºæº¢å‡ºã€‚ å‡å°‘ä¿®æ”¹å­—ç¬¦ä¸²é•¿åº¦æ—¶æ‰€éœ€çš„å†…å­˜é‡åˆ†é…æ¬¡æ•°ã€‚ äºŒè¿›åˆ¶å®‰å…¨ã€‚ å…¼å®¹éƒ¨åˆ† C å­—ç¬¦ä¸²å‡½æ•°ã€‚ Redis æ²¡æœ‰ç›´æ¥ä½¿ç”¨ C è¯­è¨€ä¼ ç»Ÿçš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼ˆä»¥ç©ºå­—ç¬¦ç»“å°¾çš„å­—ç¬¦æ•°ç»„ï¼‰ï¼Œ è€Œæ˜¯è‡ªå·±æ„å»ºäº†ä¸€ç§åä¸ºç®€å•åŠ¨æ€å­—ç¬¦ä¸²ï¼ˆsimple dynamic stringï¼ŒSDSï¼‰çš„æŠ½è±¡ç±»å‹ï¼Œ å¹¶å°† SDS ç”¨ä½œ Redis çš„é»˜è®¤å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œæ˜¯ä¸€ä¸ªå¯ä»¥è¢«ä¿®æ”¹çš„å­—ç¬¦ä¸²å€¼ã€‚ åœ¨ Redis é‡Œé¢ï¼Œ C å­—ç¬¦ä¸²åªä¼šä½œä¸ºå­—ç¬¦ä¸²å­—é¢é‡ï¼ˆstring literalï¼‰ï¼Œ ç”¨åœ¨ä¸€äº›æ— é¡»å¯¹å­—ç¬¦ä¸²å€¼è¿›è¡Œä¿®æ”¹çš„åœ°æ–¹ï¼Œ æ¯”å¦‚æ‰“å°æ—¥å¿— 12redis&gt; SET msg &quot;hello world&quot;OK å…¶ä¸­ï¼š é”®å€¼å¯¹çš„é”®æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œ å¯¹è±¡çš„åº•å±‚å®ç°æ˜¯ä¸€ä¸ªä¿å­˜ç€å­—ç¬¦ä¸² &quot;msg&quot; çš„ SDS ã€‚ é”®å€¼å¯¹çš„å€¼ä¹Ÿæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œ å¯¹è±¡çš„åº•å±‚å®ç°æ˜¯ä¸€ä¸ªä¿å­˜ç€å­—ç¬¦ä¸² &quot;hello world&quot; çš„ SDS ã€‚ åº•å±‚å®ç°æ¯ä¸ª sds.h/sdshdr ç»“æ„è¡¨ç¤ºä¸€ä¸ª SDS å€¼ï¼š 123456789struct sdshdr &#123; // è®°å½• buf æ•°ç»„ä¸­å·²ä½¿ç”¨å­—èŠ‚çš„æ•°é‡ // ç­‰äº SDS æ‰€ä¿å­˜å­—ç¬¦ä¸²çš„é•¿åº¦ int len; // è®°å½• buf æ•°ç»„ä¸­æœªä½¿ç”¨å­—èŠ‚çš„æ•°é‡ int free; // å­—èŠ‚æ•°ç»„ï¼Œç”¨äºä¿å­˜å­—ç¬¦ä¸² char buf[];&#125;; ä¸€ä¸ª SDS ç¤ºä¾‹ï¼š free å±æ€§çš„å€¼ä¸º 0 ï¼Œ è¡¨ç¤ºè¿™ä¸ª SDS æ²¡æœ‰åˆ†é…ä»»ä½•æœªä½¿ç”¨ç©ºé—´ã€‚ len å±æ€§çš„å€¼ä¸º 5 ï¼Œ è¡¨ç¤ºè¿™ä¸ª SDS ä¿å­˜äº†ä¸€ä¸ªäº”å­—èŠ‚é•¿çš„å­—ç¬¦ä¸²ã€‚ buf å±æ€§æ˜¯ä¸€ä¸ª char ç±»å‹çš„æ•°ç»„ï¼Œ æ•°ç»„çš„å‰äº”ä¸ªå­—èŠ‚åˆ†åˆ«ä¿å­˜äº† &#39;R&#39; ã€ &#39;e&#39; ã€ &#39;d&#39; ã€ &#39;i&#39; ã€ &#39;s&#39; äº”ä¸ªå­—ç¬¦ï¼Œ è€Œæœ€åä¸€ä¸ªå­—èŠ‚åˆ™ä¿å­˜äº†ç©ºå­—ç¬¦ &#39;\\0&#39;ï¼ˆæœ‰éœ€è¦æ—¶é‡ç”¨ &lt;string.h&gt; å‡½æ•°åº“ï¼‰ ã€‚ SDS éµå¾ª C å­—ç¬¦ä¸²ä»¥ç©ºå­—ç¬¦ç»“å°¾çš„æƒ¯ä¾‹ï¼Œ ä¿å­˜ç©ºå­—ç¬¦çš„ 1 å­—èŠ‚ç©ºé—´ä¸è®¡ç®—åœ¨ SDS çš„ len å±æ€§é‡Œé¢ï¼Œ å¹¶ä¸”ä¸ºç©ºå­—ç¬¦åˆ†é…é¢å¤–çš„ 1 å­—èŠ‚ç©ºé—´ï¼Œ ä»¥åŠæ·»åŠ ç©ºå­—ç¬¦åˆ°å­—ç¬¦ä¸²æœ«å°¾ç­‰æ“ä½œéƒ½æ˜¯ç”± SDS å‡½æ•°è‡ªåŠ¨å®Œæˆçš„ï¼Œ æ‰€ä»¥è¿™ä¸ªç©ºå­—ç¬¦å¯¹äº SDS çš„ä½¿ç”¨è€…æ¥è¯´æ˜¯å®Œå…¨é€æ˜çš„ã€‚ éµå¾ªç©ºå­—ç¬¦ç»“å°¾è¿™ä¸€æƒ¯ä¾‹çš„å¥½å¤„æ˜¯ï¼Œ SDS å¯ä»¥ç›´æ¥é‡ç”¨ä¸€éƒ¨åˆ† C å­—ç¬¦ä¸²å‡½æ•°åº“é‡Œé¢çš„å‡½æ•°ã€‚ å¦‚æœæœ‰ä¸ªæŒ‡é’ˆ s æŒ‡å‘ SDSï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ printf(&quot;%s&quot;, s-&gt;buf); æ‰“å° ä¸‹é¢è¿™ä¸ª SDS ä¸º buf æ•°ç»„åˆ†é…äº†äº”å­—èŠ‚æœªä½¿ç”¨ç©ºé—´ï¼Œ æ‰€ä»¥å®ƒçš„ free å±æ€§çš„å€¼ä¸º 5 SDS ä¸ C å­—ç¬¦ä¸²çš„åŒºåˆ«C è¯­è¨€ä½¿ç”¨é•¿åº¦ä¸º N+1 çš„å­—ç¬¦æ•°ç»„æ¥è¡¨ç¤ºé•¿åº¦ä¸º N çš„å­—ç¬¦ä¸²ï¼Œ å¹¶ä¸”å­—ç¬¦æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ æ€»æ˜¯ç©ºå­—ç¬¦ &#39;\\0&#39; ä»¥ä¸Šå¹¶ä¸èƒ½æ»¡è¶³ Redis å¯¹å­—ç¬¦ä¸²åœ¨å®‰å…¨æ€§ã€æ•ˆç‡ã€ä»¥åŠåŠŸèƒ½æ–¹é¢çš„è¦æ±‚ï¼š SDS é€šè¿‡æœªä½¿ç”¨ç©ºé—´è§£é™¤äº†å­—ç¬¦ä¸²é•¿åº¦å’Œåº•å±‚æ•°ç»„é•¿åº¦ä¹‹é—´çš„å…³è”ï¼š åœ¨ SDS ä¸­ï¼Œ buf æ•°ç»„çš„é•¿åº¦ä¸ä¸€å®šå°±æ˜¯å­—ç¬¦æ•°é‡åŠ ä¸€ï¼Œ æ•°ç»„é‡Œé¢å¯ä»¥åŒ…å«æœªä½¿ç”¨çš„å­—èŠ‚ï¼Œ è€Œè¿™äº›å­—èŠ‚çš„æ•°é‡å°±ç”± SDS çš„ free å±æ€§è®°å½•ã€‚ å¯¹äº C å­—ç¬¦ä¸²ï¼š å¦‚æœç¨‹åºæ‰§è¡Œçš„æ˜¯å¢é•¿å­—ç¬¦ä¸²çš„æ“ä½œï¼Œ æ¯”å¦‚æ‹¼æ¥æ“ä½œï¼ˆappendï¼‰ï¼Œ é‚£ä¹ˆåœ¨æ‰§è¡Œè¿™ä¸ªæ“ä½œä¹‹å‰ï¼Œ ç¨‹åºéœ€è¦å…ˆé€šè¿‡å†…å­˜é‡åˆ†é…æ¥æ‰©å±•åº•å±‚æ•°ç»„çš„ç©ºé—´å¤§å° â€”â€” å¦‚æœå¿˜äº†è¿™ä¸€æ­¥å°±ä¼šäº§ç”Ÿç¼“å†²åŒºæº¢å‡ºã€‚ å¦‚æœç¨‹åºæ‰§è¡Œçš„æ˜¯ç¼©çŸ­å­—ç¬¦ä¸²çš„æ“ä½œï¼Œ æ¯”å¦‚æˆªæ–­æ“ä½œï¼ˆtrimï¼‰ï¼Œ é‚£ä¹ˆåœ¨æ‰§è¡Œè¿™ä¸ªæ“ä½œä¹‹åï¼Œ ç¨‹åºéœ€è¦é€šè¿‡å†…å­˜é‡åˆ†é…æ¥é‡Šæ”¾å­—ç¬¦ä¸²ä¸å†ä½¿ç”¨çš„é‚£éƒ¨åˆ†ç©ºé—´ â€”â€” å¦‚æœå¿˜äº†è¿™ä¸€æ­¥å°±ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼ã€‚ Redis ä½œä¸ºæ•°æ®åº“ï¼Œ ç»å¸¸è¢«ç”¨äºé€Ÿåº¦è¦æ±‚ä¸¥è‹›ã€æ•°æ®è¢«é¢‘ç¹ä¿®æ”¹çš„åœºåˆï¼Œ å¦‚æœæ¯æ¬¡ä¿®æ”¹å­—ç¬¦ä¸²çš„é•¿åº¦éƒ½éœ€è¦æ‰§è¡Œä¸€æ¬¡å†…å­˜é‡åˆ†é…çš„è¯ï¼Œ é‚£ä¹ˆå…‰æ˜¯æ‰§è¡Œå†…å­˜é‡åˆ†é…çš„æ—¶é—´å°±ä¼šå å»ä¿®æ”¹å­—ç¬¦ä¸²æ‰€ç”¨æ—¶é—´çš„ä¸€å¤§éƒ¨åˆ†ï¼Œ å¦‚æœè¿™ç§ä¿®æ”¹é¢‘ç¹åœ°å‘ç”Ÿçš„è¯ï¼Œ å¯èƒ½è¿˜ä¼šå¯¹æ€§èƒ½é€ æˆå½±å“ã€‚ ç©ºé—´é¢„åˆ†é…ï¼šä¼˜åŒ– SDS çš„å­—ç¬¦ä¸²å¢é•¿æ“ä½œï¼Œç¨‹åºä¸ä»…ä¼šä¸º SDS åˆ†é…ä¿®æ”¹æ‰€å¿…é¡»è¦çš„ç©ºé—´ï¼Œ è¿˜ä¼šä¸º SDS åˆ†é…é¢å¤–çš„æœªä½¿ç”¨ç©ºé—´ã€‚ æƒ°æ€§ç©ºé—´é‡Šæ”¾ï¼šä¼˜åŒ– SDS çš„å­—ç¬¦ä¸²ç¼©çŸ­æ“ä½œï¼Œç¨‹åºå¹¶ä¸ç«‹å³ä½¿ç”¨å†…å­˜é‡åˆ†é…æ¥å›æ”¶ç¼©çŸ­åå¤šå‡ºæ¥çš„å­—èŠ‚ï¼Œ è€Œæ˜¯ä½¿ç”¨ free å±æ€§å°†è¿™äº›å­—èŠ‚çš„æ•°é‡è®°å½•èµ·æ¥ï¼Œ å¹¶ç­‰å¾…å°†æ¥ä½¿ç”¨ã€‚ C å­—ç¬¦ä¸²SDSè·å–å­—ç¬¦ä¸²é•¿åº¦çš„å¤æ‚åº¦ä¸º&nbsp;O(N)&nbsp;è·å–å­—ç¬¦ä¸²é•¿åº¦çš„å¤æ‚åº¦ä¸º&nbsp;O(1)&nbsp;API æ˜¯ä¸å®‰å…¨çš„ï¼Œå¯èƒ½ä¼šé€ æˆç¼“å†²åŒºæº¢å‡ºAPI æ˜¯å®‰å…¨çš„ï¼Œä¸ä¼šé€ æˆç¼“å†²åŒºæº¢å‡ºï¼Œè‡ªåŠ¨å°† SDS çš„ç©ºé—´æ‰©å±•è‡³æ‰§è¡Œä¿®æ”¹æ‰€éœ€çš„å¤§å°ä¿®æ”¹å­—ç¬¦ä¸²é•¿åº¦&nbsp;N&nbsp; æ¬¡å¿…ç„¶éœ€è¦æ‰§è¡Œ&nbsp;N&nbsp; æ¬¡å†…å­˜é‡åˆ†é…ä¿®æ”¹å­—ç¬¦ä¸²é•¿åº¦&nbsp;N&nbsp; æ¬¡æœ€å¤šéœ€è¦æ‰§è¡Œ&nbsp;N&nbsp; æ¬¡å†…å­˜é‡åˆ†é…ã€‚åªèƒ½ä¿å­˜æ–‡æœ¬æ•°æ®å¯ä»¥ä¿å­˜æ–‡æœ¬æˆ–è€…äºŒè¿›åˆ¶æ•°æ®ï¼Œä»¥å¤„ç†äºŒè¿›åˆ¶çš„æ–¹å¼æ¥å¤„ç† SDS å­˜æ”¾åœ¨ buf æ•°ç»„é‡Œçš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨æ‰€æœ‰&nbsp;&lt;string.h&gt;&nbsp; åº“ä¸­çš„å‡½æ•°å¯ä»¥ä½¿ç”¨ä¸€éƒ¨åˆ†&nbsp;&lt;string.h&gt;&nbsp; åº“ä¸­çš„å‡½æ•° é“¾è¡¨ é“¾è¡¨è¢«å¹¿æ³›ç”¨äºå®ç° Redis çš„å„ç§åŠŸèƒ½ï¼Œ æ¯”å¦‚åˆ—è¡¨é”®ï¼Œ å‘å¸ƒä¸è®¢é˜…ï¼Œ æ…¢æŸ¥è¯¢ï¼Œ ç›‘è§†å™¨ï¼Œ ç­‰ç­‰ã€‚ æ¯ä¸ªé“¾è¡¨èŠ‚ç‚¹ç”±ä¸€ä¸ª listNode ç»“æ„æ¥è¡¨ç¤ºï¼Œ æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªæŒ‡å‘å‰ç½®èŠ‚ç‚¹å’Œåç½®èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œ æ‰€ä»¥ Redis çš„é“¾è¡¨å®ç°æ˜¯åŒç«¯é“¾è¡¨ã€‚ æ¯ä¸ªé“¾è¡¨ä½¿ç”¨ä¸€ä¸ª list ç»“æ„æ¥è¡¨ç¤ºï¼Œ è¿™ä¸ªç»“æ„å¸¦æœ‰è¡¨å¤´èŠ‚ç‚¹æŒ‡é’ˆã€è¡¨å°¾èŠ‚ç‚¹æŒ‡é’ˆã€ä»¥åŠé“¾è¡¨é•¿åº¦ç­‰ä¿¡æ¯ã€‚ å› ä¸ºé“¾è¡¨è¡¨å¤´èŠ‚ç‚¹çš„å‰ç½®èŠ‚ç‚¹å’Œè¡¨å°¾èŠ‚ç‚¹çš„åç½®èŠ‚ç‚¹éƒ½æŒ‡å‘ NULL ï¼Œ æ‰€ä»¥ Redis çš„é“¾è¡¨å®ç°æ˜¯æ— ç¯é“¾è¡¨ã€‚ é€šè¿‡ä¸ºé“¾è¡¨è®¾ç½®ä¸åŒçš„ç±»å‹ç‰¹å®šå‡½æ•°ï¼Œ Redis çš„é“¾è¡¨å¯ä»¥ç”¨äºä¿å­˜å„ç§ä¸åŒç±»å‹çš„å€¼ã€‚ åº•å±‚å®ç°æ¯ä¸ªé“¾è¡¨èŠ‚ç‚¹ä½¿ç”¨ä¸€ä¸ª adlist.h/listNode ç»“æ„æ¥è¡¨ç¤ºï¼Œå³ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼š 12345678typedef struct listNode &#123; // å‰ç½®èŠ‚ç‚¹ struct listNode *prev; // åç½®èŠ‚ç‚¹ struct listNode *next; // èŠ‚ç‚¹çš„å€¼ void *value;&#125; listNode; ä½¿ç”¨ adlist.h/list æ¥æŒæœ‰é“¾è¡¨çš„è¯ï¼Œ æ“ä½œèµ·æ¥ä¼šæ›´æ–¹ä¾¿ï¼š 1234567891011121314typedef struct list &#123; // è¡¨å¤´èŠ‚ç‚¹ listNode *head; // è¡¨å°¾èŠ‚ç‚¹ listNode *tail; // é“¾è¡¨æ‰€åŒ…å«çš„èŠ‚ç‚¹æ•°é‡ unsigned long len; // èŠ‚ç‚¹å€¼å¤åˆ¶å‡½æ•° void *(*dup)(void *ptr); // èŠ‚ç‚¹å€¼é‡Šæ”¾å‡½æ•° void (*free)(void *ptr); // èŠ‚ç‚¹å€¼å¯¹æ¯”å‡½æ•° int (*match)(void *ptr, void *key);&#125; list; é“¾è¡¨ç‰¹æ€§Redis çš„é“¾è¡¨å®ç°çš„ç‰¹æ€§å¯ä»¥æ€»ç»“å¦‚ä¸‹ï¼š åŒç«¯ï¼š é“¾è¡¨èŠ‚ç‚¹å¸¦æœ‰ prev å’Œ next æŒ‡é’ˆï¼Œ è·å–æŸä¸ªèŠ‚ç‚¹çš„å‰ç½®èŠ‚ç‚¹å’Œåç½®èŠ‚ç‚¹çš„å¤æ‚åº¦éƒ½æ˜¯ $O(1)$ã€‚ æ— ç¯ï¼š è¡¨å¤´èŠ‚ç‚¹çš„ prev æŒ‡é’ˆå’Œè¡¨å°¾èŠ‚ç‚¹çš„ next æŒ‡é’ˆéƒ½æŒ‡å‘ NULL ï¼Œ å¯¹é“¾è¡¨çš„è®¿é—®ä»¥ NULL ä¸ºç»ˆç‚¹ã€‚ å¸¦è¡¨å¤´æŒ‡é’ˆå’Œè¡¨å°¾æŒ‡é’ˆï¼š é€šè¿‡ list ç»“æ„çš„ head æŒ‡é’ˆå’Œ tail æŒ‡é’ˆï¼Œ ç¨‹åºè·å–é“¾è¡¨çš„è¡¨å¤´èŠ‚ç‚¹å’Œè¡¨å°¾èŠ‚ç‚¹çš„å¤æ‚åº¦ä¸º $O(1)$ã€‚ å¸¦é“¾è¡¨é•¿åº¦è®¡æ•°å™¨ï¼š ç¨‹åºä½¿ç”¨ list ç»“æ„çš„ len å±æ€§æ¥å¯¹ list æŒæœ‰çš„é“¾è¡¨èŠ‚ç‚¹è¿›è¡Œè®¡æ•°ï¼Œ ç¨‹åºè·å–é“¾è¡¨ä¸­èŠ‚ç‚¹æ•°é‡çš„å¤æ‚åº¦ä¸º $O(1)$ã€‚ å¤šæ€ï¼š é“¾è¡¨èŠ‚ç‚¹ä½¿ç”¨ void* æŒ‡é’ˆæ¥ä¿å­˜èŠ‚ç‚¹å€¼ï¼Œ å¹¶ä¸”å¯ä»¥é€šè¿‡ list ç»“æ„çš„ dup ã€ free ã€ match ä¸‰ä¸ªå±æ€§ä¸ºèŠ‚ç‚¹å€¼è®¾ç½®ç±»å‹ç‰¹å®šå‡½æ•°ï¼Œ æ‰€ä»¥é“¾è¡¨å¯ä»¥ç”¨äºä¿å­˜å„ç§ä¸åŒç±»å‹çš„å€¼ã€‚ å­—å…¸ å­—å…¸è¢«å¹¿æ³›ç”¨äºå®ç° Redis çš„å„ç§åŠŸèƒ½ï¼Œ å…¶ä¸­åŒ…æ‹¬æ•°æ®åº“å’Œå“ˆå¸Œé”®ã€‚ Redis ä¸­çš„å­—å…¸ä½¿ç”¨å“ˆå¸Œè¡¨ä½œä¸ºåº•å±‚å®ç°ï¼Œ æ¯ä¸ªå­—å…¸å¸¦æœ‰ä¸¤ä¸ªå“ˆå¸Œè¡¨ï¼Œ ä¸€ä¸ªç”¨äºå¹³æ—¶ä½¿ç”¨ï¼Œ å¦ä¸€ä¸ªä»…åœ¨è¿›è¡Œ rehash æ—¶ä½¿ç”¨ã€‚ å½“å­—å…¸è¢«ç”¨ä½œæ•°æ®åº“çš„åº•å±‚å®ç°ï¼Œ æˆ–è€…å“ˆå¸Œé”®çš„åº•å±‚å®ç°æ—¶ï¼Œ Redis ä½¿ç”¨ MurmurHash2 ç®—æ³•æ¥è®¡ç®—é”®çš„å“ˆå¸Œå€¼ã€‚ å“ˆå¸Œè¡¨ä½¿ç”¨é“¾åœ°å€æ³•æ¥è§£å†³é”®å†²çªï¼Œ è¢«åˆ†é…åˆ°åŒä¸€ä¸ªç´¢å¼•ä¸Šçš„å¤šä¸ªé”®å€¼å¯¹ä¼šè¿æ¥æˆä¸€ä¸ªå•å‘é“¾è¡¨ã€‚ åœ¨å¯¹å“ˆå¸Œè¡¨è¿›è¡Œæ‰©å±•æˆ–è€…æ”¶ç¼©æ“ä½œæ—¶ï¼Œ ç¨‹åºéœ€è¦å°†ç°æœ‰å“ˆå¸Œè¡¨åŒ…å«çš„æ‰€æœ‰é”®å€¼å¯¹ rehash åˆ°æ–°å“ˆå¸Œè¡¨é‡Œé¢ï¼Œ å¹¶ä¸”è¿™ä¸ª rehash è¿‡ç¨‹å¹¶ä¸æ˜¯ä¸€æ¬¡æ€§åœ°å®Œæˆçš„ï¼Œ è€Œæ˜¯æ¸è¿›å¼åœ°å®Œæˆçš„ã€‚ åº•å±‚å®ç°Redis å­—å…¸æ‰€ä½¿ç”¨çš„å“ˆå¸Œè¡¨ç”± dict.h/dictht ç»“æ„å®šä¹‰ï¼š 123456789101112typedef struct dictht &#123; // å“ˆå¸Œè¡¨æ•°ç»„ // æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘ dict.h/dictEntry ç»“æ„çš„æŒ‡é’ˆï¼Œ æ¯ä¸ª dictEntry ç»“æ„ä¿å­˜ç€ä¸€ä¸ªé”®å€¼å¯¹ã€‚ dictEntry **table; // å“ˆå¸Œè¡¨å¤§å° unsigned long size; // å“ˆå¸Œè¡¨å¤§å°æ©ç ï¼Œç”¨äºè®¡ç®—ç´¢å¼•å€¼ // æ€»æ˜¯ç­‰äº size - 1 unsigned long sizemask; // è¯¥å“ˆå¸Œè¡¨å·²æœ‰èŠ‚ç‚¹çš„æ•°é‡ unsigned long used;&#125; dictht; å“ˆå¸Œè¡¨èŠ‚ç‚¹ä½¿ç”¨ dictEntry ç»“æ„è¡¨ç¤ºï¼Œ æ¯ä¸ª dictEntry ç»“æ„éƒ½ä¿å­˜ç€ä¸€ä¸ªé”®å€¼å¯¹ï¼š 123456789101112typedef struct dictEntry &#123; // é”® void *key; // å€¼ union &#123; void *val; uint64_t u64; int64_t s64; &#125; v; // æŒ‡å‘ä¸‹ä¸ªå“ˆå¸Œè¡¨èŠ‚ç‚¹ï¼Œå½¢æˆé“¾è¡¨ struct dictEntry *next;&#125; dictEntry; Redis ä¸­çš„å­—å…¸ç”± dict.h/dict ç»“æ„è¡¨ç¤ºï¼š 123456789101112typedef struct dict &#123; // ç±»å‹ç‰¹å®šå‡½æ•° dictType *type; // ç§æœ‰æ•°æ® void *privdata; // å“ˆå¸Œè¡¨ // ä¸€èˆ¬åªä½¿ç”¨ht[0]ï¼›ht[1] å“ˆå¸Œè¡¨åªä¼šåœ¨å¯¹ ht[0] å“ˆå¸Œè¡¨è¿›è¡Œ rehash æ—¶ä½¿ç”¨ã€‚ dictht ht[2]; // rehash ç´¢å¼• // å½“ rehash ä¸åœ¨è¿›è¡Œæ—¶ï¼Œå€¼ä¸º -1 int rehashidx; /* rehashing not in progress if rehashidx == -1 */&#125; dict; å“ˆå¸Œç®—æ³•Redis è®¡ç®—å“ˆå¸Œå€¼å’Œç´¢å¼•å€¼çš„æ–¹æ³•å¦‚ä¸‹ï¼š 123456789# ä½¿ç”¨å­—å…¸è®¾ç½®çš„å“ˆå¸Œå‡½æ•°ï¼Œè®¡ç®—é”® key çš„å“ˆå¸Œå€¼hash = dict-&gt;type-&gt;hashFunction(key);# ä½¿ç”¨å“ˆå¸Œè¡¨çš„ sizemask å±æ€§å’Œå“ˆå¸Œå€¼ï¼Œè®¡ç®—å‡ºç´¢å¼•å€¼# æ ¹æ®æƒ…å†µä¸åŒï¼Œ ht[x] å¯ä»¥æ˜¯ ht[0] æˆ–è€… ht[1]index = hash &amp; dict-&gt;ht[x].sizemask;# å‡è®¾è®¡ç®—å¾—å‡ºçš„å“ˆå¸Œå€¼ä¸º 8 ï¼Œ é‚£ä¹ˆç¨‹åºä¼šç»§ç»­ä½¿ç”¨è¯­å¥ï¼šindex = hash &amp; dict-&gt;ht[0].sizemask = 8 &amp; 3 = 0; å½“å­—å…¸è¢«ç”¨ä½œæ•°æ®åº“çš„åº•å±‚å®ç°ï¼Œ æˆ–è€…å“ˆå¸Œé”®çš„åº•å±‚å®ç°æ—¶ï¼Œ Redis ä½¿ç”¨ MurmurHash2 ç®—æ³•æ¥è®¡ç®—é”®çš„å“ˆå¸Œå€¼ã€‚ MurmurHash ç®—æ³•æœ€åˆç”± Austin Appleby äº 2008 å¹´å‘æ˜ï¼Œ è¿™ç§ç®—æ³•çš„ä¼˜ç‚¹åœ¨äºï¼Œ å³ä½¿è¾“å…¥çš„é”®æ˜¯æœ‰è§„å¾‹çš„ï¼Œ ç®—æ³•ä»èƒ½ç»™å‡ºä¸€ä¸ªå¾ˆå¥½çš„éšæœºåˆ†å¸ƒæ€§ï¼Œ å¹¶ä¸”ç®—æ³•çš„è®¡ç®—é€Ÿåº¦ä¹Ÿéå¸¸å¿«ã€‚ MurmurHash ç®—æ³•ç›®å‰çš„æœ€æ–°ç‰ˆæœ¬ä¸º MurmurHash3 ï¼Œ è€Œ Redis ä½¿ç”¨çš„æ˜¯ MurmurHash2 ï¼Œ å…³äº MurmurHash ç®—æ³•çš„æ›´å¤šä¿¡æ¯å¯ä»¥å‚è€ƒè¯¥ç®—æ³•çš„ä¸»é¡µï¼š &lt;http://code.google.com/p/smhasher/&gt; ã€‚ å“ˆå¸Œå†²çªRedis çš„å“ˆå¸Œè¡¨ä½¿ç”¨é“¾åœ°å€æ³•ï¼ˆseparate chainingï¼‰ï¼ˆæ‹‰é“¾æ³•ï¼‰æ¥è§£å†³é”®å†²çªã€‚ æ¯ä¸ªå“ˆå¸Œè¡¨èŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ª next æŒ‡é’ˆï¼Œ å¤šä¸ªå“ˆå¸Œè¡¨èŠ‚ç‚¹å¯ä»¥ç”¨ next æŒ‡é’ˆæ„æˆä¸€ä¸ªå•å‘é“¾è¡¨ï¼Œ è¢«åˆ†é…åˆ°åŒä¸€ä¸ªç´¢å¼•ä¸Šçš„å¤šä¸ªèŠ‚ç‚¹å¯ä»¥ç”¨è¿™ä¸ªå•å‘é“¾è¡¨è¿æ¥èµ·æ¥ï¼Œ è¿™å°±è§£å†³äº†é”®å†²çªçš„é—®é¢˜ã€‚ å› ä¸º dictEntry èŠ‚ç‚¹ç»„æˆçš„é“¾è¡¨æ²¡æœ‰æŒ‡å‘é“¾è¡¨è¡¨å°¾çš„æŒ‡é’ˆï¼Œ æ‰€ä»¥ä¸ºäº†é€Ÿåº¦è€ƒè™‘ï¼Œ ç¨‹åºæ€»æ˜¯å°†æ–°èŠ‚ç‚¹æ·»åŠ åˆ°é“¾è¡¨çš„è¡¨å¤´ä½ç½®ï¼ˆå¤æ‚åº¦ä¸º $O(1)$)ï¼Œ æ’åœ¨å…¶ä»–å·²æœ‰èŠ‚ç‚¹çš„å‰é¢ã€‚ Rehashéšç€æ“ä½œçš„ä¸æ–­æ‰§è¡Œï¼Œ å“ˆå¸Œè¡¨ä¿å­˜çš„é”®å€¼å¯¹ä¼šé€æ¸åœ°å¢å¤šæˆ–è€…å‡å°‘ï¼Œ ä¸ºäº†è®©å“ˆå¸Œè¡¨çš„è´Ÿè½½å› å­ï¼ˆload factorï¼‰ç»´æŒåœ¨ä¸€ä¸ªåˆç†çš„èŒƒå›´ä¹‹å†…ï¼Œ å½“å“ˆå¸Œè¡¨ä¿å­˜çš„é”®å€¼å¯¹æ•°é‡å¤ªå¤šæˆ–è€…å¤ªå°‘æ—¶ï¼Œ ç¨‹åºéœ€è¦å¯¹å“ˆå¸Œè¡¨çš„å¤§å°è¿›è¡Œç›¸åº”çš„æ‰©å±•æˆ–è€…æ”¶ç¼©ã€‚ æ‰©å±•å’Œæ”¶ç¼©å“ˆå¸Œè¡¨çš„å·¥ä½œå¯ä»¥é€šè¿‡æ‰§è¡Œ rehash ï¼ˆé‡æ–°æ•£åˆ—ï¼‰æ“ä½œæ¥å®Œæˆï¼Œ Redis å¯¹å­—å…¸çš„å“ˆå¸Œè¡¨æ‰§è¡Œ rehash çš„æ­¥éª¤å¦‚ä¸‹ï¼š ä¸ºå­—å…¸çš„ ht[1] å“ˆå¸Œè¡¨åˆ†é…ç©ºé—´ï¼Œ è¿™ä¸ªå“ˆå¸Œè¡¨çš„ç©ºé—´å¤§å°å–å†³äºè¦æ‰§è¡Œçš„æ“ä½œï¼Œ ä»¥åŠ ht[0] å½“å‰åŒ…å«çš„é”®å€¼å¯¹æ•°é‡ ï¼ˆä¹Ÿå³æ˜¯ ht[0].used å±æ€§çš„å€¼ï¼‰ï¼š 12- å¦‚æœæ‰§è¡Œçš„æ˜¯æ‰©å±•æ“ä½œï¼Œ é‚£ä¹ˆ `ht[1]` çš„å¤§å°ä¸ºç¬¬ä¸€ä¸ªå¤§äºç­‰äº `ht[0].used * 2` çš„ $2^n$ï¼ˆ`2` çš„ `n` æ¬¡æ–¹å¹‚ï¼‰ï¼›- å¦‚æœæ‰§è¡Œçš„æ˜¯æ”¶ç¼©æ“ä½œï¼Œ é‚£ä¹ˆ `ht[1]` çš„å¤§å°ä¸ºç¬¬ä¸€ä¸ªå¤§äºç­‰äº `ht[0].used` çš„ $2^n$ã€‚ å°†ä¿å­˜åœ¨ ht[0] ä¸­çš„æ‰€æœ‰é”®å€¼å¯¹ rehash åˆ° ht[1] ä¸Šé¢ï¼š rehash æŒ‡çš„æ˜¯é‡æ–°è®¡ç®—é”®çš„å“ˆå¸Œå€¼å’Œç´¢å¼•å€¼ï¼Œ ç„¶åå°†é”®å€¼å¯¹æ”¾ç½®åˆ° ht[1] å“ˆå¸Œè¡¨çš„æŒ‡å®šä½ç½®ä¸Šã€‚ å½“ ht[0] åŒ…å«çš„æ‰€æœ‰é”®å€¼å¯¹éƒ½è¿ç§»åˆ°äº† ht[1] ä¹‹å ï¼ˆht[0] å˜ä¸ºç©ºè¡¨ï¼‰ï¼Œ é‡Šæ”¾ ht[0] ï¼Œ å°† ht[1] è®¾ç½®ä¸º ht[0] ï¼Œ å¹¶åœ¨ ht[1] æ–°åˆ›å»ºä¸€ä¸ªç©ºç™½å“ˆå¸Œè¡¨ï¼Œ ä¸ºä¸‹ä¸€æ¬¡ rehash åšå‡†å¤‡ã€‚ å½“ä»¥ä¸‹æ¡ä»¶ä¸­çš„ä»»æ„ä¸€ä¸ªè¢«æ»¡è¶³æ—¶ï¼Œ ç¨‹åºä¼šè‡ªåŠ¨å¼€å§‹å¯¹å“ˆå¸Œè¡¨æ‰§è¡Œæ‰©å±•æ“ä½œï¼š æœåŠ¡å™¨ç›®å‰æ²¡æœ‰åœ¨æ‰§è¡Œ BGSAVE å‘½ä»¤æˆ–è€… BGREWRITEAOF å‘½ä»¤ï¼Œ å¹¶ä¸”å“ˆå¸Œè¡¨çš„è´Ÿè½½å› å­å¤§äºç­‰äº 1 æœåŠ¡å™¨ç›®å‰æ­£åœ¨æ‰§è¡Œ BGSAVE å‘½ä»¤æˆ–è€… BGREWRITEAOF å‘½ä»¤ï¼Œ å¹¶ä¸”å“ˆå¸Œè¡¨çš„è´Ÿè½½å› å­å¤§äºç­‰äº 5 å…¶ä¸­å“ˆå¸Œè¡¨çš„è´Ÿè½½å› å­å¯ä»¥é€šè¿‡å…¬å¼ï¼šè´Ÿè½½å› å­ &#x3D; å“ˆå¸Œè¡¨å·²ä¿å­˜èŠ‚ç‚¹æ•°é‡ &#x2F; å“ˆå¸Œè¡¨å¤§å° $load_factor &#x3D; ht[0].used &#x2F; ht[0].size$ åœ¨æ‰§è¡Œ BGSAVE å‘½ä»¤æˆ– BGREWRITEAOF å‘½ä»¤çš„è¿‡ç¨‹ä¸­ï¼Œ Redis éœ€è¦åˆ›å»ºå½“å‰æœåŠ¡å™¨è¿›ç¨‹çš„å­è¿›ç¨‹ï¼Œ è€Œå¤§å¤šæ•°æ“ä½œç³»ç»Ÿéƒ½é‡‡ç”¨å†™æ—¶å¤åˆ¶ï¼ˆcopy-on-writeï¼‰æŠ€æœ¯æ¥ä¼˜åŒ–å­è¿›ç¨‹çš„ä½¿ç”¨æ•ˆç‡ã€‚ æ‰€ä»¥åœ¨å­è¿›ç¨‹å­˜åœ¨æœŸé—´ï¼Œ æœåŠ¡å™¨ä¼šæé«˜æ‰§è¡Œæ‰©å±•æ“ä½œæ‰€éœ€çš„è´Ÿè½½å› å­ï¼Œ ä»è€Œå°½å¯èƒ½åœ°é¿å…åœ¨å­è¿›ç¨‹å­˜åœ¨æœŸé—´è¿›è¡Œå“ˆå¸Œè¡¨æ‰©å±•æ“ä½œï¼Œ è¿™å¯ä»¥é¿å…ä¸å¿…è¦çš„å†…å­˜å†™å…¥æ“ä½œï¼Œ æœ€å¤§é™åº¦åœ°èŠ‚çº¦å†…å­˜ã€‚ å¦ä¸€æ–¹é¢ï¼Œ å½“å“ˆå¸Œè¡¨çš„è´Ÿè½½å› å­å°äº 0.1 æ—¶ï¼Œ ç¨‹åºè‡ªåŠ¨å¼€å§‹å¯¹å“ˆå¸Œè¡¨æ‰§è¡Œæ”¶ç¼©æ“ä½œã€‚ æ¸è¿›å¼ Rehash å¦‚æœå“ˆå¸Œè¡¨é‡Œä¿å­˜çš„é”®å€¼å¯¹æ•°é‡æ˜¯å››ç™¾ä¸‡ã€å››åƒä¸‡ç”šè‡³å››äº¿ä¸ªé”®å€¼å¯¹ï¼Œ é‚£ä¹ˆè¦ä¸€æ¬¡æ€§å°†è¿™äº›é”®å€¼å¯¹å…¨éƒ¨ rehash åˆ° ht[1] çš„è¯ï¼Œ åºå¤§çš„è®¡ç®—é‡å¯èƒ½ä¼šå¯¼è‡´æœåŠ¡å™¨åœ¨ä¸€æ®µæ—¶é—´å†…åœæ­¢æœåŠ¡ã€‚ ä¸ºäº†é¿å… rehash å¯¹æœåŠ¡å™¨æ€§èƒ½é€ æˆå½±å“ï¼Œ æœåŠ¡å™¨ä¸æ˜¯ä¸€æ¬¡æ€§å°† ht[0] é‡Œé¢çš„æ‰€æœ‰é”®å€¼å¯¹å…¨éƒ¨ rehash åˆ° ht[1] ï¼Œ è€Œæ˜¯åˆ†å¤šæ¬¡ã€æ¸è¿›å¼åœ°å°† ht[0] é‡Œé¢çš„é”®å€¼å¯¹æ…¢æ…¢åœ° rehash åˆ° ht[1] ã€‚ ä»¥ä¸‹æ˜¯å“ˆå¸Œè¡¨æ¸è¿›å¼ rehash çš„è¯¦ç»†æ­¥éª¤ï¼š ä¸º ht[1] åˆ†é…ç©ºé—´ï¼Œ è®©å­—å…¸åŒæ—¶æŒæœ‰ ht[0] å’Œ ht[1] ä¸¤ä¸ªå“ˆå¸Œè¡¨ã€‚ åœ¨å­—å…¸ä¸­ç»´æŒä¸€ä¸ªç´¢å¼•è®¡æ•°å™¨å˜é‡ rehashidx ï¼Œ å¹¶å°†å®ƒçš„å€¼è®¾ç½®ä¸º 0 ï¼Œ è¡¨ç¤º rehash å·¥ä½œæ­£å¼å¼€å§‹ã€‚ åœ¨ rehash è¿›è¡ŒæœŸé—´ï¼Œ æ¯æ¬¡å¯¹å­—å…¸æ‰§è¡Œæ·»åŠ ã€åˆ é™¤ã€æŸ¥æ‰¾æˆ–è€…æ›´æ–°æ“ä½œæ—¶ï¼Œ ç¨‹åºé™¤äº†æ‰§è¡ŒæŒ‡å®šçš„æ“ä½œä»¥å¤–ï¼Œ è¿˜ä¼šé¡ºå¸¦å°† ht[0] å“ˆå¸Œè¡¨åœ¨ rehashidx ç´¢å¼•ä¸Šçš„æ‰€æœ‰é”®å€¼å¯¹ rehash åˆ° ht[1] ï¼Œ å½“ rehash å·¥ä½œå®Œæˆä¹‹åï¼Œ ç¨‹åºå°† rehashidx å±æ€§çš„å€¼å¢ä¸€ã€‚ éšç€å­—å…¸æ“ä½œçš„ä¸æ–­æ‰§è¡Œï¼Œ æœ€ç»ˆåœ¨æŸä¸ªæ—¶é—´ç‚¹ä¸Šï¼Œ ht[0] çš„æ‰€æœ‰é”®å€¼å¯¹éƒ½ä¼šè¢« rehash è‡³ ht[1] ï¼Œ è¿™æ—¶ç¨‹åºå°† rehashidx å±æ€§çš„å€¼è®¾ä¸º -1 ï¼Œ è¡¨ç¤º rehash æ“ä½œå·²å®Œæˆã€‚ åœ¨è¿›è¡Œæ¸è¿›å¼ rehash çš„è¿‡ç¨‹ä¸­ï¼Œ å­—å…¸ä¼šåŒæ—¶ä½¿ç”¨ ht[0] å’Œ ht[1] ä¸¤ä¸ªå“ˆå¸Œè¡¨ï¼Œ æ‰€ä»¥åœ¨æ¸è¿›å¼ rehash è¿›è¡ŒæœŸé—´ï¼Œ å­—å…¸çš„åˆ é™¤ï¼ˆdeleteï¼‰ã€æŸ¥æ‰¾ï¼ˆfindï¼‰ã€æ›´æ–°ï¼ˆupdateï¼‰ç­‰æ“ä½œä¼šåœ¨ä¸¤ä¸ªå“ˆå¸Œè¡¨ä¸Šè¿›è¡Œï¼š è¦åœ¨å­—å…¸é‡Œé¢æŸ¥æ‰¾ä¸€ä¸ªé”®çš„è¯ï¼Œ ç¨‹åºä¼šå…ˆåœ¨ ht[0] é‡Œé¢è¿›è¡ŒæŸ¥æ‰¾ï¼Œ å¦‚æœæ²¡æ‰¾åˆ°çš„è¯ï¼Œ å°±ä¼šç»§ç»­åˆ° ht[1] é‡Œé¢è¿›è¡ŒæŸ¥æ‰¾ï¼Œ è¯¸å¦‚æ­¤ç±»ã€‚ åœ¨æ¸è¿›å¼ rehash æ‰§è¡ŒæœŸé—´ï¼Œ æ–°æ·»åŠ åˆ°å­—å…¸çš„é”®å€¼å¯¹ä¸€å¾‹ä¼šè¢«ä¿å­˜åˆ° ht[1] é‡Œé¢ï¼Œ è€Œ ht[0] åˆ™ä¸å†è¿›è¡Œä»»ä½•æ·»åŠ æ“ä½œï¼š è¿™ä¸€æªæ–½ä¿è¯äº† ht[0] åŒ…å«çš„é”®å€¼å¯¹æ•°é‡ä¼šåªå‡ä¸å¢ï¼Œ å¹¶éšç€ rehash æ“ä½œçš„æ‰§è¡Œè€Œæœ€ç»ˆå˜æˆç©ºè¡¨ã€‚ è·³è¡¨ è·³è·ƒè¡¨æ˜¯æœ‰åºé›†åˆçš„åº•å±‚å®ç°ä¹‹ä¸€ï¼Œ é™¤æ­¤ä¹‹å¤–å®ƒåœ¨ Redis ä¸­æ²¡æœ‰å…¶ä»–åº”ç”¨ã€‚ Redis çš„è·³è·ƒè¡¨å®ç°ç”± zskiplist å’Œ zskiplistNode ä¸¤ä¸ªç»“æ„ç»„æˆï¼Œ å…¶ä¸­ zskiplist ç”¨äºä¿å­˜è·³è·ƒè¡¨ä¿¡æ¯ï¼ˆæ¯”å¦‚è¡¨å¤´èŠ‚ç‚¹ã€è¡¨å°¾èŠ‚ç‚¹ã€é•¿åº¦ï¼‰ï¼Œ è€Œ zskiplistNode åˆ™ç”¨äºè¡¨ç¤ºè·³è·ƒè¡¨èŠ‚ç‚¹ã€‚ æ¯ä¸ªè·³è·ƒè¡¨èŠ‚ç‚¹çš„å±‚é«˜éƒ½æ˜¯ 1 è‡³ 32 ä¹‹é—´çš„éšæœºæ•°ã€‚ åœ¨åŒä¸€ä¸ªè·³è·ƒè¡¨ä¸­ï¼Œ å¤šä¸ªèŠ‚ç‚¹å¯ä»¥åŒ…å«ç›¸åŒçš„åˆ†å€¼ï¼Œ ä½†æ¯ä¸ªèŠ‚ç‚¹çš„æˆå‘˜å¯¹è±¡å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚ è·³è·ƒè¡¨ä¸­çš„èŠ‚ç‚¹æŒ‰ç…§åˆ†å€¼å¤§å°è¿›è¡Œæ’åºï¼Œ å½“åˆ†å€¼ç›¸åŒæ—¶ï¼Œ èŠ‚ç‚¹æŒ‰ç…§æˆå‘˜å¯¹è±¡çš„å¤§å°è¿›è¡Œæ’åºã€‚ åº•å±‚å®ç°è·³è·ƒè¡¨èŠ‚ç‚¹çš„å®ç°ç”± redis.h/zskiplistNode ç»“æ„å®šä¹‰ï¼š 123456789101112131415typedef struct zskiplistNode &#123; // åé€€æŒ‡é’ˆ struct zskiplistNode *backward; // åˆ†å€¼ï¼ŒèŠ‚ç‚¹æŒ‰å„è‡ªæ‰€ä¿å­˜çš„åˆ†å€¼ä»å°åˆ°å¤§æ’åˆ— double score; // æˆå‘˜å¯¹è±¡ robj *obj; // å±‚ struct zskiplistLevel &#123; // å‰è¿›æŒ‡é’ˆï¼šè®¿é—®ä½äºè¡¨å°¾æ–¹å‘çš„å…¶ä»–èŠ‚ç‚¹ struct zskiplistNode *forward; // è·¨åº¦ï¼šè®°å½•äº†å‰è¿›æŒ‡é’ˆæ‰€æŒ‡å‘èŠ‚ç‚¹å’Œå½“å‰èŠ‚ç‚¹çš„è·ç¦» unsigned int span; &#125; level[];&#125; zskiplistNode; zskiplist ç»“æ„çš„å®šä¹‰å¦‚ä¸‹ï¼š 12345678typedef struct zskiplist &#123; // è¡¨å¤´èŠ‚ç‚¹å’Œè¡¨å°¾èŠ‚ç‚¹ struct zskiplistNode *header, *tail; // è¡¨ä¸­èŠ‚ç‚¹çš„æ•°é‡ unsigned long length; // è¡¨ä¸­å±‚æ•°æœ€å¤§çš„èŠ‚ç‚¹çš„å±‚æ•° int level;&#125; zskiplist;","categories":[{"name":"Database","slug":"Database","permalink":"http://blog.sukiu.top/categories/Database/"},{"name":"Redis","slug":"Database/Redis","permalink":"http://blog.sukiu.top/categories/Database/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"http://blog.sukiu.top/tags/Redis/"}]},{"title":"æ™ºåŠ›é¢˜","slug":"Brain-Teaser","date":"2022-02-25T08:04:00.000Z","updated":"2022-02-25T08:04:00.000Z","comments":true,"path":"Mixed/Interview/Brain-Teaser/","link":"","permalink":"http://blog.sukiu.top/Mixed/Interview/Brain-Teaser/","excerpt":"é¢è¯•æ™ºåŠ›é¢˜æ±‡æ€»","text":"é¢è¯•æ™ºåŠ›é¢˜æ±‡æ€» 1000 ç“¶è¯æ°´æ‰¾æ¯’è¯ä¸€å…± 1000 ç“¶è¯æ°´ï¼Œå…¶ä¸­ 1 ç“¶æœ‰æ¯’è¯ã€‚ å·²çŸ¥å°ç™½é¼ å–æ¯’è¯ä¸€å¤©å†…æ­»ï¼Œè‹¥æƒ³åœ¨ä¸€å¤©å†…æ‰¾åˆ°æ¯’è¯ï¼Œæœ€å°‘éœ€è¦å‡ åªå°ç™½é¼ ï¼Ÿ ç­”æ¡ˆï¼š10 åªã€‚ è§£æï¼šäºŒè¿›åˆ¶æ€æƒ³ã€‚ 0 000 000 001 è¡¨ç¤º 1 å·è€é¼ ï¼Œå–äº†è¯æ°´ 1 ã€‚ 0 000 000 010 è¡¨ç¤º 2 å·è€é¼ ï¼Œå–äº†è¯æ°´ 2 ã€‚ 0 000 000 011 è¡¨ç¤º 1 å·ã€ 2 å·è€é¼ ï¼Œå–äº†è¯æ°´ 3 ã€‚ â€¦ â€¦ 1 111 101 000 è¡¨ç¤º 4ã€6ã€7ã€8ã€9ã€10 å·è€é¼ ï¼Œå–äº†è¯æ°´ 1000ã€‚ æŒ‰ç…§ä¸Šè¿°çš„æ–¹æ³•ä¾æ¬¡å– ç¬¬ä¸€å›åˆï¼Œ1 å·è€é¼ å–è¯æ°´ 1 ç¬¬äºŒå›åˆï¼Œ2 å·è€é¼ å–è¯æ°´ 2 â€¦ ç¬¬ä¸€åƒå›åˆï¼Œ4ã€6ã€7ã€8ã€9ã€10 å·è€é¼ å–è¯æ°´ 1000 å–å®Œä¸€å¤©æ—¶ï¼Œçœ‹ 10 åªè€é¼ çš„çŠ¶æ€ï¼Œæ ¹æ®è€é¼ çŠ¶æ€å°±çŸ¥é“å“ªç“¶è¯æ°´æœ‰æ¯’äº†ã€‚ æ¯”å¦‚æœ€ååªæ˜¯ 2 å·è€é¼ æ­»äº†ï¼Œé‚£å°±è¯´æ˜ç¬¬ 2 ç“¶è¯æ°´æœ‰æ¯’ï¼›å¦‚æœ 4ã€6ã€7ã€8ã€9ã€10 æ­»äº†ï¼Œé‚£å°±è¯´æ˜ç¬¬ 1000 ç“¶è¯æ°´æœ‰æ¯’ï¼ æƒ³æ˜ç™½è¿™ä¸ªé“ç†ï¼Œå†æ¥çœ‹æ€ä¹ˆç­”æ¡ˆä¸ºä½•æ˜¯ 10 æˆ‘ä»¬éœ€è¦è®©äºŒè¿›åˆ¶è¡¨ç¤ºçš„ç§ç±»æ•°&gt;&#x3D;è¯æ°´æ€»æ•°ï¼ˆ1000ï¼‰ æ±‚çš„æ˜¯æœ€å°å€¼ï¼Œæ˜¾ç„¶ï¼Œä¸º 10 çš„æ—¶å€™æ»¡è¶³è¦æ±‚ ä¹Ÿå¯ä»¥è¿™ä¹ˆè®¡ç®—ï¼šâŒˆ log N âŒ‰ï¼Œlog åº•æ•°ä¸º 2 æŠ¢ 30æŠ¢ 30 æ˜¯åŒäººæ¸¸æˆæ¸¸æˆè§„åˆ™æ˜¯ï¼šç¬¬ä¸€ä¸ªäººå–Š â€œ 1 â€æˆ– â€œ 2 â€ï¼Œç¬¬äºŒä¸ªäººè¦æ¥ç€å¾€ä¸‹å–Šä¸€ä¸ªæˆ–ä¸¤ä¸ªæ•°ï¼Œç„¶åå†è½®åˆ°ç¬¬ä¸€ä¸ªäººã€‚ ä¸¤äººè½®æµè¿›è¡Œä¸‹å»ã€‚æœ€åå–Š 30 çš„äººè·èƒœã€‚é—®å–Šæ•°å­—çš„æœ€ä½³ç­–ç•¥ã€‚ ç­”æ¡ˆï¼šå°½é‡å–Š 3 çš„å€æ•°ã€‚ è§£æï¼šå€’ç€çœ‹ï¼Œå…¶å®ï¼Œå–Š 27 æ—¶ï¼Œå°±å†³å®šèƒœè´Ÿäº†ã€‚å‡è®¾ A å–Šäº† 27ï¼ŒB åªèƒ½å–Š 28 æˆ– 29 ï¼Œä¸‹ä¸ªå›åˆï¼ŒA ä¸€å®šå¯ä»¥å–Š 30ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå–Š 27 è€…å¿…èƒœã€‚ å†å€’ç€çœ‹ï¼Œå…¶å®å–Š 24 æ—¶ï¼Œå°±å®šèƒœè´Ÿäº†ã€‚å‡è®¾ A å–Šäº† 24 ï¼ŒB åªèƒ½å–Š 25 æˆ– 26 ï¼Œä¸‹ä¸ªå›åˆ A ä¸€å®šèƒ½å–Š 27 ã€‚ ç”±äºå–Š 27 è€…å¿…èƒœï¼Œå› æ­¤å–Š 24 è€…ä¹Ÿå¿…èƒœã€‚ åŒç†å¯ä»¥æ¨å‡ºï¼šå–Š 3 çš„å€æ•°è€…å¿…èƒœã€‚ ç„¶åå°±ä¼šå‘ç°ï¼Œè¿™ä¸ªæ¸¸æˆï¼Œè°å…ˆå–Šï¼Œè°ä¸€å®šè¾“ã€‚ ç¯æ³¡å¼€å…³ä¸€ä¸ªåœ†ç¯ä¸Šæœ‰ 100 ä¸ªç¯æ³¡ï¼Œç¯æ³¡æœ‰äº®å’Œæš—ä¸¤ç§çŠ¶æ€ã€‚æŒ‰ä¸€ä¸ªç¯æ³¡çš„å¼€å…³å¯ä»¥æ”¹å˜å®ƒå’Œä¸å®ƒç›¸é‚»ä¸¤ä¸ªç¯æ³¡çš„çŠ¶æ€ã€‚ è®¾è®¡ä¸€ç§ç®—æ³•ï¼Œå¯¹äºä»»æ„åˆå§‹çŠ¶æ€ï¼Œä½¿æ‰€æœ‰ç¯æ³¡å…¨äº®ã€‚ å°†ç¯æ³¡ç¼–å· 1 ~ 100 æ­¥éª¤ä¸€ï¼šå°†ç¯æ³¡å˜ä¸ºå…¨äº®æˆ–åªå‰©ä¸€ä¸ªä¸ºæš— ä» 1 å¾ªç¯åˆ° 98 ï¼Œé‡åˆ°æš—çš„åˆ™æŒ‰å®ƒä¸‹ä¸€ä¸ªï¼Œä½¿ä¹‹å˜äº®ã€‚å¾ªç¯å®Œæ¯•ï¼Œ1 ~ 98 å¿…ç„¶å…¨äº®ã€‚99 å’Œ 100 å¯èƒ½ä¸ºäº®äº®ã€æš—äº®ã€äº®æš—ã€æš—æš—å››ç§çŠ¶æ€ã€‚ è‹¥ä¸ºäº®äº®ï¼Œçš†å¤§æ¬¢å–œï¼Œæ»¡è¶³é¢˜ç›®è¦æ±‚ æš—äº®ã€äº®æš—ï¼Œè¾¾åˆ°åªå‰©ä¸€ä¸ªä¸ºæš—çš„çŠ¶æ€ï¼› è‹¥ä¸ºæš—æš—ã€‚åˆ™æŒ‰ä¸‹ç¼–å· 100 çš„ç¯æ³¡ï¼Œä½¿ç¼–å· 99 ã€100 å˜ä¸ºäº®ï¼Œç¼–å· 1 çš„ç¯æ³¡å˜ä¸ºæš—ï¼Œä»è€Œè¾¾åˆ°åªå‰©ä¸€ä¸ªä¸ºæš—çš„çŠ¶æ€ã€‚ æ­¥éª¤äºŒï¼šå°†ç¯æ³¡å˜ä¸ºå…¨æš— ç”±äºç¯æ³¡ç¯å½¢æ‘†æ”¾ï¼Œæˆ‘ä»¬æŒ‡å®šæš—çš„ç¯æ³¡ç¼–å·ä¸º 1 ï¼Œå°†å‰©ä¸‹ 99 ä¸ªäº®ç€çš„ç¯æ³¡æ¯ 3 ä¸ªä¸ºä¸€ç»„ã€‚æŒ‰ä¸‹æ¯ç»„ä¸­é—´çš„ç¯æ³¡åï¼Œä½¿å¾—æ‰€æœ‰ç¯æ³¡å˜ä¸ºæš—ã€‚ æ­¥éª¤ä¸‰ï¼šå°†ç¯æ³¡å˜ä¸ºå…¨äº® å°†æ‰€æœ‰ç¯æ³¡æŒ‰ä¸€ä¸‹ï¼Œç¯æ³¡å˜ä¸ºå…¨äº®ã€‚ æ‹“å±•å¯¹äº N ä¸ªç¯æ³¡çš„ä»»æ„åˆå§‹çŠ¶æ€ ( N &gt; 3 ) ï¼Œèƒ½å¦ç»è¿‡è‹¥å¹²æ¬¡æ“ä½œä½¿å¾—æ‰€æœ‰ç¯æ³¡å…¨äº®ï¼Ÿ N ä¸ªç¯æ³¡åšåˆ†ç±»è®¨è®ºã€‚ N = 3*k+1 ä¸€å®šå¯ä»¥ã€‚æ–¹æ³•ä¸ä¸Šè¿°æ­¥éª¤ç›¸åŒï¼Œåœ¨æ­¥éª¤äºŒä¸­å¯ä»¥å°† 3k ä¸ªäº®çš„ç¯æ³¡åˆ†ä¸º k ç»„ã€‚ N = 3*k+2 ä¸€å®šå¯ä»¥ã€‚å°†ä¸Šè¿°æ­¥éª¤ä¸€ç›®æ ‡çŠ¶æ€çš„åªå‰©ä¸€ä¸ªä¸ºæš—æ”¹æˆå‰©ä¸¤ä¸ªç›¸é‚»ä¸ºæš—ï¼Œå…¶ä½™ 3 * k ä¸ªç¯æ³¡åˆ†ç»„æŒ‰å³å¯ã€‚å› ä¸ºï¼Œå¯¹äºä»»æ„åªå‰©ä¸€ä¸ªä¸ºæš—çš„çŠ¶æ€ï¼ŒæŒ‰ä¸‹è¯¥ç¯æ³¡å·¦å³ä»»æ„ä¸€ä¸ªå°±å¯ä»¥å˜æˆå‰©ä¸¤ä¸ªç›¸é‚»ä¸ºæš—çš„çŠ¶æ€ï¼ N = 3*k ä¸ä¸€å®šã€‚å¦‚æœç»è¿‡ä¸Šè¿°æ­¥éª¤ä¸€å¯ä»¥å°†ç¯æ³¡å˜æˆå…¨äº®çš„çŠ¶æ€åˆ™æœ‰è§£ï¼›å¦åˆ™ï¼Œæ— è§£ã€‚ï¼ˆè¯¥ç»“è®ºæœ‰å¾…è¯æ˜ï¼‰","categories":[{"name":"Mixed","slug":"Mixed","permalink":"http://blog.sukiu.top/categories/Mixed/"},{"name":"Interview","slug":"Mixed/Interview","permalink":"http://blog.sukiu.top/categories/Mixed/Interview/"}],"tags":[{"name":"Interview","slug":"Interview","permalink":"http://blog.sukiu.top/tags/Interview/"}]},{"title":"Goçš„è®¾è®¡æ¨¡å¼","slug":"Go-Design-Pattern","date":"2022-02-23T03:19:00.000Z","updated":"2022-02-23T03:19:00.000Z","comments":true,"path":"System-Design/Design-Pattern/Go-Design-Pattern/","link":"","permalink":"http://blog.sukiu.top/System-Design/Design-Pattern/Go-Design-Pattern/","excerpt":"Go è¯­è¨€çš„è®¾è®¡æ¨¡å¼ä¹‹ç¾ã€‚","text":"Go è¯­è¨€çš„è®¾è®¡æ¨¡å¼ä¹‹ç¾ã€‚ Go çš„è®¾è®¡æ¨¡å¼ï¼šâŒæŒ‡åœ¨ Go ä¸­ä¸å¸¸ç”¨ åˆ›å»ºå‹ å•ä¾‹æ¨¡å¼ï¼šä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ é¥¿æ±‰ï¼šç³»ç»Ÿåˆå§‹åŒ–æ—¶åˆ›å»ºå¹¶åˆå§‹åŒ–å•ä¾‹å¯¹è±¡ æ‡’æ±‰ï¼šè°ƒç”¨å®ä¾‹æ—¶åˆå§‹åŒ–å•ä¾‹å¯¹è±¡ å·¥å‚æ¨¡å¼ï¼šä½¿ç”¨å…±åŒæ¥å£åˆ›å»ºå¯¹è±¡ å»ºé€ è€…æ¨¡å¼ï¼šä¸å·¥å‚ä¸åŒåœ¨äºï¼Œåˆ›å»ºå‚æ•°å¤æ‚çš„å¯¹è±¡ åŸå‹æ¨¡å¼ï¼šåˆ©ç”¨å·²æœ‰å¯¹è±¡å¤åˆ¶çš„æ–¹å¼æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ âŒ ç»“æ„å‹ ä»£ç†æ¨¡å¼ï¼šä¸ºå…¶ä»–å¯¹è±¡æä¾›â¼€ç§ä»£ç†ä»¥æ§åˆ¶è¿™ä¸ªå¯¹è±¡çš„è®¿é—® ä»£ç†è®¿é—® æ¡¥æ¥æ¨¡å¼ï¼šå°†ç±»çš„æŠ½è±¡éƒ¨åˆ†å’Œå®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»å¼€æ¥ï¼Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ– æŠ½è±¡å®ç°æ‹†åˆ†ç‹¬ç«‹ è£…é¥°æ¨¡å¼ï¼šåŠ¨æ€åœ°ç»™â¼€ä¸ªå¯¹è±¡æ·»åŠ â¼€äº›é¢å¤–çš„èŒè´£ é™„åŠ èŒè´£ é€‚é…å™¨æ¨¡å¼ï¼šå°†â¼€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆç”¨æˆ·å¸Œæœ›å¾—åˆ°çš„å¦â¼€ä¸ªæ¥å£ è½¬æ¢æ¥å£ é—¨é¢æ¨¡å¼ï¼šå®šä¹‰â¼€ä¸ªé«˜å±‚æ¥å£ï¼Œä¸ºå­ç³»ç»Ÿä¸­çš„â¼€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„å¤–è§‚ å¯¹å¤–ç»Ÿä¸€æ¥å£ âŒ ç»„åˆæ¨¡å¼ï¼šå°†å¯¹è±¡ç»„åˆæˆæ ‘å‹ç»“æ„ä»¥è¡¨ç¤ºâ€æ•´ä½“ - éƒ¨åˆ†â€çš„å±‚æ¬¡ç»“æ„ æ ‘å‹ç›®å½•ç»“æ„ âŒ äº«å…ƒæ¨¡å¼ï¼šæä¾›æ”¯æŒå¤§é‡ç»†ç²’åº¦å¯¹è±¡å…±äº«çš„æœ‰æ•ˆæ–¹æ³• âŒ è¡Œä¸ºå‹ è§‚å¯Ÿè€…æ¨¡å¼ï¼šå®šä¹‰å¯¹è±¡é—´çš„â¼€ç§â¼€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“â¼€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–° æ¨¡æ¿æ¨¡å¼ï¼šå®šä¹‰â¼€ä¸ªæ“ä½œä¸­çš„ç®—æ³•éª¨æ¶ï¼Œè€Œå°†â¼€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ï¼Œä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜â¼€ä¸ªç®—æ³•çš„ç»“æ„å³å¯é‡æ–°å®šä¹‰ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ ç­–ç•¥æ¨¡å¼ï¼šå®šä¹‰â¼€ç³»åˆ—ç®—æ³•ï¼ŒæŠŠå®ƒä»¬â¼€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬ä¹‹é—´å¯äº’ç›¸æ›¿æ¢ï¼Œä»è€Œè®©ç®—æ³•å¯ä»¥ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„ç”¨æˆ·è€Œå˜åŒ– èŒè´£é“¾æ¨¡å¼ï¼šé€šè¿‡ç»™å¤šä¸ªå¯¹è±¡å¤„ç†è¯·æ±‚çš„æœºä¼šï¼Œå‡å°‘è¯·æ±‚çš„å‘é€è€…ä¸æ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆã€‚å°†æ¥æ”¶å¯¹è±¡é“¾æ¥èµ·æ¥ï¼Œåœ¨é“¾ä¸­ä¼ é€’è¯·æ±‚ï¼Œç›´åˆ°æœ‰â¼€ä¸ªå¯¹è±¡å¤„ç†è¿™ä¸ªè¯·æ±‚ ä¼ é€’èŒè´£ çŠ¶æ€æ¨¡å¼ï¼šå…è®¸â¼€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸º è¿­ä»£å™¨æ¨¡å¼ï¼šæä¾›â¼€ç§æ–¹æ³•æ¥é¡ºåºè®¿é—®â¼€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ è€Œä¸éœ€è¦æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤º è®¿é—®è€…æ¨¡å¼ï¼šè¡¨ç¤ºâ¼€ä¸ªä½œç”¨äºæŸå¯¹è±¡ç»“æ„ä¸­çš„å„å…ƒç´ çš„æ“ä½œï¼Œä½¿å¾—åœ¨ä¸æ”¹å˜å„å…ƒç´ çš„ç±»çš„å‰æä¸‹å®šä¹‰ä½œç”¨äºè¿™äº›å…ƒç´ çš„æ–°æ“ä½œ âŒ å¤‡å¿˜å½•æ¨¡å¼ï¼šåœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·â¼€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ï¼Œä»è€Œå¯ç”¨åœ¨ä»¥åå°†è¯¥å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€ âŒ å‘½ä»¤æ¨¡å¼ï¼šå°†â¼€ä¸ªè¯·æ±‚å°è£…ä¸ºâ¼€ä¸ªå¯¹è±¡ï¼Œä»è€Œå¯ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–ï¼Œå°†è¯·æ±‚æ’é˜Ÿæˆ–è®°å½•è¯·æ±‚â½‡å¿—ï¼Œæ”¯æŒå¯æ’¤é”€çš„æ“ä½œ âŒ è§£é‡Šå™¨æ¨¡å¼ï¼šç»™å®šâ¼€ç§è¯­è¨€ï¼Œå®šä¹‰å®ƒçš„æ–‡æ³•è¡¨ç¤ºï¼Œå¹¶å®šä¹‰â¼€ä¸ªè§£é‡Šå™¨ï¼Œè¯¥è§£é‡Šå™¨ç”¨æ¥æ ¹æ®æ–‡æ³•è¡¨ç¤ºæ¥è§£é‡Šè¯­è¨€ä¸­çš„å¥å­ âŒ ä¸­ä»‹æ¨¡å¼ï¼šç”¨â¼€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…â¼€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ã€‚å®ƒä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾å¼åœ°ç›¸äº’è°ƒç”¨ï¼Œä»è€Œè¾¾åˆ°ä½è€¦åˆï¼Œè¿˜å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å¯¹è±¡é—´çš„äº¤äº’ âŒ åˆ›å»ºå‹ å•ä¾‹æ¨¡å¼ Singletonä¸€ä¸ªç±»åªå…è®¸åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼ˆå®ä¾‹ï¼‰ï¼Œè¿™ä¸ªç±»å°±æ˜¯å•ä¾‹ç±»ï¼Œè¿™ç§è®¾è®¡æ¨¡å¼å°±å«å•ä¾‹æ¨¡å¼ç”¨å¤„ï¼š ä¸šåŠ¡ä¸Šï¼Œæœ‰äº›æ•°æ®åœ¨ç³»ç»Ÿä¸­åªåº”è¯¥ä¿å­˜ä¸€ä»½ é¥¿æ±‰å¼ åœ¨ç³»ç»Ÿåˆå§‹åŒ–çš„æ—¶å€™æˆ‘ä»¬å·²ç»æŠŠå¯¹è±¡åˆ›å»ºå¥½äº†ï¼Œéœ€è¦ç”¨çš„æ—¶å€™ç›´æ¥æ‹¿è¿‡æ¥ç”¨å°±å¥½äº† ç±»ä¸€æ—¦åŠ è½½ï¼Œå°±æŠŠå•ä¾‹åˆå§‹åŒ–å®Œæˆï¼Œä¿è¯ getInstance çš„æ—¶å€™ï¼Œå•ä¾‹æ˜¯å·²ç»å­˜åœ¨çš„äº†ã€‚ 123456789101112131415package singleton// Singleton é¥¿æ±‰å¼å•ä¾‹type Singleton struct&#123;&#125;var singleton *Singletonfunc init() &#123; singleton = &amp;Singleton&#123;&#125;&#125;// GetInstance è·å–å®ä¾‹func GetInstance() *Singleton &#123; return singleton&#125; æ‡’æ±‰å¼ï¼ˆåŒé‡æ£€æµ‹ï¼‰ åˆ›å»ºå¯¹è±¡æ—¶æ¯”è¾ƒæ‡’ï¼Œå…ˆä¸æ€¥ç€åˆ›å»ºå¯¹è±¡ï¼Œåœ¨éœ€è¦åŠ è½½é…ç½®æ–‡ä»¶çš„æ—¶å€™å†å»åˆ›å»º åªæœ‰å½“è°ƒç”¨ getInstance çš„æ—¶å€™ï¼Œæ‰ä¼šå»åˆå§‹åŒ–è¿™ä¸ªå•ä¾‹ã€‚ ä¸ºäº†å®ç°æ‡’æ±‰å¼ä¸å¯é¿å…çš„éœ€è¦åŠ é”ã€‚ 123456789101112131415161718package singletonimport &quot;sync&quot;var ( lazySingleton *Singleton once = &amp;sync.Once&#123;&#125;)// GetLazyInstance æ‡’æ±‰å¼func GetLazyInstance() *Singleton &#123; if lazySingleton == nil &#123; once.Do(func() &#123; lazySingleton = &amp;Singleton&#123;&#125; &#125;) &#125; return lazySingleton&#125; å·¥å‚æ¨¡å¼ Factoryåœ¨å·¥å‚æ¨¡å¼ä¸­ï¼Œåœ¨åˆ›å»ºå¯¹è±¡æ—¶ä¸ä¼šå¯¹å®¢æˆ·ç«¯æš´éœ²åˆ›å»ºé€»è¾‘ï¼Œå¹¶ä¸”æ˜¯é€šè¿‡ä½¿ç”¨ä¸€ä¸ªå…±åŒçš„æ¥å£æ¥æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ ç®€å•å·¥å‚Go æœ¬èº«æ˜¯æ²¡æœ‰æ„é€ å‡½æ•°çš„ï¼Œä¸€èˆ¬è€Œè¨€é‡‡ç”¨ NewName çš„æ–¹å¼åˆ›å»ºå¯¹è±¡&#x2F;æ¥å£ï¼Œå½“å®ƒè¿”å›çš„æ˜¯æ¥å£çš„æ—¶å€™ï¼Œå…¶å®å°±æ˜¯ç®€å•å·¥å‚æ¨¡å¼ã€‚ 1234567891011121314151617181920212223242526272829303132333435package factory// IRuleConfigParser IRuleConfigParsertype IRuleConfigParser interface &#123; Parse(data []byte)&#125;// jsonRuleConfigParser jsonRuleConfigParsertype jsonRuleConfigParser struct &#123;&#125;// Parse Parsefunc (J jsonRuleConfigParser) Parse(data []byte) &#123; panic(&quot;implement me&quot;)&#125;// yamlRuleConfigParser yamlRuleConfigParsertype yamlRuleConfigParser struct &#123;&#125;// Parse Parsefunc (Y yamlRuleConfigParser) Parse(data []byte) &#123; panic(&quot;implement me&quot;)&#125;// NewIRuleConfigParser NewIRuleConfigParserfunc NewIRuleConfigParser(t string) IRuleConfigParser &#123; switch t &#123; case &quot;json&quot;: return jsonRuleConfigParser&#123;&#125; case &quot;yaml&quot;: return yamlRuleConfigParser&#123;&#125; &#125; return nil&#125; å·¥å‚æ–¹æ³•å½“å¯¹è±¡çš„åˆ›å»ºé€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œä¸åªæ˜¯ç®€å•çš„ new ä¸€ä¸‹å°±å¯ä»¥ï¼Œè€Œæ˜¯è¦ç»„åˆå…¶ä»–ç±»å¯¹è±¡ã€‚ åšå„ç§åˆå§‹åŒ–æ“ä½œçš„æ—¶å€™ï¼Œæ¨èä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œå°†å¤æ‚çš„åˆ›å»ºé€»è¾‘æ‹†åˆ†åˆ°å¤šä¸ªå·¥å‚ç±»ä¸­ï¼Œè®©æ¯ä¸ªå·¥å‚ç±»éƒ½ä¸è‡³äºè¿‡äºå¤æ‚ã€‚ ç»„åˆå¤ç”¨åŸåˆ™ï¼šä¼˜å…ˆä½¿ç”¨ç»„åˆ contains aï¼ˆèšåˆ has aï¼‰ï¼Œè€Œä¸æ˜¯ç»§æ‰¿ is a æ¥è¾¾åˆ°ç›®çš„ è¿ªç±³ç‰¹æ³•åˆ™ï¼šâ¼€ä¸ªå¯¹è±¡åº”å½“å¯¹å…¶ä»–å¯¹è±¡æœ‰å°½å¯èƒ½å°‘çš„äº†è§£ï¼Œå³ä¸å’Œé™Œç”Ÿäººè¯´è¯ ä¼˜ç‚¹ï¼šé™ä½ç±»ä¹‹é—´çš„è€¦åˆ ç¼ºç‚¹ï¼šäº§ç”Ÿå¤§é‡ä¸­ä»‹ç±»ï¼Œè®¾è®¡å˜å¤æ‚ 123456789101112131415161718192021222324252627282930313233// IRuleConfigParserFactory å·¥å‚æ–¹æ³•æ¥å£type IRuleConfigParserFactory interface &#123; CreateParser() IRuleConfigParser&#125;// yamlRuleConfigParserFactory yamlRuleConfigParser çš„å·¥å‚ç±»type yamlRuleConfigParserFactory struct &#123;&#125;// CreateParser CreateParserfunc (y yamlRuleConfigParserFactory) CreateParser() IRuleConfigParser &#123; return yamlRuleConfigParser&#123;&#125;&#125;// jsonRuleConfigParserFactory jsonRuleConfigParser çš„å·¥å‚ç±»type jsonRuleConfigParserFactory struct &#123;&#125;// CreateParser CreateParserfunc (j jsonRuleConfigParserFactory) CreateParser() IRuleConfigParser &#123; return jsonRuleConfigParser&#123;&#125;&#125;// NewIRuleConfigParserFactory ç”¨ä¸€ä¸ªç®€å•å·¥å‚å°è£…å·¥å‚æ–¹æ³•func NewIRuleConfigParserFactory(t string) IRuleConfigParserFactory &#123; switch t &#123; case &quot;json&quot;: return jsonRuleConfigParserFactory&#123;&#125; case &quot;yaml&quot;: return yamlRuleConfigParserFactory&#123;&#125; &#125; return nil&#125; å»ºé€ è€…æ¨¡å¼ Builderåœ¨ Golang ä¸­å¯¹äºåˆ›å»ºç±»å‚æ•°æ¯”è¾ƒå¤šçš„å¯¹è±¡çš„æ—¶å€™ï¼Œå¸¸è§çš„åšæ³•æ˜¯å¿…å¡«å‚æ•°ç›´æ¥ä¼ é€’ï¼Œå¯é€‰å‚æ•°é€šè¿‡ä¼ é€’å¯å˜çš„æ–¹æ³•è¿›è¡Œåˆ›å»ºã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445package builderimport &quot;fmt&quot;// ResourcePoolConfigOption optiontype ResourcePoolConfigOption struct &#123; maxTotal int maxIdle int minIdle int&#125;// ResourcePoolConfigOptFunc to set optiontype ResourcePoolConfigOptFunc func(option *ResourcePoolConfigOption)// NewResourcePoolConfig NewResourcePoolConfigfunc NewResourcePoolConfig(name string, opts ...ResourcePoolConfigOptFunc) (*ResourcePoolConfig, error) &#123; if name == &quot;&quot; &#123; return nil, fmt.Errorf(&quot;name can not be empty&quot;) &#125; option := &amp;ResourcePoolConfigOption&#123; maxTotal: 10, maxIdle: 9, minIdle: 1, &#125; for _, opt := range opts &#123; opt(option) &#125; if option.maxTotal &lt; 0 || option.maxIdle &lt; 0 || option.minIdle &lt; 0 &#123; return nil, fmt.Errorf(&quot;args err, option: %v&quot;, option) &#125; if option.maxTotal &lt; option.maxIdle || option.minIdle &gt; option.maxIdle &#123; return nil, fmt.Errorf(&quot;args err, option: %v&quot;, option) &#125; return &amp;ResourcePoolConfig&#123; name: name, maxTotal: option.maxTotal, maxIdle: option.maxIdle, minIdle: option.minIdle, &#125;, nil&#125; åŸå‹æ¨¡å¼ Prototypeåˆ©ç”¨å·²æœ‰å¯¹è±¡ï¼ˆåŸå‹ï¼‰è¿›è¡Œå¤åˆ¶ï¼ˆæ‹·è´ï¼‰çš„æ–¹å¼æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œè¾¾åˆ°èŠ‚çœåˆ›å»ºæ—¶é—´çš„ç›®çš„ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142package prototypeimport ( &quot;encoding/json&quot; &quot;time&quot;)// Keyword æœç´¢å…³é”®å­—type Keyword struct &#123; word string visit int UpdatedAt *time.Time&#125;// Clone è¿™é‡Œä½¿ç”¨åºåˆ—åŒ–ä¸ååºåˆ—åŒ–çš„æ–¹å¼æ·±æ‹·è´func (k *Keyword) Clone() *Keyword &#123; var newKeyword Keyword b, _ := json.Marshal(k) json.Unmarshal(b, &amp;newKeyword) return &amp;newKeyword&#125;// Keywords å…³é”®å­— maptype Keywords map[string]*Keyword// Clone å¤åˆ¶ä¸€ä¸ªæ–°çš„ keywords// updatedWords: éœ€è¦æ›´æ–°çš„å…³é”®è¯åˆ—è¡¨ï¼Œç”±äºä»æ•°æ®åº“ä¸­è·å–æ•°æ®å¸¸å¸¸æ˜¯æ•°ç»„çš„æ–¹å¼func (words Keywords) Clone(updatedWords []*Keyword) Keywords &#123; newKeywords := Keywords&#123;&#125; for k, v := range words &#123; // è¿™é‡Œæ˜¯æµ…æ‹·è´ï¼Œç›´æ¥æ‹·è´äº†åœ°å€ newKeywords[k] = v &#125; // æ›¿æ¢æ‰éœ€è¦æ›´æ–°çš„å­—æ®µï¼Œè¿™é‡Œç”¨çš„æ˜¯æ·±æ‹·è´ for _, word := range updatedWords &#123; newKeywords[word.word] = word.Clone() &#125; return newKeywords&#125; ç»“æ„å‹ä»£ç†æ¨¡å¼ Proxyä¸ºå…¶ä»–å¯¹è±¡æä¾›â¼€ç§ä»£ç†ä»¥æ§åˆ¶è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚ é™æ€ä»£ç†12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849package proxyimport ( &quot;log&quot; &quot;time&quot;)// IUser IUsertype IUser interface &#123; Login(username, password string) error&#125;// User ç”¨æˆ·type User struct &#123;&#125;// Login ç”¨æˆ·ç™»å½•func (u *User) Login(username, password string) error &#123; // ä¸å®ç°ç»†èŠ‚ return nil&#125;// UserProxy ä»£ç†ç±»type UserProxy struct &#123; user *User&#125;// NewUserProxy NewUserProxyfunc NewUserProxy(user *User) *UserProxy &#123; return &amp;UserProxy&#123; user: user, &#125;&#125;// Login ç™»å½•ï¼Œå’Œ user å®ç°ç›¸åŒçš„æ¥å£func (p *UserProxy) Login(username, password string) error &#123; // before è¿™é‡Œå¯èƒ½ä¼šæœ‰ä¸€äº›ç»Ÿè®¡çš„é€»è¾‘ start := time.Now() // è¿™é‡Œæ˜¯åŸæœ‰çš„ä¸šåŠ¡é€»è¾‘ if err := p.user.Login(username, password); err != nil &#123; return err &#125; // after è¿™é‡Œå¯èƒ½ä¹Ÿæœ‰ä¸€äº›ç›‘æ§ç»Ÿè®¡çš„é€»è¾‘ log.Printf(&quot;user login cost time: %s&quot;, time.Now().Sub(start)) return nil&#125; æ¡¥æ¥æ¨¡å¼ Bridgeå°†ç±»çš„æŠ½è±¡éƒ¨åˆ†å’Œå®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»å¼€æ¥ï¼Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344package bridge// IMsgSender IMsgSendertype IMsgSender interface &#123; Send(msg string) error&#125;// EmailMsgSender å‘é€é‚®ä»¶// å¯èƒ½è¿˜æœ‰ ç”µè¯ã€çŸ­ä¿¡ç­‰å„ç§å®ç°type EmailMsgSender struct &#123; emails []string&#125;// NewEmailMsgSender NewEmailMsgSenderfunc NewEmailMsgSender(emails []string) *EmailMsgSender &#123; return &amp;EmailMsgSender&#123;emails: emails&#125;&#125;// Send Sendfunc (s *EmailMsgSender) Send(msg string) error &#123; // è¿™é‡Œå»å‘é€æ¶ˆæ¯ return nil&#125;// INotification é€šçŸ¥æ¥å£type INotification interface &#123; Notify(msg string) error&#125;// ErrorNotification é”™è¯¯é€šçŸ¥// åé¢å¯èƒ½è¿˜æœ‰ warning å„ç§çº§åˆ«type ErrorNotification struct &#123; sender IMsgSender&#125;// NewErrorNotification NewErrorNotificationfunc NewErrorNotification(sender IMsgSender) *ErrorNotification &#123; return &amp;ErrorNotification&#123;sender: sender&#125;&#125;// Notify å‘é€é€šçŸ¥func (n *ErrorNotification) Notify(msg string) error &#123; return n.sender.Send(msg)&#125; è£…é¥°æ¨¡å¼ DecoratoråŠ¨æ€åœ°ç»™â¼€ä¸ªå¯¹è±¡æ·»åŠ â¼€äº›é¢å¤–çš„èŒè´£ã€‚å®ƒæä¾›äº†ç”¨å­ç±»æ‰©å±•åŠŸèƒ½çš„â¼€ä¸ªçµæ´»çš„æ›¿ä»£ï¼Œæ¯”æ´¾ç”Ÿä¸€ä¸ªå­ç±»æ›´åŠ çµæ´»ã€‚ é™„åŠ èŒè´£ ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç”»ç”»çš„ä¾‹å­ï¼Œé»˜è®¤çš„ Square åªæœ‰åŸºç¡€çš„ç”»ç”»åŠŸèƒ½ï¼Œ ColorSquare ä¸ºä»–åŠ ä¸Šäº†é¢œè‰² 123456789101112131415161718192021222324252627282930package decorator// IDraw IDrawtype IDraw interface &#123; Draw() string&#125;// Square æ­£æ–¹å½¢type Square struct&#123;&#125;// Draw Drawfunc (s Square) Draw() string &#123; return &quot;this is a square&quot;&#125;// ColorSquare æœ‰é¢œè‰²çš„æ­£æ–¹å½¢type ColorSquare struct &#123; square IDraw color string&#125;// NewColorSquare NewColorSquarefunc NewColorSquare(square IDraw, color string) ColorSquare &#123; return ColorSquare&#123;color: color, square: square&#125;&#125;// Draw Drawfunc (c ColorSquare) Draw() string &#123; return c.square.Draw() + &quot;, color is &quot; + c.color&#125; é€‚é…å™¨æ¨¡å¼ Adapterå°†â¼€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆç”¨æˆ·å¸Œæœ›å¾—åˆ°çš„å¦â¼€ä¸ªæ¥å£ï¼Œå®ƒä½¿åŸæœ¬ä¸ç›¸å®¹çš„æ¥å£å¾—ä»¥ååŒâ¼¯ä½œã€‚ å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªè¿ç»´ç³»ç»Ÿï¼Œéœ€è¦åˆ†åˆ«è°ƒç”¨é˜¿é‡Œäº‘å’Œ AWS çš„ SDK åˆ›å»ºä¸»æœºï¼Œä¸¤ä¸ª SDK æä¾›çš„åˆ›å»ºä¸»æœºçš„æ¥å£ä¸ä¸€è‡´ï¼Œæ­¤æ—¶å°±å¯ä»¥é€šè¿‡é€‚é…å™¨æ¨¡å¼ï¼Œå°†ä¸¤ä¸ªæ¥å£ç»Ÿä¸€ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748package adapterimport &quot;fmt&quot;// ICreateServer åˆ›å»ºäº‘ä¸»æœºtype ICreateServer interface &#123; CreateServer(cpu, mem float64) error&#125;// AWSClient aws sdktype AWSClient struct&#123;&#125;// RunInstance å¯åŠ¨å®ä¾‹func (c *AWSClient) RunInstance(cpu, mem float64) error &#123; fmt.Printf(&quot;aws client run success, cpuï¼š %f, mem: %f&quot;, cpu, mem) return nil&#125;// AwsClientAdapter é€‚é…å™¨type AwsClientAdapter struct &#123; Client AWSClient&#125;// CreateServer å¯åŠ¨å®ä¾‹func (a *AwsClientAdapter) CreateServer(cpu, mem float64) error &#123; a.Client.RunInstance(cpu, mem) return nil&#125;// AliyunClient aliyun sdktype AliyunClient struct&#123;&#125;// CreateServer å¯åŠ¨å®ä¾‹func (c *AliyunClient) CreateServer(cpu, mem int) error &#123; fmt.Printf(&quot;aws client run success, cpuï¼š %d, mem: %d&quot;, cpu, mem) return nil&#125;// AliyunClientAdapter é€‚é…å™¨type AliyunClientAdapter struct &#123; Client AliyunClient&#125;// CreateServer å¯åŠ¨å®ä¾‹func (a *AliyunClientAdapter) CreateServer(cpu, mem float64) error &#123; a.Client.CreateServer(int(cpu), int(mem)) return nil&#125; é—¨é¢æ¨¡å¼ Facadeå®šä¹‰â¼€ä¸ªé«˜å±‚æ¥å£ï¼Œä¸ºå­ç³»ç»Ÿä¸­çš„â¼€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„å¤–è§‚ï¼Œä»è€Œç®€åŒ–äº†è¯¥å­ç³»ç»Ÿçš„ä½¿ç”¨ã€‚ å¯¹å¤–ç»Ÿä¸€æ¥å£ å‡è®¾ç°åœ¨æˆ‘æœ‰ä¸€ä¸ªç½‘ç«™ï¼Œä»¥å‰æœ‰ç™»å½•å’Œæ³¨å†Œçš„æµç¨‹ï¼Œç™»å½•çš„æ—¶å€™è°ƒç”¨ç”¨æˆ·çš„æŸ¥è¯¢æ¥å£ï¼Œæ³¨å†Œæ—¶è°ƒç”¨ç”¨æˆ·çš„åˆ›å»ºæ¥å£ã€‚ä¸ºäº†ç®€åŒ–ç”¨æˆ·çš„ä½¿ç”¨æµç¨‹ï¼Œæˆ‘ä»¬ç°åœ¨æä¾›ç›´æ¥éªŒè¯ç ç™»å½•&#x2F;æ³¨å†Œçš„åŠŸèƒ½ï¼Œå¦‚æœè¯¥æ‰‹æœºå·å·²æ³¨å†Œé‚£ä¹ˆæˆ‘ä»¬å°±èµ°ç™»å½•æµç¨‹ï¼Œå¦‚æœè¯¥æ‰‹æœºå·æœªæ³¨å†Œï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åˆ›å»ºä¸€ä¸ªæ–°çš„ç”¨æˆ·ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package facade// IUser ç”¨æˆ·æ¥å£type IUser interface &#123; Login(phone int, code int) (*User, error) Register(phone int, code int) (*User, error)&#125;// IUserFacade é—¨é¢æ¨¡å¼type IUserFacade interface &#123; LoginOrRegister(phone int, code int) error&#125;// User ç”¨æˆ·type User struct &#123; Name string&#125;// UserService UserServicetype UserService struct &#123;&#125;// Login ç™»å½•func (u UserService) Login(phone int, code int) (*User, error) &#123; // æ ¡éªŒæ“ä½œ ... return &amp;User&#123;Name: &quot;test login&quot;&#125;, nil&#125;// Register æ³¨å†Œfunc (u UserService) Register(phone int, code int) (*User, error) &#123; // æ ¡éªŒæ“ä½œ ... // åˆ›å»ºç”¨æˆ· return &amp;User&#123;Name: &quot;test register&quot;&#125;, nil&#125;// LoginOrRegister ç™»å½•æˆ–æ³¨å†Œfunc (u UserService)LoginOrRegister(phone int, code int) (*User, error) &#123; user, err := u.Login(phone, code) if err != nil &#123; return nil, err &#125; if user != nil &#123; return user, nil &#125; return u.Register(phone, code)&#125; ç»„åˆæ¨¡å¼ Compositeå°†å¯¹è±¡ç»„åˆæˆæ ‘å‹ç»“æ„ä»¥è¡¨ç¤ºâ€œæ•´ä½“ - éƒ¨åˆ†â€çš„å±‚æ¬¡ç»“æ„ï¼Œä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰â¼€è‡´æ€§ã€‚ æ ‘å½¢ç›®å½•ç»“æ„ å…¬å¸çš„äººå‘˜ç»„ç»‡å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„æ ‘çŠ¶çš„ç»“æ„ï¼Œç°åœ¨å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰éƒ¨åˆ†ï¼Œå’Œå‘˜å·¥ï¼Œä¸¤ç§è§’è‰²ï¼Œä¸€ä¸ªéƒ¨é—¨ä¸‹é¢å¯ä»¥å­˜åœ¨å­éƒ¨é—¨å’Œå‘˜å·¥ï¼Œå‘˜å·¥ä¸‹é¢ä¸èƒ½å†åŒ…å«å…¶ä»–èŠ‚ç‚¹ã€‚ æˆ‘ä»¬ç°åœ¨è¦å®ç°ä¸€ä¸ªç»Ÿè®¡ä¸€ä¸ªéƒ¨é—¨ä¸‹å‘˜å·¥æ•°é‡çš„åŠŸèƒ½ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package composite// IOrganization ç»„ç»‡æ¥å£ï¼Œéƒ½å®ç°ç»Ÿè®¡äººæ•°çš„åŠŸèƒ½type IOrganization interface &#123; Count() int&#125;// Employee å‘˜å·¥type Employee struct &#123; Name string&#125;// Count äººæ•°ç»Ÿè®¡func (Employee) Count() int &#123; return 1&#125;// Department éƒ¨é—¨type Department struct &#123; Name string SubOrganizations []IOrganization&#125;// Count äººæ•°ç»Ÿè®¡func (d Department) Count() int &#123; c := 0 for _, org := range d.SubOrganizations &#123; c += org.Count() &#125; return c&#125;// AddSub æ·»åŠ å­èŠ‚ç‚¹func (d *Department) AddSub(org IOrganization) &#123; d.SubOrganizations = append(d.SubOrganizations, org)&#125;// NewOrganization æ„å»ºç»„ç»‡æ¶æ„ demofunc NewOrganization() IOrganization &#123; root := &amp;Department&#123;Name: &quot;root&quot;&#125; for i := 0; i &lt; 10; i++ &#123; root.AddSub(&amp;Employee&#123;&#125;) root.AddSub(&amp;Department&#123;Name: &quot;sub&quot;, SubOrganizations: []IOrganization&#123;&amp;Employee&#123;&#125;&#125;&#125;) &#125; return root&#125; äº«å…ƒæ¨¡å¼ Flyweightæä¾›æ”¯æŒå¤§é‡ç»†ç²’åº¦å¯¹è±¡å…±äº«çš„æœ‰æ•ˆæ–¹æ³•ã€‚ è±¡æ£‹ï¼Œæ— è®ºæ˜¯ä»€ä¹ˆå¯¹å±€ï¼Œæ£‹å­çš„åŸºæœ¬å±æ€§å…¶å®æ˜¯å›ºå®šçš„ï¼Œå¹¶ä¸ä¼šå› ä¸ºéšç€ä¸‹æ£‹çš„è¿‡ç¨‹å˜åŒ–ã€‚é‚£æˆ‘ä»¬å°±å¯ä»¥æŠŠæ£‹å­å˜ä¸ºäº«å…ƒï¼Œè®©æ‰€æœ‰çš„å¯¹å±€éƒ½å…±äº«è¿™äº›å¯¹è±¡ï¼Œä»¥æ­¤è¾¾åˆ°èŠ‚çœå†…å­˜çš„ç›®çš„ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758package flyweightvar units = map[int]*ChessPieceUnit&#123; 1: &#123; ID: 1, Name: &quot;è»Š&quot;, Color: &quot;red&quot;, &#125;, 2: &#123; ID: 2, Name: &quot;ç‚®&quot;, Color: &quot;red&quot;, &#125;, // ... å…¶ä»–æ£‹å­&#125;// ChessPieceUnit æ£‹å­äº«å…ƒtype ChessPieceUnit struct &#123; ID uint Name string Color string&#125;// NewChessPieceUnit å·¥å‚func NewChessPieceUnit(id int) *ChessPieceUnit &#123; return units[id]&#125;// ChessPiece æ£‹å­type ChessPiece struct &#123; Unit *ChessPieceUnit X int Y int&#125;// ChessBoard æ£‹å±€type ChessBoard struct &#123; chessPieces map[int]*ChessPiece&#125;// NewChessBoard åˆå§‹åŒ–æ£‹ç›˜func NewChessBoard() *ChessBoard &#123; board := &amp;ChessBoard&#123;chessPieces: map[int]*ChessPiece&#123;&#125;&#125; for id := range units &#123; board.chessPieces[id] = &amp;ChessPiece&#123; Unit: NewChessPieceUnit(id), X: 0, Y: 0, &#125; &#125; return board&#125;// Move ç§»åŠ¨æ£‹å­func (c *ChessBoard) Move(id, x, y int) &#123; c.chessPieces[id].X = x c.chessPieces[id].Y = y&#125; è¡Œä¸ºå‹è§‚å¯Ÿè€…æ¨¡å¼ Observerå®šä¹‰å¯¹è±¡é—´çš„â¼€ç§â¼€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“â¼€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657package observerimport &quot;fmt&quot;// ISubject subjecttype ISubject interface &#123; Register(observer IObserver) Remove(observer IObserver) Notify(msg string)&#125;// IObserver è§‚å¯Ÿè€…type IObserver interface &#123; Update(msg string)&#125;// Subject Subjecttype Subject struct &#123; observers []IObserver&#125;// Register æ³¨å†Œfunc (sub *Subject) Register(observer IObserver) &#123; sub.observers = append(sub.observers, observer)&#125;// Remove ç§»é™¤è§‚å¯Ÿè€…func (sub *Subject) Remove(observer IObserver) &#123; for i, ob := range sub.observers &#123; if ob == observer &#123; sub.observers = append(sub.observers[:i], sub.observers[i+1:]...) &#125; &#125;&#125;// Notify é€šçŸ¥func (sub *Subject) Notify(msg string) &#123; for _, o := range sub.observers &#123; o.Update(msg) &#125;&#125;// Observer1 Observer1type Observer1 struct&#123;&#125;// Update å®ç°è§‚å¯Ÿè€…æ¥å£func (Observer1) Update(msg string) &#123; fmt.Printf(&quot;Observer1: %s&quot;, msg)&#125;// Observer2 Observer2type Observer2 struct&#123;&#125;// Update å®ç°è§‚å¯Ÿè€…æ¥å£func (Observer2) Update(msg string) &#123; fmt.Printf(&quot;Observer2: %s&quot;, msg)&#125; æ¨¡æ¿æ¨¡å¼ Templateå®šä¹‰â¼€ä¸ªæ“ä½œä¸­çš„ç®—æ³•éª¨æ¶ï¼Œè€Œå°†â¼€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ï¼Œä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜â¼€ä¸ªç®—æ³•çš„ç»“æ„å³å¯é‡æ–°å®šä¹‰ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚ è¦åšä¸€ä¸ªçŸ­ä¿¡æ¨é€çš„ç³»ç»Ÿï¼Œé‚£ä¹ˆéœ€è¦ æ£€æŸ¥çŸ­ä¿¡å­—æ•°æ˜¯å¦è¶…è¿‡é™åˆ¶ æ£€æŸ¥æ‰‹æœºå·æ˜¯å¦æ­£ç¡® å‘é€çŸ­ä¿¡ è¿”å›çŠ¶æ€ æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œåœ¨å‘é€çŸ­ä¿¡çš„æ—¶å€™ç”±äºä¸åŒçš„ä¾›åº”å•†è°ƒç”¨çš„æ¥å£ä¸åŒï¼Œæ‰€ä»¥ä¼šæœ‰ä¸€äº›å®ç°ä¸Šçš„å·®å¼‚ï¼Œä½†æ˜¯ä»–çš„ç®—æ³•ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰æ˜¯å›ºå®šçš„ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051package templateimport &quot;fmt&quot;// ISMS ISMStype ISMS interface &#123; send(content string, phone int) error&#125;// SMS çŸ­ä¿¡å‘é€åŸºç±»type sms struct &#123; ISMS&#125;// Valid æ ¡éªŒçŸ­ä¿¡å­—æ•°func (s *sms) Valid(content string) error &#123; if len(content) &gt; 63 &#123; return fmt.Errorf(&quot;content is too long&quot;) &#125; return nil&#125;// Send å‘é€çŸ­ä¿¡func (s *sms) Send(content string, phone int) error &#123; if err := s.Valid(content); err != nil &#123; return err &#125; // è°ƒç”¨å­ç±»çš„æ–¹æ³•å‘é€çŸ­ä¿¡ return s.send(content, phone)&#125;// TelecomSms èµ°ç”µä¿¡é€šé“type TelecomSms struct &#123; *sms&#125;// NewTelecomSms NewTelecomSmsfunc NewTelecomSms() *TelecomSms &#123; tel := &amp;TelecomSms&#123;&#125; // è¿™é‡Œæœ‰ç‚¹ç»•ï¼Œæ˜¯å› ä¸º go æ²¡æœ‰ç»§æ‰¿ï¼Œç”¨åµŒå¥—ç»“æ„ä½“çš„æ–¹æ³•è¿›è¡Œæ¨¡æ‹Ÿ // è¿™é‡Œå°†å­ç±»ä½œä¸ºæ¥å£åµŒå…¥çˆ¶ç±»ï¼Œå°±å¯ä»¥è®©çˆ¶ç±»çš„æ¨¡æ¿æ–¹æ³• Send è°ƒç”¨åˆ°å­ç±»çš„å‡½æ•° // å®é™…ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸ä¼šè¿™ä¹ˆå†™ï¼Œéƒ½æ˜¯é‡‡ç”¨ç»„åˆ+æ¥å£çš„æ–¹å¼å®Œæˆç±»ä¼¼çš„åŠŸèƒ½ tel.sms = &amp;sms&#123;ISMS: tel&#125; return tel&#125;func (tel *TelecomSms) send(content string, phone int) error &#123; fmt.Println(&quot;send by telecom success&quot;) return nil&#125; ç­–ç•¥æ¨¡å¼ Strategyå®šä¹‰â¼€ç³»åˆ—ç®—æ³•ï¼ŒæŠŠå®ƒä»¬â¼€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬ä¹‹é—´å¯äº’ç›¸æ›¿æ¢ï¼Œä»è€Œè®©ç®—æ³•å¯ä»¥ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„ç”¨æˆ·è€Œå˜åŒ–ã€‚ åœ¨ä¿å­˜æ–‡ä»¶çš„æ—¶å€™ï¼Œç”±äºæ”¿ç­–æˆ–è€…å…¶ä»–çš„åŸå› å¯èƒ½éœ€è¦é€‰æ‹©ä¸åŒçš„å­˜å‚¨æ–¹å¼ï¼Œæ•æ„Ÿæ•°æ®æˆ‘ä»¬éœ€è¦åŠ å¯†å­˜å‚¨ï¼Œä¸æ•æ„Ÿçš„æ•°æ®æˆ‘ä»¬å¯ä»¥ç›´æ¥æ˜æ–‡ä¿å­˜ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354package strategyimport ( &quot;fmt&quot; &quot;io/ioutil&quot; &quot;os&quot;)// StorageStrategy å­˜å‚¨ç­–ç•¥type StorageStrategy interface &#123; Save(name string, data []byte) error&#125;var strategys = map[string]StorageStrategy&#123; &quot;file&quot;: &amp;fileStorage&#123;&#125;, &quot;encrypt_file&quot;: &amp;encryptFileStorage&#123;&#125;,&#125;// NewStorageStrategy NewStorageStrategyfunc NewStorageStrategy(t string) (StorageStrategy, error) &#123; s, ok := strategys[t] if !ok &#123; return nil, fmt.Errorf(&quot;not found StorageStrategy: %s&quot;, t) &#125; return s, nil&#125;// FileStorage ä¿å­˜åˆ°æ–‡ä»¶type fileStorage struct&#123;&#125;// Save Savefunc (s *fileStorage) Save(name string, data []byte) error &#123; return ioutil.WriteFile(name, data, os.ModeAppend)&#125;// encryptFileStorage åŠ å¯†ä¿å­˜åˆ°æ–‡ä»¶type encryptFileStorage struct&#123;&#125;// Save Savefunc (s *encryptFileStorage) Save(name string, data []byte) error &#123; // åŠ å¯† data, err := encrypt(data) if err != nil &#123; return err &#125; return ioutil.WriteFile(name, data, os.ModeAppend)&#125;func encrypt(data []byte) ([]byte, error) &#123; // è¿™é‡Œå®ç°åŠ å¯†ç®—æ³• return data, nil&#125; èŒè´£é“¾æ¨¡å¼ Chain of Responsibilityé€šè¿‡ç»™å¤šä¸ªå¯¹è±¡å¤„ç†è¯·æ±‚çš„æœºä¼šï¼Œå‡å°‘è¯·æ±‚çš„å‘é€è€…ä¸æ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆã€‚å°†æ¥æ”¶å¯¹è±¡é“¾æ¥èµ·æ¥ï¼Œåœ¨é“¾ä¸­ä¼ é€’è¯· æ±‚ï¼Œç›´åˆ°æœ‰â¼€ä¸ªå¯¹è±¡å¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚ä¼ é€’èŒè´£ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748// Package chain èŒè´£é“¾æ¨¡å¼// ğŸŒ° å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰ä¸ªæ ¡å›­è®ºå›ï¼Œç”±äºç¤¾åŒºè§„ç« åˆ¶åº¦ã€å¹¿å‘Šã€æ³•å¾‹æ³•è§„çš„åŸå› éœ€è¦å¯¹ç”¨æˆ·çš„å‘è¨€è¿›è¡Œæ•æ„Ÿè¯è¿‡æ»¤// å¦‚æœè¢«åˆ¤å®šä¸ºæ•æ„Ÿè¯ï¼Œé‚£ä¹ˆè¿™ç¯‡å¸–å­å°†ä¼šè¢«å°ç¦package chain// SensitiveWordFilter æ•æ„Ÿè¯è¿‡æ»¤å™¨ï¼Œåˆ¤å®šæ˜¯å¦æ˜¯æ•æ„Ÿè¯type SensitiveWordFilter interface &#123; Filter(content string) bool&#125;// SensitiveWordFilterChain èŒè´£é“¾type SensitiveWordFilterChain struct &#123; filters []SensitiveWordFilter&#125;// AddFilter æ·»åŠ ä¸€ä¸ªè¿‡æ»¤å™¨func (c *SensitiveWordFilterChain) AddFilter(filter SensitiveWordFilter) &#123; c.filters = append(c.filters, filter)&#125;// Filter æ‰§è¡Œè¿‡æ»¤func (c *SensitiveWordFilterChain) Filter(content string) bool &#123; for _, filter := range c.filters &#123; // å¦‚æœå‘ç°æ•æ„Ÿç›´æ¥è¿”å›ç»“æœ if filter.Filter(content) &#123; return true &#125; &#125; return false&#125;// AdSensitiveWordFilter å¹¿å‘Štype AdSensitiveWordFilter struct&#123;&#125;// Filter å®ç°è¿‡æ»¤ç®—æ³•func (f *AdSensitiveWordFilter) Filter(content string) bool &#123; // TODO: å®ç°ç®—æ³• return false&#125;// PoliticalWordFilter æ”¿æ²»æ•æ„Ÿtype PoliticalWordFilter struct&#123;&#125;// Filter å®ç°è¿‡æ»¤ç®—æ³•func (f *PoliticalWordFilter) Filter(content string) bool &#123; // TODO: å®ç°ç®—æ³• return true&#125; çŠ¶æ€æ¨¡å¼ Stateå…è®¸â¼€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºã€‚ çŠ¶æ€å˜æˆç±» 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687// Package state çŠ¶æ€æ¨¡å¼// ç¬”è®°è¯·æŸ¥çœ‹: https://lailin.xyz/state.html// è¿™æ˜¯ä¸€ä¸ªå·¥ä½œæµçš„ä¾‹å­ï¼Œåœ¨ä¼ä¸šå†…éƒ¨æˆ–è€…æ˜¯å­¦æ ¡æˆ‘ä»¬ç»å¸¸ä¼šçœ‹åˆ°å¾ˆå¤šå®¡æ‰¹æµç¨‹// å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæŠ¥é”€çš„æµç¨‹: å‘˜å·¥æäº¤æŠ¥é”€ç”³è¯· -&gt; ç›´å±éƒ¨é—¨é¢†å¯¼å®¡æ‰¹ -&gt; è´¢åŠ¡å®¡æ‰¹ -&gt; ç»“æŸ// åœ¨è¿™ä¸ªå®¡æ‰¹æµä¸­ï¼Œå¤„åœ¨ä¸åŒçš„ç¯èŠ‚å°±æ˜¯ä¸åŒçš„çŠ¶æ€// è€Œæµç¨‹çš„å®¡æ‰¹ã€é©³å›å°±æ˜¯ä¸åŒçš„äº‹ä»¶package stateimport &quot;fmt&quot;// Machine çŠ¶æ€æœºtype Machine struct &#123; state IState&#125;// SetState æ›´æ–°çŠ¶æ€func (m *Machine) SetState(state IState) &#123; m.state = state&#125;// GetStateName è·å–å½“å‰çŠ¶æ€func (m *Machine) GetStateName() string &#123; return m.state.GetName()&#125;func (m *Machine) Approval() &#123; m.state.Approval(m)&#125;func (m *Machine) Reject() &#123; m.state.Reject(m)&#125;// IState çŠ¶æ€type IState interface &#123; // å®¡æ‰¹é€šè¿‡ Approval(m *Machine) // é©³å› Reject(m *Machine) // è·å–å½“å‰çŠ¶æ€åç§° GetName() string&#125;// leaderApproveState ç›´å±é¢†å¯¼å®¡æ‰¹type leaderApproveState struct&#123;&#125;// Approval è·å–çŠ¶æ€åå­—func (leaderApproveState) Approval(m *Machine) &#123; fmt.Println(&quot;leader å®¡æ‰¹æˆåŠŸ&quot;) m.SetState(GetFinanceApproveState())&#125;// GetName è·å–çŠ¶æ€åå­—func (leaderApproveState) GetName() string &#123; return &quot;LeaderApproveState&quot;&#125;// Reject è·å–çŠ¶æ€åå­—func (leaderApproveState) Reject(m *Machine) &#123;&#125;func GetLeaderApproveState() IState &#123; return &amp;leaderApproveState&#123;&#125;&#125;// financeApproveState è´¢åŠ¡å®¡æ‰¹type financeApproveState struct&#123;&#125;// Approval å®¡æ‰¹é€šè¿‡func (f financeApproveState) Approval(m *Machine) &#123; fmt.Println(&quot;è´¢åŠ¡å®¡æ‰¹æˆåŠŸ&quot;) fmt.Println(&quot;å‡ºå‘æ‰“æ¬¾æ“ä½œ&quot;)&#125;// æ‹’ç»func (f financeApproveState) Reject(m *Machine) &#123; m.SetState(GetLeaderApproveState())&#125;// GetName è·å–åå­—func (f financeApproveState) GetName() string &#123; return &quot;FinanceApproveState&quot;&#125;// GetFinanceApproveState GetFinanceApproveStatefunc GetFinanceApproveState() IState &#123; return &amp;financeApproveState&#123;&#125;&#125; è¿­ä»£å™¨æ¨¡å¼ Iteratoræä¾›â¼€ç§â½…æ³•æ¥é¡ºåºè®¿é—®â¼€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ è€Œä¸éœ€è¦æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142package iterator// Iterator è¿­ä»£å™¨æ¥å£type Iterator interface &#123; HasNext() bool Next() // è·å–å½“å‰å…ƒç´ ï¼Œç”±äº Go 1.15 ä¸­è¿˜æ²¡æœ‰æ³›å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥è¿”å› interface&#123;&#125; CurrentItem() interface&#123;&#125;&#125;// ArrayInt æ•°ç»„type ArrayInt []int// Iterator è¿”å›è¿­ä»£å™¨func (a ArrayInt) Iterator() Iterator &#123; return &amp;ArrayIntIterator&#123; arrayInt: a, index: 0, &#125;&#125;// ArrayIntIterator æ•°ç»„è¿­ä»£type ArrayIntIterator struct &#123; arrayInt ArrayInt index int&#125;// HasNext æ˜¯å¦æœ‰ä¸‹ä¸€ä¸ªfunc (iter *ArrayIntIterator) HasNext() bool &#123; return iter.index &lt; len(iter.arrayInt)-1&#125;// Next æ¸¸æ ‡åŠ ä¸€func (iter *ArrayIntIterator) Next() &#123; iter.index++&#125;// CurrentItem è·å–å½“å‰å…ƒç´ func (iter *ArrayIntIterator) CurrentItem() interface&#123;&#125; &#123; return iter.arrayInt[iter.index]&#125; è®¿é—®è€…æ¨¡å¼ Visitorè¡¨ç¤ºâ¼€ä¸ªä½œç”¨äºæŸå¯¹è±¡ç»“æ„ä¸­çš„å„å…ƒç´ çš„æ“ä½œï¼Œä½¿å¾—åœ¨ä¸æ”¹å˜å„å…ƒç´ çš„ç±»çš„å‰æä¸‹å®šä¹‰ä½œç”¨äºè¿™äº›å…ƒç´ çš„æ–°æ“ä½œã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980package visitorimport ( &quot;fmt&quot; &quot;path&quot;)// Visitor è®¿é—®è€…type Visitor interface &#123; Visit(IResourceFile) error&#125;// IResourceFile IResourceFiletype IResourceFile interface &#123; Accept(Visitor) error&#125;// NewResourceFile NewResourceFilefunc NewResourceFile(filepath string) (IResourceFile, error) &#123; switch path.Ext(filepath) &#123; case &quot;.ppt&quot;: return &amp;PPTFile&#123;path: filepath&#125;, nil case &quot;.pdf&quot;: return &amp;PdfFile&#123;path: filepath&#125;, nil default: return nil, fmt.Errorf(&quot;not found file type: %s&quot;, filepath) &#125;&#125;// PdfFile PdfFiletype PdfFile struct &#123; path string&#125;// Accept Acceptfunc (f *PdfFile) Accept(visitor Visitor) error &#123; return visitor.Visit(f)&#125;// PPTFile PPTFiletype PPTFile struct &#123; path string&#125;// Accept Acceptfunc (f *PPTFile) Accept(visitor Visitor) error &#123; return visitor.Visit(f)&#125;// Compressor å®ç°å‹ç¼©åŠŸèƒ½type Compressor struct&#123;&#125;// Visit å®ç°è®¿é—®è€…æ¨¡å¼æ–¹æ³•// æˆ‘ä»¬å¯ä»¥å‘ç°ç”±äºæ²¡æœ‰å‡½æ•°é‡è½½ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡æ–­è¨€æ¥æ ¹æ®ä¸åŒçš„ç±»å‹è°ƒç”¨ä¸åŒå‡½æ•°// ä½†æ˜¯æˆ‘ä»¬å³ä½¿ä¸é‡‡ç”¨è®¿é—®è€…æ¨¡å¼ï¼Œæˆ‘ä»¬å…¶å®ä¹Ÿæ˜¯å¯ä»¥è¿™ä¹ˆæ“ä½œçš„// å¹¶ä¸”ç”±äºé‡‡ç”¨äº†ç±»å‹æ–­è¨€ï¼Œæ‰€ä»¥å¦‚æœéœ€è¦æ“ä½œçš„å¯¹è±¡æ¯”è¾ƒå¤šçš„è¯ï¼Œè¿™ä¸ªå‡½æ•°å…¶å®ä¹Ÿä¼šè†¨èƒ€çš„æ¯”è¾ƒå‰å®³// åç»­å¯ä»¥è€ƒè™‘æŒ‰ç…§å‘½åçº¦å®šä½¿ç”¨ generate è‡ªåŠ¨ç”Ÿæˆä»£ç // æˆ–è€…æ˜¯ä½¿ç”¨åå°„ç®€åŒ–func (c *Compressor) Visit(r IResourceFile) error &#123; switch f := r.(type) &#123; case *PPTFile: return c.VisitPPTFile(f) case *PdfFile: return c.VisitPDFFile(f) default: return fmt.Errorf(&quot;not found resource typr: %##v&quot;, r) &#125;&#125;// VisitPPTFile VisitPPTFilefunc (c *Compressor) VisitPPTFile(f *PPTFile) error &#123; fmt.Println(&quot;this is ppt file&quot;) return nil&#125;// VisitPDFFile VisitPDFFilefunc (c *Compressor) VisitPDFFile(f *PdfFile) error &#123; fmt.Println(&quot;this is pdf file&quot;) return nil&#125; å¤‡å¿˜å½•æ¨¡å¼ Mementoåœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·â¼€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ï¼Œä»è€Œå¯ç”¨åœ¨ä»¥åå°†è¯¥å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142// Package memento å¤‡å¿˜å½•æ¨¡å¼// ä¸‹é¢è¿™ä¸ªä¾‹å­é‡‡ç”¨åŸè¯¾ç¨‹çš„ä¾‹å­ï¼Œä¸€ä¸ªè¾“å…¥ç¨‹åº// å¦‚æœè¾“å…¥ :list åˆ™æ˜¾ç¤ºå½“å‰ä¿å­˜çš„å†…å®¹// å¦‚æœè¾“å…¥ :undo åˆ™åˆ é™¤ä¸Šä¸€æ¬¡çš„è¾“å…¥// å¦‚æœè¾“å…¥å…¶ä»–çš„å†…å®¹åˆ™è¿½åŠ ä¿å­˜package memento// InputText ç”¨äºä¿å­˜æ•°æ®type InputText struct &#123; content string&#125;// Append è¿½åŠ æ•°æ®func (in *InputText) Append(content string) &#123; in.content += content&#125;// GetText è·å–æ•°æ®func (in *InputText) GetText() string &#123; return in.content&#125;// Snapshot åˆ›å»ºå¿«ç…§func (in *InputText) Snapshot() *Snapshot &#123; return &amp;Snapshot&#123;content: in.content&#125;&#125;// Restore ä»å¿«ç…§ä¸­æ¢å¤func (in *InputText) Restore(s *Snapshot) &#123; in.content = s.GetText()&#125;// Snapshot å¿«ç…§ï¼Œç”¨äºå­˜å‚¨æ•°æ®å¿«ç…§// å¯¹äºå¿«ç…§æ¥è¯´ï¼Œåªèƒ½ä¸èƒ½è¢«å¤–éƒ¨ï¼ˆä¸åŒåŒ…ï¼‰ä¿®æ”¹ï¼Œåªèƒ½è·å–æ•°æ®ï¼Œæ»¡è¶³å°è£…çš„ç‰¹æ€§type Snapshot struct &#123; content string&#125;// GetText GetTextfunc (s *Snapshot) GetText() string &#123; return s.content&#125; å‘½ä»¤æ¨¡å¼ Commandå°†â¼€ä¸ªè¯·æ±‚å°è£…ä¸ºâ¼€ä¸ªå¯¹è±¡ï¼Œä»è€Œå¯ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–ï¼Œå°†è¯·æ±‚æ’é˜Ÿæˆ–è®°å½•è¯·æ±‚â½‡å¿—ï¼Œæ”¯æŒå¯æ’¤é”€çš„æ“ä½œã€‚ æ—¥å¿—è®°å½•ï¼Œå¯æ’¤é”€ 12345678910111213141516171819202122232425262728293031323334353637383940414243// Package command å‘½ä»¤æ¨¡å¼// Blog: https://lailin.xyz/post/command.html// è¿™æ˜¯ç¤ºä¾‹ä¸€ï¼Œé‡‡ç”¨å°†å‡½æ•°å°è£…ä¸ºå¯¹è±¡çš„æ–¹å¼å®ç°ï¼Œ// ç¤ºä¾‹è¯´æ˜:// å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªæ¸¸æˆæœåŠ¡ï¼Œæˆ‘ä»¬æ­£åœ¨å®ç°ä¸€ä¸ªæ¸¸æˆåç«¯// ä½¿ç”¨ä¸€ä¸ª goroutine ä¸æ–­æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯è¯·æ±‚çš„å‘½ä»¤ï¼Œå¹¶ä¸”å°†å®ƒæ”¾ç½®åˆ°ä¸€ä¸ªé˜Ÿåˆ—å½“ä¸­// ç„¶åæˆ‘ä»¬åœ¨å¦å¤–ä¸€ä¸ª goroutine ä¸­æ¥æ‰§è¡Œå®ƒpackage commandimport &quot;fmt&quot;// ICommand å‘½ä»¤type ICommand interface &#123; Execute() error&#125;// StartCommand æ¸¸æˆå¼€å§‹è¿è¡Œtype StartCommand struct&#123;&#125;// NewStartCommand NewStartCommandfunc NewStartCommand( /*æ­£å¸¸æƒ…å†µä¸‹è¿™é‡Œä¼šæœ‰ä¸€äº›å‚æ•°*/ ) *StartCommand &#123; return &amp;StartCommand&#123;&#125;&#125;// Execute Executefunc (c *StartCommand) Execute() error &#123; fmt.Println(&quot;game start&quot;) return nil&#125;// ArchiveCommand æ¸¸æˆå­˜æ¡£type ArchiveCommand struct&#123;&#125;// NewArchiveCommand NewArchiveCommandfunc NewArchiveCommand( /*æ­£å¸¸æƒ…å†µä¸‹è¿™é‡Œä¼šæœ‰ä¸€äº›å‚æ•°*/ ) *ArchiveCommand &#123; return &amp;ArchiveCommand&#123;&#125;&#125;// Execute Executefunc (c *ArchiveCommand) Execute() error &#123; fmt.Println(&quot;game archive&quot;) return nil&#125; è§£é‡Šå™¨æ¨¡å¼ Interpreterç»™å®šâ¼€ç§è¯­è¨€ï¼Œå®šä¹‰å®ƒçš„æ–‡æ³•è¡¨ç¤ºï¼Œå¹¶å®šä¹‰â¼€ä¸ªè§£é‡Šå™¨ï¼Œè¯¥è§£é‡Šå™¨ç”¨æ¥æ ¹æ®æ–‡æ³•è¡¨ç¤ºæ¥è§£é‡Šè¯­è¨€ä¸­çš„å¥å­ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144// Package interpreter è§£é‡Šå™¨æ¨¡å¼// é‡‡ç”¨åŸè¯¾ç¨‹çš„ç¤ºä¾‹, å¹¶ä¸”åšäº†ä¸€ä¸‹ç®€åŒ–// å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªç›‘æ§ç³»ç»Ÿ// ç°åœ¨éœ€è¦å®ç°ä¸€ä¸ªå‘Šè­¦æ¨¡å—ï¼Œå¯ä»¥æ ¹æ®è¾“å…¥çš„å‘Šè­¦è§„åˆ™æ¥å†³å®šæ˜¯å¦è§¦å‘å‘Šè­¦// å‘Šè­¦è§„åˆ™æ”¯æŒ &amp;&amp;ã€&gt;ã€&lt; 3ç§è¿ç®—ç¬¦// å…¶ä¸­ &gt;ã€&lt; ä¼˜å…ˆçº§æ¯” &amp;&amp; æ›´é«˜package interpreterimport ( &quot;fmt&quot; &quot;regexp&quot; &quot;strconv&quot; &quot;strings&quot;)// AlertRule å‘Šè­¦è§„åˆ™type AlertRule struct &#123; expression IExpression&#125;// NewAlertRule NewAlertRulefunc NewAlertRule(rule string) (*AlertRule, error) &#123; exp, err := NewAndExpression(rule) return &amp;AlertRule&#123;expression: exp&#125;, err&#125;// Interpret åˆ¤æ–­å‘Šè­¦æ˜¯å¦è§¦å‘func (r AlertRule) Interpret(stats map[string]float64) bool &#123; return r.expression.Interpret(stats)&#125;// IExpression è¡¨è¾¾å¼æ¥å£type IExpression interface &#123; Interpret(stats map[string]float64) bool&#125;// GreaterExpression &gt;type GreaterExpression struct &#123; key string value float64&#125;// Interpret Interpretfunc (g GreaterExpression) Interpret(stats map[string]float64) bool &#123; v, ok := stats[g.key] if !ok &#123; return false &#125; return v &gt; g.value&#125;// NewGreaterExpression NewGreaterExpressionfunc NewGreaterExpression(exp string) (*GreaterExpression, error) &#123; data := regexp.MustCompile(`\\s+`).Split(strings.TrimSpace(exp), -1) if len(data) != 3 || data[1] != &quot;&gt;&quot; &#123; return nil, fmt.Errorf(&quot;exp is invalid: %s&quot;, exp) &#125; val, err := strconv.ParseFloat(data[2], 10) if err != nil &#123; return nil, fmt.Errorf(&quot;exp is invalid: %s&quot;, exp) &#125; return &amp;GreaterExpression&#123; key: data[0], value: val, &#125;, nil&#125;// LessExpression &lt;type LessExpression struct &#123; key string value float64&#125;// Interpret Interpretfunc (g LessExpression) Interpret(stats map[string]float64) bool &#123; v, ok := stats[g.key] if !ok &#123; return false &#125; return v &lt; g.value&#125;// NewLessExpression NewLessExpressionfunc NewLessExpression(exp string) (*LessExpression, error) &#123; data := regexp.MustCompile(`\\s+`).Split(strings.TrimSpace(exp), -1) if len(data) != 3 || data[1] != &quot;&lt;&quot; &#123; return nil, fmt.Errorf(&quot;exp is invalid: %s&quot;, exp) &#125; val, err := strconv.ParseFloat(data[2], 10) if err != nil &#123; return nil, fmt.Errorf(&quot;exp is invalid: %s&quot;, exp) &#125; return &amp;LessExpression&#123; key: data[0], value: val, &#125;, nil&#125;// AndExpression &amp;&amp;type AndExpression struct &#123; expressions []IExpression&#125;// Interpret Interpretfunc (e AndExpression) Interpret(stats map[string]float64) bool &#123; for _, expression := range e.expressions &#123; if !expression.Interpret(stats) &#123; return false &#125; &#125; return true&#125;// NewAndExpression NewAndExpressionfunc NewAndExpression(exp string) (*AndExpression, error) &#123; exps := strings.Split(exp, &quot;&amp;&amp;&quot;) expressions := make([]IExpression, len(exps)) for i, e := range exps &#123; var expression IExpression var err error switch &#123; case strings.Contains(e, &quot;&gt;&quot;): expression, err = NewGreaterExpression(e) case strings.Contains(e, &quot;&lt;&quot;): expression, err = NewLessExpression(e) default: err = fmt.Errorf(&quot;exp is invalid: %s&quot;, exp) &#125; if err != nil &#123; return nil, err &#125; expressions[i] = expression &#125; return &amp;AndExpression&#123;expressions: expressions&#125;, nil&#125; ä¸­ä»‹æ¨¡å¼ Mediatorç”¨â¼€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…â¼€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ã€‚å®ƒä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾å¼åœ°ç›¸äº’è°ƒç”¨ï¼Œä»è€Œè¾¾åˆ°ä½è€¦åˆï¼Œè¿˜å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å¯¹è±¡é—´çš„äº¤äº’ã€‚ ä¸ç›´æ¥å¼•ç”¨ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970// Package mediator ä¸­ä»‹æ¨¡å¼// é‡‡ç”¨åŸè¯¾ç¨‹çš„ç¤ºä¾‹ï¼Œå¹¶ä¸”åšäº†ä¸€äº›è£å‰ª// å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªè¾ƒä¸ºå¤æ‚çš„å¯¹è¯æ¡†ï¼Œé‡Œé¢åŒ…æ‹¬ï¼Œç™»å½•ç»„ä»¶ï¼Œæ³¨å†Œç»„ä»¶ï¼Œä»¥åŠé€‰æ‹©æ¡†// å½“é€‰æ‹©æ¡†é€‰æ‹©â€œç™»å½•â€æ—¶ï¼Œå±•ç¤ºç™»å½•ç›¸å…³ç»„ä»¶// å½“é€‰æ‹©æ¡†é€‰æ‹©â€œæ³¨å†Œâ€æ—¶ï¼Œå±•ç¤ºæ³¨å†Œç›¸å…³ç»„ä»¶package mediatorimport ( &quot;fmt&quot; &quot;reflect&quot;)// Input å‡è®¾è¿™è¡¨ç¤ºä¸€ä¸ªè¾“å…¥æ¡†type Input string// String Stringfunc (i Input) String() string &#123; return string(i)&#125;// Selection å‡è®¾è¿™è¡¨ç¤ºä¸€ä¸ªé€‰æ‹©æ¡†type Selection string// Selected å½“å‰é€‰ä¸­çš„å¯¹è±¡func (s Selection) Selected() string &#123; return string(s)&#125;// Button å‡è®¾è¿™è¡¨ç¤ºä¸€ä¸ªæŒ‰é’®type Button struct &#123; onClick func()&#125;// SetOnClick æ·»åŠ ç‚¹å‡»äº‹ä»¶å›è°ƒfunc (b *Button) SetOnClick(f func()) &#123; b.onClick = f&#125;// IMediator ä¸­ä»‹æ¨¡å¼æ¥å£type IMediator interface &#123; HandleEvent(component interface&#123;&#125;)&#125;// Dialog å¯¹è¯æ¡†ç»„ä»¶type Dialog struct &#123; LoginButton *Button RegButton *Button Selection *Selection UsernameInput *Input PasswordInput *Input RepeatPasswordInput *Input&#125;// HandleEvent HandleEventfunc (d *Dialog) HandleEvent(component interface&#123;&#125;) &#123; switch &#123; case reflect.DeepEqual(component, d.Selection): if d.Selection.Selected() == &quot;ç™»å½•&quot; &#123; fmt.Println(&quot;select login&quot;) fmt.Printf(&quot;show: %s\\n&quot;, d.UsernameInput) fmt.Printf(&quot;show: %s\\n&quot;, d.PasswordInput) &#125; else if d.Selection.Selected() == &quot;æ³¨å†Œ&quot; &#123; fmt.Println(&quot;select register&quot;) fmt.Printf(&quot;show: %s\\n&quot;, d.UsernameInput) fmt.Printf(&quot;show: %s\\n&quot;, d.PasswordInput) fmt.Printf(&quot;show: %s\\n&quot;, d.RepeatPasswordInput) &#125; // others, å¦‚æœç‚¹å‡»äº†ç™»å½•æŒ‰é’®ï¼Œæ³¨å†ŒæŒ‰é’® &#125;&#125;","categories":[{"name":"System Design","slug":"System-Design","permalink":"http://blog.sukiu.top/categories/System-Design/"},{"name":"Design Pattern","slug":"System-Design/Design-Pattern","permalink":"http://blog.sukiu.top/categories/System-Design/Design-Pattern/"}],"tags":[{"name":"Go","slug":"Go","permalink":"http://blog.sukiu.top/tags/Go/"},{"name":"Patterns","slug":"Patterns","permalink":"http://blog.sukiu.top/tags/Patterns/"}]},{"title":"æ¨¡æ‹Ÿé¢˜","slug":"Simulation","date":"2022-02-18T02:33:00.000Z","updated":"2022-02-18T02:33:00.000Z","comments":true,"path":"Computer-Basics/Algorithm/Simulation/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Algorithm/Simulation/","excerpt":"ä¸€äº›ç»å…¸æ¨¡æ‹Ÿé¢˜","text":"ä¸€äº›ç»å…¸æ¨¡æ‹Ÿé¢˜ è®¡ç®—å™¨å¯¹äºã€Œä»»ä½•è¡¨è¾¾å¼ã€è€Œè¨€ï¼Œéƒ½ä½¿ç”¨ä¸¤ä¸ªæ ˆ nums å’Œ opsï¼š nums ï¼š å­˜æ”¾æ‰€æœ‰çš„æ•°å­— ops ï¼šå­˜æ”¾æ‰€æœ‰çš„æ•°å­—ä»¥å¤–çš„æ“ä½œ ä»å‰å¾€åéå†å­—ç¬¦ï¼Œåˆ†æƒ…å†µè®¨è®ºï¼š ç©ºæ ¼ : è·³è¿‡ï¼ˆå¼€å§‹å»é™¤æ‰€æœ‰ç©ºæ ¼ï¼‰ ( : ç›´æ¥åŠ å…¥ ops ä¸­ï¼Œç­‰å¾…ä¸ä¹‹åŒ¹é…çš„ ) ) : ä½¿ç”¨ç°æœ‰çš„ nums å’Œ ops è¿›è¡Œè®¡ç®—ï¼Œç›´åˆ°é‡åˆ°å·¦è¾¹æœ€è¿‘çš„ä¸€ä¸ªå·¦æ‹¬å·ä¸ºæ­¢ï¼Œè®¡ç®—ç»“æœæ”¾åˆ° nums æ•°å­— : ä»å½“å‰ä½ç½®å¼€å§‹ç»§ç»­å¾€åå–ï¼Œå°†æ•´ä¸€ä¸ªè¿ç»­æ•°å­—æ•´ä½“å–å‡ºï¼ŒåŠ å…¥ nums + - * / ^ % : éœ€è¦å°†æ“ä½œæ”¾å…¥ ops ä¸­ã€‚åœ¨æ”¾å…¥ä¹‹å‰å…ˆæŠŠæ ˆå†…å¯ä»¥ç®—çš„éƒ½ç®—æ‰ï¼ˆåªæœ‰ã€Œæ ˆå†…è¿ç®—ç¬¦ã€æ¯”ã€Œå½“å‰è¿ç®—ç¬¦ã€ä¼˜å…ˆçº§é«˜&#x2F;åŒç­‰ï¼Œæ‰è¿›è¡Œè¿ç®—ï¼‰ï¼Œä½¿ç”¨ç°æœ‰çš„ nums å’Œ ops è¿›è¡Œè®¡ç®—ï¼Œç›´åˆ°æ²¡æœ‰æ“ä½œæˆ–è€…é‡åˆ°å·¦æ‹¬å·ï¼Œè®¡ç®—ç»“æœæ”¾åˆ° nums åªæœ‰ã€Œæ ˆå†…è¿ç®—ç¬¦ã€æ¯”ã€Œå½“å‰è¿ç®—ç¬¦ã€ä¼˜å…ˆçº§é«˜&#x2F;åŒç­‰ï¼Œæ‰è¿›è¡Œè¿ç®— æ˜¯ä»€ä¹ˆæ„æ€ï¼šä»å‰å¾€ååšï¼Œå‡è®¾æˆ‘ä»¬å½“å‰å·²ç»æ‰«æåˆ° 2 + 1 äº†ï¼ˆæ­¤æ—¶æ ˆå†…çš„æ“ä½œä¸º + ï¼‰ã€‚ å¦‚æœåé¢å‡ºç°çš„ + 2 æˆ–è€… - 1 çš„è¯ï¼Œæ»¡è¶³ã€Œæ ˆå†…è¿ç®—ç¬¦ã€æ¯”ã€Œå½“å‰è¿ç®—ç¬¦ã€ä¼˜å…ˆçº§é«˜&#x2F;åŒç­‰ï¼Œå¯ä»¥å°† 2 + 1 ç®—æ‰ï¼ŒæŠŠç»“æœæ”¾åˆ° nums ä¸­ï¼› å¦‚æœåé¢å‡ºç°çš„æ˜¯ * 2 æˆ–è€… / 1 çš„è¯ï¼Œä¸æ»¡è¶³ã€Œæ ˆå†…è¿ç®—ç¬¦ã€æ¯”ã€Œå½“å‰è¿ç®—ç¬¦ã€ä¼˜å…ˆçº§é«˜&#x2F;åŒç­‰ï¼Œè¿™æ—¶å€™ä¸èƒ½è®¡ç®— 2 + 1ã€‚ ç”±äºç¬¬ä¸€ä¸ªæ•°å¯èƒ½æ˜¯è´Ÿæ•°ï¼Œä¸ºäº†å‡å°‘è¾¹ç•Œåˆ¤æ–­ã€‚ä¸€ä¸ªå°æŠ€å·§æ˜¯å…ˆå¾€ nums æ·»åŠ ä¸€ä¸ª 0 ä»ç†è®ºä¸Šåˆ†æï¼Œnums æœ€å¥½å­˜æ”¾çš„æ˜¯ longï¼Œè€Œä¸æ˜¯ intï¼Œå¯èƒ½å­˜åœ¨ ä¸­é—´ç»“æœæº¢å‡º 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283typedef long long ll;class Solution &#123; private: unordered_map&lt;char, int&gt; opMap = &#123;&#123;&#x27;+&#x27;, 1&#125;, &#123;&#x27;-&#x27;, 1&#125;, &#123;&#x27;*&#x27;, 2&#125;, &#123;&#x27;/&#x27;, 2&#125;, &#123;&#x27;%&#x27;, 2&#125;, &#123;&#x27;^&#x27;, 3&#125;&#125;; stack&lt;ll&gt; nums; stack&lt;char&gt; ops; void calc() &#123; if (nums.size() &lt; 2 || ops.empty()) return; ll b = nums.top(); nums.pop(); ll a = nums.top(); nums.pop(); char op = ops.top(); ops.pop(); ll ans; switch (op) &#123; case &#x27;+&#x27;: ans = a + b; break; case &#x27;-&#x27;: ans = a - b; break; case &#x27;*&#x27;: ans = a * b; break; case &#x27;/&#x27;: ans = a / b; break; case &#x27;%&#x27;: ans = a % b; break; case &#x27;^&#x27;: ans = pow(a, b); break; &#125; nums.push(ans); &#125; public: int calculate(string s) &#123; // å»é™¤æ‰€æœ‰ç©ºæ ¼ s.erase(remove(s.begin(), s.end(), &#x27; &#x27;), s.end()); nums.push(0); // é˜²æ­¢ç¬¬ä¸€ä¸ªæ•°æ˜¯è´Ÿæ•° int n = s.size(); for (int i = 0; i &lt; n; i++) &#123; char c = s[i]; if (c == &#x27;(&#x27;) ops.push(c); else if (c == &#x27;)&#x27;) &#123; // è®¡ç®—åˆ°æœ€è¿‘çš„å·¦æ‹¬å· while (!ops.empty()) &#123; if (ops.top() == &#x27;(&#x27;) &#123; ops.pop(); break; &#125; calc(); &#125; &#125; else &#123; if (c &gt;= &#x27;0&#x27; &amp;&amp; c &lt;= &#x27;9&#x27;) &#123; int num = 0, j; for (j = i; j &lt; n &amp;&amp; s[j] &gt;= &#x27;0&#x27; &amp;&amp; s[j] &lt;= &#x27;9&#x27;; j++) num = num * 10 + (s[j] - &#x27;0&#x27;); nums.push(num); i = j - 1; &#125; else &#123; if (i &gt; 0 &amp;&amp; (s[i - 1] == &#x27;(&#x27; || s[i - 1] == &#x27;+&#x27; || s[i - 1] == &#x27;-&#x27;)) nums.push(0); // æ–°æ“ä½œå…¥æ ˆï¼Œå…ˆè®¡ç®—æ ˆå†… // åªæœ‰æ»¡è¶³æ ˆå†…è¿ç®—ç¬¦é«˜äºæˆ–ç­‰äºå½“å‰è¿ç®—ç¬¦æ‰è®¡ç®— while (!ops.empty() &amp;&amp; ops.top() != &#x27;(&#x27;) &#123; if (opMap[ops.top()] &lt; opMap[c]) break; calc(); &#125; ops.push(c); &#125; &#125; &#125; while (!ops.empty()) calc(); return nums.top(); &#125;&#125;; å¤§æ•°è¿ç®—å¤§æ•°ç›¸åŠ 1234567891011121314string sum(string a,string b) &#123; if (a.size()&lt;b.size()) swap(a,b); int i,j; for (i=a.size()-1,j=b.size()-1; i&gt;=0; i--,j--) &#123; a[i]=(char)(a[i]+(j&gt;=0?b[j]-&#x27;0&#x27;:0)); if (a[i]-&#x27;0&#x27;&gt;=10) &#123; a[i]=(char)((a[i]-&#x27;0&#x27;)%10+&#x27;0&#x27;); if(i) a[i-1]++; else a=&#x27;1&#x27;+a; &#125; &#125; return a;&#125; å¤§æ•°ç›¸å‡1234567891011121314151617181920212223242526272829string differ(string a,string b) &#123; int flag=0; //æ ‡è®°ç¬¦å· if (a.size()&lt;b.size()) &#123; swap(a,b); flag=1; &#125; else if (a.size()==b.size()) &#123; if (a&lt;b) &#123; swap(a,b); flag=1; &#125; &#125; for (int i=a.size()-1,j=b.size()-1; i&gt;=0; i--,j--) &#123; if (j&gt;=0) b[i]=b[j]; else b[i]=&#x27;0&#x27;; //ç»™å‡æ•°ä¸è¶³çš„ä½æ•°è¡¥0 &#125; for (int i=a.size()-1; i&gt;=0; i--) &#123; //æ¨¡æ‹Ÿå‡æ³•æ“ä½œ if (a[i]&gt;=b[i]) a[i]=a[i]-b[i]+&#x27;0&#x27;; else &#123; a[i]=a[i]-b[i]+10+&#x27;0&#x27;; a[i-1]--; &#125; &#125; while (a[0]==&#x27;0&#x27; &amp;&amp; a.size()!=1) &#123; //å»æ‰å¼€å¤´çš„0ï¼Œå¦‚æœå…¨ä¸º0ç•™ä¸€ä¸ª a.erase(0,1); &#125; if (flag) a=&#x27;-&#x27;+a; return a;&#125; å¤§æ•°ç›¸ä¹˜12345678910111213141516171819202122232425262728string product(string a, string b) &#123; string ans=&quot;0&quot;; if (a.size()&lt;b.size()) swap(a,b); int cnt=-1; for (int i=b.size()-1,j=a.size()-1; i&gt;=0; i--)&#123; int t=j; string tmp; int next=0; //è¡¨ç¤ºè¿›ä½ while (t&gt;=0)&#123; //å¾ªç¯å¾—å‡ºä¸­é—´çš„æ•° int mid=(b[i]-&#x27;0&#x27;)*(a[t]-&#x27;0&#x27;)+next; //å­˜å‚¨ä¸­é—´çš„ä¹˜ç§¯ tmp=(char)(mid%10+&#x27;0&#x27;)+tmp; if (mid&gt;=10) //ä¹˜ç§¯å¤§äº10åˆ™è¿›ä½ next=mid/10; else next=0; t--; &#125; if (next!=0) tmp=(char)(next+&#x27;0&#x27;)+tmp; //å¦‚æœå¾ªç¯ç»“æŸè¿›ä½ä¸ä¸º0ï¼Œåˆ™åœ¨å‰é¢è¡¥ cnt++; for (int k=0; k&lt;cnt; k++) //é”™ä½ç›¸åŠ æ—¶è¡¥0 tmp=tmp+&#x27;0&#x27;; ans=sum(ans,tmp); tmp.clear(); //å°†å­˜å‚¨æ¸…ç©º &#125; while (ans[0]==&#x27;0&#x27; &amp;&amp; ans.size()!=1) //å»æ‰å‰é¢å¤šä½™çš„0 ans.erase(0,1); return ans;&#125;","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Algorithm","slug":"Computer-Basics/Algorithm","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Algorithm/"}],"tags":[{"name":"Simulation","slug":"Simulation","permalink":"http://blog.sukiu.top/tags/Simulation/"}]},{"title":"æ–‡ä»¶ç®¡ç†","slug":"File-Management","date":"2022-01-21T06:40:00.000Z","updated":"2022-01-21T06:40:00.000Z","comments":true,"path":"Computer-Basics/Operating-System/File-Management/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Operating-System/File-Management/","excerpt":"æ–‡ä»¶ç³»ç»Ÿæ˜¯æ“ä½œç³»ç»Ÿä¸­è´Ÿè´£ç®¡ç†æŒä¹…æ•°æ®çš„å­ç³»ç»Ÿï¼Œå³è´Ÿè´£æŠŠç”¨æˆ·çš„æ–‡ä»¶å­˜åˆ°ç£ç›˜ç¡¬ä»¶ä¸­ã€‚ å› ä¸ºå³ä½¿è®¡ç®—æœºæ–­ç”µäº†ï¼Œç£ç›˜é‡Œçš„æ•°æ®å¹¶ä¸ä¼šä¸¢å¤±ï¼Œæ‰€ä»¥å¯ä»¥æŒä¹…åŒ–çš„ä¿å­˜æ–‡ä»¶ã€‚ æ–‡ä»¶æ˜¯å¯¹é•¿æœŸå­˜å‚¨ä»‹è´¨çš„æŠ½è±¡ã€‚","text":"æ–‡ä»¶ç³»ç»Ÿæ˜¯æ“ä½œç³»ç»Ÿä¸­è´Ÿè´£ç®¡ç†æŒä¹…æ•°æ®çš„å­ç³»ç»Ÿï¼Œå³è´Ÿè´£æŠŠç”¨æˆ·çš„æ–‡ä»¶å­˜åˆ°ç£ç›˜ç¡¬ä»¶ä¸­ã€‚ å› ä¸ºå³ä½¿è®¡ç®—æœºæ–­ç”µäº†ï¼Œç£ç›˜é‡Œçš„æ•°æ®å¹¶ä¸ä¼šä¸¢å¤±ï¼Œæ‰€ä»¥å¯ä»¥æŒä¹…åŒ–çš„ä¿å­˜æ–‡ä»¶ã€‚ æ–‡ä»¶æ˜¯å¯¹é•¿æœŸå­˜å‚¨ä»‹è´¨çš„æŠ½è±¡ã€‚ æ–‡ä»¶æ–‡ä»¶æ˜¯â¼€ç§æŠ½è±¡æœºåˆ¶ï¼Œå®ƒæä¾›äº†â¼€ç§åœ¨ç£ä¸Šä¿å­˜ä¿¡æ¯è€Œä¸”æ–¹ä¾¿ä»¥åè¯»å–çš„æ–¹æ³•ã€‚è¿™ç§æ–¹æ³•å¯ä»¥ä½¿ç”¨æˆ·ä¸å¿…äº†è§£å­˜å‚¨ä¿¡æ¯çš„æ–¹æ³•ã€ä½ç½®å’Œå®é™…ç£ç›˜â¼¯ä½œæ–¹å¼ç­‰æœ‰å…³ç»†èŠ‚ã€‚ win95ã€win98 ç”¨çš„éƒ½æ˜¯ MS-DOS çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå³ FAT-16ï¼Œ win98 æ‰©å±•äº† FAT-16 æˆä¸º FAT-32ã€‚è¾ƒæ–°ç‰ˆçš„æ“ä½œç³»ç»Ÿ NTFSï¼Œwin8 é…å¤‡ ReFSã€‚å¾®è½¯ä¼˜åŒ– FAT,å«ä½œ exFATã€‚prog.cï¼Œåœ†ç‚¹åé¢çš„éƒ¨åˆ†ç§°ä¸ºæ–‡ä»¶æ‰©å±•åã€‚ æ–‡ä»¶ç»“æ„ å­—èŠ‚ç»“æ„ï¼šæŠŠæ–‡ä»¶çœ‹æˆå­—èŠ‚åºåˆ—ä¸ºæ“ä½œç³»ç»Ÿæä¾›äº†æœ€å¤§çš„çµæ´»åº¦ è®°å½•åºåˆ—ï¼šæ–‡ä»¶ç»“æ„ä¸Šçš„ç¬¬â¼€æ­¥æ”¹è¿›ï¼Œè¿™ç§æ¨¡å‹ä¸­ï¼Œæ–‡ä»¶æ˜¯å…·æœ‰å›ºå®šé•¿åº¦è®°å½•çš„åºåˆ— æ ‘ï¼šæ–‡ä»¶åœ¨è¿™ç§ç»“æ„ä¸­ç”±â¼€æ£µè®°å½•æ ‘æ„æˆï¼Œæ¯ä¸ªè®°å½•ä¸å¿…å…·æœ‰ç›¸åŒçš„é•¿åº¦ï¼Œè®°å½•çš„å›ºå®šä½ç½®ä¸Šæœ‰â¼€ä¸ªé”®å­—æ®µã€‚è¿™æ£µæ ‘æŒ‰â€œé”®â€å­—æ®µè¿›è¡Œæ’åºï¼Œä»è€Œå¯ä»¥å¯¹ç‰¹å®šâ€œé”®â€è¿›è¡Œå¿«é€ŸæŸ¥æ‰¾ã€‚ æ–‡ä»¶ç±»å‹ æ™®é€šæ–‡ä»¶ ç›®å½• å­—ç¬¦ç‰¹æ®Šæ–‡ä»¶ï¼ˆUNIXï¼‰ å—ç‰¹æ®Šæ–‡ä»¶ï¼ˆUNIXï¼‰ æ–‡ä»¶å±æ€§é™¤äº†æ–‡ä»¶åå’Œæ•°æ®å¤–ï¼Œæ–‡ä»¶è¿˜å…·æœ‰å±æ€§æ¥å¯¹æ–‡ä»¶æœ¬èº«åšæ›´å…·ä½“çš„æè¿°ï¼Œè¿™ç±»ä¿¡æ¯ä¹Ÿç§°ä¸ºå…ƒæ•°æ®ã€‚è¿™äº›å±æ€§ä¼šå­˜äºæ–‡ä»¶ç»“æ„ä¸­çš„æŸäº›åŒºåŸŸä¸­ï¼Œå…·ä½“è¦è§†è¯¥æ–‡ä»¶çš„ç±»å‹è€Œå®šã€‚ ä¸¾ä¾‹ï¼š åˆ›å»ºæ—¶é—´ã€ä¿®æ”¹æ—¶é—´ã€å­˜å–æ—¶é—´ã€æ–‡ä»¶å¤§å°ã€å½“å‰å¤§å°ã€æ‰€æœ‰è€…ç­‰ ä¿æŠ¤ï¼šå¯¹æ–‡ä»¶çš„è®¿é—®é™åˆ¶ï¼Œè°å¯ä»¥è®¿é—®æ–‡ä»¶ å£ä»¤ï¼šè®¿é—®æ–‡ä»¶éœ€è¦çš„å¯†ç  åªè¯»æ ‡å¿—ã€éšè—æ ‡å¿—ã€ç³»ç»Ÿæ ‡å¿—ï¼ˆæ™®é€šæ–‡ä»¶æˆ–ç³»ç»Ÿæ–‡ä»¶ï¼‰ã€åŠ é”æ ‡å¿—ã€å­˜æ¡£æ ‡å¿— æœ€å¤§é•¿åº¦ï¼šæ–‡ä»¶å¯èƒ½å¢é•¿åˆ°çš„å­—èŠ‚æ•° æ–‡ä»¶æ“ä½œä½¿ç”¨æ–‡ä»¶çš„ç›®çš„æ˜¯å­˜å‚¨ä¿¡æ¯å¹¶æ–¹ä¾¿ä»¥åæ£€ç´¢ã€‚å¯¹äºå­˜å‚¨å’Œæ£€ç´¢ï¼Œä¸åŒç³»ç»Ÿæä¾›äº†ä¸åŒçš„æ“ä½œã€‚ æ–‡ä»¶ç³»ç»Ÿå¤§å¤šéƒ½ä¼šæä¾›å¦‚ä¸‹çš„æ–‡ä»¶æ“ä½œï¼š create()ï¼šåˆ›å»ºä¸åŒ…å«ä»»ä½•æ•°æ®çš„æ–‡ä»¶ã€‚ delte()ï¼šåˆ é™¤è¯¥æ–‡ä»¶ä»¥é‡Šæ”¾ç£ç›˜ç©ºé—´ã€‚ open()ï¼šåœ¨ä½¿ç”¨æ–‡ä»¶ä¹‹å‰ï¼Œå…ˆæ‰“å¼€æ–‡ä»¶ï¼Œç›®çš„æ˜¯æŠŠæ–‡ä»¶å±æ€§å’Œç£ç›˜åœ°å€è¡¨è£…å…¥å†…å­˜ï¼Œä»¥ä¾¿åç»­è°ƒç”¨çš„å¿«é€Ÿè®¿é—®ã€‚ close()ï¼šæ–‡ä»¶è®¿é—®ç»“æŸä¹‹åï¼Œå…³é—­æ–‡ä»¶å¹¶é‡Šæ”¾å†…éƒ¨ç©ºé—´è¡¨ç©ºé—´ã€‚ write()ï¼šå‘æ–‡ä»¶å†™æ•°æ®ï¼Œå¦‚æœå½“å‰ä½ç½®æ˜¯æ–‡ä»¶å°¾ï¼Œé‚£ä¹ˆæ•°æ®é•¿åº¦ä¼šå¢åŠ ï¼›å¦‚æœå½“å‰ä½ç½®æ˜¯å…¶ä¸­æŸä¸ªä½ç½®ï¼Œé‚£ä¹ˆå†™å…¥ä½ç½®çš„æ•°æ®å°†ä¼šè¢«è¦†ç›–ã€‚ append()ï¼šç›¸å½“äº write() åœ¨å°¾éƒ¨æ·»åŠ æ•°æ®ã€‚ seek()ï¼šéšæœºè®¿é—®æ–‡ä»¶ï¼Œéœ€è¦æŒ‡å®šç›¸å¯¹äºæ–‡ä»¶æ•°æ®å¼€å§‹çš„ä½ç½®ã€‚ getAttribute()ï¼šè¯»å–æ–‡ä»¶çš„å±æ€§ã€‚ setAttribute()ï¼šè®¾ç½®æ–‡ä»¶çš„å±æ€§ã€‚ rename()ï¼šé‡å‘½åæ–‡ä»¶ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œæ‰“å¼€æ–‡ä»¶å°†ä¼šè·å¾—ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦(ä¸€ä¸ªå°æ•´æ•°)ï¼Œé€šè¿‡æ–‡ä»¶æè¿°ç¬¦ï¼Œå°±å¯ä»¥æ“ä½œæ–‡ä»¶ã€‚ ç›®å½•æ–‡ä»¶ç³»ç»Ÿé€šå¸¸æä¾›ç›®å½•æˆ–æ–‡ä»¶å¤¹ç”¨äºè®°å½•æ–‡ä»¶çš„ä½ç½®ï¼Œåœ¨å¾ˆå¤šæ“ä½œç³»ç»Ÿä¸­ç›®å½•æœ¬èº«ä¹Ÿæ˜¯æ–‡ä»¶ ç°åœ¨çš„æ–‡ä»¶ç›®å½•ç»“æ„ï¼Œå¤§å¤šé‡‡ç”¨æ–‡ä»¶æ ‘ç»“æ„ã€‚è¿™é‡Œçš„è·¯å¾„ï¼Œç”¨è·¯å¾„åè¡¨ç¤ºï¼Œåˆ†ä¸ºç»å¯¹è·¯å¾„åå’Œç›¸å¯¹è·¯å¾„åï¼Œè·¯å¾„æ¯å¾€ä¸‹ä¸€å±‚ï¼Œä½¿ç”¨åˆ†éš”ç¬¦è¿›è¡Œåˆ†éš”ã€‚ åˆ†éš”ç¬¦è§†ç³»ç»Ÿè€Œå®šï¼Œå¦‚ä¸‹ï¼š 123&gt; Windowsï¼š\\usr\\ast\\maibox&gt; Linux: /usr/ast/mailbox&gt; MULTICS: &gt;usr&gt;ast&gt;mailbox ç›®å½•æ“ä½œå¯¹äºç›®å½•ï¼Œä¹Ÿæä¾›äº†ç›¸åº”çš„æ“ä½œï¼š create(): åˆ›å»ºç›®å½• delete(): åˆ é™¤ç›®å½• opendir(): æ‰“å¼€ç›®å½• closedir(): å…³é—­ç›®å½•ï¼Œé‡Šæ”¾å†…éƒ¨è¡¨ç©ºé—´ readdir(): è¿”å›ä¸€ä¸ªç›®å½•é¡¹ï¼Œåœ¨å†…å­˜ä¸­ï¼Œä»¥ç›®å½•é¡¹æ¥è¡¨è¾¾ä¸€ä¸ªç›®å½• rename(): é‡å‘½å link(): é“¾æ¥ä¸€ä¸ªæ–‡ä»¶ï¼Œä¹‹åèƒ½ä½¿åŒä¸€ä¸ªæ–‡ä»¶ï¼Œèƒ½é€šè¿‡å¤šä¸ªæ–‡ä»¶è·¯å¾„è®¿é—®åˆ° (åç»­ä¼šæåˆ°) unlink(): è§£é™¤æ–‡ä»¶çš„é“¾æ¥ æ–‡ä»¶ç³»ç»Ÿä»¥ä¸Šå†…å®¹æ˜¯ä»¥ç”¨æˆ·ï¼ˆå³ä½¿ç”¨è€…ï¼‰çš„è§’åº¦çœ‹å¾…æ–‡ä»¶ã€‚é‚£ä¹ˆï¼Œä»æ–‡ä»¶ç³»ç»Ÿå®ç°è€…çš„è§’åº¦æ¥çœ‹ï¼Œæ–‡ä»¶ç³»ç»Ÿåº”è¯¥å¦‚ä½•å®ç°ï¼Ÿ æ–‡ä»¶ç³»ç»Ÿå­˜æ”¾åœ¨ç£ç›˜ä¸Šï¼Œç£ç›˜è¢«åˆ’åˆ†ä¸ºä¸€ä¸ªæˆ–è€…å¤šä¸ªåˆ†åŒºï¼Œæ¯ä¸ªåˆ†åŒºä¸­æœ‰ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿã€‚ç£ç›˜çš„ 0 å·æ‰‡åŒºç§°ä¸ºä¸»å¼•å¯¼è®°å½•ï¼ˆMaster Boot Record, MBRï¼‰ï¼Œç”¨æ¥å¼•å¯¼è®¡ç®—æœºã€‚ç´§æ¥ç€ï¼Œæ˜¯åˆ†åŒºè¡¨ï¼Œç”¨æ¥æ ‡è®°æ¯ä¸ªåˆ†åŒºçš„èµ·å§‹å’Œç»“æŸä½ç½®ï¼Œè¡¨ä¸­çš„ä¸€ä¸ªåˆ†åŒºè¢«æ ‡è®°ä¸ºæ´»åŠ¨åˆ†åŒºã€‚ å½“è®¡ç®—æœºè¢«å¼•å¯¼æ—¶ï¼ŒBIOS è¯»å…¥å¹¶æ‰§è¡Œ MBRã€‚MBR ä¼šç¡®å®šæ´»åŠ¨åˆ†åŒºï¼Œè¯»å…¥å¹¶æ‰§è¡Œå®ƒçš„å¼•å¯¼å—ï¼ˆboot blockï¼‰ã€‚å¼•å¯¼å—ä¸­çš„ç¨‹åºå°†è£…è½½è¯¥åˆ†åŒºä¸­çš„ç³»ç»Ÿã€‚è¶…çº§å—ï¼ˆsuperblockï¼‰åŒ…å«æ–‡ä»¶ç³»ç»Ÿçš„æ‰€æœ‰å…³é”®å‚æ•°ï¼Œä¼šè¢«è¯»å…¥å†…å­˜ï¼Œå…¶ä¸­çš„ä¿¡ç”¨å¯ç”¨æ¥ç¡®å®šæ–‡ä»¶ç³»ç»Ÿçš„é­”æ•°ã€æ–‡ä»¶ç³»ç»Ÿä¸­çš„å—çš„æ•°é‡å’Œå…¶ä»–é‡è¦çš„ç®¡ç†ä¿¡æ¯ã€‚ ç©ºé—²å—çš„ä¿¡æ¯å¯ä»¥ç”¨ä½å›¾æˆ–è€…æŒ‡é’ˆçš„å½¢å¼æŒ‡å‡ºï¼Œéšåè·Ÿéšçš„æ˜¯ä¸€ç»„ i èŠ‚ç‚¹ï¼ˆä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨æ¥è¯´æ˜æ–‡ä»¶çš„æ–¹æ–¹é¢é¢ï¼‰ã€‚æœ€åï¼Œå­˜æ”¾äº†æ‰€æœ‰å…¶ä»–çš„æ–‡ä»¶å’Œç›®å½•ã€‚ æ–‡ä»¶çš„å®ç°è¿ç»­åˆ†é…æœ€ç®€å•çš„åˆ†é…æ˜¯æŠŠæ¯ä¸ªæ–‡ä»¶ä½œä¸ºâ¼€è¿ä¸²è¿ç»­æ•°æ®å—å­˜å‚¨åœ¨ç£ç›˜ ä¼˜ç‚¹ï¼š å®ç°ç®€å•ï¼Œåªéœ€è®°ä½å¼€å§‹ä½ç½®ï¼Œæ–‡ä»¶çš„å—æ•°ã€‚ è¯»æ“ä½œæ€§èƒ½å¥½ï¼Œå•ä¸ªæ“ä½œå°±èƒ½ä»ç£ç›˜ä¸­è¯»å‡ºæ•´ä¸ªæ–‡ä»¶ã€‚åªéœ€è¦ä¸€æ¬¡å¯»æ‰¾ï¼Œä¹‹åä¸å†æœ‰å¯»é“å’Œæ—‹è½¬å»¶è¿Ÿã€‚ ç¼ºç‚¹ï¼š å°¾éƒ¨ä¼šæµªè´¹ä¸€äº›ç©ºé—´ï¼Œä»¥å—ä¸ºå­˜å‚¨å•ä½æ—¶ï¼Œæ— è®ºæ˜¯å¦å®Œå…¨ä½¿ç”¨å®Œå—å¤§å°ï¼Œéƒ½ä¼šå ç”¨æ•´ä¸ªå— éœ€è¦çŸ¥é“æ–‡ä»¶çš„æœ€ç»ˆå¤§å°ï¼Œç„¶åï¼Œåœ¨ç»´æŠ¤çš„è¿ç»­ç©ºé—²è¡¨æ‰¾åˆ°åˆé€‚çš„ä½ç½®å­˜å…¥æ–‡ä»¶ï¼Œå¹¶ä¸”çŸ¥é“æ–‡ä»¶çš„æœ€ç»ˆå¤§å°è¿™ä¸€é—®é¢˜ä¸å¯å›é¿ã€‚ éšæ—¶é—´è¿ç§»ï¼Œå°†ä¼šäº§ç”Ÿå¤§é‡ç¢ç‰‡å—ï¼Œä½¿ç£ç›˜å˜å¾—é›¶ç¢ï¼Œå½“ä¸€ä¸ªè¾ƒå¤§çš„æ–°æ–‡ä»¶è¦åŠ å…¥æ—¶ï¼Œå°†æ‰¾ä¸åˆ°åˆé€‚çš„è¿ç»­ä½ç½®ï¼Œæ­¤æ—¶è¦å‹ç¼©ç£ç›˜ç©ºé—´ï¼ˆæŠŠæ–‡ä»¶å¤åˆ¶åˆ°æ–°ä½ç½®ï¼Œä»¥å¾—åˆ°æ›´å¤šçš„è¿ç»­ç©ºé—´ï¼‰ï¼Œä»£ä»·æé«˜ã€‚ æ–°å»ºæ–‡ä»¶æ—¶è¦çŸ¥é“æ–‡ä»¶çš„æœ€ç»ˆå¤§å°ï¼Œä½¿å¾—è¿™ä¸€å­˜å‚¨æ–¹å¼éš¾ä»¥åº”ç”¨äºå®é™…åœºæ™¯ï¼Œä½†æ˜¯åœ¨ä¸€äº›æƒ…å½¢ä¸‹æ˜¯å¯è¡Œçš„ã€‚ å¦‚åœ¨ CD-ROMã€DVDã€BDï¼ˆè“å…‰å…‰ç›˜ï¼‰ä¸Šï¼Œåœ¨å®ƒä»¬çš„åœºæ™¯é‡Œï¼Œæ‰€æœ‰çš„æ–‡ä»¶çš„å¤§å°æ˜¯äº‹å…ˆçŸ¥é“çš„ï¼Œå¹¶ä¸”åœ¨åç»­çš„ä½¿ç”¨ä¸­ï¼Œè¿™äº›æ–‡ä»¶çš„å¤§å°ä¹Ÿä¸ä¼šæ”¹å˜ã€‚ é“¾è¡¨åˆ†é…å¯ä»¥ä¸ºæ¯ä¸ªæ–‡ä»¶æ„é€ ç£ç›˜å—é“¾è¡¨ï¼Œæ¯ä¸€å—çš„ç¬¬ä¸€ä¸ªå­—æŒ‡å‘ä¸‹å—ï¼Œå—çš„å…¶ä»–éƒ¨åˆ†å­˜æ”¾æ•°æ®ã€‚ ä¼˜ç‚¹ï¼š ä¸ä¼šå› ä¸ºç£ç›˜ç¢ç‰‡æµªè´¹å­˜å‚¨ç©ºé—´ï¼Œå……åˆ†åˆ©ç”¨ç£ç›˜å—ã€‚ åªéœ€è¦ç¬¬ä¸€å—çš„ç£ç›˜åœ°å€ï¼Œå°±èƒ½æ‰¾åˆ°å…¶ä»–çš„å—ã€‚ ç¼ºç‚¹ï¼š éšæœºæ–¹æ³•è®¿é—®å¾ˆæ…¢ï¼Œè®¿é—®å— n æ€»æ˜¯è¦å…ˆè®¿é—®å…¶é¢çš„ n-1 å—ã€‚ æŒ‡å‘ä¸‹ä¸€å—çš„æŒ‡é’ˆå æ®äº†ä¸€äº›å­—èŠ‚ï¼Œæ¯ä¸ªç£ç›˜å—å­˜å‚¨çš„å­—èŠ‚æ•°ä¸å†æ˜¯ 2 çš„æ•´æ¬¡å¹‚ï¼Œå› å¤§å¤šæ•°ç¨‹åºä»¥é•¿åº¦ä¸º 2 çš„æ•´æ¬¡å¹‚æ¥è¯»å†™ç£ç›˜å—ï¼Œé™ä½äº†å®é™…ç³»ç»Ÿçš„è¿è¡Œæ•ˆç‡ã€‚ è¦è¯»å‡ºä¸€ä¸ªå®Œæˆçš„æ–‡ä»¶å—æ—¶ï¼Œè¦ä»ä¸¤ä¸ªç£ç›˜å—ä¸­è·å¾—å’Œæ‹¼æ¥ä¿¡æ¯ï¼Œå¸¦æ¥é¢å¤–çš„å¼€é”€ å†…å­˜ä¸­çš„è¡¨è¿›è¡Œé“¾è¡¨åˆ†é…å¼¥è¡¥é“¾è¡¨åˆ†é…çš„ä¸è¶³ï¼Œå¯ä»¥åœ¨å†…å­˜ä¸­å»ºç«‹ç£ç›˜å—çš„æŒ‡é’ˆè¡¨ã€‚ è¡¨é¡¹ä¸­ï¼Œä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„æ ‡è®°ï¼ˆå¦‚ -1ï¼‰è¡¨ç¤ºç»“æŸã€‚è¿™æ ·ï¼Œæ²¿ç€è¡¨å°±å¯ä»¥æ–‡ä»¶çš„æ‰€æœ‰å—ã€‚ è¿™æ ·çš„è¡¨ä¹Ÿç§°ä¸º FATï¼ˆFile Allocation Tableï¼‰ ã€‚ ä¼˜ç‚¹ï¼š æ•´ä¸ªå—éƒ½å¯ä»¥å­˜æ”¾æ•°æ®ã€‚ éšæœºè®¿é—®ä¹Ÿç®€å•å¾—å¤šï¼Œè™½ç„¶ä»è¦é¡ºç€é“¾è¡¨å¯»æ‰¾åç§»é‡ï¼ˆä½†å‡å°‘äº†å¯èƒ½çš„å¯»åˆ°å’Œæ—‹è½¬å»¶è¿Ÿï¼‰ ä¸éœ€è¦ç£ç›˜å¼•ç”¨ ç¼ºç‚¹ï¼š å¿…é¡»æŠŠæ•´ä¸ªè¡¨éƒ½æ”¾åœ¨å†…å­˜ä¸­ã€‚å‡è®¾ 1TB çš„ç£ç›˜å’Œ 1KB çš„å—å¤§å°ï¼Œåˆ™è¡¨éœ€è¦ 10 äº¿é¡¹ï¼Œæ¯ä¸€é¡¹è‡³å°‘è¦ 3 ä¸ªå­—èŠ‚ï¼Œåˆ™è¡¨å¤§å°è¦å ç”¨ 2.4GB å†…å­˜ã€‚å› æ­¤ FAT çš„åº”ç”¨åœºæ™¯æœ‰é™ï¼Œä¸å¤ªå®ç”¨ã€‚ I èŠ‚ç‚¹æœ€æ™®éçš„æ–¹å¼ï¼Œæ˜¯ä¸ºæ¯ä¸ªæ–‡ä»¶åˆ›å»ºä¸€ä¸ªä¸­æ•°æ®ç»“æ„ä»¥è¡¨ç¤ºæ­¤æ–‡ä»¶çš„å…³é”®æè¿°ï¼Œè¿™ç§æ•°æ®ç»“æ„ä¹Ÿç§°ä¸ºi èŠ‚ç‚¹ï¼ˆindex-nodeï¼‰ã€‚ ä¸€ä¸ªå¯èƒ½çš„ inode ç»“æ„ï¼Œè®°å½•äº†æ–‡ä»¶å±æ€§ï¼Œä»¥åŠæ¯ä¸ªæ–‡ä»¶å—å¯¹åº”çš„ç£ç›˜å—åœ°å€ï¼Œå¹¶èƒ½æŒ‡å‘å…¶ä»–çš„ inode æ¥è®°å½•æ›´å¤šçš„å­˜å‚¨æ•°æ®ã€‚ è¿™æ ·çš„æœºåˆ¶æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ï¼š ç»™å®š inodeï¼Œå°±èƒ½æ‰¾åˆ°æ‰€æœ‰çš„æ–‡ä»¶å—ã€‚ åªæœ‰åœ¨æ–‡ä»¶æ‰“å¼€æ—¶ï¼Œinode æ‰ä¼šå­˜åœ¨äºå†…å­˜ä¸­ï¼Œå¦‚æœæ¯ä¸ª i èŠ‚ç‚¹æœ‰ n å­—èŠ‚ï¼Œé‚£ä¹ˆ k ä¸ªæ–‡ä»¶åŒæ—¶æ‰“å¼€ï¼Œinode æ€»å…±å æ® kn å­—èŠ‚ï¼Œåªéœ€æå‰ä¿ç•™è¿™ä¹ˆå¤šçš„ç©ºé—´å³å¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå†…å­˜ä¸­ inode å æ®çš„å¤§å°å’Œæ–‡ä»¶å¤§å°æ— å…³ï¼Œåªå’ŒåŒæ—¶ä½¿ç”¨çš„æ–‡ä»¶æ•°æœ‰å…³ã€‚ å¦‚æœä¸€ä¸ª inode ä¸å¤Ÿå­˜å‚¨ä¸€ä¸ªæ–‡ä»¶å ç”¨çš„æ‰€æœ‰ç£ç›˜å—ï¼Œå¯ä»¥é€šè¿‡æœ€åä¸€ä¸ªåœ°å€ä¹‹å‰å…¶ä»– inode å¾—ä»¥è§£å†³ã€‚ç”šè‡³å¯ä»¥æŒ‡å‘å…¶ä»–å­˜æ”¾åœ°å€çš„ç£ç›˜çš„ç£ç›˜å—ã€‚ ç›®å½•çš„å®ç°åœ¨è¯»æ–‡ä»¶ä¹‹å‰ï¼Œå¿…é¡»å…ˆæ‰“å¼€æ–‡ä»¶ã€‚æ‰“å¼€æ–‡ä»¶æ—¶ï¼Œæ“ä½œç³»ç»Ÿåˆ©ç”¨ç”¨æˆ·ç»™å‡ºçš„è·¯å¾„åæ‰¾åˆ°ç›¸åº”çš„ç›®å½•é¡¹ã€‚ ç®€å•ç›®å½•ï¼šåŒ…å«å›ºå®šå¤§â¼©çš„ç›®å½•ï¼Œåœ¨ç›®å½•é¡¹ä¸­æœ‰ç£ç›˜åœ°å€å’Œå±æ€§ é‡‡ç”¨ i èŠ‚ç‚¹çš„ç³»ç»Ÿï¼šæŠŠæ–‡ä»¶å±æ€§å­˜æ”¾åœ¨ i èŠ‚ç‚¹ä¸­è€Œä¸æ˜¯ç›®å½•é¡¹ä¸­ã€‚è¿™ç§æƒ…å½¢ä¸‹ï¼Œç›®å½•é¡¹ä¼šæ›´çŸ­ã€‚ å…±äº«æ–‡ä»¶å…±äº«æ–‡ä»¶ä¸ç›®å½•çš„è”ç³»ç§°ä¸ºâ¼€ä¸ªé“¾æ¥ï¼ˆlinkï¼‰ã€‚è¿™æ ·æ–‡ä»¶ç³»ç»Ÿæœ¬èº«å°±æ˜¯â¼€ä¸ªæœ‰å‘â½†ç¯å›¾ï¼ˆDAGï¼‰ï¼Œè€Œä¸æ˜¯â¼€æ£µæ ‘ã€‚ ç¡¬é“¾æ¥ï¼šæŒ‡å‘ç›®æ ‡æ•°æ®å¯¹è±¡çš„é“¾æ¥ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªæ—¢æœ‰æ–‡ä»¶çš„åˆ«å å½“ç›®æ ‡è¢«åˆ é™¤æ—¶ï¼Œç¡¬é“¾æ¥ç»§ç»­å­˜åœ¨ï¼Œä¸”å¯ä»¥æ­£å¸¸æ‰“å¼€ã€ç¼–è¾‘ã€‚å› ä¸ºä»–å…·å¤‡ä¸€ä¸ªå®Œæ•´çš„æ–‡ä»¶ç»“æ„ã€‚ å½“ç¡¬é“¾æ¥è¢«åˆ é™¤æ—¶ï¼Œç›®æ ‡æ–‡ä»¶ç»§ç»­å­˜åœ¨ï¼Œä¸å—å½±å“ã€‚ åªæœ‰å½“ä¸€ä¸ªæ–‡ä»¶ ID å¯¹åº”çš„æ‰€æœ‰ç¡¬é“¾æ¥è¢«åˆ é™¤æ—¶ï¼Œæ•°æ®æ‰çœŸæ­£è¢«æ ‡è®°ä¸ºåˆ é™¤ã€‚ ç¬¦å·é“¾æ¥ï¼šæŒ‡å‘ç›®æ ‡è·¯å¾„çš„é“¾æ¥ï¼Œä¼šè·³è½¬åˆ°ç¬¦å·é“¾æ¥æ‰€æŒ‡å‘çš„ç›®æ ‡ä¸­å»ï¼Œè€Œä¸æ”¹å˜æ­¤æ—¶çš„æ–‡ä»¶è·¯å¾„ å½“ç›®æ ‡è¢«åˆ é™¤æ—¶ï¼Œç¬¦å·é“¾æ¥ç»§ç»­å­˜åœ¨ï¼Œä½†ä¼šæˆä¸ºæ­»é“¾ï¼Œæ— æ³•æ‰“å¼€ã€‚ å½“ç¬¦å·é“¾æ¥è¢«åˆ é™¤æ—¶ï¼Œå®ƒæŒ‡å‘çš„ç›®æ ‡ä¸å—å½±å“ã€‚ è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿå°†å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿæ•´åˆåˆ°â¼€ä¸ªç»Ÿâ¼€çš„ç»“æ„ä¸­ã€‚ â¼€ä¸ª Linux ç³»ç»Ÿå¯ä»¥ç”¨ ext2 ä½œä¸ºæ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œext3 åˆ†åŒºè£…è½½åœ¨ /usr ä¸‹ï¼Œå¦â¼€å—é‡‡ç”¨ ReiserFS æ–‡ä»¶ç³»ç»Ÿçš„ç¡¬ç›˜è£…è½½åœ¨ /home ä¸‹ï¼Œä»¥åŠâ¼€ä¸ª ISO 9660 çš„ CD-ROM ä¸´æ—¶è£…è½½åœ¨ /mnt ä¸‹ã€‚ ä»ç”¨æˆ·çš„è§‚ç‚¹æ¥çœ‹ï¼Œåªæœ‰â¼€ä¸ªæ–‡ä»¶ç³»ç»Ÿå±‚çº§ã€‚ä½†å®ƒä»¬äº‹å®ä¸Šæ˜¯å¤šç§æ–‡ä»¶ç³»ç»Ÿï¼Œå¯¹äºç”¨æˆ·å’Œè¿›ç¨‹æ˜¯ä¸å¯è§çš„ã€‚ ç»å¤§å¤šæ•° Unix æ“ä½œç³»ç»Ÿéƒ½åœ¨ä½¿ç”¨è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼ˆVirtualFile System, VFSï¼‰ æ–‡ä»¶ç³»ç»Ÿé¢å¯¹çš„é—®é¢˜ç£ç›˜ç©ºé—´ç®¡ç†å‡ ä¹æ‰€æœ‰çš„æ–‡ä»¶ç³»ç»Ÿå°†æ–‡ä»¶åˆ†å‰²æˆå›ºå®šå¤§å°çš„å—æ¥å­˜å‚¨ï¼Œå„å—ä¹‹é—´ä¸ä¸€å®šç›¸é‚»ã€‚ å—å¤§å°å—å¤§å°å°†ç›´æ¥å½±å“æ­¤æ¶ˆå½¼é•¿çš„ä¸¤ä¸ªæŒ‡æ ‡ç©ºé—´åˆ©ç”¨ç‡å’Œç£ç›˜æ•°æ®ç‡ã€‚ ä»å†å²çš„è§‚ç‚¹ä¸Šæ¥è¯´ï¼Œæ–‡ä»¶ç³»ç»Ÿå°†å¤§â¼©è®¾åœ¨ 1~4KB ä¹‹é—´ã€‚ ä½†ç°åœ¨éšç€ç£ç›˜è¶…è¿‡äº† 1TBï¼Œè¿˜æ˜¯å°†å—çš„å¤§â¼©æå‡åˆ° 64KB å¹¶ä¸”æ¥å—æµªè´¹çš„ç£ç›˜å­”ç©ºé—´ï¼Œè¿™æ ·ä¹Ÿè®¸æ›´å¥½ã€‚ç£ç›˜ç©ºé—´â¼ä¹ä¸å†ä¼šçŸ­ç¼ºã€‚ ç©ºé—²å—è®°å½•ç¡®å®šäº†å—å¤§å°ï¼Œéœ€è¦è€ƒè™‘ç©ºé—²å—å¦‚ä½•è®°å½•ã€‚ é“¾è¡¨è®°å½•ï¼šé“¾è¡¨çš„æ¯ä¸ªå—ä¸­åŒ…å«å°½å¯èƒ½å¤šçš„ç©ºé—²ç£ç›˜å—å·ã€‚ï¼ˆé€šå¸¸æƒ…å†µä¸‹ï¼Œé‡‡ç”¨ç©ºé—²å—å­˜æ”¾ç©ºé—²è¡¨ï¼Œè¿™æ ·ä¸ä¼šå½±å“å­˜å‚¨å™¨ï¼‰ ä½å›¾è®°å½•ï¼šåœ¨ä½å›¾ä¸­ï¼Œç©ºé—²å—ç”¨ 1 è¡¨ç¤ºï¼Œå·²åˆ†é…å—ç”¨ 0 è¡¨ç¤ºã€‚ æ–‡ä»¶å¤‡ä»½åšç£ç›˜å¤‡ä»½ä¸»è¦æ˜¯å¤„ç†å¥½ä¸¤ä¸ªæ½œåœ¨é—®é¢˜ä¸­çš„â¼€ä¸ªï¼š ä»æ„å¤–çš„ç¾éš¾ä¸­æ¢å¤ ä»é”™è¯¯çš„æ“ä½œä¸­æ¢å¤ å°†æ–‡ä»¶ä»ç£ç›˜è½¬å‚¨åˆ°ç£å¸¦ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼Œç‰©ç†è½¬å‚¨å’Œé€»è¾‘è½¬å‚¨ã€‚ æ–‡ä»¶ç³»ç»Ÿçš„ä¸€è‡´æ€§æ–‡ä»¶è¿›è¡Œä¿®æ”¹åï¼Œéœ€å°†æ‰€æœ‰çš„ä¿®æ”¹éƒ½å†™å›ç£ç›˜ï¼Œå¦‚æœåœ¨æ‰€æœ‰çš„ç£ç›˜å—éƒ½å†™å›ç£ç›˜å‰ï¼Œç³»ç»Ÿå´©æºƒï¼Œä¸€äº›è¢«ä¿®æ”¹çš„ä¿¡æ¯å¯èƒ½æœªè¢«å†™å›ç£ç›˜ï¼Œé‚£ä¹ˆæ–‡ä»¶ç³»ç»Ÿå°†ä¸ä¸€è‡´ã€‚ å› æ­¤ï¼Œæ–‡ä»¶ç³»ç»Ÿä¸€èˆ¬éƒ½æœ‰ç‹¬ç«‹çš„ç¨‹åºå¯æ£€æŸ¥å…¶ä¸€è‡´æ€§ã€‚ è‡´æ€§æ£€æŸ¥åˆ†ä¸ºä¸¤ç§å—çš„ä¸€è‡´æ€§æ£€æŸ¥å’Œæ–‡ä»¶çš„ä¸€è‡´æ€§æ£€æŸ¥ æ–‡ä»¶ç³»ç»Ÿçš„æ€§èƒ½ç£ç›˜è®¿é—®çš„é€Ÿåº¦æ¯”å†…å­˜è®¿é—®çš„é€Ÿåº¦æ…¢å¾—å¤šï¼Œå¦‚æœæ¯æ¬¡è¯»æ–‡ä»¶æ—¶ï¼Œéƒ½ä»ç£ç›˜å—ä¸­è¯»å–ï¼Œé‚£ä¹ˆ IO æ—¶é—´å°†æ˜¯å¤§å¤§æ‹–ç´¯ç¨‹åºæ•ˆç‡ã€‚ ä¸»è¦é€šè¿‡ä»¥ä¸‹æ–¹æ³•æé«˜æ€§èƒ½ï¼š é«˜é€Ÿç¼“å­˜ï¼šå‡å°‘ç£ç›˜è®¿é—®æ¬¡æ•°æŠ€æœ¯æ˜¯å—é«˜é€Ÿç¼“å­˜ï¼ˆblock cacheï¼‰æˆ–è€…ç¼“å†²åŒºé«˜é€Ÿç¼“å­˜ï¼ˆbuffer cacheï¼‰ å—é¢„è¯»ï¼šåœ¨éœ€è¦ç”¨åˆ°å—ä¹‹å‰ï¼Œè¯•å›¾æå‰å°†å…¶å†™å…¥é«˜é€Ÿç¼“å­˜ï¼Œä»è€Œæé«˜å‘½ä¸­ç‡ã€‚ å‡å°‘ç£ç›˜è‡‚è¿åŠ¨ï¼šæŠŠå¯èƒ½é¡ºåºè®¿é—®çš„å—æ”¾â¼€èµ·ï¼Œå½“ç„¶æœ€å¥½æ˜¯åŒâ¼€æŸ±é¢ä¸Šï¼Œä»è€Œå‡å°‘ç£ç›˜è‡‚çš„ç§»åŠ¨æ¬¡æ•°ã€‚ ç£ç›˜ç¢ç‰‡æ•´ç†ï¼šç§»åŠ¨æ–‡ä»¶ä½¿å®ƒä»¬ç›¸é‚»ï¼Œå¹¶æŠŠæ‰€æœ‰çš„ç©ºé—²ç©ºé—´æ”¾åœ¨â¼€ä¸ªæˆ–å¤šä¸ªå¤§çš„è¿ç»­åŒºåŸŸå†…ã€‚","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Operating System","slug":"Computer-Basics/Operating-System","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Operating-System/"}],"tags":[{"name":"File","slug":"File","permalink":"http://blog.sukiu.top/tags/File/"}]},{"title":"è®¾å¤‡ç®¡ç†","slug":"Device-Management","date":"2022-01-21T06:27:00.000Z","updated":"2022-01-21T06:27:00.000Z","comments":true,"path":"Computer-Basics/Operating-System/Device-Management/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Operating-System/Device-Management/","excerpt":"ç£ç›˜æ˜¯è®¡ç®—æœºä¸»è¦çš„å­˜å‚¨ä»‹è´¨ï¼Œå¯ä»¥å­˜å‚¨å¤§é‡çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œå¹¶ä¸”æ–­ç”µåä¹Ÿèƒ½ä¿æŒæ•°æ®ä¸ä¸¢å¤±ã€‚ æ—©æœŸè®¡ç®—æœºä½¿ç”¨çš„ç£ç›˜æ˜¯è½¯ç£ç›˜ï¼ˆFloppy Diskï¼Œç®€ç§°è½¯ç›˜ï¼‰ï¼Œå¦‚ä»Šå¸¸ç”¨çš„ç£ç›˜æ˜¯ç¡¬ç£ç›˜ï¼ˆHard diskï¼Œç®€ç§°ç¡¬ç›˜ï¼‰ã€‚ ç”µè„‘å¤–è®¾å°±æ˜¯é™¤ä¸»æœºå¤–çš„å¤§éƒ¨åˆ†ç¡¬ä»¶è®¾å¤‡éƒ½å¯ç§°ä½œå¤–éƒ¨è®¾å¤‡ï¼Œæˆ–å«å¤–å›´è®¾å¤‡ï¼Œç®€ç§°å¤–è®¾ã€‚è®¡ç®—æœºç³»ç»Ÿæ²¡æœ‰è¾“å…¥è¾“å‡ºè®¾å¤‡ï¼Œå°±å¦‚è®¡ç®—æœºç³»ç»Ÿæ²¡æœ‰è½¯ä»¶ä¸€æ ·ï¼Œæ˜¯æ¯«æ— æ„ä¹‰çš„ã€‚","text":"ç£ç›˜æ˜¯è®¡ç®—æœºä¸»è¦çš„å­˜å‚¨ä»‹è´¨ï¼Œå¯ä»¥å­˜å‚¨å¤§é‡çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œå¹¶ä¸”æ–­ç”µåä¹Ÿèƒ½ä¿æŒæ•°æ®ä¸ä¸¢å¤±ã€‚ æ—©æœŸè®¡ç®—æœºä½¿ç”¨çš„ç£ç›˜æ˜¯è½¯ç£ç›˜ï¼ˆFloppy Diskï¼Œç®€ç§°è½¯ç›˜ï¼‰ï¼Œå¦‚ä»Šå¸¸ç”¨çš„ç£ç›˜æ˜¯ç¡¬ç£ç›˜ï¼ˆHard diskï¼Œç®€ç§°ç¡¬ç›˜ï¼‰ã€‚ ç”µè„‘å¤–è®¾å°±æ˜¯é™¤ä¸»æœºå¤–çš„å¤§éƒ¨åˆ†ç¡¬ä»¶è®¾å¤‡éƒ½å¯ç§°ä½œå¤–éƒ¨è®¾å¤‡ï¼Œæˆ–å«å¤–å›´è®¾å¤‡ï¼Œç®€ç§°å¤–è®¾ã€‚è®¡ç®—æœºç³»ç»Ÿæ²¡æœ‰è¾“å…¥è¾“å‡ºè®¾å¤‡ï¼Œå°±å¦‚è®¡ç®—æœºç³»ç»Ÿæ²¡æœ‰è½¯ä»¶ä¸€æ ·ï¼Œæ˜¯æ¯«æ— æ„ä¹‰çš„ã€‚ ç£ç›˜ç»“æ„ ç›˜é¢ï¼ˆPlatterï¼‰ï¼šä¸€ä¸ªç£ç›˜æœ‰å¤šä¸ªç›˜é¢ï¼› ç£é“ï¼ˆTrackï¼‰ï¼šç›˜é¢ä¸Šçš„åœ†å½¢å¸¦çŠ¶åŒºåŸŸï¼Œä¸€ä¸ªç›˜é¢å¯ä»¥æœ‰å¤šä¸ªç£é“ï¼› æ‰‡åŒºï¼ˆTrack Sectorï¼‰ï¼šç£é“ä¸Šçš„ä¸€ä¸ªå¼§æ®µï¼Œä¸€ä¸ªç£é“å¯ä»¥æœ‰å¤šä¸ªæ‰‡åŒºï¼Œå®ƒæ˜¯æœ€å°çš„ç‰©ç†å‚¨å­˜å•ä½ï¼Œç›®å‰ä¸»è¦æœ‰ 512 bytes ä¸ 4 K ä¸¤ç§å¤§å°ï¼› ç£å¤´ï¼ˆHeadï¼‰ï¼šä¸ç›˜é¢éå¸¸æ¥è¿‘ï¼Œèƒ½å¤Ÿå°†ç›˜é¢ä¸Šçš„ç£åœºè½¬æ¢ä¸ºç”µä¿¡å·ï¼ˆè¯»ï¼‰ï¼Œæˆ–è€…å°†ç”µä¿¡å·è½¬æ¢ä¸ºç›˜é¢çš„ç£åœºï¼ˆå†™ï¼‰ï¼› åˆ¶åŠ¨æ‰‹è‡‚ï¼ˆActuator armï¼‰ï¼šç”¨äºåœ¨ç£é“ä¹‹é—´ç§»åŠ¨ç£å¤´ï¼› ä¸»è½´ï¼ˆSpindleï¼‰ï¼šä½¿æ•´ä¸ªç›˜é¢è½¬åŠ¨ã€‚ ç£ç›˜è°ƒåº¦ç®—æ³•è¯»å†™ä¸€ä¸ªç£ç›˜å—çš„æ—¶é—´çš„å½±å“å› ç´ æœ‰ï¼š æ—‹è½¬æ—¶é—´ï¼ˆä¸»è½´è½¬åŠ¨ç›˜é¢ï¼Œä½¿å¾—ç£å¤´ç§»åŠ¨åˆ°é€‚å½“çš„æ‰‡åŒºä¸Šï¼‰ å¯»é“æ—¶é—´ï¼ˆåˆ¶åŠ¨æ‰‹è‡‚ç§»åŠ¨ï¼Œä½¿å¾—ç£å¤´ç§»åŠ¨åˆ°é€‚å½“çš„ç£é“ä¸Šï¼‰ å®é™…çš„æ•°æ®ä¼ è¾“æ—¶é—´ å…¶ä¸­ï¼Œå¯»é“æ—¶é—´æœ€é•¿ï¼Œå› æ­¤ç£ç›˜è°ƒåº¦çš„ä¸»è¦ç›®æ ‡æ˜¯ä½¿ç£ç›˜çš„å¹³å‡å¯»é“æ—¶é—´æœ€çŸ­ã€‚ å…ˆæ¥å…ˆæœåŠ¡ FCFS, First Come First Served æŒ‰ç…§ç£ç›˜è¯·æ±‚çš„é¡ºåºè¿›è¡Œè°ƒåº¦ã€‚ ä¼˜ç‚¹æ˜¯å…¬å¹³å’Œç®€å•ã€‚ ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå› ä¸ºæœªå¯¹å¯»é“åšä»»ä½•ä¼˜åŒ–ï¼Œä½¿å¹³å‡å¯»é“æ—¶é—´å¯èƒ½è¾ƒé•¿ã€‚ æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆ SSTF, Shortest Seek Time First ä¼˜å…ˆè°ƒåº¦ä¸å½“å‰ç£å¤´æ‰€åœ¨ç£é“è·ç¦»æœ€è¿‘çš„ç£é“ã€‚ è™½ç„¶å¹³å‡å¯»é“æ—¶é—´æ¯”è¾ƒä½ï¼Œä½†æ˜¯ä¸å¤Ÿå…¬å¹³ã€‚ å¦‚æœæ–°åˆ°è¾¾çš„ç£é“è¯·æ±‚æ€»æ˜¯æ¯”ä¸€ä¸ªåœ¨ç­‰å¾…çš„ç£é“è¯·æ±‚è¿‘ï¼Œé‚£ä¹ˆåœ¨ç­‰å¾…çš„ç£é“è¯·æ±‚ä¼šä¸€ç›´ç­‰å¾…ä¸‹å»ï¼Œä¹Ÿå°±æ˜¯å‡ºç°é¥¥é¥¿ç°è±¡ã€‚ å…·ä½“æ¥è¯´ï¼Œä¸¤ç«¯çš„ç£é“è¯·æ±‚æ›´å®¹æ˜“å‡ºç°é¥¥é¥¿ç°è±¡ã€‚ ç”µæ¢¯ç®—æ³• SCAN ç”µæ¢¯æ€»æ˜¯ä¿æŒä¸€ä¸ªæ–¹å‘è¿è¡Œï¼Œç›´åˆ°è¯¥æ–¹å‘æ²¡æœ‰è¯·æ±‚ä¸ºæ­¢ï¼Œç„¶åæ”¹å˜è¿è¡Œæ–¹å‘ã€‚ ç”µæ¢¯ç®—æ³•ï¼ˆæ‰«æç®—æ³•ï¼‰å’Œç”µæ¢¯çš„è¿è¡Œè¿‡ç¨‹ç±»ä¼¼ï¼Œæ€»æ˜¯æŒ‰ä¸€ä¸ªæ–¹å‘æ¥è¿›è¡Œç£ç›˜è°ƒåº¦ï¼Œç›´åˆ°è¯¥æ–¹å‘ä¸Šæ²¡æœ‰æœªå®Œæˆçš„ç£ç›˜è¯·æ±‚ï¼Œç„¶åæ”¹å˜æ–¹å‘ã€‚ å› ä¸ºè€ƒè™‘äº†ç§»åŠ¨æ–¹å‘ï¼Œå› æ­¤æ‰€æœ‰çš„ç£ç›˜è¯·æ±‚éƒ½ä¼šè¢«æ»¡è¶³ï¼Œè§£å†³äº† SSTF çš„é¥¥é¥¿é—®é¢˜ã€‚ å¤–è®¾å¦‚ä½•è®©å¤–è®¾åŠ¨èµ·æ¥ CPU å‘å¤–è®¾çš„æ§åˆ¶å™¨å‘é€æŒ‡ä»¤ï¼Œå³ out æŒ‡ä»¤ å½¢æˆ â½‚ä»¶è§†å›¾ï¼ˆä¸ºäº†ç»Ÿâ¼€ out æŒ‡ä»¤çš„å½¢å¼ï¼‰ ä¸­æ–­ï¼ˆå¤–è®¾å¤„ç†å®Œäº‹åï¼Œéœ€è¦é€šçŸ¥ cpu ç»§ç»­æ¥æ‰‹ä¸‹â¼€æ­¥å¤„ç†ï¼‰ æ˜¾ç¤ºå™¨å¦‚ä½•å·¥ä½œ Printf å‡½æ•°çš„å·¥ä½œæµç¨‹ é”®ç›˜å¦‚ä½•å·¥ä½œ ä¸­æ–­å¤„ç†ï¼ˆæ ¹æ®æ‰«æç è·å– å¯¹åº”çš„ ascii ç ï¼‰ å°†å¯¹åº”çš„ ascii ç åŠ å…¥ç¼“å†²é˜Ÿåˆ— read_que ä¸­ï¼Œç­‰å¾…ä¸Šå±‚ç¨‹åºè°ƒç”¨","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Operating System","slug":"Computer-Basics/Operating-System","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Operating-System/"}],"tags":[{"name":"Device","slug":"Device","permalink":"http://blog.sukiu.top/tags/Device/"}]},{"title":"å†…å­˜ç®¡ç†","slug":"Memory-Management","date":"2022-01-21T05:20:00.000Z","updated":"2022-01-21T05:20:00.000Z","comments":true,"path":"Computer-Basics/Operating-System/Memory-Management/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Operating-System/Memory-Management/","excerpt":"å†…å­˜ç®¡ç†æ˜¯æŒ‡è½¯ä»¶è¿è¡Œæ—¶å¯¹è®¡ç®—æœºå†…å­˜èµ„æºçš„åˆ†é…å’Œä½¿ç”¨çš„æŠ€æœ¯ã€‚å…¶æœ€ä¸»è¦çš„ç›®çš„æ˜¯å¦‚ä½•é«˜æ•ˆï¼Œå¿«é€Ÿçš„åˆ†é…ï¼Œå¹¶ä¸”åœ¨é€‚å½“çš„æ—¶å€™é‡Šæ”¾å’Œå›æ”¶å†…å­˜èµ„æºã€‚ è™šæ‹Ÿå†…å­˜æ˜¯å†…å­˜ç®¡ç†æŠ€æœ¯çš„ä¸€ä¸ªæå…¶å®ç”¨çš„åˆ›æ–°ã€‚","text":"å†…å­˜ç®¡ç†æ˜¯æŒ‡è½¯ä»¶è¿è¡Œæ—¶å¯¹è®¡ç®—æœºå†…å­˜èµ„æºçš„åˆ†é…å’Œä½¿ç”¨çš„æŠ€æœ¯ã€‚å…¶æœ€ä¸»è¦çš„ç›®çš„æ˜¯å¦‚ä½•é«˜æ•ˆï¼Œå¿«é€Ÿçš„åˆ†é…ï¼Œå¹¶ä¸”åœ¨é€‚å½“çš„æ—¶å€™é‡Šæ”¾å’Œå›æ”¶å†…å­˜èµ„æºã€‚ è™šæ‹Ÿå†…å­˜æ˜¯å†…å­˜ç®¡ç†æŠ€æœ¯çš„ä¸€ä¸ªæå…¶å®ç”¨çš„åˆ›æ–°ã€‚ é¡µé¢ç½®æ¢ç®—æ³•åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœè¦è®¿é—®çš„é¡µé¢ä¸åœ¨å†…å­˜ä¸­ï¼Œå°±å‘ç”Ÿç¼ºé¡µä¸­æ–­ä»è€Œå°†è¯¥é¡µè°ƒå…¥å†…å­˜ä¸­ã€‚æ­¤æ—¶å¦‚æœå†…å­˜å·²æ— ç©ºé—²ç©ºé—´ï¼Œç³»ç»Ÿå¿…é¡»ä»å†…å­˜ä¸­è°ƒå‡ºä¸€ä¸ªé¡µé¢åˆ°ç£ç›˜å¯¹æ¢åŒºä¸­æ¥è…¾å‡ºç©ºé—´ã€‚ é¡µé¢ç½®æ¢ç®—æ³•å’Œç¼“å­˜æ·˜æ±°ç­–ç•¥ç±»ä¼¼ï¼Œå¯ä»¥å°†å†…å­˜çœ‹æˆç£ç›˜çš„ç¼“å­˜ã€‚åœ¨ç¼“å­˜ç³»ç»Ÿä¸­ï¼Œç¼“å­˜çš„å¤§å°æœ‰é™ï¼Œå½“æœ‰æ–°çš„ç¼“å­˜åˆ°è¾¾æ—¶ï¼Œéœ€è¦æ·˜æ±°ä¸€éƒ¨åˆ†å·²ç»å­˜åœ¨çš„ç¼“å­˜ï¼Œè¿™æ ·æ‰æœ‰ç©ºé—´å­˜æ”¾æ–°çš„ç¼“å­˜æ•°æ®ã€‚ é¡µé¢ç½®æ¢ç®—æ³•çš„ä¸»è¦ç›®æ ‡æ˜¯ä½¿é¡µé¢ç½®æ¢é¢‘ç‡æœ€ä½ï¼ˆä¹Ÿå¯ä»¥è¯´ç¼ºé¡µç‡æœ€ä½ï¼‰ã€‚ æœ€ä½³ç½®æ¢ OPT OPT, Optimal replacement algorithm æ‰€é€‰æ‹©çš„è¢«æ¢å‡ºçš„é¡µé¢å°†æ˜¯æœ€é•¿æ—¶é—´å†…ä¸å†è¢«è®¿é—®ï¼Œé€šå¸¸å¯ä»¥ä¿è¯è·å¾—æœ€ä½çš„ç¼ºé¡µç‡ã€‚ æ˜¯ä¸€ç§ç†è®ºä¸Šçš„ç®—æ³•ï¼Œå› ä¸ºæ— æ³•çŸ¥é“ä¸€ä¸ªé¡µé¢å¤šé•¿æ—¶é—´ä¸å†è¢«è®¿é—®ã€‚ ä¸‰ä¸ªç‰©ç†å—ï¼š 7ï¼Œ0ï¼Œ1ï¼Œ2ï¼Œ0ï¼Œ3ï¼Œ0ï¼Œ4ï¼Œ2ï¼Œ3ï¼Œ0ï¼Œ3ï¼Œ2ï¼Œ1ï¼Œ2ï¼Œ0ï¼Œ1ï¼Œ7ï¼Œ0ï¼Œ1 å¼€å§‹è¿è¡Œæ—¶ï¼Œå…ˆå°† 7, 0, 1 ä¸‰ä¸ªé¡µé¢è£…å…¥å†…å­˜ã€‚ å½“è¿›ç¨‹è¦è®¿é—®é¡µé¢ 2 æ—¶ï¼Œäº§ç”Ÿç¼ºé¡µä¸­æ–­ï¼Œä¼šå°†é¡µé¢ 7 æ¢å‡ºï¼Œå› ä¸ºé¡µé¢ 7 å†æ¬¡è¢«è®¿é—®çš„æ—¶é—´æœ€é•¿ã€‚ å…ˆè¿›å…ˆå‡º FIFO FIFO, First In First Out é€‰æ‹©æ¢å‡ºçš„é¡µé¢æ˜¯æœ€å…ˆè¿›å…¥çš„é¡µé¢ã€‚ è¯¥ç®—æ³•ä¼šå°†é‚£äº›ç»å¸¸è¢«è®¿é—®çš„é¡µé¢æ¢å‡ºï¼Œå¯¼è‡´ç¼ºé¡µç‡å‡é«˜ã€‚ æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ LRU LRU, Least Recently Used LRU å°†æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„é¡µé¢æ¢å‡ºã€‚ ä¸ºäº†å®ç° LRUï¼Œéœ€è¦åœ¨å†…å­˜ä¸­ç»´æŠ¤ä¸€ä¸ªæ‰€æœ‰é¡µé¢çš„é“¾è¡¨ã€‚å½“ä¸€ä¸ªé¡µé¢è¢«è®¿é—®æ—¶ï¼Œå°†è¿™ä¸ªé¡µé¢ç§»åˆ°é“¾è¡¨è¡¨å¤´ã€‚è¿™æ ·å°±èƒ½ä¿è¯é“¾è¡¨è¡¨å°¾çš„é¡µé¢æ˜¯æœ€è¿‘æœ€ä¹…æœªè®¿é—®çš„ã€‚ å› ä¸ºæ¯æ¬¡è®¿é—®éƒ½éœ€è¦æ›´æ–°é“¾è¡¨ï¼Œå› æ­¤è¿™ç§æ–¹å¼å®ç°çš„ LRU ä»£ä»·å¾ˆé«˜ã€‚ 4ï¼Œ7ï¼Œ0ï¼Œ7ï¼Œ1ï¼Œ0ï¼Œ1ï¼Œ2ï¼Œ1ï¼Œ2ï¼Œ6 æœ€è¿‘æœªä½¿ç”¨ NRU NRU, Not Recently Used æ¯ä¸ªé¡µé¢éƒ½æœ‰ä¸¤ä¸ªçŠ¶æ€ä½ï¼šR ä¸ Mï¼Œå½“é¡µé¢è¢«è®¿é—®æ—¶è®¾ç½®é¡µé¢çš„ R&#x3D;1ï¼Œå½“é¡µé¢è¢«ä¿®æ”¹æ—¶è®¾ç½® M&#x3D;1ã€‚å…¶ä¸­ R ä½ä¼šå®šæ—¶è¢«æ¸…é›¶ã€‚ å¯ä»¥å°†é¡µé¢åˆ†æˆä»¥ä¸‹å››ç±»ï¼š R&#x3D;0ï¼ŒM&#x3D;0 R&#x3D;0ï¼ŒM&#x3D;1 R&#x3D;1ï¼ŒM&#x3D;0 R&#x3D;1ï¼ŒM&#x3D;1 å½“å‘ç”Ÿç¼ºé¡µä¸­æ–­æ—¶ï¼ŒNRU ç®—æ³•éšæœºåœ°ä»ç±»ç¼–å·æœ€å°çš„éç©ºç±»ä¸­æŒ‘é€‰ä¸€ä¸ªé¡µé¢å°†å®ƒæ¢å‡ºã€‚ NRU ä¼˜å…ˆæ¢å‡ºå·²ç»è¢«ä¿®æ”¹çš„è„é¡µé¢ï¼ˆR&#x3D;0ï¼ŒM&#x3D;1ï¼‰ï¼Œè€Œä¸æ˜¯è¢«é¢‘ç¹ä½¿ç”¨çš„å¹²å‡€é¡µé¢ï¼ˆR&#x3D;1ï¼ŒM&#x3D;0ï¼‰ã€‚ ç¬¬äºŒæ¬¡æœºä¼šFIFO ç®—æ³•å¯èƒ½ä¼šæŠŠç»å¸¸ä½¿ç”¨çš„é¡µé¢ç½®æ¢å‡ºå»ï¼Œä¸ºäº†é¿å…è¿™ä¸€é—®é¢˜ï¼Œå¯¹è¯¥ç®—æ³•åšä¸€ä¸ªç®€å•çš„ä¿®æ”¹ï¼š å½“é¡µé¢è¢«è®¿é—® (è¯»æˆ–å†™) æ—¶è®¾ç½®è¯¥é¡µé¢çš„ R ä½ä¸º 1ã€‚ éœ€è¦æ›¿æ¢çš„æ—¶å€™ï¼Œæ£€æŸ¥æœ€è€é¡µé¢çš„ R ä½ï¼š å¦‚æœ R ä½æ˜¯ 0ï¼Œé‚£ä¹ˆè¿™ä¸ªé¡µé¢æ—¢è€åˆæ²¡æœ‰è¢«ä½¿ç”¨ï¼Œå¯ä»¥ç«‹åˆ»ç½®æ¢æ‰ å¦‚æœæ˜¯ 1ï¼Œå°±å°† R ä½æ¸… 0ï¼Œå¹¶æŠŠè¯¥é¡µé¢æ”¾åˆ°é“¾è¡¨çš„å°¾ç«¯ï¼Œä¿®æ”¹å®ƒçš„è£…å…¥æ—¶é—´ä½¿å®ƒå°±åƒåˆšè£…å…¥çš„ä¸€æ ·ï¼Œç„¶åç»§ç»­ä»é“¾è¡¨çš„å¤´éƒ¨å¼€å§‹æœç´¢ã€‚ æ—¶é’Ÿ Clockç¬¬äºŒæ¬¡æœºä¼šç®—æ³•éœ€è¦åœ¨é“¾è¡¨ä¸­ç§»åŠ¨é¡µé¢ï¼Œé™ä½äº†æ•ˆç‡ã€‚ æ—¶é’Ÿç®—æ³•ä½¿ç”¨ç¯å½¢é“¾è¡¨å°†é¡µé¢è¿æ¥èµ·æ¥ï¼Œå†ä½¿ç”¨ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘æœ€è€çš„é¡µé¢ã€‚ åˆ†æ®µè™šæ‹Ÿå†…å­˜é‡‡ç”¨çš„æ˜¯åˆ†é¡µæŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯å°†åœ°å€ç©ºé—´åˆ’åˆ†æˆå›ºå®šå¤§å°çš„é¡µï¼Œæ¯ä¸€é¡µå†ä¸å†…å­˜è¿›è¡Œæ˜ å°„ã€‚ å¦‚æœä½¿ç”¨åˆ†é¡µç³»ç»Ÿçš„â¼€ç»´åœ°å€ç©ºé—´ï¼ŒåŠ¨æ€å¢é•¿çš„ç‰¹ç‚¹ä¼šå¯¼è‡´è¦†ç›–é—®é¢˜çš„å‡ºç°ã€‚ åˆ†æ®µçš„åšæ³•æ˜¯æŠŠæ¯ä¸ªè¡¨åˆ†æˆæ®µï¼Œâ¼€ä¸ªæ®µæ„æˆâ¼€ä¸ªç‹¬ç«‹çš„åœ°å€ç©ºé—´ã€‚æ¯ä¸ªæ®µçš„é•¿åº¦å¯ä»¥ä¸åŒï¼Œå¹¶ä¸”å¯ä»¥åŠ¨æ€å¢é•¿ã€‚ çº¯åˆ†æ®µåˆ†æ®µå’Œåˆ†é¡µæœ¬è´¨ä¸Šæ˜¯ä¸åŒçš„ï¼Œé¡µé¢æ˜¯å®šé•¿çš„è€Œæ®µä¸æ˜¯ã€‚ ä¼˜ç‚¹ï¼š å…±äº«ï¼šæœ‰åŠ©äºå‡ ä¸ªè¿›ç¨‹ä¹‹é—´å…±äº«è¿‡ç¨‹å’Œæ•°æ®ã€‚ æ¯”å¦‚å…±äº«åº“ ä¿æŠ¤ï¼šæ¯ä¸ªæ®µéƒ½å¯ä»¥ç‹¬ç«‹åœ°å¢å¤§æˆ–å‡å°è€Œä¸ä¼šå½±å“å…¶ä»–çš„æ®µ æ®µé¡µå¼ç¨‹åºçš„åœ°å€ç©ºé—´åˆ’åˆ†æˆå¤šä¸ªæ‹¥æœ‰ç‹¬ç«‹åœ°å€ç©ºé—´çš„æ®µï¼Œæ¯ä¸ªæ®µä¸Šçš„åœ°å€ç©ºé—´åˆ’åˆ†æˆå¤§å°ç›¸åŒçš„é¡µã€‚ è¿™æ ·æ—¢æ‹¥æœ‰åˆ†æ®µç³»ç»Ÿçš„å…±äº«å’Œä¿æŠ¤ï¼Œåˆæ‹¥æœ‰åˆ†é¡µç³»ç»Ÿçš„è™šæ‹Ÿå†…å­˜åŠŸèƒ½ã€‚ åˆ†æ®µä¸åˆ†é¡µçš„æ¯”è¾ƒ å¯¹ç¨‹åºå‘˜çš„é€æ˜æ€§ï¼šåˆ†é¡µé€æ˜ï¼Œä½†æ˜¯åˆ†æ®µéœ€è¦ç¨‹åºå‘˜æ˜¾å¼åˆ’åˆ†æ¯ä¸ªæ®µã€‚ åœ°å€ç©ºé—´çš„ç»´åº¦ï¼šåˆ†é¡µæ˜¯ä¸€ç»´åœ°å€ç©ºé—´ï¼Œåˆ†æ®µæ˜¯äºŒç»´çš„ã€‚ å¤§å°æ˜¯å¦å¯ä»¥æ”¹å˜ï¼šé¡µçš„å¤§å°ä¸å¯å˜ï¼Œæ®µçš„å¤§å°å¯ä»¥åŠ¨æ€æ”¹å˜ã€‚ å‡ºç°çš„åŸå› ï¼š åˆ†é¡µä¸»è¦ç”¨äºå®ç°è™šæ‹Ÿå†…å­˜ï¼Œä»è€Œè·å¾—æ›´å¤§çš„åœ°å€ç©ºé—´ï¼› åˆ†æ®µä¸»è¦æ˜¯ä¸ºäº†ä½¿ç¨‹åºå’Œæ•°æ®å¯ä»¥è¢«åˆ’åˆ†ä¸ºé€»è¾‘ä¸Šç‹¬ç«‹çš„åœ°å€ç©ºé—´å¹¶ä¸”æœ‰åŠ©äºå…±äº«å’Œä¿æŠ¤ã€‚ è™šæ‹Ÿå†…å­˜è™šæ‹Ÿå†…å­˜çš„ç›®çš„æ˜¯ä¸ºäº†è®©ç‰©ç†å†…å­˜æ‰©å……æˆæ›´å¤§çš„é€»è¾‘å†…å­˜ï¼Œä»è€Œè®©ç¨‹åºè·å¾—æ›´å¤šçš„å¯ç”¨å†…å­˜ã€‚ å±äºè®¡ç®—æœºç³»ç»Ÿå†…å­˜ç®¡ç†çš„â¼€ç§æŠ€æœ¯ï¼Œè™šæ‹Ÿåœ°å€ç©ºé—´æ„æˆè™šæ‹Ÿå†…å­˜ï¼Œå®ƒä½¿å¾—åº”ç”¨ç¨‹åºè®¤ä¸ºè‡ªå·±æ‹¥æœ‰è¿ç»­çš„å¯ç”¨å†…å­˜ç©ºé—´ï¼Œä½†å®é™…ä¸Šæ˜¯è¢«åˆ†éš”çš„å¤šä¸ªç‰©ç†å†…å­˜é¡µã€ä»¥åŠéƒ¨åˆ†æš‚æ—¶å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„äº¤æ¢åˆ†åŒºæ‰€æ„æˆçš„ã€‚ è™šæ‹Ÿå†…å­˜çš„å®ç°é€šè¿‡ç¡¬ä»¶å¼‚å¸¸ã€ç¡¬ä»¶åœ°å€ç¿»è¯‘ã€ä¸»å­˜ã€ç£ç›˜ä»¥åŠå†…æ ¸è½¯ä»¶å…±åŒå®Œæˆã€‚ åœ°å€ç©ºé—´ï¼šæ˜¯ç‰©ç†å†…å­˜çš„æŠ½è±¡ï¼Œæ˜¯â¼€ä¸ªè¿›ç¨‹å¯ç”¨äºå¯»å€å†…å­˜çš„â¼€å¥—åœ°å€é›†åˆ åˆ†é¡µï¼šåœ°å€ç©ºé—´è¢«åˆ†å‰²æˆå¤šä¸ªå—ï¼Œæ¯â¼€å—ç§°ä½œâ¼€é¡µæˆ–é¡µé¢ (Page)ã€‚æ¯â¼€é¡µæœ‰è¿ç»­çš„åœ°å€èŒƒå›´ï¼Œè¿™äº›é¡µè¢«æ˜ å°„åˆ°è¿ç»­çš„ç‰©ç†å†…å­˜ (é¡µæ¡†)ã€‚ é¡µè¡¨ï¼šæŠŠè™šæ‹Ÿé¡µé¢ (è™šæ‹Ÿåœ°å€) æ˜ å°„ä¸ºé¡µæ¡† (ç‰©ç†åœ°å€)ã€‚é¡µè¡¨ç»™å‡ºäº†è™šæ‹Ÿåœ°å€ä¸ç‰©ç†åœ°å€çš„æ˜ å°„å…³ç³»ã€‚ä»æ•°å­¦çš„è§’åº¦è¯´é¡µè¡¨æ˜¯â¼€ä¸ªå‡½æ•°ï¼Œä»–çš„å‚æ•°æ˜¯è™šæ‹Ÿé¡µå·ï¼Œç»“æœæ˜¯ç‰©ç†é¡µé¡µæ¡†å· è™šæ‹Ÿå†…å­˜çš„æ€æƒ³ï¼Œæ•´ä½“æ¥çœ‹å°±æ˜¯ï¼š é€šè¿‡ç»“åˆç£ç›˜å’Œå†…å­˜å„è‡ªçš„ä¼˜åŠ¿ï¼Œåˆ©ç”¨ä¸­é—´å±‚å¯¹èµ„æºè¿›è¡Œæ›´åˆç†åœ°è°ƒåº¦ï¼Œå……åˆ†æé«˜èµ„æºçš„åˆ©ç”¨ç‡ã€‚å¹¶æä¾›å’Œè°ä»¥åŠç»Ÿâ¼€çš„æŠ½è±¡ã€‚ ä¼˜åŒ–åŠ é€Ÿå°†è™šæ‹Ÿåœ°å€ç›´æ¥æ˜ å°„åˆ°ç‰©ç†åœ°å€ï¼Œè€Œä¸å¿…å†è®¿é—®é¡µè¡¨ï¼Œè¿™ç§è®¾å¤‡è¢«ç§°ä¸ºè½¬æ¢æ£€æµ‹ç¼“å†²åŒºï¼ˆTLBï¼‰ã€ç›¸è”å­˜å‚¨å™¨æˆ–å¿«è¡¨ â¼¯ä½œè¿‡ç¨‹ï¼šå°†â¼€ä¸ªè™šæ‹Ÿåœ°å€æ”¾â¼ŠMMUï¼ˆå†…å­˜ç®¡ç†å•å…ƒï¼‰ä¸­è¿›è¡Œè½¬æ¢æ—¶ï¼Œç¡¬ä»¶é¦–å…ˆé€šè¿‡å°†è¯¥è™šæ‹Ÿé¡µå·ä¸ TLB ä¸­æ‰€æœ‰è¡¨é¡¹åŒæ—¶è¿›è¡ŒåŒ¹é…ï¼Œ åˆ¤æ–­è™šæ‹Ÿé¡µé¢æ˜¯å¦åœ¨å…¶ä¸­ï¼š è™šæ‹Ÿé¡µå·åœ¨ TLB ä¸­ã€‚å¦‚æœ MMU æ£€æµ‹â¼€ä¸ªæœ‰æ•ˆçš„åŒ¹é…å¹¶ä¸”è®¿é—®æ“ä½œå¹¶ä¸è¿åä¿æŠ¤ä½ï¼Œåˆ™å°†é¡µæ¡†å·ç›´æ¥ä» TLB ä¸­å–å‡ºè€Œä¸å¿…è®¿é—®é¡µè¡¨ã€‚ è™šæ‹Ÿé¡µå·ä¸åœ¨ TLB ä¸­ã€‚å¦‚æœ MMU æ£€æµ‹åˆ°æ²¡æœ‰æœ‰æ•ˆçš„åŒ¹é…é¡¹å°±ä¼šè¿›è¡Œæ­£å¸¸çš„é¡µè¡¨æŸ¥è¯¢ã€‚æ¥ç€ä» TLB ä¸­æ·˜æ±°â¼€ä¸ªè¡¨é¡¹ï¼Œç„¶åç”¨æ–°çš„é¡µè¡¨é¡¹æ›¿æ¢å®ƒã€‚ åŠ å¤§ å¤šçº§é¡µè¡¨ å€’æ’é¡µè¡¨ é‡è¦èƒ½åŠ› é«˜é€Ÿç¼“å­˜ å†…å­˜ç®¡ç† å†…å­˜ä¿æŠ¤ï¼šå¦‚æœä¸å¯¹è¿›ç¨‹çš„å†…å­˜è®¿é—®è¿›è¡Œé™åˆ¶ï¼Œæ”»å‡»è€…å°±èƒ½å¤Ÿè®¿é—®å’Œä¿®æ”¹å…¶ä»–è¿›ç¨‹çš„ç§æœ‰å†…å­˜ï¼Œè¿›è€Œå¯¼è‡´æ•´ä¸ªç³»ç»Ÿå´©æºƒã€‚","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Operating System","slug":"Computer-Basics/Operating-System","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Operating-System/"}],"tags":[{"name":"Memory","slug":"Memory","permalink":"http://blog.sukiu.top/tags/Memory/"}]},{"title":"æ’åº","slug":"All-Sort","date":"2022-01-19T13:36:00.000Z","updated":"2022-01-19T13:36:00.000Z","comments":true,"path":"Computer-Basics/Algorithm/All-Sort/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Algorithm/All-Sort/","excerpt":"å¸¸è§çš„å†…éƒ¨æ’åºç®—æ³•æœ‰ï¼šæ’å…¥æ’åºã€å¸Œå°”æ’åºã€é€‰æ‹©æ’åºã€å†’æ³¡æ’åºã€å½’å¹¶æ’åºã€å¿«é€Ÿæ’åºã€å †æ’åºã€åŸºæ•°æ’åºç­‰ã€‚","text":"å¸¸è§çš„å†…éƒ¨æ’åºç®—æ³•æœ‰ï¼šæ’å…¥æ’åºã€å¸Œå°”æ’åºã€é€‰æ‹©æ’åºã€å†’æ³¡æ’åºã€å½’å¹¶æ’åºã€å¿«é€Ÿæ’åºã€å †æ’åºã€åŸºæ•°æ’åºç­‰ã€‚ ç¨³å®šæ€§æ˜¯æŒ‡æ’åºè¿‡ç¨‹ä¸­ï¼ŒåŸæ¥ç›¸åŒçš„å…ƒç´ ä¿æŒåŸæ¥çš„ç›¸å¯¹ä½ç½®æ¯”å¦‚ a[i] &#x3D; a[j] ï¼Œä¸” i&lt;j , æ’åºå i&lt;j ä¾ç„¶æˆç«‹ æ’å…¥æ’åº(1) ç›´æ¥æ’å…¥æ’åº æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)ï¼Œæœ€å¥½ O(n)ç©ºé—´å¤æ‚åº¦ï¼šO(1)ç¨³å®šæ€§ï¼šç¨³å®š æ€è·¯ï¼š å°†å¼€å¤´å…ƒç´ è§†ä½œå·²æ’åº æ‰§è¡Œä¸‹è¿°è¿‡ç¨‹ï¼Œç›´åˆ°æœªæ’åºè¿‡ç¨‹æ¶ˆå¤±ï¼š å–å‡ºæœªæ’åºéƒ¨åˆ†çš„å¼€å¤´å…ƒç´ èµ‹ç»™å˜é‡ v åœ¨å·²æ’åºéƒ¨åˆ†ï¼Œå°†æ‰€æœ‰æ¯” v å¤§çš„å…ƒç´ å‘åç§»åŠ¨ä¸€ä½ å°†å·²å–å‡ºçš„å…ƒç´  v æ’å…¥ç©ºä½ 12345678void InsertSort(int a[], int len) &#123; for (int i=1; i&lt;len; i++) &#123; int v=a[i]; for (int j=i-1; v&lt;a[j];j--) a[j+1]=a[j]; // åç§» a[j+1]=v; &#125;&#125; (2) å¸Œå°”æ’åº æ—¶é—´å¤æ‚åº¦ï¼šå¹³å‡ O(n^1.3)ï¼Œæœ€å O(n^2)ç©ºé—´å¤æ‚åº¦ï¼šO(1)ç¨³å®šæ€§ï¼šä¸ç¨³å®š ç¼©å°å¢é‡æ³• n ä¸ªè®°å½•ï¼Œå¢é‡ä¸º diï¼Œåˆ™åˆ†ç»„ ä¸‹æ ‡ 0, di, 2di, 3di, â€¦â€¦ ä¸º 1 ç»„ ä¸‹æ ‡ 1, di +1, 2di +1, 3di +1, â€¦â€¦ ä¸º 1 ç»„ ä¸‹æ ‡ 2, di +2, 2di +2, 3di +2, â€¦â€¦ ä¸º 1 ç»„ â€¦â€¦ â€¦â€¦ â€¦â€¦ â€¦â€¦ ä¸‹æ ‡ di-1, di+di -1, 2di+di -1, â€¦â€¦ ä¸º 1 ç»„ æ€è·¯ï¼š å¢é‡ä¸º d1 æ—¶ï¼Œåœ¨å„ç»„å†…ï¼Œè¿›è¡Œæ’åº å‡å°å¢é‡ï¼Œé‡æ–°åˆ†ç»„ï¼Œç»„å†…æ’åº å‡å°å¢é‡ï¼šåˆå§‹ï¼šd1 &#x3D; n&#x2F;2ï¼Œåˆ™æ¨¡å¼ï¼šdi+1 &#x3D; di &#x2F;2 é‡å¤ç¬¬ 2 æ­¥ï¼Œ ç›´åˆ° di&#x3D;&#x3D;1ï¼Œæ‰€æœ‰è®°å½•åœ¨åŒä¸€ç»„ï¼Œç»„å†…æ’åº æ’åºå‡ä¸ºç›´æ¥æ’å…¥æ’åº 12345678910111213141516171819202122232425262728// ? æŒ‰ç…§ ShellSort å®šä¹‰å†™å‡ºvoid shellSort1(int a[], int n) &#123; int i, j, k, gap; for (gap = n / 2; gap &gt; 0; gap /= 2) for (i = 0; i &lt; gap; i++) // åˆ†ç»„ for (int j = i + gap; j &lt; n; j += gap) // ç»„å†…æ’å…¥æ’åº if (a[j] &lt; a[j - gap]) &#123; // ç›´æ¥æ’å…¥æ’åº int v = a[j]; for (int k = j - gap; k &gt;= 0 &amp;&amp; a[k] &gt; v; k -= gap) a[k + gap] = a[k]; // åç§» a[k + gap] = v; &#125;&#125;// ? ä¼˜åŒ–// - ä¸Šè¿° i çš„ä½œç”¨æ˜¯ä¸ºäº†ç¡®è®¤ j çš„ä½ç½®ï¼Œå¹¶ä¸ç»„å†…å…ƒç´ æ¯”è¾ƒ// - æ˜æ˜¾æ¯æ¬¡ gap ä¸ j-gap å°±æ˜¯ç»„å†…æ¯”è¾ƒï¼Œä¸éœ€è¦å†åˆ†ç»„void shellSort(int a[], int n) &#123; int j, k, gap; for (gap = n / 2; gap &gt; 0; gap /= 2) for (j = gap; j &lt; n; j++) if (a[j] &lt; a[j - gap]) &#123; int v = a[j]; for (int k = j - gap; k &gt;= 0 &amp;&amp; a[k] &gt; v; k -= gap) a[k + gap] = a[k]; // åç§» a[k + gap] = v; &#125;&#125; äº¤æ¢æ’åº(3) å†’æ³¡æ’åº æ—¶é—´å¤æ‚åº¦ï¼šå¹³å‡ O(n^2)ï¼Œæœ€å O(n^2)ï¼Œæœ€å¥½ O(n)ç©ºé—´å¤æ‚åº¦ï¼šO(1)ç¨³å®šæ€§ï¼šç¨³å®š æ€è·¯ï¼š é‡å¤æ‰§è¡Œä¸‹è¿°å¤„ç†ï¼Œç›´åˆ°æ•°ç»„ä¸­ä¸åŒ…å«é¡ºåºç›¸åçš„ç›¸é‚»å…ƒç´ ï¼š 1ã€ä»æ•°ç»„å¼€å¤´å¼€å§‹ä¾æ¬¡æ¯”è¾ƒç›¸é‚»ä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœå¤§å°å…³ç³»ç›¸ååˆ™äº¤æ¢ä½ç½® 1234567891011void BubbleSort(int a[], int len)&#123; for (int i=0; i&lt;len; i++)&#123; for (int j=i+1; j&lt;len; j++)&#123; if (a[i]&gt;a[j])&#123; int temp=a[i]; a[i]=a[j]; a[j]=temp; &#125; &#125; &#125;&#125; (4) å¿«é€Ÿæ’åº æ—¶é—´å¤æ‚åº¦ï¼šå¹³å‡ O(nlogn)ï¼Œæœ€å O(n^2)ç©ºé—´å¤æ‚åº¦ï¼šå¹³å‡ O(logn)ï¼Œæœ€å O(n)ç¨³å®šæ€§ï¼šä¸ç¨³å®š æ€è·¯ï¼š ä»¥æ•´ä¸ªæ•°ç»„ä¸ºå¯¹è±¡æ‰§è¡Œ QuickSort QuickSort æµç¨‹å¦‚ä¸‹ï¼š 1ã€é€šè¿‡åˆ†å‰²å°†å¯¹è±¡å±€éƒ¨æ•°ç»„åˆ†å‰²ä¸ºå‰åä¸¤ä¸ªå±€éƒ¨æ•°ç»„ 2ã€å¯¹å‰åŠéƒ¨åˆ†çš„å±€éƒ¨æ•°ç»„æ‰§è¡Œ QuickSort 3ã€å¯¹ååŠéƒ¨åˆ†çš„å±€éƒ¨æ•°ç»„æ‰§è¡Œ QuickSort ç¬¬ 1 è¶Ÿå¿«æ’ï¼š ä»å¾…æ’åºç ä¸­ï¼Œé€‰å‡º 1 ä¸ª Kï¼ˆå¦‚ R0.key ï¼‰ å°†å°äº k çš„è®°å½•ç§»åŠ¨åˆ°å·¦è¾¹ï¼ˆå·¦å­è¡¨ï¼‰ï¼Œ å¤§äº k çš„è®°å½•ç§»åŠ¨åˆ°å³è¾¹ï¼ˆå³å­è¡¨ï¼‰ï¼Œ å°† k æ”¾åœ¨å·¦ã€å³ä¸¤ä¸ªå­è¡¨çš„åˆ†ç•Œå¤„ å·¦æ¸¸å†ä¸‹æ ‡ï¼ši&#x3D;0ï¼Œ å³æ¸¸å†ä¸‹æ ‡ï¼šj&#x3D;n-1, å–å‡ºåˆ†åŒºåŸºå‡†ï¼štemp&#x3D;R[0] åˆå§‹ç©ºä½ R[0]ï¼šåœ¨å·¦è¡¨ä¸­ï¼Œå³ R[i] é‡å¤ä»¥ä¸‹ä¸¤ç§æ‰«æï¼Œç›´åˆ° i&#x3D;&#x3D;j ï¼ˆç©ºä½ç½®åœ¨å·¦ï¼Œåˆ™ j æ‰«æï¼›ç©ºä½ç½®åœ¨å³ï¼Œåˆ™ i æ‰«æ) j å‘å·¦æ‰«æï¼Œç›´åˆ° R[j].key &lt; temp.keyï¼Œ å°† R[j] ç§»åŠ¨åˆ°ç©ºä½ R[i] ä¸­ï¼Œåˆ™ R[j] ä¸ºç©ºï¼Œä»¤ i++ i å‘å³æ‰«æï¼Œç›´åˆ° R[i].key &gt; temp.keyï¼Œ å°† R[i] ç§»åŠ¨åˆ°ç©ºä½ R[ j] ä¸­ï¼Œåˆ™ R[i] ä¸ºç©ºï¼Œä»¤ j - - å°†â€œåˆ†åŒºåŸºå‡†â€ tempï¼Œæ”¾åˆ°ç©ºä½ R[i] ä¸­ ç¬¬ 2 è¶Ÿå¿«æ’ï¼š å¯¹ K å·¦ã€å³ä¸¤ä¸ªå­—è¡¨ï¼Œåˆ†åˆ«æ‰§è¡Œ 1 è¶Ÿå¿«æ’ - 4 ä¸ªå­è¡¨ â€¦ â€¦ ç›´åˆ°ï¼šå„å­è¡¨é•¿åº¦ â‰¤1 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657// ? å¿«æ’åˆ’åˆ†int Partition(int a[], int l, int r) &#123; int p = a[l]; while (l &lt; r) &#123; // l != r while (l &lt; r &amp;&amp; a[r] &gt;= p) --r; // r å‘å·¦æ‰«æ a[l] = a[r]; while (l &lt; r &amp;&amp; a[l] &lt;= p) ++l; // l å‘å³æ‰«æ a[r] = a[l]; &#125; a[l] = p; return l;&#125;// ? å¿«é€Ÿæ’åºvoid QuickSort(int a[], int l, int r) &#123; if (l &lt; r) &#123; int p = Partition(a, l, r); QuickSort(a, l, p - 1); QuickSort(a, p + 1, r); &#125;&#125;// ? ä¸‰æ•°å–ä¸­ä¼˜åŒ–ï¼Œæ­¤ç‰ˆæœ¬å¿«çš„é£èµ·// https://www.cnblogs.com/chengxiao/p/6262208.html// - å·¦ç«¯ã€ä¸­é—´ã€å³ç«¯ä¸‰ä¸ªæ•°ï¼Œç„¶åè¿›è¡Œæ’åºï¼Œå°†ä¸­é—´æ•°ä½œä¸ºæ¢çº½å€¼void QuickSort(int a[], int l, int r) &#123; int mid = a[(l + r) / 2]; int i = l, j = r; do &#123; while (a[i] &lt; mid) i++; while (a[j] &gt; mid) j--; if (i &lt;= j) &#123; swap(a[i], a[j]); i++; j--; &#125; &#125; while (i &lt;= j); if (l &lt; j) QuickSort(a, l, j); if (i &lt; r) QuickSort(a, i, r);&#125;// å­—ç¬¦ä¸²çš„å¿«æ’void qsort(vector&lt;string&gt;&amp; nums, int l, int r) &#123; int i = l, j = r; string m = nums[l + ((r - l) &gt;&gt; 1)]; do &#123; while (nums[i] + m &lt; m + nums[i]) i++; while (nums[j] + m &gt; m + nums[j]) j--; if (i &lt;= j) &#123; swap(nums[i], nums[j]); i++; j--; &#125; &#125; while (i &lt;= j); if (l &lt; j) qsort(nums, l, j); if (i &lt; r) qsort(nums, i, r);&#125; é€‰æ‹©æ’åº(5) ç®€å•é€‰æ‹©æ’åº æ—¶é—´å¤æ‚åº¦ï¼šå¹³å‡ O(n^2)ï¼Œæœ€å O(n^2)ç©ºé—´å¤æ‚åº¦ï¼šO(1)ç¨³å®šæ€§ï¼šä¸ç¨³å®š æ€è·¯ï¼š é‡å¤æ‰§è¡Œ N-1 æ¬¡ ä¸‹è¿°å¤„ç†ï¼š æ‰¾å‡ºæœªæ’åºéƒ¨åˆ†æœ€å°å€¼çš„ä½ç½® minj å°† minj ä½ç½®çš„å…ƒç´ ä¸æœªæ’åºéƒ¨åˆ†çš„èµ·å§‹å…ƒç´ äº¤æ¢ 123456789void SelectSort(int a[], int len)&#123; for (int i=0; i&lt;len-1; i++)&#123; int k=i; for (int j=i+1; j&lt;len; j++)&#123; if (a[j]&lt;a[k]) k=j; &#125; if (i!=k) swap(a[i],a[k]); &#125;&#125; (6) å †æ’åº æ—¶é—´å¤æ‚åº¦ï¼šå¹³å‡ O(nlogn)ï¼Œæœ€å O(nlogn)ï¼Œæœ€å¥½ n(nlogn)ç©ºé—´å¤æ‚åº¦ï¼šO(1)ç¨³å®šæ€§ï¼šä¸ç¨³å®š æ€è·¯ï¼š å°†å¾…æ’åºæ•°æ®å»ºç«‹æˆå¤§æ ¹å † å°†å¾…æ’åºè®°å½•å»ºæˆ 1 ä¸ªå®Œå…¨äºŒå‰æ ‘ï¼ˆä»å·¦å¾€å³æ’å…¥ï¼‰ï¼Œå†â€œä»åå‘å‰â€ä¾æ¬¡è°ƒæ•´ sift siftï¼ˆå¾…è°ƒæ•´ï¼šxï¼‰ï¼šå°±æ˜¯è®©å…¶æ»¡è¶³å¤§æ ¹å † åˆ¤æ–­â€œå¾…è°ƒæ•´ xâ€æ˜¯å¦ &gt;å·¦å­©å­ &amp;&amp; &gt;å³å­©å­ æ˜¯ï¼Œåˆ™æ— éœ€è°ƒæ•´ï¼Œç»“æŸ å¦ï¼Œç»§ç»­â€œè°ƒæ•´ xâ€ï¼Œå³ï¼šé‡å¤ï¼Œç›´åˆ° x ä¸å­©å­æ»¡è¶³å †åºæ€§ï¼Œæˆ– x æˆä¸ºå¶å­ ä»æœ€åç»“ç‚¹çš„çˆ¶äº²å¼€å§‹ï¼Œæœ€åç»“ç‚¹ä¸‹æ ‡ï¼šn-1 çˆ¶äº²ä¸‹æ ‡ p&#x3D; (n-1-1)&#x2F;2 â€œä»åå‘å‰â€ï¼šä¾æ¬¡è°ƒæ•´ p, p-1, p-2, â€¦, 0 ä¹‹å sift (3)ï¼Œsift(2)ï¼Œsift(1)ï¼Œsift(0)ï¼Œæ„æˆå¤§æ ¹å † é‡å¤ï¼šé€‰å‡ºæœ€å¤§å€¼ï¼ˆå †é¡¶ï¼‰ã€å¹¶è°ƒæ•´å‰©ä½™éƒ¨åˆ†ï¼ˆè¾ƒå¤§çš„å­©å­ä¸Šå‡ï¼Œç©ºä½ç½®ä¸‹é™ ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°å †æ— å‰©ä½™å…ƒç´  123456789101112131415161718192021222324252627282930// - å›¾è§£ https://www.cnblogs.com/chengxiao/p/6129630.html// ? è°ƒæ•´ä»¥ k ä¸ºæ ¹çš„å­æ ‘ï¼Œå³ shift æ“ä½œ// - å¤§å­©å­ä¸Šå‡ï¼Œç©ºä½ç½®ä¸‹é™void HeadAdjust(int a[], int k, int len) &#123; int t = a[k]; for (int i = k * 2 + 1; i &lt; len; i = i * 2 + 1) &#123; // å¦‚æœå·¦å­ç»“ç‚¹å°äºå³å­ç»“ç‚¹ï¼ŒiæŒ‡å‘å³å­ç»“ç‚¹ if (i + 1 &lt; len &amp;&amp; a[i] &lt; a[i + 1]) i++; // å¦‚æœå­èŠ‚ç‚¹å¤§äºçˆ¶èŠ‚ç‚¹ï¼Œå°†å­èŠ‚ç‚¹å€¼èµ‹ç»™çˆ¶èŠ‚ç‚¹ï¼ˆä¸ç”¨è¿›è¡Œäº¤æ¢ï¼‰ if (a[i] &gt; t) &#123; a[k] = a[i]; k = i; &#125; else break; &#125; a[k] = t; // t æ”¾åœ¨æœ€ç»ˆä½ç½®&#125;// ? å †æ’åºvoid HeapSort(int a[], int len) &#123; int i; // - å»ºç«‹å¤§æ ¹å † for (i = len / 2 - 1; i &gt;= 0; i--) HeadAdjust(a, i, len); // - äº¤æ¢å †é¡¶å †ä½å…ƒç´  + è°ƒæ•´å †ç»“æ„ for (i = len - 1; i &gt;= 0; i--) &#123; swap(a[i], a[0]); HeadAdjust(a, 0, i); &#125;&#125; å…¶ä»–æ’åº(7) å½’å¹¶æ’åº æ—¶é—´å¤æ‚åº¦ï¼š O(nlogn) (å¥½ã€åã€å¹³å‡)ç©ºé—´å¤æ‚åº¦ï¼šO(n)ç¨³å®šæ€§ï¼šç¨³å®š æ€è·¯ï¼š ä»¥æ•´ä¸ªæ•°ç»„ä¸ºå¯¹è±¡æ‰§è¡Œ mergeSort mergeSortï¼š å°†ç»™å®šåŒ…å« n ä¸ªå…ƒç´ çš„å±€éƒ¨æ•°ç»„åˆ†å‰²æˆä¸¤ä¸ªå±€éƒ¨æ•°ç»„ å¯¹å±€éƒ¨æ•°ç»„åˆ†åˆ« mergeSort é€šè¿‡ merge å°†ä¸¤ä¸ªå·²æ’åºçš„æ•°ç»„æ•´åˆä¸ºä¸€ä¸ªæ•°ç»„ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546void Merge(int a[], int begin, int mid, int end) &#123; int left = begin, right = mid + 1, k = 0; int *temp = new int[end - begin + 1]; //é¡ºåºé€‰å–ä¸¤ä¸ªæœ‰åºåŒºçš„è¾ƒå°å…ƒç´ ï¼Œå­˜å‚¨åˆ°tæ•°ç»„ä¸­ while (left &lt;= mid &amp;&amp; right &lt;= end) &#123; //è¾ƒå°çš„å…ˆå­˜å…¥tempä¸­ if (a[left] &lt;= a[right]) temp[k++] = a[left++]; else temp[k++] = a[right++]; &#125; //è‹¥æ¯”è¾ƒå®Œä¹‹åï¼Œæœ‰åºåŒºä»æœ‰å‰©ä½™ï¼Œåˆ™ç›´æ¥å¤åˆ¶åˆ°tæ•°ç»„ä¸­ while (left &lt;= mid) temp[k++] = a[left++]; while (right &lt;= end) temp[k++] = a[right++]; //å°†æ’å¥½åºçš„å­˜å›arrä¸­ for (int i = begin, k = 0; i &lt;= end; i++, k++) a[i] = temp[k]; //åˆ é™¤æŒ‡é’ˆï¼Œé‡Šæ”¾ç©ºé—´ delete[] temp;&#125;// ? é€’å½’void MergeSort(int a[], int begin, int end) &#123; if (begin &lt; end) &#123; int mid = (begin + end) / 2; MergeSort(a, begin, mid); // å·¦ä¾§é€’å½’ MergeSort(a, mid + 1, end); // å³ä¾§é€’å½’ Merge(a, begin, mid, end); // å½’å¹¶ &#125;&#125;// ? éé€’å½’void MergeSort2(int a[], int n) &#123; int size = 1, begin, mid, end; while (size &lt;= n - 1) &#123; begin = 0; while (begin + size &lt;= n - 1) &#123; mid = begin + size - 1; end = mid + size; if (end &gt; n - 1) //ç¬¬äºŒä¸ªåºåˆ—ä¸ªæ•°ä¸è¶³size end = n - 1; Merge(a, begin, mid, end); begin = end + 1; //ä¸‹ä¸€æ¬¡å½’å¹¶æ—¶ç¬¬ä¸€å…³åºåˆ—çš„ä¸‹ç•Œ &#125; size *= 2; //æ‰©å¤§èŒƒå›´ &#125;&#125; (8) åŸºæ•°æ’åº æ—¶é—´å¤æ‚åº¦ï¼š O(d(n+r)) d: d è¶Ÿåˆ†é…å’Œæ”¶é›†ç©ºé—´å¤æ‚åº¦ï¼šO(r) r: r ä¸ªé˜Ÿåˆ—ç¨³å®šæ€§ï¼šç¨³å®š çœ‹å›¾ç†è§£ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657// ? è¾…åŠ©å‡½æ•°ï¼Œæ±‚æ•°æ®çš„æœ€å¤§ä½æ•° int maxbit(int data[], int n) &#123; int maxData = data[0]; ///&lt; æœ€å¤§æ•° /// å…ˆæ±‚å‡ºæœ€å¤§æ•°ï¼Œå†æ±‚å…¶ä½æ•°ï¼Œè¿™æ ·æœ‰åŸå…ˆä¾æ¬¡æ¯ä¸ªæ•°åˆ¤æ–­å…¶ä½æ•°ï¼Œç¨å¾®ä¼˜åŒ–ç‚¹ã€‚ for (int i = 1; i &lt; n; ++i) &#123; if (maxData &lt; data[i]) maxData = data[i]; &#125; int d = 1; int p = 10; while (maxData &gt;= p) &#123; // p *= 10; // Maybe overflow maxData /= 10; ++d; &#125; return d; /* int d = 1; //ä¿å­˜æœ€å¤§çš„ä½æ•° int p = 10; for(int i = 0; i &lt; n; ++i)&#123; while(data[i] &gt;= p)&#123; p *= 10; ++d; &#125; &#125; return d;*/ &#125; // ? åŸºæ•°æ’åº void Radixsort(int data[], int n) &#123; int d = maxbit(data, n); int *tmp = new int[n]; int *count = new int[10]; //è®¡æ•°å™¨ int i, j, k; int radix = 1; for (i = 1; i &lt;= d; i++) //è¿›è¡Œdæ¬¡æ’åº &#123; for (j = 0; j &lt; 10; j++) count[j] = 0; //æ¯æ¬¡åˆ†é…å‰æ¸…ç©ºè®¡æ•°å™¨ for (j = 0; j &lt; n; j++) &#123; k = (data[j] / radix) % 10; //ç»Ÿè®¡æ¯ä¸ªæ¡¶ä¸­çš„è®°å½•æ•° count[k]++; &#125; for (j = 1; j &lt; 10; j++) count[j] = count[j - 1] + count[j]; //å°†tmpä¸­çš„ä½ç½®ä¾æ¬¡åˆ†é…ç»™æ¯ä¸ªæ¡¶ for (j = n - 1; j &gt;= 0; j--) //å°†æ‰€æœ‰æ¡¶ä¸­è®°å½•ä¾æ¬¡æ”¶é›†åˆ°tmpä¸­ &#123; k = (data[j] / radix) % 10; tmp[count[k] - 1] = data[j]; count[k]--; &#125; for (j = 0; j &lt; n; j++) //å°†ä¸´æ—¶æ•°ç»„çš„å†…å®¹å¤åˆ¶åˆ°dataä¸­ data[j] = tmp[j]; radix = radix * 10; &#125; delete[] tmp; delete[] count; &#125; æ’åºæ¯”è¾ƒ","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Algorithm","slug":"Computer-Basics/Algorithm","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Algorithm/"}],"tags":[{"name":"Sort","slug":"Sort","permalink":"http://blog.sukiu.top/tags/Sort/"}]},{"title":"Golang","slug":"Language-Golang","date":"2022-01-19T07:30:00.000Z","updated":"2022-01-19T07:30:00.000Z","comments":true,"path":"Programming-Language/Go/Language-Golang/","link":"","permalink":"http://blog.sukiu.top/Programming-Language/Go/Language-Golang/","excerpt":"Goï¼ˆåˆç§° Golangï¼‰æ˜¯ Google å¼€å‘çš„ä¸€ç§é™æ€å¼ºç±»å‹ã€ç¼–è¯‘å‹ã€å¹¶å‘å‹ï¼Œå¹¶å…·æœ‰åƒåœ¾å›æ”¶åŠŸèƒ½çš„ç¼–ç¨‹è¯­è¨€ã€‚","text":"Goï¼ˆåˆç§° Golangï¼‰æ˜¯ Google å¼€å‘çš„ä¸€ç§é™æ€å¼ºç±»å‹ã€ç¼–è¯‘å‹ã€å¹¶å‘å‹ï¼Œå¹¶å…·æœ‰åƒåœ¾å›æ”¶åŠŸèƒ½çš„ç¼–ç¨‹è¯­è¨€ã€‚ åŸºç¡€å…³é”®å­—Go æ˜¯ä¸€é—¨ç±»ä¼¼ C çš„ç¼–è¯‘å‹è¯­è¨€ï¼Œä½†æ˜¯å®ƒçš„ç¼–è¯‘é€Ÿåº¦éå¸¸å¿«ã€‚ è¿™é—¨è¯­è¨€çš„å…³é”®å­—æ€»å…±ä¹Ÿå°±äºŒåäº”ä¸ªï¼š 12345break default func interface selectcase defer go map structchan else goto package switchconst fallthrough if range typecontinue for import return var å˜é‡ä¸€ä¸ªç‰¹å®šçš„åå­—ä¸ä½äºç‰¹å®šä½ç½®çš„å†…å­˜å—ç»‘å®šåœ¨ä¸€èµ·ï¼Œè¿™ä¸ªåå­—è¢«ç§°ä¸ºå˜é‡ã€‚ å£°æ˜å˜é‡çš„ä¸€èˆ¬å½¢å¼æ˜¯ä½¿ç”¨ var å…³é”®å­—ï¼švar identifier type å˜é‡çš„ç±»å‹æ”¾åœ¨å˜é‡çš„åç§°ä¹‹åï¼Œæ˜¯ä¸ºäº†é¿å…åƒ C è¯­è¨€ä¸­é‚£æ ·å«ç³Šä¸æ¸…çš„å£°æ˜å½¢å¼ã€‚ C++ï¼šint* a, b; &#x2F;&#x2F; a æ˜¯æŒ‡é’ˆï¼Œb ä¸æ˜¯ Goï¼švar a,b *int &#x2F;&#x2F; aï¼Œb éƒ½æ˜¯æŒ‡é’ˆ 12345678910111213141516171819202122var a intvar b boolvar str string// å› å¼åˆ†è§£å…³é”®å­—çš„å†™æ³•ï¼Œä¸€èˆ¬ç”¨äºå£°æ˜å…¨å±€å˜é‡var ( a int b bool str string)// å£°æ˜ä¸èµ‹å€¼ï¼ˆåˆå§‹åŒ–ï¼‰è¯­å¥ä¹Ÿå¯ä»¥ç»„åˆèµ·æ¥var identifier [type] = valuevar a int = 15var i = 5 // è‡ªåŠ¨æ¨æ–­var b bool = falsevar str string = &quot;Go says hello to the world!&quot;// çŸ­å˜é‡å£°æ˜ï¼Œç”¨äºå‡½æ•°ä½“å†…å£°æ˜å±€éƒ¨å˜é‡a := 1a, b, c := 5, 7, &quot;abc&quot;a, b = b, a // ç›¸å½“äºC++ä¸­çš„ swap(a,b) å˜é‡çš„å‘½åè§„åˆ™éµå¾ªéª†é©¼å‘½åæ³•ï¼Œå³é¦–ä¸ªå•è¯å°å†™ï¼Œæ¯ä¸ªæ–°å•è¯çš„é¦–å­—æ¯å¤§å†™ å¦‚æœå…¨å±€å˜é‡å¸Œæœ›èƒ½å¤Ÿè¢«å¤–éƒ¨åŒ…æ‰€ä½¿ç”¨ï¼Œåˆ™éœ€è¦å°†é¦–ä¸ªå•è¯çš„é¦–å­—æ¯ä¹Ÿå¤§å†™ å€¼ç±»å‹ æ‰€æœ‰åƒ intã€floatã€bool å’Œ string è¿™äº›åŸºæœ¬ç±»å‹éƒ½å±äºå€¼ç±»å‹ï¼Œä½¿ç”¨è¿™äº›ç±»å‹çš„å˜é‡ç›´æ¥æŒ‡å‘å­˜åœ¨å†…å­˜ä¸­çš„å€¼ åƒæ•°ç»„å’Œç»“æ„ä½“è¿™äº›å¤åˆç±»å‹ä¹Ÿæ˜¯å€¼ç±»å‹ å½“ä½¿ç”¨ç­‰å· = å°†ä¸€ä¸ªå˜é‡çš„å€¼èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡æ—¶ï¼Œå¦‚ï¼šj = iï¼Œå®é™…ä¸Šæ˜¯åœ¨å†…å­˜ä¸­å°† i çš„å€¼è¿›è¡Œäº†æ‹·è´ å¯ä»¥é€šè¿‡ &amp;i æ¥è·å–å˜é‡ i çš„å†…å­˜åœ°å€ï¼ˆæ¯æ¬¡çš„åœ°å€éƒ½å¯èƒ½ä¸ä¸€æ ·ï¼‰ï¼Œå€¼ç±»å‹çš„å˜é‡çš„å€¼å­˜å‚¨åœ¨æ ˆä¸­ å¼•ç”¨ç±»å‹ ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å˜é‡ r1 å­˜å‚¨çš„æ˜¯ r1 çš„å€¼æ‰€åœ¨çš„å†…å­˜åœ°å€ï¼ˆæ•°å­—ï¼‰ï¼Œæˆ–å†…å­˜åœ°å€ä¸­ç¬¬ä¸€ä¸ªå­—æ‰€åœ¨çš„ä½ç½®ï¼ˆè¿™ä¸ªå†…å­˜åœ°å€è¢«ç§°ä¹‹ä¸ºæŒ‡é’ˆï¼‰ åœ¨ Go è¯­è¨€ä¸­ï¼ŒæŒ‡é’ˆã€slicesï¼ˆåˆ‡ç‰‡ï¼‰ã€maps å’Œ channel éƒ½å±äºå¼•ç”¨ç±»å‹ å½“ä½¿ç”¨èµ‹å€¼è¯­å¥ r2 = r1 æ—¶ï¼Œåªæœ‰å¼•ç”¨ï¼ˆåœ°å€ï¼‰è¢«å¤åˆ¶ å½“ r1 çš„å€¼è¢«æ”¹å˜äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªå€¼çš„æ‰€æœ‰å¼•ç”¨éƒ½ä¼šæŒ‡å‘è¢«ä¿®æ”¹åçš„å†…å®¹ è¢«å¼•ç”¨çš„å˜é‡ä¼šå­˜å‚¨åœ¨å †ä¸­ï¼Œä»¥ä¾¿è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œä¸”æ¯”æ ˆæ‹¥æœ‰æ›´å¤§çš„å†…å­˜ç©ºé—´ å¸¸é‡Go è¯­è¨€çš„å¸¸é‡æ˜¯ä¸€ç§åœ¨æºç ç¼–è¯‘æœŸé—´è¢«åˆ›å»ºçš„è¯­æ³•å…ƒç´ ã€‚ 12345678const Pi float64 = 3.14159265358979323846 // å•è¡Œå¸¸é‡å£°æ˜ï¼Œæ˜¾ç¤ºconst Pi = 3.14159 // éšå¼// ä»¥constä»£ç å—å½¢å¼å£°æ˜å¸¸é‡const ( size int64 = 4096 i, j, s = 13, 14, &quot;bar&quot; // å•è¡Œå£°æ˜å¤šä¸ªå¸¸é‡) å¸¸é‡çš„ç±»å‹åªå±€é™äºåŸºæœ¬æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬æ•°å€¼ç±»å‹ã€å­—ç¬¦ä¸²ç±»å‹ã€å¸ƒå°”ç±»å‹ Go è¯­è¨€åœ¨å¸¸é‡æ–¹é¢çš„åˆ›æ–°åŒ…æ‹¬ä¸‹é¢è¿™å‡ ç‚¹ï¼š æ”¯æŒæ— ç±»å‹å¸¸é‡ï¼š å¯ä»¥ä¸æ˜¾ç¤ºæŒ‡å®šç±»å‹ï¼Œæ¯”å¦‚ const n = 13 æ”¯æŒéšå¼è‡ªåŠ¨è½¬å‹ï¼š å¯¹äºæ— ç±»å‹å¸¸é‡å‚ä¸çš„è¡¨è¾¾å¼æ±‚å€¼ï¼ŒGo ç¼–è¯‘å™¨ä¼šæ ¹æ®ä¸Šä¸‹æ–‡ä¸­çš„ç±»å‹ä¿¡æ¯ï¼ŒæŠŠæ— ç±»å‹å¸¸é‡è‡ªåŠ¨è½¬æ¢ä¸ºç›¸åº”çš„ç±»å‹åï¼Œå†å‚ä¸æ±‚å€¼è®¡ç®—ï¼Œè¿™ä¸€è½¬å‹åŠ¨ä½œæ˜¯éšå¼è¿›è¡Œçš„ å¯ç”¨äºå®ç°æšä¸¾ï¼š éšå¼é‡å¤å‰ä¸€ä¸ªéç©ºè¡¨è¾¾å¼ 12345const ( Apple, Banana = 11, 22 Strawberry, Grape = 11, 22 // ä½¿ç”¨ä¸Šä¸€è¡Œçš„åˆå§‹åŒ–è¡¨è¾¾å¼ Pear, Watermelon = 11, 22 // ä½¿ç”¨ä¸Šä¸€è¡Œçš„åˆå§‹åŒ–è¡¨è¾¾å¼) iota æ˜¯ä¸€ä¸ªé¢„å®šä¹‰æ ‡è¯†ç¬¦ï¼Œå¯ä»¥ä» 0 å¼€å§‹è‡ªå¢ï¼ˆä½äºåŒä¸€è¡Œçš„ iota å³ä¾¿å‡ºç°å¤šæ¬¡ï¼Œå¤šä¸ª iota çš„å€¼ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼‰ 12345678const ( Apple, Banana = iota, iota + 10 // 0, 10 (iota = 0) Strawberry, Grape // 1, 11 (iota = 1) Pear, Watermelon // 2, 12 (iota = 2))// å¦‚æœæƒ³ä» 1 å¼€å§‹// _ = iota // 0 // æ¯é‡åˆ°ä¸€æ¬¡ const å…³é”®å­—ï¼Œiota å°±é‡ç½®ä¸º 0 æ•°ç»„æ•°ç»„æ˜¯ä¸€ä¸ªé•¿åº¦å›ºå®šçš„ã€ç”±åŒæ„ç±»å‹å…ƒç´ ç»„æˆçš„è¿ç»­åºåˆ—ï¼ŒåŒ…å«ä¸¤ä¸ªé‡è¦å±æ€§ï¼šå…ƒç´ çš„ç±»å‹å’Œæ•°ç»„é•¿åº¦ï¼ˆå…ƒç´ çš„ä¸ªæ•°ï¼‰ æ•°ç»„å˜é‡å£°æ˜ï¼š 1234var arr [5]int // ä¸€ç»´var mArr [2][3][4]int // å¤šç»´var arr2 = [6]int &#123; 11, 12, 13, 14, 15, 16,&#125; // [11 12 13 14 15 16]var arr3 = [...]int &#123; 21, 22, 23,&#125; // [21 22 23] ... è‡ªåŠ¨è®¡ç®—å…ƒç´ ä¸ªæ•° æ•°ç»„ç±»å‹å˜é‡æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œè¿™å°±æ„å‘³ç€ä¸€ä¸ªæ•°ç»„å˜é‡è¡¨ç¤ºçš„æ˜¯æ•´ä¸ªæ•°ç»„ã€‚ è¿™ç‚¹ä¸ C è¯­è¨€å®Œå…¨ä¸åŒï¼Œåœ¨ C è¯­è¨€ä¸­ï¼Œæ•°ç»„å˜é‡å¯è§†ä¸ºæŒ‡å‘æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆã€‚ åˆ‡ç‰‡åœ¨ Go è¯­è¨€ä¸­ï¼Œæ•°ç»„æ›´å¤šæ˜¯â€œé€€å±…å¹•åâ€ï¼Œæ‰¿æ‹…çš„æ˜¯åº•å±‚å­˜å‚¨ç©ºé—´çš„è§’è‰²ã€‚ åˆ‡ç‰‡å°±æ˜¯æ•°ç»„çš„â€œæè¿°ç¬¦â€ï¼Œä¹Ÿæ­£æ˜¯å› ä¸ºè¿™ä¸€ç‰¹æ€§ï¼Œåˆ‡ç‰‡æ‰èƒ½åœ¨å‡½æ•°å‚æ•°ä¼ é€’æ—¶é¿å…è¾ƒå¤§æ€§èƒ½å¼€é”€ã€‚å¯ä»¥è¯´ï¼Œåˆ‡ç‰‡ä¹‹äºæ•°ç»„å°±åƒæ˜¯æ–‡ä»¶æè¿°ç¬¦ä¹‹äºæ–‡ä»¶ã€‚ å»æ‰â€œé•¿åº¦â€è¿™ä¸€æŸç¼šåï¼Œåˆ‡ç‰‡å±•ç°å‡ºæ›´ä¸ºçµæ´»çš„ç‰¹æ€§ 1var nums = []int&#123;1, 2, 3, 4, 5, 6&#125; åº•å±‚å®ç°åˆ‡ç‰‡çš„åº•å±‚æ•°æ®ç»“æ„ï¼šåœ¨è¿è¡Œæ—¶å…¶å®æ˜¯ä¸€ä¸ªä¸‰å…ƒç»„ç»“æ„ 12345type slice struct &#123; array unsafe.Pointer // æ˜¯æŒ‡å‘åº•å±‚æ•°ç»„çš„æŒ‡é’ˆ len int // åˆ‡ç‰‡çš„é•¿åº¦ï¼Œå³åˆ‡ç‰‡ä¸­å½“å‰å…ƒç´ çš„ä¸ªæ•° cap int // åº•å±‚æ•°ç»„çš„é•¿åº¦ï¼Œä¹Ÿæ˜¯åˆ‡ç‰‡çš„æœ€å¤§å®¹é‡ï¼Œcap å€¼æ°¸è¿œå¤§äºç­‰äº len å€¼&#125; Go ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¸ºæ¯ä¸ªæ–°åˆ›å»ºçš„åˆ‡ç‰‡ï¼Œå»ºç«‹ä¸€ä¸ªåº•å±‚æ•°ç»„ï¼Œé»˜è®¤åº•å±‚æ•°ç»„çš„é•¿åº¦ä¸åˆ‡ç‰‡åˆå§‹å…ƒç´ ä¸ªæ•°ç›¸åŒ åˆ›å»ºåˆ‡ç‰‡çš„åˆ›å»ºæ ¹æ®æƒ…å†µä¸åŒï¼Œä¸»è¦é€šè¿‡ä»¥ä¸‹ 3 ç§æ–¹æ³•åˆ›å»ºï¼š 1234567// 1ã€make å‡½æ•°sl := make([]byte, 6, 10) // å…¶ä¸­10ä¸ºcapå€¼ï¼Œå³åº•å±‚æ•°ç»„é•¿åº¦ï¼Œ6ä¸ºåˆ‡ç‰‡çš„åˆå§‹é•¿åº¦sl := make([]byte, 6) // cap = len = 6// 2ã€æ•°ç»„åˆ‡ç‰‡åŒ– array[low : high : max]arr := [10]int&#123;1, 2, 3, 4, 5, 6, 7, 8, 9, 10&#125;sl := arr[3:7:9] // len = high - low ; cap = max - low ; å³æ•°ç»„ä¸‹æ ‡ [3,7)// 3ã€åˆ‡ç‰‡åˆ›å»ºåˆ‡ç‰‡ ä¸ æ–¹æ³•2 ä¹¦å†™æ–¹æ³•ç›¸åŒ åŠ¨æ€æ‰©å®¹å½“é€šè¿‡ append æ“ä½œå‘åˆ‡ç‰‡è¿½åŠ æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœè¿™æ—¶åˆ‡ç‰‡çš„ len å€¼å’Œ cap å€¼æ˜¯ç›¸ç­‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åˆ‡ç‰‡åº•å±‚æ•°ç»„å·²ç»æ²¡æœ‰ç©ºé—²ç©ºé—´å†æ¥å­˜å‚¨è¿½åŠ çš„å€¼äº†ï¼ŒGo è¿è¡Œæ—¶å°±ä¼šå¯¹è¿™ä¸ªåˆ‡ç‰‡åšæ‰©å®¹æ“ä½œï¼Œæ¥ä¿è¯åˆ‡ç‰‡å§‹ç»ˆèƒ½å­˜å‚¨ä¸‹è¿½åŠ çš„æ–°å€¼ã€‚ 1234567891011var s []ints = append(s, 11) fmt.Println(len(s), cap(s)) //1 1 åˆ›å»ºåº•å±‚æ•°ç»„ u1ï¼ˆé•¿åº¦1ï¼‰s = append(s, 12) fmt.Println(len(s), cap(s)) //2 2 åˆ›å»ºåº•å±‚æ•°ç»„ u2ï¼ˆé•¿åº¦2 = u1çš„ä¸¤å€ï¼‰ï¼Œæ‹·è´ u1 å…ƒç´ ï¼Œ array æŒ‡å‘ u2 s = append(s, 13) fmt.Println(len(s), cap(s)) //3 4 åˆ›å»ºåº•å±‚æ•°ç»„ u3ï¼ˆé•¿åº¦4 = u2çš„ä¸¤å€ï¼‰ï¼Œæ‹·è´ u2 å…ƒç´ ï¼Œ array æŒ‡å‘ u3s = append(s, 14) fmt.Println(len(s), cap(s)) //4 4 cap è¶³å¤Ÿs = append(s, 15) fmt.Println(len(s), cap(s)) //5 8 åˆ›å»ºåº•å±‚æ•°ç»„ u4ï¼ˆé•¿åº¦8 = u3çš„ä¸¤å€ï¼‰ï¼Œæ‹·è´ u3 å…ƒç´ ï¼Œ array æŒ‡å‘ u4 Mapmap æ˜¯ Go è¯­è¨€æä¾›çš„ä¸€ç§æŠ½è±¡æ•°æ®ç±»å‹ï¼Œå®ƒè¡¨ç¤ºä¸€ç»„æ— åºçš„é”®å€¼å¯¹ã€‚ å½¢å¼ï¼šmap[key_type]value_type Go è¯­è¨€ä¸­è¦æ±‚ï¼Œkey çš„ç±»å‹å¿…é¡»æ”¯æŒâ€œ&#x3D;&#x3D;â€å’Œâ€œ!&#x3D;â€ä¸¤ç§æ¯”è¾ƒæ“ä½œç¬¦ã€‚ å‡½æ•°ç±»å‹ã€map ç±»å‹è‡ªèº«ï¼Œä»¥åŠåˆ‡ç‰‡ç±»å‹æ˜¯ä¸èƒ½ä½œä¸º map çš„ key ç±»å‹çš„ã€‚ åº•å±‚å®ç°Go è¿è¡Œæ—¶ä½¿ç”¨ä¸€å¼ å“ˆå¸Œè¡¨æ¥å®ç°æŠ½è±¡çš„ map ç±»å‹ã€‚ è¿è¡Œæ—¶å®ç°äº† map ç±»å‹æ“ä½œçš„æ‰€æœ‰åŠŸèƒ½ï¼ŒåŒ…æ‹¬æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤ç­‰ã€‚ åœ¨ç¼–è¯‘é˜¶æ®µï¼ŒGo ç¼–è¯‘å™¨ä¼šå°† Go è¯­æ³•å±‚é¢çš„ map æ“ä½œï¼Œé‡å†™æˆè¿è¡Œæ—¶å¯¹åº”çš„å‡½æ•°è°ƒç”¨ã€‚ 123456789101112// åˆ›å»ºmapç±»å‹å˜é‡å®ä¾‹m := make(map[keyType]valType, capacityhint) â†’ m := runtime.makemap(maptype, capacityhint, m)// æ’å…¥æ–°é”®å€¼å¯¹æˆ–ç»™é”®é‡æ–°èµ‹å€¼m[&quot;key&quot;] = &quot;value&quot; â†’ v := runtime.mapassign(maptype, m, &quot;key&quot;) væ˜¯ç”¨äºåç»­å­˜å‚¨valueçš„ç©ºé—´çš„åœ°å€// è·å–æŸé”®çš„å€¼ v := m[&quot;key&quot;] â†’ v := runtime.mapaccess1(maptype, m, &quot;key&quot;)v, ok := m[&quot;key&quot;] â†’ v, ok := runtime.mapaccess2(maptype, m, &quot;key&quot;)// åˆ é™¤æŸé”®delete(m, &quot;key&quot;) â†’ runtime.mapdelete(maptype, m, â€œkeyâ€) hmap ç±»å‹æ˜¯ map ç±»å‹çš„å¤´éƒ¨ç»“æ„ï¼ˆheaderï¼‰ï¼Œä¹‹å‰æåˆ°çš„ map ç±»å‹çš„æè¿°ç¬¦ï¼Œå®ƒå­˜å‚¨äº†åç»­ map ç±»å‹æ“ä½œæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ ä¸è¦ä¾èµ– map çš„å…ƒç´ éå†é¡ºåºï¼› map ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸æ”¯æŒå¹¶å‘è¯»å†™ï¼› ä¸è¦å°è¯•è·å– map ä¸­å…ƒç´ ï¼ˆvalueï¼‰çš„åœ°å€ map æ‰©å®¹ï¼š å½“ count &gt; LoadFactor * 2^B æˆ– overflow bucket è¿‡å¤šæ—¶ï¼Œè¿è¡Œæ—¶ä¼šè‡ªåŠ¨å¯¹ map è¿›è¡Œæ‰©å®¹ï¼ˆ Go æœ€æ–° 1.17 ç‰ˆæœ¬ LoadFactor è®¾ç½®ä¸º 6.5ï¼‰ åˆå§‹åŒ–åˆ‡ç‰‡ç±»å‹ï¼Œåˆå€¼ä¸ºé›¶å€¼ nil çš„åˆ‡ç‰‡ç±»å‹å˜é‡ï¼Œå¯ä»¥å€ŸåŠ©å†…ç½®çš„ append çš„å‡½æ•°è¿›è¡Œæ“ä½œï¼Œè¿™ç§åœ¨ Go è¯­è¨€ä¸­è¢«ç§°ä¸ºâ€œé›¶å€¼å¯ç”¨â€ map ç±»å‹ï¼Œå› ä¸ºå®ƒå†…éƒ¨å®ç°çš„å¤æ‚æ€§ï¼Œæ— æ³•â€œé›¶å€¼å¯ç”¨â€ 1234567891011121314151617181920var m map[string]int // m = nilm[&quot;key&quot;] = 1 // å‘ç”Ÿè¿è¡Œæ—¶å¼‚å¸¸ï¼španic: assignment to entry in nil map// 1ã€ä½¿ç”¨å¤åˆå­—é¢å€¼åˆå§‹åŒ– map ç±»å‹å˜é‡ï¼Œm := map[int]string&#123;&#125;type Position struct &#123; x float64 y float64&#125;// Go å…è®¸çœç•¥å­—é¢å€¼ä¸­çš„å…ƒç´ ç±»å‹m2 := map[Position]string&#123; Position&#123;29.935523, 52.568915&#125;: &quot;school&quot;, // Postion å¯çœç•¥ï¼Œå¦‚ä¸‹ &#123;25.352594, 113.304361&#125;: &quot;shopping-mall&quot;, &#123;73.224455, 111.804306&#125;: &quot;hospital&quot;,&#125;// 2ã€make å‡½æ•°m1 := make(map[int]string) // æœªæŒ‡å®šåˆå§‹å®¹é‡m2 := make(map[int]string, 8) // æŒ‡å®šåˆå§‹å®¹é‡ä¸º8 åŸºæœ¬æ“ä½œå’Œåˆ‡ç‰‡ç±»å‹ä¸€æ ·ï¼Œmap ä¹Ÿæ˜¯å¼•ç”¨ç±»å‹ã€‚ è¿™å°±æ„å‘³ç€ map ç±»å‹å˜é‡ä½œä¸ºå‚æ•°è¢«ä¼ é€’ç»™å‡½æ•°æˆ–æ–¹æ³•çš„æ—¶å€™ï¼Œå®è´¨ä¸Šä¼ é€’çš„åªæ˜¯ä¸€ä¸ªâ€œæè¿°ç¬¦â€ï¼Œè€Œä¸æ˜¯æ•´ä¸ª map çš„æ•°æ®æ‹·è´ï¼Œæ‰€ä»¥è¿™ä¸ªä¼ é€’çš„å¼€é”€æ˜¯å›ºå®šçš„ï¼Œè€Œä¸”ä¹Ÿå¾ˆå°ã€‚ 123456789101112131415// æ’å…¥ï¼Œæ›´æ–°ç›¸åŒm := make(map[int]string)m[1] = &quot;value1&quot;// æŸ¥æ‰¾v := m[&quot;key1&quot;]v, ok := m[&quot;key1&quot;]if !ok &#123; // &quot;key1&quot;ä¸åœ¨mapä¸­&#125;// åˆ é™¤delete(m, &quot;key2&quot;) // åˆ é™¤&quot;key2&quot;// éå†ï¼Œå¯¹åŒä¸€ map åšå¤šæ¬¡éå†çš„æ—¶å€™ï¼Œæ¯æ¬¡éå†å…ƒç´ çš„æ¬¡åºéƒ½ä¸ç›¸åŒfor k, v := range m &#123; fmt.Printf(&quot;[%d, %d] &quot;, k, v) &#125; æ§åˆ¶ç»“æ„If-else123456789101112if condition1 &#123; // do something &#125; else if condition2 &#123; // do something else &#125; else &#123; // catch-all or default&#125;// å¤šè¿”å›å€¼ç®€åŒ–if value, ok := readData(); ok &#123; // do something&#125; Switch123456789101112131415161718192021222324252627282930switch var1 &#123; case val1: ... case val2: ... default: ...&#125;func checkWorkday(a int) &#123; switch a &#123; case 1, 2, 3, 4, 5: println(&quot;it is a work day&quot;) case 6, 7: println(&quot;it is a weekend day&quot;) default: println(&quot;are you live on earth&quot;) &#125;&#125;//å¦‚æœéœ€è¦æ‰§è¡Œä¸‹ä¸€ä¸ª case çš„ä»£ç é€»è¾‘ï¼Œå¯ä»¥æ˜¾å¼ä½¿ç”¨ Go æä¾›çš„å…³é”®å­— fallthrough æ¥å®ç°switch switchexpr() &#123; case case1(): println(&quot;exec case1&quot;) fallthrough case case2(): println(&quot;exec case2&quot;) fallthrough default: println(&quot;exec default&quot;) &#125; ForGo è¯­è¨€ä¸æä¾› whileï¼Œæ‰€ä»¥ for å¾ªç¯æ›´åŠ å¼ºå¤§ 12345678for i := 0; i &lt; 5; i++ &#123; fmt.Printf(&quot;This is the %d iteration\\n&quot;, i)&#125;for i &gt;= 0 &#123; i = i - 1 fmt.Printf(&quot;The variable i is now: %d\\n&quot;, i)&#125; For-rangeéå†æ•°ç»„ã€åˆ‡ç‰‡ã€å­—ç¬¦ä¸²ã€map ç­‰çš„å¥½å¸®æ‰‹ 123for i, v := range sl &#123; fmt.Printf(&quot;sl[%d] = %d\\n&quot;, i, v)&#125; breakã€continue ä¸å…¶ä»–è¯­è¨€åŠŸèƒ½ç›¸åŒ label +goto ä¼šé€ æˆå¯è¯»æ€§æå·®ï¼Œä¸æ¨èä½¿ç”¨ï¼ˆåŸºæœ¬æ²¡çœ‹åˆ°äººç”¨ï¼‰ å‡½æ•°Go å‡½æ•°æ”¯æŒå¤šè¿”å›å€¼ï¼Œå‡½æ•°å®šä¹‰ä¸€èˆ¬å¦‚ä¸‹å½¢å¼ï¼š 12345func funcName(å‚æ•°åˆ—è¡¨) è¿”å›å€¼åˆ—è¡¨func foo() // æ— è¿”å›å€¼func foo() error // ä»…æœ‰ä¸€ä¸ªè¿”å›å€¼func foo() (int, string, error) // æœ‰2æˆ–2ä¸ªä»¥ä¸Šè¿”å›å€¼ å‡½æ•°åœ¨ Go è¯­è¨€ä¸­å±äºâ€œä¸€ç­‰å…¬æ°‘ï¼ˆFirst-Class Citizenï¼‰â€ï¼š Go å‡½æ•°å¯ä»¥å­˜å‚¨åœ¨å˜é‡ä¸­ï¼Œä¸”æ‹¥æœ‰è‡ªå·±çš„ç±»å‹ 1234var dfs func(index int) // å‡½æ•°ç±»å‹dfs = func(index int) &#123; // åŒ¿åå‡½æ•°ï¼Œé—­åŒ… // ...&#125; æ”¯æŒåœ¨å‡½æ•°å†…åˆ›å»ºå¹¶é€šè¿‡è¿”å›å€¼è¿”å› 12345func dfs(task string) func() &#123; return func() &#123; // ... &#125;&#125; ä½œä¸ºå‚æ•°ä¼ å…¥å‡½æ•° 1time.AfterFunc(time.Second*2, func() &#123; println(&quot;timer fired&quot;) &#125;) å‚æ•°ä¼ é€’æŒ‰å€¼ä¼ é€’ call by value Go é»˜è®¤ä½¿ç”¨æŒ‰å€¼ä¼ é€’æ¥ä¼ é€’å‚æ•°ï¼Œä¹Ÿå°±æ˜¯ä¼ é€’å‚æ•°çš„å‰¯æœ¬ï¼ˆé€ä½æ‹·è´ï¼‰ã€‚ å‡½æ•°æ¥æ”¶å‚æ•°å‰¯æœ¬ä¹‹åï¼Œåœ¨ä½¿ç”¨å˜é‡çš„è¿‡ç¨‹ä¸­å¯èƒ½å¯¹å‰¯æœ¬çš„å€¼è¿›è¡Œæ›´æ”¹ï¼Œä½†ä¸ä¼šå½±å“åˆ°åŸæ¥çš„å˜é‡ å¼•ç”¨ä¼ é€’ call by reference å¦‚æœå¸Œæœ›å‡½æ•°å¯ä»¥ç›´æ¥ä¿®æ”¹å‚æ•°çš„å€¼ï¼Œè€Œä¸æ˜¯å¯¹å‚æ•°çš„å‰¯æœ¬è¿›è¡Œæ“ä½œï¼Œ éœ€è¦å°†å‚æ•°çš„åœ°å€ï¼ˆå˜é‡åå‰é¢æ·»åŠ &amp;ç¬¦å·ï¼Œæ¯”å¦‚ &amp;variableï¼‰ä¼ é€’ç»™å‡½æ•°ï¼Œè¿™å°±æ˜¯å¼•ç”¨ä¼ é€’ã€‚ ä¼ é€’æŒ‡é’ˆï¼ˆä¸€ä¸ª 32 ä½æˆ–è€… 64 ä½çš„å€¼ï¼‰çš„æ¶ˆè€—éƒ½æ¯”ä¼ é€’å‰¯æœ¬æ¥å¾—å°‘ å˜é•¿å‚æ•°å¦‚æœå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯é‡‡ç”¨ â€¦type çš„å½¢å¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±å¯ä»¥å¤„ç†ä¸€ä¸ªå˜é•¿çš„å‚æ•°ï¼Œè¿™ä¸ªé•¿åº¦å¯ä»¥ä¸º 0ï¼Œè¿™æ ·çš„å‡½æ•°ç§°ä¸ºå˜å‚å‡½æ•°ã€‚ 12func Greeting(prefix string, who ...string)Greeting(&quot;hello:&quot;, &quot;Joe&quot;, &quot;Anna&quot;, &quot;Eileen&quot;) å‘½åè¿”å›å€¼å°½é‡ä½¿ç”¨å‘½åè¿”å›å€¼ï¼šä¼šä½¿ä»£ç æ›´æ¸…æ™°ã€æ›´ç®€çŸ­ï¼ŒåŒæ—¶æ›´åŠ å®¹æ˜“è¯»æ‡‚ã€‚ 12345678910func getX2AndX3(input int) (int, int) &#123; // éå‘½å return 2 * input, 3 * input&#125;func getX2AndX3_2(input int) (x2 int, x3 int) &#123; // å‘½å x2 = 2 * input x3 = 3 * input // return x2, x3 return&#125; Deferdefer æ˜¯ Go è¯­è¨€æä¾›çš„ä¸€ç§å»¶è¿Ÿè°ƒç”¨æœºåˆ¶ï¼Œdefer çš„è¿ä½œç¦»ä¸å¼€å‡½æ•°ã€‚ åœ¨ Go ä¸­ï¼Œåªæœ‰åœ¨å‡½æ•°ï¼ˆå’Œæ–¹æ³•ï¼‰å†…éƒ¨æ‰èƒ½ä½¿ç”¨ defer defer å…³é”®å­—åé¢åªèƒ½æ¥å‡½æ•°ï¼ˆæˆ–æ–¹æ³•ï¼‰ï¼Œè¿™äº›å‡½æ•°è¢«ç§°ä¸º deferred å‡½æ•°ã€‚ defer å°†å®ƒä»¬æ³¨å†Œåˆ°å…¶æ‰€åœ¨ Goroutine ä¸­ï¼Œç”¨äºå­˜æ”¾ deferred å‡½æ•°çš„æ ˆæ•°æ®ç»“æ„ä¸­ï¼Œè¿™äº› deferred å‡½æ•°å°†åœ¨æ‰§è¡Œ defer çš„å‡½æ•°é€€å‡ºå‰ï¼ŒæŒ‰åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰çš„é¡ºåºè¢«ç¨‹åºè°ƒåº¦æ‰§è¡Œã€‚ å…³é”®å­— defer å…è®¸æˆ‘ä»¬æ¨è¿Ÿåˆ°å‡½æ•°è¿”å›ä¹‹å‰ï¼ˆæˆ–ä»»æ„ä½ç½®æ‰§è¡Œ return è¯­å¥ä¹‹åï¼‰ä¸€åˆ»æ‰æ‰§è¡ŒæŸä¸ªè¯­å¥æˆ–å‡½æ•°ã€‚ æ‰€ä»¥ï¼Œdeferred å‡½æ•°æ˜¯ä¸€ä¸ªå¯ä»¥åœ¨ä»»ä½•æƒ…å†µä¸‹ä¸ºå‡½æ•°è¿›è¡Œæ”¶å°¾å·¥ä½œçš„å¥½â€œä¼™ä¼´â€ã€‚ 123456789101112// å…³é—­æ–‡ä»¶æµ// open a file defer file.Close()// è§£é”åŠ é”çš„èµ„æºmu.Lock() defer mu.Unlock()// æ‰“å°æœ€ç»ˆæŠ¥å‘ŠprintHeader() defer printFooter()// å…³é—­æ•°æ®åº“è¿æ¥// open a database connection defer disconnectFromDB() è·Ÿè¸ªä½¿ç”¨ defer å¯ä»¥è·Ÿè¸ªå‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ 1234567891011121314151617181920func Trace(name string) func() &#123; println(&quot;enter:&quot;, name) return func() &#123; println(&quot;exit:&quot;, name) &#125;&#125;func foo() &#123; defer Trace(&quot;foo&quot;)() bar()&#125;func bar() &#123; defer Trace(&quot;bar&quot;)()&#125;func main() &#123; defer Trace(&quot;main&quot;)() foo()&#125; è¾“å‡ºï¼š 123456enter: mainenter: fooenter: barexit: barexit: fooexit: main å†…ç½®å‡½æ•° åç§° è¯´æ˜ close ç”¨äºç®¡é“é€šä¿¡ lenã€cap len ç”¨äºè¿”å›æŸä¸ªç±»å‹çš„é•¿åº¦æˆ–æ•°é‡ï¼ˆå­—ç¬¦ä¸²ã€æ•°ç»„ã€åˆ‡ç‰‡ã€map å’Œç®¡é“ï¼‰ï¼›cap æ˜¯å®¹é‡çš„æ„æ€ï¼Œç”¨äºè¿”å›æŸä¸ªç±»å‹çš„æœ€å¤§å®¹é‡ï¼ˆåªèƒ½ç”¨äºæ•°ç»„ã€åˆ‡ç‰‡å’Œç®¡é“ï¼Œä¸èƒ½ç”¨äº mapï¼‰ newã€make new å’Œ make å‡æ˜¯ç”¨äºåˆ†é…å†…å­˜ï¼šnew ç”¨äºå€¼ç±»å‹å’Œç”¨æˆ·å®šä¹‰çš„ç±»å‹ï¼Œå¦‚è‡ªå®šä¹‰ç»“æ„ï¼Œmake ç”¨äºå†…ç½®å¼•ç”¨ç±»å‹ï¼ˆåˆ‡ç‰‡ã€map å’Œç®¡é“ï¼‰ã€‚å®ƒä»¬çš„ç”¨æ³•å°±åƒæ˜¯å‡½æ•°ï¼Œä½†æ˜¯å°†ç±»å‹ä½œä¸ºå‚æ•°ï¼šnew(type)ã€make(type)ã€‚new(T) åˆ†é…ç±»å‹ T çš„é›¶å€¼å¹¶è¿”å›å…¶åœ°å€ï¼Œä¹Ÿå°±æ˜¯æŒ‡å‘ç±»å‹ T çš„æŒ‡é’ˆï¼ˆè¯¦è§ç¬¬ 10.1 èŠ‚ï¼‰ã€‚å®ƒä¹Ÿå¯ä»¥è¢«ç”¨äºåŸºæœ¬ç±»å‹ï¼šv := new(int)ã€‚make(T) è¿”å›ç±»å‹ T çš„åˆå§‹åŒ–ä¹‹åçš„å€¼ï¼Œå› æ­¤å®ƒæ¯” new è¿›è¡Œæ›´å¤šçš„å·¥ä½œï¼ˆè¯¦è§ç¬¬ 7.2.3/4 èŠ‚ã€ç¬¬ 8.1.1 èŠ‚å’Œç¬¬ 14.2.1 èŠ‚ï¼‰new() æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸è¦å¿˜è®°å®ƒçš„æ‹¬å· copyã€append ç”¨äºå¤åˆ¶å’Œè¿æ¥åˆ‡ç‰‡ panicã€recover ä¸¤è€…å‡ç”¨äºé”™è¯¯å¤„ç†æœºåˆ¶ printã€println åº•å±‚æ‰“å°å‡½æ•°ï¼ˆè¯¦è§ç¬¬ 4.2 èŠ‚ï¼‰ï¼Œåœ¨éƒ¨ç½²ç¯å¢ƒä¸­å»ºè®®ä½¿ç”¨ fmt åŒ… complexã€real imag ç”¨äºåˆ›å»ºå’Œæ“ä½œå¤æ•°ï¼ˆè¯¦è§ç¬¬ 4.5.2.2 èŠ‚ï¼‰ ç»“æ„ä¸æ–¹æ³•Structç»“æ„ä½“å®šä¹‰çš„ä¸€èˆ¬æ–¹å¼å¦‚ä¸‹ï¼š 12345678910111213141516type identifier struct &#123; field1 type1 field2 type2 ...&#125;type Person struct &#123; Name string Phone string Addr string&#125;// å¯ä»¥æ— éœ€æä¾›å­—æ®µçš„åå­—ï¼Œåªéœ€è¦ä½¿ç”¨å…¶ç±»å‹å°±å¯ä»¥äº†type Book struct &#123; Title string Person // åµŒå…¥å­—æ®µï¼ˆåŒ¿åå­—æ®µï¼‰&#125; type T struct &#123;a, b int&#125; ä¹Ÿæ˜¯åˆæ³•çš„è¯­æ³•ï¼Œå®ƒæ›´é€‚ç”¨äºç®€å•çš„ç»“æ„ä½“ã€‚ åˆå§‹åŒ–1234567891011121314151617181920212223242526// 1-struct as a value type:var pers1 Personpers1.firstName = &quot;Chris&quot;pers1.lastName = &quot;Woodward&quot;upPerson(&amp;pers1)// 2â€”struct as a pointer:pers2 := new(Person)pers2.firstName = &quot;Chris&quot;pers2.lastName = &quot;Woodward&quot;(*pers2).lastName = &quot;Woodward&quot; // è¿™æ˜¯åˆæ³•çš„upPerson(pers2)// 3â€”struct as a literal:pers3 := &amp;Person&#123;&quot;Chris&quot;,&quot;Woodward&quot;&#125;upPerson(pers3)// æ›´å¸¸ç”¨ï¼šfield:value å½¢å¼çš„å¤åˆå­—é¢å€¼t := &amp;Timer&#123; C: c, r: runtimeTimer&#123; when: when(d), f: sendTime, arg: c, &#125;, &#125; Methodåœ¨ Go è¯­è¨€ä¸­ï¼Œç»“æ„ä½“å°±åƒæ˜¯ç±»çš„ä¸€ç§ç®€åŒ–å½¢å¼ï¼Œé‚£ä¹ˆç±»çš„æ–¹æ³•åœ¨å“ªé‡Œå‘¢ï¼Ÿ Go æ–¹æ³•æ˜¯ä½œç”¨åœ¨æ¥æ”¶è€…ï¼ˆreceiverï¼‰ä¸Šçš„ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶è€…æ˜¯æŸç§ç±»å‹çš„å˜é‡ã€‚å› æ­¤æ–¹æ³•æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å‡½æ•°ã€‚ å®šä¹‰æ–¹æ³•çš„ä¸€èˆ¬æ ¼å¼å¦‚ä¸‹ï¼š 1func (recv receiver_type) methodName(parameter_list) (return_value_list) &#123; ... &#125; æ–¹æ³•å£°æ˜è¦ä¸ receiver å‚æ•°çš„åŸºç±»å‹å£°æ˜æ”¾åœ¨åŒä¸€ä¸ªåŒ…å†…ã€‚ï¼ˆå³ struct ä¸ method åœ¨åŒä¸€ä¸ª packageï¼‰ receiver å‚æ•°çš„åŸºç±»å‹æœ¬èº«ä¸èƒ½ä¸ºæŒ‡é’ˆç±»å‹æˆ–æ¥å£ç±»å‹ 123456789101112type TwoInts struct &#123; a int b int&#125;func (tn *TwoInts) AddThem() int &#123; return tn.a + tn.b&#125;func (tn *TwoInts) AddToParam(param int) int &#123; return tn.a + tn.b + param&#125; Receiver å‚æ•°çš„é€‰æ‹© å¦‚æœ Go æ–¹æ³•è¦æŠŠå¯¹ receiver å‚æ•°ä»£è¡¨çš„ç±»å‹å®ä¾‹çš„ä¿®æ”¹ï¼Œåæ˜ åˆ°åŸç±»å‹å®ä¾‹ä¸Šï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥é€‰æ‹© *T ä½œä¸º receiver å‚æ•°çš„ç±»å‹ å¦‚æœ receiver å‚æ•°ç±»å‹çš„ size è¾ƒå¤§ï¼Œä»¥å€¼æ‹·è´å½¢å¼ä¼ å…¥å°±ä¼šå¯¼è‡´è¾ƒå¤§çš„æ€§èƒ½å¼€é”€ï¼Œè¿™æ—¶æˆ‘ä»¬é€‰æ‹© *T ä½œä¸º receiver ç±»å‹å¯èƒ½æ›´å¥½äº› T ç±»å‹æ˜¯å¦éœ€è¦å®ç°æŸä¸ªæ¥å£ï¼Œä¹Ÿå°±æ˜¯æ˜¯å¦å­˜åœ¨å°† T ç±»å‹çš„å˜é‡èµ‹å€¼ç»™æŸæ¥å£ç±»å‹å˜é‡çš„æƒ…å†µã€‚ å¦‚æœéœ€è¦ï¼Œé‚£ä½¿ç”¨ T ä½œä¸º receiver å‚æ•°çš„ç±»å‹ï¼Œæ¥æ»¡è¶³æ¥å£ç±»å‹æ–¹æ³•é›†åˆä¸­çš„æ‰€æœ‰æ–¹æ³• å¦‚æœ T ä¸éœ€è¦ï¼Œä½† *T éœ€è¦ï¼Œ*T çš„æ–¹æ³•é›†åˆæ˜¯åŒ…å« T çš„æ–¹æ³•é›†åˆçš„ï¼Œå‚è€ƒä¸Šé¢ 2 ä¸ªåŸåˆ™é€‰æ‹© æ€»ç»“ï¼š ç±»å‹ T çš„å¯è°ƒç”¨æ–¹æ³•é›†åŒ…å«æ¥å—è€…ä¸º *T æˆ– T çš„æ‰€æœ‰æ–¹æ³•é›† ç±»å‹ *T çš„å¯è°ƒç”¨æ–¹æ³•é›†åŒ…å«æ¥å—è€…ä¸º *T çš„æ‰€æœ‰æ–¹æ³• ç±»å‹ *T çš„å¯è°ƒç”¨æ–¹æ³•é›†ä¸åŒ…å«æ¥å—è€…ä¸º T çš„æ–¹æ³• æ¥å£ä¸åå°„InterfaceGo è¯­è¨€ä¸æ˜¯ä¸€ç§ â€œä¼ ç»Ÿâ€ çš„é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼šå®ƒé‡Œé¢æ²¡æœ‰ç±»å’Œç»§æ‰¿çš„æ¦‚å¿µã€‚ ä½†æ˜¯ Go è¯­è¨€é‡Œæœ‰éå¸¸çµæ´»çš„ æ¥å£ æ¦‚å¿µï¼Œé€šè¿‡å®ƒå¯ä»¥å®ç°å¾ˆå¤šé¢å‘å¯¹è±¡çš„ç‰¹æ€§ã€‚ æ¥å£æä¾›äº†ä¸€ç§æ–¹å¼æ¥ è¯´æ˜ å¯¹è±¡çš„è¡Œä¸ºï¼šå¦‚æœè°èƒ½æå®šè¿™ä»¶äº‹ï¼Œå®ƒå°±å¯ä»¥ç”¨åœ¨è¿™å„¿ã€‚ æ¥å£å®šä¹‰äº†ä¸€ç»„æ–¹æ³•ï¼ˆæ–¹æ³•é›†ï¼‰ï¼Œä½†æ˜¯è¿™äº›æ–¹æ³•ä¸åŒ…å«ï¼ˆå®ç°ï¼‰ä»£ç ï¼šå®ƒä»¬æ²¡æœ‰è¢«å®ç°ï¼ˆå®ƒä»¬æ˜¯æŠ½è±¡çš„ï¼‰ã€‚æ¥å£é‡Œä¹Ÿä¸èƒ½åŒ…å«å˜é‡ã€‚ é€šè¿‡å¦‚ä¸‹æ ¼å¼å®šä¹‰æ¥å£ï¼š 12345type Namer interface &#123; Method1(param_list) return_type Method2(param_list) return_type ...&#125; ä¸Šé¢çš„ Namer æ˜¯ä¸€ä¸ª æ¥å£ç±»å‹ã€‚ å‘½åï¼š æ¥å£çš„åå­—ç”±æ–¹æ³•ååŠ  er åç¼€ç»„æˆ å½“åç¼€ er ä¸åˆé€‚æ—¶ï¼Œä»¥ able ç»“å°¾æˆ–è€…ä»¥ I å¼€å¤´ï¼Œæ¯”å¦‚ Recoverable é€šå¸¸å®ƒä»¬ä¼šåŒ…å« 0 ä¸ªã€æœ€å¤š 3 ä¸ªæ–¹æ³•ï¼ˆå°æ¥å£ï¼ŒæŠ½è±¡ç¨‹åº¦é«˜ï¼‰ ç©ºæ¥å£ å¦‚æœä¸€ä¸ªç±»å‹ T çš„æ–¹æ³•é›†åˆæ˜¯æŸæ¥å£ç±»å‹ I çš„æ–¹æ³•é›†åˆçš„ç­‰ä»·é›†åˆæˆ–è¶…é›†ï¼Œç±»å‹ T å®ç°äº†æ¥å£ç±»å‹ Iï¼Œ é‚£ä¹ˆç±»å‹ T çš„å˜é‡å°±å¯ä»¥ä½œä¸ºåˆæ³•çš„å³å€¼èµ‹å€¼ç»™æ¥å£ç±»å‹ I çš„å˜é‡ã€‚ ç©ºæ¥å£ç±»å‹çš„è¿™ä¸€å¯æ¥å—ä»»æ„ç±»å‹å˜é‡å€¼ä½œä¸ºå³å€¼çš„ç‰¹æ€§ï¼Œæ˜¯ Go åŠ å…¥æ³›å‹è¯­æ³•ä¹‹å‰å”¯ä¸€ä¸€ç§å…·æœ‰â€œæ³›å‹â€èƒ½åŠ›çš„è¯­æ³•å…ƒç´  123456var i interface&#123;&#125; = 15 // oki = &quot;hello, golang&quot; // oktype T struct&#123;&#125;var t Ti = t // oki = &amp;t // ok ç±»å‹æ–­è¨€ä¸€ä¸ªæ¥å£ç±»å‹çš„å˜é‡ varI ä¸­å¯ä»¥åŒ…å«ä»»ä½•ç±»å‹çš„å€¼ï¼Œå¿…é¡»æœ‰ä¸€ç§æ–¹å¼æ¥æ£€æµ‹å®ƒçš„ åŠ¨æ€ ç±»å‹ï¼Œå³è¿è¡Œæ—¶åœ¨å˜é‡ä¸­å­˜å‚¨çš„å€¼çš„å®é™…ç±»å‹ã€‚ åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€ç±»å‹å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼Œä½†æ˜¯å®ƒæ€»æ˜¯å¯ä»¥åˆ†é…ç»™æ¥å£å˜é‡æœ¬èº«çš„ç±»å‹ã€‚ ç±»å‹ T çš„å€¼ï¼š 123456v := varI.(T) // unchecked type assertionï¼ŒvarI å¿…é¡»æ˜¯ä¸€ä¸ªæ¥å£å˜é‡if v, ok := varI.(T); ok &#123; // checked type assertionï¼Œä¸€èˆ¬ç”¨è¿™ç§æ–¹æ³• Process(v) return&#125;// varI is not of type å¦‚æœæ–­è¨€æˆåŠŸï¼Œå˜é‡ v çš„ç±»å‹ä¸º i çš„å€¼çš„ç±»å‹ï¼Œè€Œå¹¶éæ¥å£ç±»å‹ T å¦‚æœæ–­è¨€å¤±è´¥ï¼Œv çš„ç±»å‹ä¿¡æ¯ä¸ºæ¥å£ç±»å‹ Tï¼Œå®ƒçš„å€¼ä¸º nil ç±»å‹åˆ¤æ–­æ¥å£å˜é‡çš„ç±»å‹ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ç§ç‰¹æ®Šå½¢å¼çš„ switch æ¥æ£€æµ‹ï¼štype-switch 12345678910switch t := areaIntf.(type) &#123;case *Square: fmt.Printf(&quot;Type Square %T with value %v\\n&quot;, t, t)case *Circle: fmt.Printf(&quot;Type Circle %T with value %v\\n&quot;, t, t)case nil: fmt.Printf(&quot;nil value: nothing to check?\\n&quot;)default: fmt.Printf(&quot;Unexpected type %T\\n&quot;, t)&#125; Reflectionåå°„æ˜¯ç”¨ç¨‹åºæ£€æŸ¥å…¶æ‰€æ‹¥æœ‰çš„ç»“æ„ï¼Œå°¤å…¶æ˜¯ç±»å‹çš„ä¸€ç§èƒ½åŠ›ï¼›è¿™æ˜¯å…ƒç¼–ç¨‹çš„ä¸€ç§å½¢å¼ã€‚ åå°„å¯ä»¥åœ¨è¿è¡Œæ—¶æ£€æŸ¥ç±»å‹å’Œå˜é‡ï¼Œä¾‹å¦‚å®ƒçš„å¤§å°ã€æ–¹æ³•å’Œ åŠ¨æ€ çš„è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚ è¿™å¯¹äºæ²¡æœ‰æºä»£ç çš„åŒ…å°¤å…¶æœ‰ç”¨ï¼Œé™¤éçœŸå¾—æœ‰å¿…è¦ï¼Œå¦åˆ™åº”å½“é¿å…ä½¿ç”¨æˆ–å°å¿ƒä½¿ç”¨ã€‚ å˜é‡çš„æœ€åŸºæœ¬ä¿¡æ¯å°±æ˜¯ç±»å‹å’Œå€¼ï¼šåå°„åŒ…çš„ Type ç”¨æ¥è¡¨ç¤ºä¸€ä¸ª Go ç±»å‹ï¼Œåå°„åŒ…çš„ Value ä¸º Go å€¼æä¾›äº†åå°„æ¥å£ã€‚ å®é™…ä¸Šï¼Œåå°„æ˜¯é€šè¿‡æ£€æŸ¥ä¸€ä¸ªæ¥å£çš„å€¼ï¼Œå˜é‡é¦–å…ˆè¢«è½¬æ¢æˆç©ºæ¥å£ã€‚ 12func TypeOf(i interface&#123;&#125;) Typefunc ValueOf(i interface&#123;&#125;) Value æ›´å¤šæŸ¥çœ‹ åå°„åŒ… unknwon&#x2F;the-way-to-go_ZH_CN Â· GitHub Go ä¸­çš„é¢å‘å¯¹è±¡OO è¯­è¨€æœ€é‡è¦çš„ä¸‰ä¸ªæ–¹é¢åˆ†åˆ«æ˜¯ï¼šå°è£…ï¼Œç»§æ‰¿å’Œå¤šæ€ï¼Œåœ¨ Go ä¸­å®ƒä»¬æ˜¯æ€æ ·è¡¨ç°çš„å‘¢ï¼Ÿ å°è£…ï¼ˆæ•°æ®éšè—ï¼‰ï¼šå’Œåˆ«çš„ OO è¯­è¨€æœ‰ 4 ä¸ªæˆ–æ›´å¤šçš„è®¿é—®å±‚æ¬¡ç›¸æ¯”ï¼ŒGo æŠŠå®ƒç®€åŒ–ä¸ºäº† 2 å±‚: 1ï¼‰åŒ…èŒƒå›´å†…çš„ï¼šé€šè¿‡æ ‡è¯†ç¬¦é¦–å­—æ¯å°å†™ï¼Œå¯¹è±¡ åªåœ¨å®ƒæ‰€åœ¨çš„åŒ…å†…å¯è§ 2ï¼‰å¯å¯¼å‡ºçš„ï¼šé€šè¿‡æ ‡è¯†ç¬¦é¦–å­—æ¯å¤§å†™ï¼Œå¯¹è±¡ å¯¹æ‰€åœ¨åŒ…ä»¥å¤–ä¹Ÿå¯è§ ç±»å‹åªæ‹¥æœ‰è‡ªå·±æ‰€åœ¨åŒ…ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚ ç»§æ‰¿ï¼šç”¨ç»„åˆå®ç°ï¼šå†…åµŒä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰åŒ…å«æƒ³è¦çš„è¡Œä¸ºï¼ˆå­—æ®µå’Œæ–¹æ³•ï¼‰çš„ç±»å‹ï¼›å¤šé‡ç»§æ‰¿å¯ä»¥é€šè¿‡å†…åµŒå¤šä¸ªç±»å‹å®ç° å¤šæ€ï¼šç”¨æ¥å£å®ç°ï¼šæŸä¸ªç±»å‹çš„å®ä¾‹å¯ä»¥èµ‹ç»™å®ƒæ‰€å®ç°çš„ä»»æ„æ¥å£ç±»å‹çš„å˜é‡ã€‚ç±»å‹å’Œæ¥å£æ˜¯æ¾è€¦åˆçš„ï¼Œå¹¶ä¸”å¤šé‡ç»§æ‰¿å¯ä»¥é€šè¿‡å®ç°å¤šä¸ªæ¥å£å®ç°ã€‚Go æ¥å£ä¸æ˜¯ Java å’Œ C# æ¥å£çš„å˜ä½“ï¼Œè€Œä¸”æ¥å£é—´æ˜¯ä¸ç›¸å…³çš„ï¼Œå¹¶ä¸”æ˜¯å¤§è§„æ¨¡ç¼–ç¨‹å’Œå¯é€‚åº”çš„æ¼”è¿›å‹è®¾è®¡çš„å…³é”®ã€‚ å¹¶å‘å¹¶å‘æ˜¯ä¸€ç§èƒ½åŠ›ï¼Œå®ƒè®©ä½ çš„ç¨‹åºå¯ä»¥ç”±è‹¥å¹²ä¸ªä»£ç ç‰‡æ®µç»„åˆè€Œæˆï¼Œå¹¶ä¸”æ¯ä¸ªç‰‡æ®µéƒ½æ˜¯ç‹¬ç«‹è¿è¡Œçš„ã€‚ Go å¹¶æ²¡æœ‰ä½¿ç”¨æ“ä½œç³»ç»Ÿçº¿ç¨‹ä½œä¸ºæ‰¿è½½åˆ†è§£åçš„ä»£ç ç‰‡æ®µï¼ˆæ¨¡å—ï¼‰çš„åŸºæœ¬æ‰§è¡Œå•å…ƒï¼Œè€Œæ˜¯å®ç°äº†goroutineè¿™ä¸€ç”± Go è¿è¡Œæ—¶ï¼ˆruntimeï¼‰è´Ÿè´£è°ƒåº¦çš„ã€è½»é‡çš„ç”¨æˆ·çº§çº¿ç¨‹ï¼Œä¸ºå¹¶å‘ç¨‹åºè®¾è®¡æä¾›åŸç”Ÿæ”¯æŒã€‚ Goroutineç›¸æ¯”ä¼ ç»Ÿæ“ä½œç³»ç»Ÿçº¿ç¨‹æ¥è¯´ï¼Œgoroutine çš„ä¼˜åŠ¿ä¸»è¦æ˜¯ï¼š èµ„æºå ç”¨å°ï¼Œæ¯ä¸ª goroutine çš„åˆå§‹æ ˆå¤§å°ä»…ä¸º 2k ç”± Go è¿è¡Œæ—¶è€Œä¸æ˜¯æ“ä½œç³»ç»Ÿè°ƒåº¦ï¼Œgoroutine ä¸Šä¸‹æ–‡åˆ‡æ¢åœ¨ç”¨æˆ·å±‚å®Œæˆï¼Œå¼€é”€æ›´å° åœ¨è¯­è¨€å±‚é¢è€Œä¸æ˜¯é€šè¿‡æ ‡å‡†åº“æä¾›ã€‚goroutine ç”±go å…³é”®å­—åˆ›å»ºï¼Œä¸€é€€å‡ºå°±ä¼šè¢«å›æ”¶æˆ–é”€æ¯ï¼Œå¼€å‘ä½“éªŒæ›´ä½³ è¯­è¨€å†…ç½® channel ä½œä¸º goroutine é—´é€šä¿¡åŸè¯­ï¼Œä¸ºå¹¶å‘è®¾è®¡æä¾›äº†å¼ºå¤§æ”¯æ’‘ã€‚ åˆ›å»ºGo è¯­è¨€é€šè¿‡goå…³é”®å­— +å‡½æ•°/æ–¹æ³• çš„æ–¹å¼åˆ›å»ºä¸€ä¸ª goroutineã€‚ åˆ›å»ºåï¼Œæ–° goroutine å°†æ‹¥æœ‰ç‹¬ç«‹çš„ä»£ç æ‰§è¡Œæµï¼Œå¹¶ä¸åˆ›å»ºå®ƒçš„ goroutine ä¸€èµ·è¢« Go è¿è¡Œæ—¶è°ƒåº¦ã€‚ 123456789go fmt.Println(&quot;I am a goroutine&quot;)var c = make(chan int)go func(a, b int) &#123; // åŒ¿åå‡½æ•°/é—­åŒ… c &lt;- a + b&#125;(3,4) // $GOROOT/src/net/http/server.goc := srv.newConn(rw)go c.serve(connCtx) // å‘½åå‡½æ•°/æ–¹æ³• ä¸éœ€è¦è€ƒè™‘å¯¹ goroutine çš„é€€å‡ºè¿›è¡Œæ§åˆ¶ï¼šgoroutine çš„æ‰§è¡Œå‡½æ•°çš„è¿”å›ï¼Œå°±æ„å‘³ç€ goroutine é€€å‡ºã€‚ å¦‚æœéœ€è¦æ‰‹åŠ¨æ§åˆ¶ï¼Œé€šè¿‡ channel å®ç° Channelä¼ ç»Ÿè¯­è¨€çš„å¹¶å‘æ¨¡å‹æ˜¯åŸºäºå¯¹å†…å­˜çš„å…±äº«çš„ ä¼ ç»Ÿçš„ç¼–ç¨‹è¯­è¨€ï¼ˆæ¯”å¦‚ï¼šC++ã€Javaã€Python ç­‰ï¼‰å¹¶éé¢å‘å¹¶å‘è€Œç”Ÿçš„ï¼Œæ‰€ä»¥ä»–ä»¬é¢å¯¹å¹¶å‘çš„é€»è¾‘å¤šæ˜¯åŸºäºæ“ä½œç³»ç»Ÿçš„çº¿ç¨‹ã€‚ å¹¶å‘çš„æ‰§è¡Œå•å…ƒï¼ˆçº¿ç¨‹ï¼‰ä¹‹é—´çš„é€šä¿¡ï¼Œåˆ©ç”¨çš„ä¹Ÿæ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„çº¿ç¨‹æˆ–è¿›ç¨‹é—´é€šä¿¡çš„åŸè¯­ï¼Œ æ¯”å¦‚ï¼šå…±äº«å†…å­˜ã€ä¿¡å·ï¼ˆsignalï¼‰ã€ç®¡é“ï¼ˆpipeï¼‰ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å¥—æ¥å­—ï¼ˆsocketï¼‰ç­‰ã€‚ channel æ—¢å¯ä»¥ç”¨æ¥å®ç° Goroutine é—´çš„é€šä¿¡ï¼Œè¿˜å¯ä»¥å®ç° Goroutine é—´çš„åŒæ­¥ã€‚ åˆ›å»ºå’Œåˆ‡ç‰‡ã€ç»“æ„ä½“ã€map ç­‰ä¸€æ ·ï¼Œchannel ä¹Ÿæ˜¯ä¸€ç§å¤åˆæ•°æ®ç±»å‹ã€‚ channel ç±»å‹å˜é‡èµ‹åˆå€¼çš„å”¯ä¸€æ–¹æ³•æ˜¯ä½¿ç”¨ make ã€‚ 1234567var ch chan int // å£°æ˜ int ç±»å‹çš„ channel ç±»å‹å˜é‡ï¼Œé»˜è®¤å€¼ä¸º nilch1 := make(chan int) //æ— ç¼“å†²ch2 := make(chan int, 5) //å¸¦ç¼“å†²ï¼Œ5æ˜¯ç¼“å†²é•¿åº¦ch1 := make(chan&lt;- int, 1) // åªå‘é€channelç±»å‹ch2 := make(&lt;-chan int, 1) // åªæ¥æ”¶channelç±»å‹ å‘é€å’Œæ¥æ”¶Go æä¾›äº† &lt;- æ“ä½œç¬¦ç”¨äºå¯¹ channel ç±»å‹å˜é‡è¿›è¡Œå‘é€ä¸æ¥æ”¶æ“ä½œï¼š 1234ch1 &lt;- 13 // å°†æ•´å‹å­—é¢å€¼13å‘é€åˆ°æ— ç¼“å†²channelç±»å‹å˜é‡ch1ä¸­n := &lt;- ch1 // ä»æ— ç¼“å†²channelç±»å‹å˜é‡ch1ä¸­æ¥æ”¶ä¸€ä¸ªæ•´å‹å€¼å­˜å‚¨åˆ°æ•´å‹å˜é‡nä¸­ch2 &lt;- 17 // å°†æ•´å‹å­—é¢å€¼17å‘é€åˆ°å¸¦ç¼“å†²channelç±»å‹å˜é‡ch2ä¸­m := &lt;- ch2 // ä»å¸¦ç¼“å†²channelç±»å‹å˜é‡ch2ä¸­æ¥æ”¶ä¸€ä¸ªæ•´å‹å€¼å­˜å‚¨åˆ°æ•´å‹å˜é‡mä¸­ æ— ç¼“å†² channelï¼šå‘é€ä¸æ¥æ”¶æ“ä½œåŒæ­¥ï¼Œä¸€å®šè¦æ”¾åœ¨ä¸¤ä¸ªä¸åŒçš„ Goroutine ä¸­è¿›è¡Œï¼Œå¦åˆ™ä¼šå¯¼è‡´ deadlock å¸¦ç¼“å†² channelï¼šå‘é€æˆ–æ¥æ”¶ä¸éœ€è¦é˜»å¡ç­‰å¾…ï¼Œå¼‚æ­¥ 123456ch2 := make(chan int, 1)n := &lt;-ch2 // ç”±äºæ­¤æ—¶ch2çš„ç¼“å†²åŒºä¸­æ— æ•°æ®ï¼Œå› æ­¤å¯¹å…¶è¿›è¡Œæ¥æ”¶æ“ä½œå°†å¯¼è‡´goroutineæŒ‚èµ·ch3 := make(chan int, 1)ch3 &lt;- 17 // å‘ch3å‘é€ä¸€ä¸ªæ•´å‹æ•°17ch3 &lt;- 27 // ç”±äºæ­¤æ—¶ch3ä¸­ç¼“å†²åŒºå·²æ»¡ï¼Œå†å‘ch3å‘é€æ•°æ®ä¹Ÿå°†å¯¼è‡´goroutineæŒ‚èµ· å…³é—­è°ƒç”¨ go å†…ç½®çš„ close() å‡½æ•°ï¼Œå‘é€ç«¯è´Ÿè´£å…³é—­ channel 123456789close(ch)// åˆ¤æ–­æ˜¯å¦å…³é—­å¯ä»¥ç”¨ c,okn := &lt;- ch // å½“chè¢«å…³é—­åï¼Œnå°†è¢«èµ‹å€¼ä¸ºchå…ƒç´ ç±»å‹çš„é›¶å€¼m, ok := &lt;-ch // å½“chè¢«å…³é—­åï¼Œmå°†è¢«èµ‹å€¼ä¸ºchå…ƒç´ ç±»å‹çš„é›¶å€¼, okå€¼ä¸ºfalsefor v := range ch &#123; // å½“chè¢«å…³é—­åï¼Œfor rangeå¾ªç¯ç»“æŸ ... ...&#125; Selecté€šè¿‡ selectï¼Œæˆ‘ä»¬å¯ä»¥åŒæ—¶åœ¨å¤šä¸ª channel ä¸Šè¿›è¡Œå‘é€ &#x2F; æ¥æ”¶æ“ä½œï¼š 123456789101112select &#123;case x := &lt;-ch1: // ä»channel ch1æ¥æ”¶æ•°æ® ... ...case y, ok := &lt;-ch2: // ä»channel ch2æ¥æ”¶æ•°æ®ï¼Œå¹¶æ ¹æ®okå€¼åˆ¤æ–­ch2æ˜¯å¦å·²ç»å…³é—­ ... ...case ch3 &lt;- z: // å°†zå€¼å‘é€åˆ°channel ch3ä¸­: ... ...default: // å½“ä¸Šé¢caseä¸­çš„channelé€šä¿¡å‡æ— æ³•å®æ–½æ—¶ï¼Œæ‰§è¡Œè¯¥é»˜è®¤åˆ†æ”¯&#125; channel å’Œ select çš„ç»“åˆä½¿ç”¨èƒ½å½¢æˆå¼ºå¤§çš„è¡¨è¾¾èƒ½åŠ›ï¼š åˆ©ç”¨ default åˆ†æ”¯é¿å…é˜»å¡ å®ç°è¶…æ—¶æœºåˆ¶ å®ç°å¿ƒè·³æœºåˆ¶ Lenlen æ˜¯ Go è¯­è¨€çš„ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œå®ƒæ”¯æŒæ¥æ”¶æ•°ç»„ã€åˆ‡ç‰‡ã€mapã€å­—ç¬¦ä¸²å’Œ channel ç±»å‹çš„å‚æ•°ï¼Œå¹¶è¿”å›å¯¹åº”ç±»å‹çš„â€œé•¿åº¦â€ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæ•´å‹å€¼ã€‚ é’ˆå¯¹ channel ch çš„ç±»å‹ä¸åŒï¼Œlen(ch) æœ‰å¦‚ä¸‹ä¸¤ç§è¯­ä¹‰ï¼š å½“ ch ä¸ºæ— ç¼“å†² channel æ—¶ï¼Œlen(ch) æ€»æ˜¯è¿”å› 0 å½“ ch ä¸ºå¸¦ç¼“å†² channel æ—¶ï¼Œlen(ch) è¿”å›å½“å‰ channel ch ä¸­å°šæœªè¢«è¯»å–çš„å…ƒç´ ä¸ªæ•° åº”ç”¨æ— ç¼“å†²æ— ç¼“å†² channel å…¼å…·é€šä¿¡å’ŒåŒæ­¥ç‰¹æ€§ï¼Œåœ¨å¹¶å‘ç¨‹åºä¸­åº”ç”¨é¢‡ä¸ºå¹¿æ³›ã€‚ ä¿¡å·ä¼ é€’ æ›¿ä»£é”æœºåˆ¶ å¸¦ç¼“å†²å¸¦ç¼“å†²çš„ channel ä¸æ— ç¼“å†²çš„ channel çš„æœ€å¤§ä¸åŒä¹‹å¤„ï¼Œå°±åœ¨äºå®ƒçš„å¼‚æ­¥æ€§ã€‚ å¯¹ä¸€ä¸ªå¸¦ç¼“å†² channelï¼š åœ¨ç¼“å†²åŒºæœªæ»¡çš„æƒ…å†µä¸‹ï¼Œå¯¹å®ƒè¿›è¡Œå‘é€æ“ä½œçš„ Goroutine ä¸ä¼šé˜»å¡æŒ‚èµ· åœ¨ç¼“å†²åŒºæœ‰æ•°æ®çš„æƒ…å†µä¸‹ï¼Œå¯¹å®ƒè¿›è¡Œæ¥æ”¶æ“ä½œçš„ Goroutine ä¹Ÿä¸ä¼šé˜»å¡æŒ‚èµ· æ‰€ä»¥å¯ä»¥ç”¨äºï¼š æ¶ˆæ¯é˜Ÿåˆ— è®¡æ•°ä¿¡å·é‡ å¸¸ç”¨åŒ…Stringsä½œä¸ºä¸€ç§åŸºæœ¬æ•°æ®ç»“æ„ï¼Œæ¯ç§è¯­è¨€éƒ½æœ‰ä¸€äº›å¯¹äºå­—ç¬¦ä¸²çš„é¢„å®šä¹‰å¤„ç†å‡½æ•°ã€‚Go ä¸­ä½¿ç”¨ strings åŒ…æ¥å®Œæˆå¯¹å­—ç¬¦ä¸²çš„ä¸»è¦æ“ä½œã€‚ strings package - strings - pkg.go.dev å¸¸ç”¨å‡½æ•°ï¼š 12345678910111213141516171819202122232425262728// åˆ¤æ–­å‰ç¼€strings.HasPrefix(s, prefix string) bool // åˆ¤æ–­åç¼€strings.HasSuffix(s, suffix string) bool// å­—ç¬¦ä¸²åŒ…å«strings.Contains(s, substr string) bool// å­—ç¬¦ä¸²æ›¿æ¢strings.Replace(str, old, new string, n int) string // æ›¿æ¢oldçš„å‰ n ä¸ªå­—ç¬¦ï¼Œ n=-1 æ›¿æ¢æ•´ä¸ª old// åˆ¤æ–­ç´¢å¼•ï¼ˆå‡ºç°ä½ç½®ï¼‰strings.Index(s, str string) int // -1 è¡¨ç¤ºä¸åŒ…å«strings.LastIndex(s, str string) int // æœ€åå‡ºç°çš„ä½ç½®strings.IndexRune(s string, r rune) int // é ASCII ç¼–ç çš„å­—ç¬¦ï¼Œstrings.IndexRune(&quot;chicken&quot;, 99)// å‡ºç°æ¬¡æ•°strings.Count(s, str string) int// é‡å¤å­—ç¬¦ä¸²strings.Repeat(s, count int) string //é‡å¤ count æ¬¡å­—ç¬¦ä¸² s å¹¶è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²// å¤§å°å†™è½¬æ¢strings.ToLower(s) stringstrings.ToUpper(s) string// ä¿®å‰ªstrings.TrimSpace(s) // å‰”é™¤å¼€å¤´å’Œç»“å°¾çš„ç©ºç™½ç¬¦å·strings.Trim(s, &quot;cut&quot;) // å‰”é™¤å¼€å¤´å’Œç»“å°¾æŒ‡å®šå­—ç¬¦ï¼ŒTrimLeftï¼ŒTrimRight åªå‰”é™¤ä¸€è¾¹// åˆ†å‰²ï¼Œè¿”å› slicestrings.Fields(s) // ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªç©ºç™½åˆ†å‰²ï¼Œå…¨æ˜¯ç©ºç™½åˆ™è¿”å›é•¿åº¦ 0 çš„åˆ‡ç‰‡strings.Split(s, sep) // ç”¨æŒ‡å®šå­—ç¬¦ä¸² seq åˆ†å‰²// æ‹¼æ¥strings.Join(sl []string, sep string) string // seq ä¸ºåˆ†éš”ç¬¦ï¼Œ sl ä¸ºå­—ç¬¦ä¸²åˆ‡ç‰‡// ä¾‹å¦‚ï¼šstrings.Join([]string&#123;&quot;åˆ é™¤ï¼šæ–‡ä»¶å¤¹&quot;, path&#125;, &quot; &quot;) Strconvä¸å­—ç¬¦ä¸²ç›¸å…³çš„ç±»å‹è½¬æ¢éƒ½æ˜¯é€šè¿‡ strconv åŒ…å®ç°çš„ã€‚ strconv package - strconv - pkg.go.dev å¸¸ç”¨å‡½æ•°ï¼š 1234567891011strconv.IntSize // å½“å‰æ“ä½œç³»ç»Ÿ int æ‰€å ä½ç½®// æ•´æ•°è½¬å­—ç¬¦ä¸²strconv.Itoa(i int) string// æµ®ç‚¹æ•°è½¬å­—ç¬¦ä¸²strconv.FormatFloat(f float64, fmt byte, prec int, bitSize int) string // å…¶ä¸­ fmt è¡¨ç¤ºæ ¼å¼ï¼ˆå…¶å€¼å¯ä»¥æ˜¯ &#x27;b&#x27;ã€&#x27;e&#x27;ã€&#x27;f&#x27; æˆ– &#x27;g&#x27;ï¼‰ // prec è¡¨ç¤ºç²¾åº¦ï¼ŒbitSize åˆ™ä½¿ç”¨ 32 è¡¨ç¤º float32ï¼Œç”¨ 64 è¡¨ç¤º float64// å­—ç¬¦ä¸²è½¬æ•´æ•°strconv.Atoi(s string) (i int, err error)// æµ®ç‚¹æ•°è½¬å­—ç¬¦ä¸²strconv.ParseFloat(s string, bitSize int) (f float64, err error) Timetime åŒ…ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ•°æ®ç±»å‹ time.Timeï¼ˆä½œä¸ºå€¼ä½¿ç”¨ï¼‰ä»¥åŠæ˜¾ç¤ºå’Œæµ‹é‡æ—¶é—´å’Œæ—¥æœŸçš„åŠŸèƒ½å‡½æ•°ã€‚ time package - time - pkg.go.dev å¸¸ç”¨å‡½æ•°ï¼š 12345t := time.Now() // å½“å‰æ—¶é—´t.Day()t.Minute()// æ ‡å‡†æ ¼å¼åŒ–t.Format(&quot;02 Jan 2006 15:04&quot;) // è¾“å‡º 21 Jul 2011 10:31","categories":[{"name":"Programming Language","slug":"Programming-Language","permalink":"http://blog.sukiu.top/categories/Programming-Language/"},{"name":"Go","slug":"Programming-Language/Go","permalink":"http://blog.sukiu.top/categories/Programming-Language/Go/"}],"tags":[{"name":"Go","slug":"Go","permalink":"http://blog.sukiu.top/tags/Go/"}]},{"title":"è¿›ç¨‹ç®¡ç†","slug":"Process-And-Thread","date":"2022-01-15T11:03:00.000Z","updated":"2022-01-15T11:03:00.000Z","comments":true,"path":"Computer-Basics/Operating-System/Process-And-Thread/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Operating-System/Process-And-Thread/","excerpt":"çº¿ç¨‹æ˜¯æœ€å°çš„æ‰§è¡Œå•å…ƒï¼Œè€Œè¿›ç¨‹ç”±è‡³å°‘ä¸€ä¸ªçº¿ç¨‹ç»„æˆã€‚ å¦‚ä½•è°ƒåº¦è¿›ç¨‹å’Œçº¿ç¨‹ï¼Œå®Œå…¨ç”±æ“ä½œç³»ç»Ÿå†³å®šï¼Œç¨‹åºè‡ªå·±ä¸èƒ½å†³å®šä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Œæ‰§è¡Œå¤šé•¿æ—¶é—´ã€‚ å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹çš„ç¨‹åºæ¶‰åŠåˆ°åŒæ­¥ã€æ•°æ®å…±äº«çš„é—®é¢˜ï¼Œç¼–å†™èµ·æ¥æ›´å¤æ‚ã€‚","text":"çº¿ç¨‹æ˜¯æœ€å°çš„æ‰§è¡Œå•å…ƒï¼Œè€Œè¿›ç¨‹ç”±è‡³å°‘ä¸€ä¸ªçº¿ç¨‹ç»„æˆã€‚ å¦‚ä½•è°ƒåº¦è¿›ç¨‹å’Œçº¿ç¨‹ï¼Œå®Œå…¨ç”±æ“ä½œç³»ç»Ÿå†³å®šï¼Œç¨‹åºè‡ªå·±ä¸èƒ½å†³å®šä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Œæ‰§è¡Œå¤šé•¿æ—¶é—´ã€‚ å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹çš„ç¨‹åºæ¶‰åŠåˆ°åŒæ­¥ã€æ•°æ®å…±äº«çš„é—®é¢˜ï¼Œç¼–å†™èµ·æ¥æ›´å¤æ‚ã€‚ è¿›ç¨‹æ¦‚å¿µè¿›ç¨‹æˆ‘ä»¬ç¼–è¯‘çš„ä»£ç å¯æ‰§è¡Œæ–‡ä»¶åªæ˜¯å‚¨å­˜åœ¨ç¡¬ç›˜çš„é™æ€æ–‡ä»¶ï¼Œè¿è¡Œæ—¶è¢«åŠ è½½åˆ°å†…å­˜ï¼ŒCPU æ‰§è¡Œå†…å­˜ä¸­æŒ‡ä»¤ï¼Œè¿™ä¸ªè¿è¡Œçš„ç¨‹åºè¢«ç§°ä¸ºè¿›ç¨‹ã€‚ è¿›ç¨‹æ˜¯å¯¹è¿è¡Œæ—¶ç¨‹åºçš„å°è£…ï¼Œæ“ä½œç³»ç»Ÿè¿›è¡Œèµ„æºè°ƒåº¦å’Œåˆ†é…çš„åŸºæœ¬å•ä½ã€‚ å¦‚æœåŒ…å«çº¿ç¨‹çš„è¯ï¼Œè¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œçº¿ç¨‹æ˜¯ç‹¬ç«‹è°ƒåº¦çš„åŸºæœ¬å•ä½ã€‚ çº¿ç¨‹ çº¿ç¨‹æ˜¯è½»é‡çº§è¿›ç¨‹ (light-weight process)ï¼Œä¹Ÿæœ‰ PCBï¼Œåˆ›å»ºçº¿ç¨‹ä½¿ç”¨çš„åº•å±‚å‡½æ•°å’Œè¿›ç¨‹â¼€æ ·ï¼Œéƒ½æ˜¯ clone ä»å†…æ ¸â¾¥çœ‹è¿›ç¨‹å’Œçº¿ç¨‹æ˜¯â¼€æ ·çš„ï¼Œéƒ½æœ‰å„è‡ªä¸åŒçš„ PCB è¿›ç¨‹å¯ä»¥èœ•å˜æˆçº¿ç¨‹ åœ¨ linux ä¸‹ï¼Œçº¿ç¨‹æœ€æ˜¯å°çš„æ‰§â¾å•ä½ï¼›è¿›ç¨‹æ˜¯æœ€å°çš„åˆ†é…èµ„æºå•ä½ è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«ï¼š â… æ‹¥æœ‰èµ„æº è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œä½†æ˜¯çº¿ç¨‹ä¸æ‹¥æœ‰èµ„æºï¼Œçº¿ç¨‹å¯ä»¥è®¿é—®éš¶å±è¿›ç¨‹çš„èµ„æºã€‚ â…¡ è°ƒåº¦ çº¿ç¨‹æ˜¯ç‹¬ç«‹è°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œåœ¨åŒä¸€è¿›ç¨‹ä¸­ï¼Œçº¿ç¨‹çš„åˆ‡æ¢ä¸ä¼šå¼•èµ·è¿›ç¨‹åˆ‡æ¢ï¼Œä»ä¸€ä¸ªè¿›ç¨‹ä¸­çš„çº¿ç¨‹åˆ‡æ¢åˆ°å¦ä¸€ä¸ªè¿›ç¨‹ä¸­çš„çº¿ç¨‹æ—¶ï¼Œä¼šå¼•èµ·è¿›ç¨‹åˆ‡æ¢ã€‚ â…¢ ç³»ç»Ÿå¼€é”€ ç”±äºåˆ›å»ºæˆ–æ’¤é”€è¿›ç¨‹æ—¶ï¼Œç³»ç»Ÿéƒ½è¦ä¸ºä¹‹åˆ†é…æˆ–å›æ”¶èµ„æºï¼Œå¦‚å†…å­˜ç©ºé—´ã€I&#x2F;O è®¾å¤‡ç­‰ï¼Œæ‰€ä»˜å‡ºçš„å¼€é”€è¿œå¤§äºåˆ›å»ºæˆ–æ’¤é”€çº¿ç¨‹æ—¶çš„å¼€é”€ã€‚ç±»ä¼¼åœ°ï¼Œåœ¨è¿›è¡Œè¿›ç¨‹åˆ‡æ¢æ—¶ï¼Œæ¶‰åŠå½“å‰æ‰§è¡Œè¿›ç¨‹ CPU ç¯å¢ƒçš„ä¿å­˜åŠæ–°è°ƒåº¦è¿›ç¨‹ CPU ç¯å¢ƒçš„è®¾ç½®ï¼Œè€Œçº¿ç¨‹åˆ‡æ¢æ—¶åªéœ€ä¿å­˜å’Œè®¾ç½®å°‘é‡å¯„å­˜å™¨å†…å®¹ï¼Œå¼€é”€å¾ˆå°ã€‚ â…£ é€šä¿¡æ–¹é¢ çº¿ç¨‹é—´å¯ä»¥é€šè¿‡ç›´æ¥è¯»å†™åŒä¸€è¿›ç¨‹ä¸­çš„æ•°æ®è¿›è¡Œé€šä¿¡ï¼Œä½†æ˜¯è¿›ç¨‹é€šä¿¡éœ€è¦å€ŸåŠ© IPCã€‚ è¿›ç¨‹æ§åˆ¶å—ä¸ºäº†å®ç°è¿›ç¨‹æ¨¡å‹ï¼Œæ“ä½œç³»ç»Ÿç»´æŠ¤ç€â¼€å¼ è¡¨æ ¼ (â¼€ä¸ªç»“æ„æ•°ç»„)ï¼Œå³è¿›ç¨‹è¡¨ã€‚ æ¯ä¸ªè¿›ç¨‹å æœ‰â¼€ä¸ªè¿›ç¨‹è¡¨é¡¹ (è¿›ç¨‹æ§åˆ¶å—)ã€‚ è¿›ç¨‹æ§åˆ¶å— (Process Control Block, PCB) æè¿°è¿›ç¨‹çš„åŸºæœ¬ä¿¡æ¯å’Œè¿è¡ŒçŠ¶æ€ï¼Œæ‰€è°“çš„åˆ›å»ºè¿›ç¨‹å’Œæ’¤é”€è¿›ç¨‹ï¼Œéƒ½æ˜¯æŒ‡å¯¹ PCB çš„æ“ä½œã€‚ è¯¥è¡¨é¡¹æ˜¯è¿›ç¨‹å­˜åœ¨çš„å”¯â¼€æ ‡è¯†ï¼Œå…¶åŒ…æ‹¬ä»¥ä¸‹ä¿¡æ¯ï¼š è¿›ç¨‹æè¿°ä¿¡æ¯ï¼š è¿›ç¨‹æ ‡è¯†ç¬¦ã€ç”¨æˆ·æ ‡è¯†ç¬¦ç­‰ è¿›ç¨‹æ§åˆ¶å’Œç®¡ç†ä¿¡æ¯ï¼š è¿›ç¨‹çŠ¶æ€ï¼Œè¿›ç¨‹ä¼˜å…ˆçº§ç­‰ è¿›ç¨‹èµ„æºåˆ†é…æ¸…å•ï¼š è™šæ‹Ÿå†…å­˜åœ°å€ç©ºé—´ä¿¡æ¯ï¼Œæ‰“å¼€æ–‡ä»¶åˆ—è¡¨ï¼ŒIO è®¾å¤‡ä¿¡æ¯ç­‰ CPU ç›¸å…³ä¿¡æ¯ï¼š å½“è¿›ç¨‹åˆ‡æ¢æ—¶ï¼ŒCPU å¯„å­˜å™¨çš„å€¼éƒ½è¢«ä¿å­˜åœ¨ç›¸åº” PCB ä¸­ï¼Œä»¥ä¾¿ CPU é‡æ–°æ‰§è¡Œè¯¥è¿›ç¨‹æ—¶èƒ½ä»æ–­ç‚¹å¤„ç»§ç»­æ‰§è¡Œ PCB é€šè¿‡é“¾è¡¨å½¢å¼ç»„ç»‡èµ·æ¥ï¼Œæ¯”å¦‚æœ‰å°±ç»ªé˜Ÿåˆ—ã€é˜»å¡é˜Ÿåˆ—ç­‰ï¼Œæ–¹ä¾¿å¢åˆ ï¼Œæ–¹ä¾¿è¿›ç¨‹ç®¡ç†ã€‚ å¹¶å‘ä¸å¹¶è¡Œ å•ä¸ªæ ¸å¿ƒåœ¨å¾ˆçŸ­æ—¶é—´å†…åˆ†åˆ«æ‰§è¡Œå¤šä¸ªè¿›ç¨‹ï¼Œç§°ä¸ºå¹¶å‘ï¼ˆåŒä¸€æ—¶é—´æ®µï¼‰ å¤šä¸ªæ ¸â¼¼åŒæ—¶æ‰§è¡Œå¤šä¸ªè¿›ç¨‹ç§°ä¸ºå¹¶è¡Œï¼ˆåŒä¸€æ—¶åˆ»ï¼‰ å¯¹äºå¹¶å‘æ¥è¯´ï¼ŒCPU éœ€è¦ä»â¼€ä¸ªè¿›ç¨‹åˆ‡æ¢åˆ°å¦â¼€ä¸ªè¿›ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦ä¿å­˜è¿›ç¨‹çš„çŠ¶æ€ä¿¡æ¯ è¿›ç¨‹çŠ¶æ€é™¤äº†åˆ›å»ºå’Œç»“æŸâ¼€èˆ¬æœ‰ä¸‰ä¸ªçŠ¶æ€ï¼š è¿è¡Œæ€ï¼š è¯¥æ—¶åˆ»è¿›ç¨‹å ç”¨ CPU å°±ç»ªæ€ï¼š å¯è¿è¡Œï¼Œç”±äºå…¶ä»–è¿›ç¨‹å¤„äºè¿è¡ŒçŠ¶æ€è€Œæš‚æ—¶åœæ­¢è¿è¡Œ ç­‰å¾…è¢«è°ƒåº¦ é˜»å¡æ€ï¼š è¯¥è¿›ç¨‹æ­£åœ¨ç­‰å¾…æŸâ¼€äº‹ä»¶å‘ç”Ÿï¼ˆå¦‚ç­‰å¾…è¾“â¼Š&#x2F;è¾“å‡ºæ“ä½œçš„å®Œæˆï¼‰è€Œæš‚æ—¶åœæ­¢è¿è¡Œ ç­‰å¾…èµ„æº é˜»å¡æ€çš„è¿›ç¨‹å ç”¨ç€ç‰©ç†å†…å­˜ï¼Œåœ¨è™šæ‹Ÿå†…å­˜ç®¡ç†çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œé€šå¸¸ä¼šæŠŠé˜»å¡æ€çš„è¿›ç¨‹çš„ç‰©ç†å†…å­˜ç©ºé—´æ¢å‡ºåˆ°ç¡¬ç›˜ï¼Œç­‰éœ€è¦å†æ¬¡è¿è¡Œçš„æ—¶å€™ï¼Œå†ä»ç¡¬ç›˜æ¢â¼Šåˆ°ç‰©ç†å†…å­˜ã€‚ æŒ‚èµ·æ€ï¼šæ–°çš„çŠ¶æ€ï¼Œæè¿°è¿›ç¨‹æ²¡æœ‰å ç”¨å®é™…çš„ç‰©ç†å†…å­˜ç©ºé—´çš„æƒ…å†µï¼Œè¿™ä¸ªçŠ¶æ€å°±æ˜¯æŒ‚èµ·çŠ¶æ€ é˜»å¡æŒ‚èµ·çŠ¶æ€ï¼š è¿›ç¨‹åœ¨å¤–å­˜ï¼ˆç¡¬ç›˜ï¼‰å¹¶ç­‰å¾…æŸä¸ªäº‹ä»¶çš„å‡ºç° å°±ç»ªæŒ‚èµ·çŠ¶æ€ï¼š è¿›ç¨‹åœ¨å¤–å­˜ï¼ˆç¡¬ç›˜ï¼‰ï¼Œä½†åªè¦è¿›â¼Šå†…å­˜ï¼Œé©¬ä¸Šè¿è¡Œ æ³¨æ„ï¼š åªæœ‰å°±ç»ªæ€å’Œè¿è¡Œæ€å¯ä»¥ç›¸äº’è½¬æ¢ï¼Œå…¶å®ƒçš„éƒ½æ˜¯å•å‘è½¬æ¢ã€‚ å°±ç»ªçŠ¶æ€çš„è¿›ç¨‹é€šè¿‡è°ƒåº¦ç®—æ³•ä»è€Œè·å¾— CPU æ—¶é—´ï¼Œè½¬ä¸ºè¿è¡ŒçŠ¶æ€ è¿è¡ŒçŠ¶æ€çš„è¿›ç¨‹ï¼Œåœ¨åˆ†é…ç»™å®ƒçš„ CPU æ—¶é—´ç‰‡ç”¨å®Œä¹‹åå°±ä¼šè½¬ä¸ºå°±ç»ªçŠ¶æ€ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡è°ƒåº¦ é˜»å¡çŠ¶æ€æ˜¯ç¼ºå°‘éœ€è¦çš„èµ„æºä»è€Œç”±è¿è¡ŒçŠ¶æ€è½¬æ¢è€Œæ¥ï¼Œä½†æ˜¯è¯¥èµ„æºä¸åŒ…æ‹¬ CPU æ—¶é—´ï¼Œç¼ºå°‘ CPU æ—¶é—´ä¼šä»è¿è¡Œæ€è½¬æ¢ä¸ºå°±ç»ªæ€ã€‚ å®ˆæŠ¤è¿›ç¨‹å®ˆæŠ¤è¿›ç¨‹ï¼ˆDaemon Processï¼‰ï¼Œä¹Ÿå°±æ˜¯é€šå¸¸è¯´çš„ Daemon è¿›ç¨‹ï¼ˆç²¾çµè¿›ç¨‹ï¼‰ï¼Œæ˜¯ Linux ä¸­çš„åå°æœåŠ¡è¿›ç¨‹ã€‚ å®ƒæ˜¯â¼€ä¸ªç”Ÿå­˜æœŸè¾ƒé•¿çš„è¿›ç¨‹ï¼Œé€šå¸¸ç‹¬ç«‹äºæ§åˆ¶ç»ˆç«¯å¹¶ä¸”å‘¨æœŸæ€§åœ°æ‰§è¡ŒæŸç§ä»»åŠ¡æˆ–ç­‰å¾…å¤„ç†æŸäº›å‘ç”Ÿçš„äº‹ä»¶ â¼€èˆ¬é‡‡ç”¨ä»¥ d ç»“å°¾çš„åå­— æ‰€æœ‰çš„æœåŠ¡å­˜åœ¨äº etc&#x2F;init.d å®ˆæŠ¤è¿›ç¨‹æ˜¯ä¸ªç‰¹æ®Šçš„å­¤å„¿è¿›ç¨‹ ä¹‹æ‰€ä»¥è„±ç¦»äºç»ˆç«¯æ˜¯ä¸ºäº†é¿å…è¿›ç¨‹è¢«ä»»ä½•ç»ˆç«¯æ‰€äº§ç”Ÿçš„ä¿¡æ¯æ‰€æ‰“æ–­ï¼Œå…¶åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä¿¡æ¯ä¹Ÿä¸åœ¨ä»»ä½•ç»ˆç«¯ä¸Šæ˜¾ç¤º Linux çš„â¼¤å¤šæ•°æœåŠ¡å™¨å°±æ˜¯ç”¨å®ˆæŠ¤è¿›ç¨‹å®ç°çš„ åƒµå°¸è¿›ç¨‹å¤šè¿›ç¨‹ç¨‹åºï¼Œçˆ¶è¿›ç¨‹â¼€èˆ¬éœ€è¦è·Ÿè¸ªå­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ï¼Œå½“å­è¿›ç¨‹é€€å‡ºï¼Œçˆ¶è¿›ç¨‹åœ¨è¿è¡Œï¼Œå­è¿›ç¨‹å¿…é¡»ç­‰åˆ°çˆ¶è¿›ç¨‹æ•è·åˆ°äº†å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€æ‰çœŸæ­£ç»“æŸã€‚åœ¨å­è¿›ç¨‹ç»“æŸåï¼Œçˆ¶è¿›ç¨‹è¯»å–çŠ¶æ€å‰ï¼Œæ­¤æ—¶å­è¿›ç¨‹ä¸ºåƒµå°¸è¿›ç¨‹ã€‚ è®¾ç½®åƒµå°¸è¿›ç¨‹çš„ç›®çš„æ˜¯ç»´æŠ¤å­è¿›ç¨‹çš„ä¿¡æ¯ï¼Œä»¥ä¾¿çˆ¶è¿›ç¨‹åœ¨ä»¥åæŸä¸ªæ—¶å€™è·å–ã€‚ ä½†æ˜¯å­è¿›ç¨‹åœæ­¢åœ¨åƒµå°¸æ€ä¼šå æ®å†…æ ¸èµ„æºï¼Œæ‰€ä»¥éœ€è¦é¿å…åƒµå°¸è¿›ç¨‹çš„äº§ç”Ÿæˆ–ç«‹å³ç»“æŸå­è¿›ç¨‹çš„åƒµå°¸æ€ã€‚ å¤šè¿›ç¨‹è¿›ç¨‹ç»“æ„ç”±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼šä»£ç æ®µã€å †æ ˆæ®µã€æ•°æ®æ®µã€‚ ä»£ç æ®µæ˜¯é™æ€çš„â¼†è¿›åˆ¶ä»£ç ï¼Œå¤šä¸ªç¨‹åºå¯ä»¥å…±äº«ã€‚ çˆ¶è¿›ç¨‹åˆ›å»ºå­è¿›ç¨‹ä¹‹åï¼Œçˆ¶ã€å­è¿›ç¨‹é™¤äº† pid å¤–ï¼Œå‡ ä¹æ‰€æœ‰çš„éƒ¨åˆ†å‡ ä¹â¼€æ ·ã€‚ çˆ¶ã€å­è¿›ç¨‹å…±äº«å…¨éƒ¨æ•°æ®ï¼Œå­è¿›ç¨‹åœ¨å†™æ•°æ®æ—¶ä¼šä½¿ç”¨å†™æ—¶å¤åˆ¶æŠ€æœ¯å°†å…¬å…±çš„æ•°æ®é‡æ–°æ‹·è´â¼€ä»½ï¼Œä¹‹ååœ¨æ‹·è´å‡ºçš„æ•° æ®ä¸Šè¿›è¡Œæ“ä½œï¼›ä¸æ˜¯å¯¹åŒâ¼€å—æ•°æ®è¿›è¡Œæ“ä½œï¼›å¦‚æœå­è¿›ç¨‹æƒ³è¦è¿è¡Œè‡ªå·±çš„ä»£ç æ®µï¼Œè¿˜å¯ä»¥é€šè¿‡è°ƒç”¨ execv() å‡½æ•°é‡æ–°åŠ è½½æ–°çš„ä»£ç æ®µï¼Œä¹‹åå°±å’Œçˆ¶è¿›ç¨‹ç‹¬ç«‹å¼€äº†ã€‚ è¿›ç¨‹è°ƒåº¦ä¸åŒç¯å¢ƒçš„è°ƒåº¦ç®—æ³•ç›®æ ‡ä¸åŒï¼Œå› æ­¤éœ€è¦é’ˆå¯¹ä¸åŒç¯å¢ƒæ¥è®¨è®ºè°ƒåº¦ç®—æ³•ã€‚ æ‰¹å¤„ç†ç³»ç»Ÿæ‰¹å¤„ç†ç³»ç»Ÿæ²¡æœ‰å¤ªå¤šçš„ç”¨æˆ·æ“ä½œï¼Œåœ¨è¯¥ç³»ç»Ÿä¸­ï¼Œè°ƒåº¦ç®—æ³•ç›®æ ‡æ˜¯ä¿è¯ååé‡å’Œå‘¨è½¬æ—¶é—´ï¼ˆä»æäº¤åˆ°ç»ˆæ­¢çš„æ—¶é—´ï¼‰ã€‚ å…ˆæ¥å…ˆæœåŠ¡ First-come first-serverdï¼ˆFCFSï¼‰éæŠ¢å å¼çš„è°ƒåº¦ç®—æ³•ï¼ŒæŒ‰ç…§è¯·æ±‚çš„é¡ºåºè¿›è¡Œè°ƒåº¦ã€‚ æœ‰åˆ©äºé•¿ä½œä¸šï¼Œä½†ä¸åˆ©äºçŸ­ä½œä¸šï¼Œå› ä¸ºçŸ­ä½œä¸šå¿…é¡»ä¸€ç›´ç­‰å¾…å‰é¢çš„é•¿ä½œä¸šæ‰§è¡Œå®Œæ¯•æ‰èƒ½æ‰§è¡Œï¼Œè€Œé•¿ä½œä¸šåˆéœ€è¦æ‰§è¡Œå¾ˆé•¿æ—¶é—´ï¼Œé€ æˆäº†çŸ­ä½œä¸šç­‰å¾…æ—¶é—´è¿‡é•¿ã€‚ çŸ­ä½œä¸šä¼˜å…ˆ Shortest Job firstï¼ˆSJFï¼‰éæŠ¢å å¼çš„è°ƒåº¦ç®—æ³•ï¼ŒæŒ‰ä¼°è®¡è¿è¡Œæ—¶é—´æœ€çŸ­çš„é¡ºåºè¿›è¡Œè°ƒåº¦ã€‚ é•¿ä½œä¸šæœ‰å¯èƒ½ä¼šé¥¿æ­»ï¼Œå¤„äºä¸€ç›´ç­‰å¾…çŸ­ä½œä¸šæ‰§è¡Œå®Œæ¯•çš„çŠ¶æ€ã€‚å› ä¸ºå¦‚æœä¸€ç›´æœ‰çŸ­ä½œä¸šåˆ°æ¥ï¼Œé‚£ä¹ˆé•¿ä½œä¸šæ°¸è¿œå¾—ä¸åˆ°è°ƒåº¦ã€‚ æœ€çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆ Shortest Remaining Time nextï¼ˆSRTNï¼‰æœ€çŸ­ä½œä¸šä¼˜å…ˆçš„æŠ¢å å¼ç‰ˆæœ¬ï¼ŒæŒ‰å‰©ä½™è¿è¡Œæ—¶é—´çš„é¡ºåºè¿›è¡Œè°ƒåº¦ã€‚ å½“ä¸€ä¸ªæ–°çš„ä½œä¸šåˆ°è¾¾æ—¶ï¼Œå…¶æ•´ä¸ªè¿è¡Œæ—¶é—´ä¸å½“å‰è¿›ç¨‹çš„å‰©ä½™æ—¶é—´ä½œæ¯”è¾ƒã€‚å¦‚æœæ–°çš„è¿›ç¨‹éœ€è¦çš„æ—¶é—´æ›´å°‘ï¼Œåˆ™æŒ‚èµ·å½“å‰è¿›ç¨‹ï¼Œè¿è¡Œæ–°çš„è¿›ç¨‹ã€‚å¦åˆ™æ–°çš„è¿›ç¨‹ç­‰å¾…ã€‚ äº¤äº’å¼ç³»ç»Ÿäº¤äº’å¼ç³»ç»Ÿæœ‰å¤§é‡çš„ç”¨æˆ·äº¤äº’æ“ä½œï¼Œåœ¨è¯¥ç³»ç»Ÿä¸­è°ƒåº¦ç®—æ³•çš„ç›®æ ‡æ˜¯å¿«é€Ÿåœ°è¿›è¡Œå“åº”ã€‚ æ—¶é—´ç‰‡è½®è½¬å°†æ‰€æœ‰å°±ç»ªè¿›ç¨‹æŒ‰ FCFS çš„åŸåˆ™æ’æˆä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ¯æ¬¡è°ƒåº¦æ—¶ï¼ŒæŠŠ CPU æ—¶é—´åˆ†é…ç»™é˜Ÿé¦–è¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹å¯ä»¥æ‰§è¡Œä¸€ä¸ªæ—¶é—´ç‰‡ã€‚å½“æ—¶é—´ç‰‡ç”¨å®Œæ—¶ï¼Œç”±è®¡æ—¶å™¨å‘å‡ºæ—¶é’Ÿä¸­æ–­ï¼Œè°ƒåº¦ç¨‹åºä¾¿åœæ­¢è¯¥è¿›ç¨‹çš„æ‰§è¡Œï¼Œå¹¶å°†å®ƒé€å¾€å°±ç»ªé˜Ÿåˆ—çš„æœ«å°¾ï¼ŒåŒæ—¶ç»§ç»­æŠŠ CPU æ—¶é—´åˆ†é…ç»™é˜Ÿé¦–çš„è¿›ç¨‹ã€‚ æ—¶é—´ç‰‡è½®è½¬ç®—æ³•çš„æ•ˆç‡å’Œæ—¶é—´ç‰‡çš„å¤§å°æœ‰å¾ˆå¤§å…³ç³»ï¼Œå› ä¸ºè¿›ç¨‹åˆ‡æ¢éƒ½è¦ä¿å­˜è¿›ç¨‹çš„ä¿¡æ¯å¹¶ä¸”è½½å…¥æ–°è¿›ç¨‹çš„ä¿¡æ¯ å¦‚æœæ—¶é—´ç‰‡å¤ªå°ï¼Œä¼šå¯¼è‡´è¿›ç¨‹åˆ‡æ¢å¾—å¤ªé¢‘ç¹ï¼Œåœ¨è¿›ç¨‹åˆ‡æ¢ä¸Šå°±ä¼šèŠ±è¿‡å¤šæ—¶é—´ã€‚ è€Œå¦‚æœæ—¶é—´ç‰‡è¿‡é•¿ï¼Œé‚£ä¹ˆå®æ—¶æ€§å°±ä¸èƒ½å¾—åˆ°ä¿è¯ã€‚ ä¼˜å…ˆçº§è°ƒåº¦ä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€ä¸ªä¼˜å…ˆçº§ï¼ŒæŒ‰ä¼˜å…ˆçº§è¿›è¡Œè°ƒåº¦ã€‚ ä¸ºäº†é˜²æ­¢ä½ä¼˜å…ˆçº§çš„è¿›ç¨‹æ°¸è¿œç­‰ä¸åˆ°è°ƒåº¦ï¼Œå¯ä»¥éšç€æ—¶é—´çš„æ¨ç§»å¢åŠ ç­‰å¾…è¿›ç¨‹çš„ä¼˜å…ˆçº§ã€‚ å¤šçº§åé¦ˆé˜Ÿåˆ—ä¸€ä¸ªè¿›ç¨‹éœ€è¦æ‰§è¡Œ 100 ä¸ªæ—¶é—´ç‰‡ï¼Œå¦‚æœé‡‡ç”¨æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•ï¼Œé‚£ä¹ˆéœ€è¦äº¤æ¢ 100 æ¬¡ã€‚ å¤šçº§é˜Ÿåˆ—æ˜¯ä¸ºè¿™ç§éœ€è¦è¿ç»­æ‰§è¡Œå¤šä¸ªæ—¶é—´ç‰‡çš„è¿›ç¨‹è€ƒè™‘ï¼Œå®ƒè®¾ç½®äº†å¤šä¸ªé˜Ÿåˆ—ï¼Œæ¯ä¸ªé˜Ÿåˆ—æ—¶é—´ç‰‡å¤§å°éƒ½ä¸åŒï¼Œ ä¾‹å¦‚ 1,2,4,8,..ã€‚è¿›ç¨‹åœ¨ç¬¬ä¸€ä¸ªé˜Ÿåˆ—æ²¡æ‰§è¡Œå®Œï¼Œå°±ä¼šè¢«ç§»åˆ°ä¸‹ä¸€ä¸ªé˜Ÿåˆ—ã€‚è¿™ç§æ–¹å¼ä¸‹ï¼Œä¹‹å‰çš„è¿›ç¨‹åªéœ€è¦äº¤æ¢ 7 æ¬¡ã€‚ æ¯ä¸ªé˜Ÿåˆ—ä¼˜å…ˆæƒä¹Ÿä¸åŒï¼Œæœ€ä¸Šé¢çš„ä¼˜å…ˆæƒæœ€é«˜ã€‚å› æ­¤åªæœ‰ä¸Šä¸€ä¸ªé˜Ÿåˆ—æ²¡æœ‰è¿›ç¨‹åœ¨æ’é˜Ÿï¼Œæ‰èƒ½è°ƒåº¦å½“å‰é˜Ÿåˆ—ä¸Šçš„è¿›ç¨‹ã€‚ å¯ä»¥å°†è¿™ç§è°ƒåº¦ç®—æ³•çœ‹æˆæ˜¯æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•å’Œä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•çš„ç»“åˆã€‚ å®æ—¶ç³»ç»Ÿå®æ—¶ç³»ç»Ÿè¦æ±‚ä¸€ä¸ªè¯·æ±‚åœ¨ä¸€ä¸ªç¡®å®šæ—¶é—´å†…å¾—åˆ°å“åº”ã€‚ åˆ†ä¸ºç¡¬å®æ—¶å’Œè½¯å®æ—¶ï¼Œå‰è€…å¿…é¡»æ»¡è¶³ç»å¯¹çš„æˆªæ­¢æ—¶é—´ï¼Œåè€…å¯ä»¥å®¹å¿ä¸€å®šçš„è¶…æ—¶ã€‚ è¿›ç¨‹é€šä¿¡è¿›ç¨‹åŒæ­¥ä¸è¿›ç¨‹é€šä¿¡å¾ˆå®¹æ˜“æ··æ·†ï¼Œå®ƒä»¬çš„åŒºåˆ«åœ¨äºï¼š è¿›ç¨‹åŒæ­¥ï¼šæ§åˆ¶å¤šä¸ªè¿›ç¨‹æŒ‰ä¸€å®šé¡ºåºæ‰§è¡Œï¼› è¿›ç¨‹é€šä¿¡ï¼šè¿›ç¨‹é—´ä¼ è¾“ä¿¡æ¯ã€‚ è¿›ç¨‹é€šä¿¡æ˜¯ä¸€ç§æ‰‹æ®µï¼Œè€Œè¿›ç¨‹åŒæ­¥æ˜¯ä¸€ç§ç›®çš„ã€‚ åŒä¸€ä¸»æœº æ— åç®¡é“ ï¼šåŠåŒå·¥ï¼ˆå•æ–¹å‘äº¤æ›¿ä¼ è¾“ï¼‰ã€åªèƒ½åœ¨çˆ¶å­è¿›ç¨‹æˆ–è€…å…„å¼Ÿè¿›ç¨‹ä¸­ä½¿ç”¨ æœ‰åç®¡é“ï¼šï¼ˆFIFOï¼‰å»é™¤äº†ç®¡é“åªèƒ½åœ¨çˆ¶å­è¿›ç¨‹ä¸­ä½¿ç”¨çš„é™åˆ¶ã€‚ ä¿¡å·ï¼šä¿¡å·æ˜¯è½¯ä»¶ä¸­æ–­ï¼Œå®ƒæ˜¯åœ¨è½¯ä»¶å±‚æ¬¡ä¸Šå¯¹ä¸­æ–­æœºåˆ¶çš„â¼€ç§æ¨¡æ‹Ÿï¼Œæ˜¯â¼€ç§å¼‚æ­¥é€šä¿¡çš„æ–¹å¼ æ¶ˆæ¯é˜Ÿåˆ—ï¼šA è¿›ç¨‹è¦ç»™ B è¿›ç¨‹å‘é€æ¶ˆæ¯ï¼ŒA è¿›ç¨‹æŠŠæ•°æ®æ”¾åœ¨å¯¹åº”çš„æ¶ˆæ¯é˜Ÿåˆ—åå°±å¯ä»¥æ­£å¸¸è¿”å›äº†ï¼ŒB è¿›ç¨‹éœ€è¦çš„æ—¶å€™å†å»è¯»å–æ•°æ®å°±å¯ä»¥äº†ã€‚ ç›¸æ¯”äº FIFOï¼Œæ¶ˆæ¯é˜Ÿåˆ—å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥ç‹¬ç«‹äºè¯»å†™è¿›ç¨‹å­˜åœ¨ï¼Œä»è€Œé¿å…äº† FIFO ä¸­åŒæ­¥ç®¡é“çš„æ‰“å¼€å’Œå…³é—­æ—¶å¯èƒ½äº§ç”Ÿçš„å›°éš¾ï¼› é¿å…äº† FIFO çš„åŒæ­¥é˜»å¡é—®é¢˜ï¼Œä¸éœ€è¦è¿›ç¨‹è‡ªå·±æä¾›åŒæ­¥æ–¹æ³•ï¼› è¯»è¿›ç¨‹å¯ä»¥æ ¹æ®æ¶ˆæ¯ç±»å‹æœ‰é€‰æ‹©åœ°æ¥æ”¶æ¶ˆæ¯ï¼Œè€Œä¸åƒ FIFO é‚£æ ·åªèƒ½é»˜è®¤åœ°æ¥æ”¶ã€‚ å…±äº«å­˜å‚¨ï¼šå­˜å‚¨æ˜ å°„ I&#x2F;O (Memory-mapped I&#x2F;O) ä½¿â¼€ä¸ªç£ç›˜â½‚ä»¶ä¸å­˜å‚¨ç©ºé—´ä¸­çš„â¼€ä¸ªç¼“å†²åŒºç›¸æ˜ å°„ã€‚ å…è®¸å¤šä¸ªè¿›ç¨‹å…±äº«ä¸€ä¸ªç»™å®šçš„å­˜å‚¨åŒºã€‚å› ä¸ºæ•°æ®ä¸éœ€è¦åœ¨è¿›ç¨‹ä¹‹é—´å¤åˆ¶ï¼Œå¯ä»¥ç›´æ¥è¯»å†™å†…å­˜ï¼Œæ‰€ä»¥è¿™æ˜¯æœ€å¿«çš„ä¸€ç§ IPC éœ€è¦ä½¿ç”¨ä¿¡å·é‡ç”¨æ¥åŒæ­¥å¯¹å…±äº«å­˜å‚¨çš„è®¿é—®ã€‚ å¤šä¸ªè¿›ç¨‹å¯ä»¥å°†åŒä¸€ä¸ªæ–‡ä»¶æ˜ å°„åˆ°å®ƒä»¬çš„åœ°å€ç©ºé—´ä»è€Œå®ç°å…±äº«å†…å­˜ã€‚å¦å¤– XSI å…±äº«å†…å­˜ä¸æ˜¯ä½¿ç”¨æ–‡ä»¶ï¼Œè€Œæ˜¯ä½¿ç”¨å†…å­˜çš„åŒ¿åæ®µã€‚ ä¿¡å·é‡ï¼šå®ƒæ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç”¨äºä¸ºå¤šä¸ªè¿›ç¨‹æä¾›å¯¹å…±äº«æ•°æ®å¯¹è±¡çš„è®¿é—®ã€‚ ä¸åŒä¸»æœº Socket å¥—æ¥å­— è¿›ç¨‹åŒæ­¥ä¸´ç•ŒåŒºå¯¹ä¸´ç•Œèµ„æºè¿›è¡Œè®¿é—®çš„é‚£æ®µä»£ç ç§°ä¸ºä¸´ç•ŒåŒºã€‚ ä¸ºäº†äº’æ–¥è®¿é—®ä¸´ç•Œèµ„æºï¼Œæ¯ä¸ªè¿›ç¨‹åœ¨è¿›å…¥ä¸´ç•ŒåŒºä¹‹å‰ï¼Œéœ€è¦å…ˆè¿›è¡Œæ£€æŸ¥ã€‚ åŒæ­¥ä¸äº’æ–¥ åŒæ­¥ï¼šå¤šä¸ªè¿›ç¨‹å› ä¸ºåˆä½œäº§ç”Ÿçš„ç›´æ¥åˆ¶çº¦å…³ç³»ï¼Œä½¿å¾—è¿›ç¨‹æœ‰ä¸€å®šçš„å…ˆåæ‰§è¡Œå…³ç³»ã€‚ äº’æ–¥ï¼šå¤šä¸ªè¿›ç¨‹åœ¨åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªè¿›ç¨‹èƒ½è¿›å…¥ä¸´ç•ŒåŒºã€‚ äº’æ–¥é” Mutexä¹Ÿå«äº’æ–¥é‡ï¼Œäº’æ–¥é”æ˜¯â¼€ç§ç®€å•çš„åŠ é”çš„â½…æ³•æ¥æ§åˆ¶å¯¹å…±äº«èµ„æºçš„è®¿é—®ï¼Œäº’æ–¥é”åªæœ‰ä¸¤ç§çŠ¶æ€ï¼Œå³åŠ é” ( lock ) å’Œè§£é” ( unlock ) åœ¨è®¿é—®å…±äº«èµ„æºåä¸´ç•ŒåŒºåŸŸå‰ï¼Œå¯¹äº’æ–¥é”è¿›è¡ŒåŠ é” åœ¨è®¿é—®å®Œæˆåé‡Šæ”¾äº’æ–¥é”å¯¼ä¸Šçš„é” å¯¹äº’æ–¥é”è¿›è¡ŒåŠ é”åï¼Œä»»ä½•å…¶ä»–è¯•å›¾å†æ¬¡å¯¹äº’æ–¥é”åŠ é”çš„çº¿ç¨‹å°†ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°é”è¢«é‡Šæ”¾ äº’æ–¥é”çš„æ•°æ®ç±»å‹æ˜¯ï¼š pthread_mutex_t 12345678910#include &lt;pthread.h&gt;// åˆ›å»ºäº’æ–¥é”int pthread_mutex_init(pthread_mutex_t *restrict mutex, const pthread_mutexattr_t *restrict attr);// é”€æ¯äº’æ–¥é”int pthread_mutex_destroy(pthread_mutex_t *mutex);// ä¸Šé”int pthread_mutex_lock(pthread_mutex_t *mutex);int pthread_mutex_trylock(pthread_mutex_t *mutex);// è§£é”int pthread_mutex_unlock(pthread_mutex_t *mutex); æ­»é” DeadLockå¦‚æœâ¼€ä¸ªè¿›ç¨‹é›†åˆä¸­çš„æ¯â¼€ä¸ªè¿›ç¨‹éƒ½åœ¨ç­‰å¾…åªèƒ½ç”±è¯¥è¿›ç¨‹é›†åˆä¸­çš„å…¶ä»–è¿›ç¨‹æ‰èƒ½å¼•å‘çš„äº‹ä»¶ï¼Œé‚£ä¹ˆè¯¥è¿›ç¨‹é›†åˆå°±æ˜¯æ­»é” å¿…è¦æ¡ä»¶æ­»é”äº§ç”Ÿå¿…é¡»åŒæ—¶æ»¡è¶³å››ä¸ªæ¡ä»¶ï¼Œåªè¦å…¶ä¸­ä»»æ„ä¸€æ¡ä¸æˆç«‹ï¼Œæ­»é”å°±ä¸ä¼šå‘ç”Ÿã€‚ äº’æ–¥æ¡ä»¶ è¿›ç¨‹è¦æ±‚å¯¹æ‰€åˆ†é…çš„èµ„æºï¼ˆæ¯”å¦‚æ‰“å°æœºï¼‰è¿›è¡Œæ’ä»–æ€§æ§åˆ¶ï¼Œå³åœ¨ä¸€æ®µæ—¶é—´å†…æŸèµ„æºåªèƒ½ç”±ä¸€ä¸ªè¿›ç¨‹å æœ‰ã€‚ æ­¤æ—¶è‹¥æœ‰å…¶ä»–è¿›ç¨‹è¯·æ±‚è¯¥èµ„æºï¼Œåˆ™è¯·æ±‚è¿›ç¨‹åªèƒ½ç­‰å¾…ã€‚ ä¸å¯å‰¥å¤ºæ¡ä»¶ è¿›ç¨‹æ‰€è·å¾—çš„èµ„æºåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½è¢«å…¶ä»–è¿›ç¨‹å¼ºè¡Œå¤ºèµ°ï¼Œå³åªèƒ½ç”±è·å¾—è¯¥èµ„æºçš„è¿›ç¨‹è‡ªå·±æ¥é‡Šæ”¾ï¼ˆåªèƒ½æ˜¯ä¸»åŠ¨é‡Šæ”¾ï¼‰ã€‚ è¯·æ±‚å¹¶ä¿æŒæ¡ä»¶ è¿›ç¨‹å·²ç»ä¿æŒäº†è‡³å°‘ä¸€ä¸ªèµ„æºï¼Œä½†åˆæå‡ºäº†æ–°çš„èµ„æºè¯·æ±‚ï¼Œè€Œè¯¥èµ„æºå·²ç»è¢«å…¶ä»–è¿›ç¨‹å æœ‰ï¼Œæ­¤æ—¶è¯·æ±‚è¿›ç¨‹è¢«é˜»å¡ï¼Œä½†å¯¹è‡ªå·±å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚ å¾ªç¯ç­‰å¾…æ¡ä»¶ å­˜åœ¨ä¸€ç§è¿›ç¨‹èµ„æºçš„å¾ªç¯ç­‰å¾…é“¾ï¼Œé“¾ä¸­æ¯ä¸ªè¿›ç¨‹å·²è·å¾—çš„èµ„æºåŒæ—¶è¢«é“¾ä¸­ä¸‹ä¸€ä¸ªè¿›ç¨‹æ‰€è¯·æ±‚ã€‚ é¸µé¸Ÿç­–ç•¥æŠŠå¤´åŸ‹åœ¨æ²™å­é‡Œï¼Œå‡è£…æ ¹æœ¬æ²¡å‘ç”Ÿé—®é¢˜ã€‚ å› ä¸ºè§£å†³æ­»é”é—®é¢˜çš„ä»£ä»·å¾ˆé«˜ï¼Œå› æ­¤é¸µé¸Ÿç­–ç•¥è¿™ç§ä¸é‡‡å–ä»»åŠ¡æªæ–½çš„æ–¹æ¡ˆä¼šè·å¾—æ›´é«˜çš„æ€§èƒ½ã€‚ å½“å‘ç”Ÿæ­»é”æ—¶ä¸ä¼šå¯¹ç”¨æˆ·é€ æˆå¤šå¤§å½±å“ï¼Œæˆ–å‘ç”Ÿæ­»é”çš„æ¦‚ç‡å¾ˆä½ï¼Œå¯ä»¥é‡‡ç”¨é¸µé¸Ÿç­–ç•¥ã€‚ å¤§å¤šæ•°æ“ä½œç³»ç»Ÿï¼ŒåŒ…æ‹¬ Unixï¼ŒLinux å’Œ Windowsï¼Œå¤„ç†æ­»é”é—®é¢˜çš„åŠæ³•ä»…ä»…æ˜¯å¿½ç•¥å®ƒã€‚ æ­»é”æ£€æµ‹ä¸æ­»é”æ¢å¤æ¯ç§ç±»å‹â¼€ä¸ªèµ„æºçš„æ­»é”æ£€æµ‹ï¼š é€šè¿‡æ£€æµ‹æœ‰å‘å›¾ä¸­æ˜¯å¦å­˜åœ¨ç¯æ¥å®ç°ï¼Œä»â¼€ä¸ªèŠ‚ç‚¹å‡ºå‘è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œå¯¹è®¿é—®è¿‡çš„èŠ‚ç‚¹è¿›è¡Œæ ‡è®°ï¼Œå¦‚æœè®¿é—®äº†å·²ç»æ ‡è®°çš„èŠ‚ç‚¹ï¼Œå°±è¡¨ç¤ºæœ‰å‘å›¾å­˜åœ¨ç¯ï¼Œä¹Ÿå°±æ˜¯æ£€æµ‹åˆ°æ­»é”å‘ç”Ÿã€‚ æ¯ç§ç±»å‹å¤šä¸ªèµ„æºçš„æ­»é”æ£€æµ‹ï¼š æ¯ä¸ªè¿›ç¨‹æœ€å¼€å§‹æ—¶éƒ½ä¸è¢«æ ‡è®°ï¼Œæ‰§è¡Œè¿‡ç¨‹æœ‰å¯èƒ½è¢«æ ‡è®°ã€‚å½“ç®—æ³•ç»“æŸæ—¶ï¼Œä»»ä½•æ²¡æœ‰è¢«æ ‡è®°çš„è¿›ç¨‹éƒ½æ˜¯æ­»é”è¿›ç¨‹ã€‚ ä»æ­»é”ä¸­æ¢å¤ï¼š åˆ©ç”¨æŠ¢å æ¢å¤ï¼šå°†è¿›ç¨‹æŒ‚èµ·ï¼Œå¼ºè¡Œå–èµ°èµ„æºç»™å¦â¼€ä¸ªè¿›ç¨‹ä½¿ç”¨ï¼Œç”¨å®Œå†æ”¾å› åˆ©ç”¨å›æ»šæ¢å¤ï¼šå¤ä½åˆ°æ›´æ—©çš„çŠ¶æ€ï¼Œé‚£æ—¶å®ƒè¿˜æ²¡æœ‰å–å¾—æ‰€éœ€çš„èµ„æº é€šè¿‡æ€æ­»è¿›ç¨‹æ¢å¤ï¼šæ€æ‰ç¯ä¸­çš„â¼€ä¸ªè¿›ç¨‹æˆ–å¤šä¸ªï¼Œç‰ºç‰²æ‰â¼€ä¸ªç¯å¤–è¿›ç¨‹ æ­»é”é¢„é˜²åœ¨ç¨‹åºè¿è¡Œä¹‹å‰é¢„é˜²å‘ç”Ÿæ­»é”ï¼Œå…¶å®å°±æ˜¯ç ´åæ­»é”äº§ç”Ÿçš„å¿…è¦æ¡ä»¶ï¼Œç ´åä»»ä½•ä¸€ä¸ªï¼Œæ­»é”éƒ½ä¸ä¼šå‘ç”Ÿã€‚ ç ´åäº’æ–¥æ¡ä»¶ï¼šä¾‹å¦‚å‡è„±æœºæ‰“å°æœºæŠ€æœ¯å…è®¸è‹¥å¹²ä¸ªè¿›ç¨‹åŒæ—¶è¾“å‡ºï¼Œå”¯ä¸€çœŸæ­£è¯·æ±‚ç‰©ç†æ‰“å°æœºçš„è¿›ç¨‹æ˜¯æ‰“å°æœºå®ˆæŠ¤è¿›ç¨‹ã€‚ ç ´åè¯·æ±‚å’Œä¿æŒæ¡ä»¶ï¼šä¸€ç§å®ç°æ–¹å¼æ˜¯è§„å®šæ‰€æœ‰è¿›ç¨‹åœ¨å¼€å§‹æ‰§è¡Œå‰è¯·æ±‚æ‰€éœ€è¦çš„å…¨éƒ¨èµ„æºã€‚ ç ´åä¸å¯å‰¥å¤ºæ¡ä»¶ï¼šä¿è¯æ¯â¼€ä¸ªè¿›ç¨‹åœ¨ä»»ä½•æ—¶åˆ»åªèƒ½å ç”¨â¼€ä¸ªèµ„æºï¼Œå¦‚æœè¯·æ±‚å¦â¼€ä¸ªèµ„æºå¿…é¡»å…ˆé‡Šæ”¾ç¬¬â¼€ä¸ªèµ„æºã€‚ ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šç»™èµ„æºç»Ÿä¸€ç¼–å·ï¼Œè¿›ç¨‹åªèƒ½æŒ‰ç¼–å·é¡ºåºæ¥è¯·æ±‚èµ„æºã€‚ æ­»é”é¿å… å®‰å…¨çŠ¶æ€ï¼šå¦‚æœæ²¡æœ‰æ­»é”å‘â½£ï¼Œå¹¶ä¸”å³ä½¿æ‰€æœ‰è¿›ç¨‹çªç„¶è¯·æ±‚å¯¹èµ„æºçš„æœ€å¤§éœ€æ±‚ï¼Œä¹Ÿä»ç„¶å­˜åœ¨æŸç§è°ƒåº¦æ¬¡åºèƒ½å¤Ÿä½¿å¾—æ¯â¼€ä¸ªè¿›ç¨‹è¿è¡Œå®Œæ¯• å•ä¸ªèµ„æºçš„é“¶è¡Œå®¶ç®—æ³•ï¼šä¸€ä¸ªå°åŸé•‡çš„é“¶è¡Œå®¶ï¼Œä»–å‘ä¸€ç¾¤å®¢æˆ·åˆ†åˆ«æ‰¿è¯ºäº†ä¸€å®šçš„è´·æ¬¾é¢åº¦ï¼Œç®—æ³•è¦åšçš„æ˜¯åˆ¤æ–­å¯¹è¯·æ±‚çš„æ»¡è¶³æ˜¯å¦ä¼šè¿›å…¥ä¸å®‰å…¨çŠ¶æ€ï¼Œå¦‚æœæ˜¯ï¼Œå°±æ‹’ç»è¯·æ±‚ï¼›å¦åˆ™äºˆä»¥åˆ†é…ã€‚ å¤šä¸ªèµ„æºçš„é“¶è¡Œå®¶ç®—æ³•ï¼šå¦‚æœä¸€ä¸ªçŠ¶æ€ä¸æ˜¯å®‰å…¨çš„ï¼Œéœ€è¦æ‹’ç»è¿›å…¥è¿™ä¸ªçŠ¶æ€ã€‚ æ£€æŸ¥ä¸€ä¸ªçŠ¶æ€æ˜¯å¦å®‰å…¨çš„ç®—æ³•å¦‚ä¸‹ï¼š æŸ¥æ‰¾å³è¾¹çš„çŸ©é˜µæ˜¯å¦å­˜åœ¨ä¸€è¡Œå°äºç­‰äºå‘é‡ Aã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„è¡Œï¼Œé‚£ä¹ˆç³»ç»Ÿå°†ä¼šå‘ç”Ÿæ­»é”ï¼ŒçŠ¶æ€æ˜¯ä¸å®‰å…¨çš„ã€‚ å‡è‹¥æ‰¾åˆ°è¿™æ ·ä¸€è¡Œï¼Œå°†è¯¥è¿›ç¨‹æ ‡è®°ä¸ºç»ˆæ­¢ï¼Œå¹¶å°†å…¶å·²åˆ†é…èµ„æºåŠ åˆ° A ä¸­ã€‚ é‡å¤ä»¥ä¸Šä¸¤æ­¥ï¼Œç›´åˆ°æ‰€æœ‰è¿›ç¨‹éƒ½æ ‡è®°ä¸ºç»ˆæ­¢ï¼Œåˆ™çŠ¶æ€æ—¶å®‰å…¨çš„ã€‚ è¯»å†™é”åœ¨å¯¹æ•°æ®çš„è¯»å†™æ“ä½œä¸­ï¼Œæ›´å¤šçš„æ˜¯è¯»æ“ä½œï¼Œå†™æ“ä½œè¾ƒå°‘ï¼Œä¾‹å¦‚å¯¹æ•°æ®åº“æ•°æ®çš„è¯»å†™åº”â½¤ã€‚ ä¸ºäº†æ»¡â¾œå½“å‰èƒ½å¤Ÿå…è®¸å¤šä¸ªè¯»å‡ºï¼Œä½†åªå…è®¸â¼€ä¸ªå†™å…¥çš„éœ€æ±‚ï¼Œçº¿ç¨‹æä¾›äº†è¯»å†™é”æ¥å®ç°ã€‚ è¯»å†™é”çš„ç‰¹ç‚¹ï¼š å¦‚æœæœ‰å…¶å®ƒçº¿ç¨‹è¯»æ•°æ®ï¼Œåˆ™å…è®¸å…¶å®ƒçº¿ç¨‹æ‰§è¡Œè¯»æ“ä½œï¼Œä½†ä¸å…è®¸å†™æ“ä½œ å¦‚æœæœ‰å…¶å®ƒçº¿ç¨‹å†™æ•°æ®ï¼Œåˆ™å…¶å®ƒçº¿ç¨‹éƒ½ä¸å…è®¸è¯»ã€å†™æ“ä½œ POSIX å®šä¹‰çš„è¯»å†™é”çš„æ•°æ®ç±»å‹æ˜¯ï¼š pthread_rwlock_t 12345678910111213#include &lt;pthread.h&gt;// åˆ›å»ºè¯»å†™é”int pthread_rwlock_init(pthread_rwlock_t *restrict rwlock, const pthread_rwlockattr_t *restrict attr);// é”€æ¯è¯»å†™é”int pthread_rwlock_destroy(pthread_rwlock_t *rwlock);// è¯»é”å®šint pthread_rwlock_rdlock(pthread_rwlock_t *rwlock);int pthread_rwlock_tryrdlock(pthread_rwlock_t *rwlock);// å†™é”å®šint pthread_rwlock_wrlock(pthread_rwlock_t *rwlock);int pthread_rwlock_trywrlock(pthread_rwlock_t *rwlock);// è§£é”int pthread_rwlock_unlock(pthread_rwlock_t *rwlock); æ¡ä»¶å˜é‡ä¸äº’æ–¥é”ä¸åŒï¼Œæ¡ä»¶å˜é‡æ˜¯ç”¨æ¥ç­‰å¾…è€Œä¸æ˜¯ç”¨æ¥ä¸Šé”çš„ï¼Œæ¡ä»¶å˜é‡æœ¬èº«ä¸æ˜¯é”ã€‚ æ¡ä»¶å˜é‡ç”¨æ¥è‡ªåŠ¨é˜»å¡â¼€ä¸ªçº¿ç¨‹ï¼Œç›´åˆ°æŸç‰¹æ®Šæƒ…å†µå‘ç”Ÿä¸ºæ­¢ã€‚ é€šå¸¸æ¡ä»¶å˜é‡å’Œäº’æ–¥é”åŒæ—¶ä½¿ç”¨ã€‚ç›¸è¾ƒäº mutex è€Œè¨€ï¼Œæ¡ä»¶å˜é‡å¯ä»¥å‡å°‘ç«äº‰ã€‚ æ¡ä»¶å˜é‡çš„ä¸¤ä¸ªåŠ¨ä½œï¼š æ¡ä»¶ä¸æ»¡, é˜»å¡çº¿ç¨‹ å½“æ¡ä»¶æ»¡è¶³ é€šçŸ¥é˜»å¡çš„çº¿ç¨‹å¼€å§‹å·¥ä½œ 123456789101112#include &lt;pthread.h&gt;// åˆ›å»ºæ¡ä»¶å˜é‡int pthread_cond_init(pthread_cond_t *restrict cond, const pthread_condattr_t *restrict attr);// åˆ é™¤æ¡ä»¶å˜é‡int pthread_cond_destroy(pthread_cond_t *cond);// å”¤é†’çº¿ç¨‹int pthread_cond_signal(pthread_cond_t *cond);int pthread_cond_broadcast(pthread_cond_t *cond);// é˜»å¡çº¿ç¨‹int pthread_cond_wait(pthread_cond_t *restrict cond, pthread_mutex_t *restrict mutex);int pthread_cond_timedwait(pthread_cond_t *restrict cond, pthread_mutex_t *restrict mutex,const struct *restrict abstime); ä¿¡å·é‡ä¿¡å·é‡ï¼ˆSemaphoreï¼‰æ˜¯ä¸€ä¸ªæ•´å‹å˜é‡ï¼Œå¯ä»¥å¯¹å…¶æ‰§è¡Œ down å’Œ up æ“ä½œï¼Œä¹Ÿå°±æ˜¯å¸¸è§çš„ P å’Œ V æ“ä½œã€‚ down : å¦‚æœä¿¡å·é‡å¤§äº 0 ï¼Œæ‰§è¡Œ -1 æ“ä½œï¼›å¦‚æœä¿¡å·é‡ç­‰äº 0ï¼Œè¿›ç¨‹ç¡çœ ï¼Œç­‰å¾…ä¿¡å·é‡å¤§äº 0ï¼› up ï¼šå¯¹ä¿¡å·é‡æ‰§è¡Œ +1 æ“ä½œï¼Œå”¤é†’ç¡çœ çš„è¿›ç¨‹è®©å…¶å®Œæˆ down æ“ä½œã€‚ down å’Œ up æ“ä½œéœ€è¦è¢«è®¾è®¡æˆåŸè¯­ï¼Œä¸å¯åˆ†å‰²ï¼Œé€šå¸¸çš„åšæ³•æ˜¯åœ¨æ‰§è¡Œè¿™äº›æ“ä½œçš„æ—¶å€™å±è”½ä¸­æ–­ã€‚ å¦‚æœä¿¡å·é‡çš„å–å€¼åªèƒ½ä¸º 0 æˆ–è€… 1ï¼Œé‚£ä¹ˆå°±æˆä¸ºäº† äº’æ–¥é‡ï¼ˆMutexï¼‰ ï¼Œ0 è¡¨ç¤ºä¸´ç•ŒåŒºå·²ç»åŠ é”ï¼Œ1 è¡¨ç¤ºä¸´ç•ŒåŒºè§£é”ã€‚ 12345678910111213typedef int semaphore;semaphore mutex = 1;void P1() &#123; down(&amp;mutex); // ä¸´ç•ŒåŒº up(&amp;mutex);&#125;void P2() &#123; down(&amp;mutex); // ä¸´ç•ŒåŒº up(&amp;mutex);&#125; ç®¡ç¨‹ä½¿ç”¨ä¿¡å·é‡æœºåˆ¶å®ç°çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜éœ€è¦å®¢æˆ·ç«¯ä»£ç åšå¾ˆå¤šæ§åˆ¶ï¼Œè€Œç®¡ç¨‹æŠŠæ§åˆ¶çš„ä»£ç ç‹¬ç«‹å‡ºæ¥ï¼Œä¸ä»…ä¸å®¹æ˜“å‡ºé”™ï¼Œä¹Ÿä½¿å¾—å®¢æˆ·ç«¯ä»£ç è°ƒç”¨æ›´å®¹æ˜“ã€‚ ç®¡ç¨‹æœ‰ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼šåœ¨ä¸€ä¸ªæ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨ç®¡ç¨‹ã€‚è¿›ç¨‹åœ¨æ— æ³•ç»§ç»­æ‰§è¡Œçš„æ—¶å€™ä¸èƒ½ä¸€ç›´å ç”¨ç®¡ç¨‹ï¼Œå¦åˆ™å…¶å®ƒè¿›ç¨‹æ°¸è¿œä¸èƒ½ä½¿ç”¨ç®¡ç¨‹ã€‚ ç®¡ç¨‹å¼•å…¥äº†æ¡ä»¶å˜é‡ä»¥åŠç›¸å…³çš„æ“ä½œï¼š wait() æ“ä½œä¼šå¯¼è‡´è°ƒç”¨è¿›ç¨‹é˜»å¡ï¼ŒæŠŠç®¡ç¨‹è®©å‡ºæ¥ç»™å¦ä¸€ä¸ªè¿›ç¨‹æŒæœ‰ã€‚ signal() æ“ä½œç”¨äºå”¤é†’è¢«é˜»å¡çš„è¿›ç¨‹ã€‚","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Operating System","slug":"Computer-Basics/Operating-System","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Operating-System/"}],"tags":[{"name":"Thread","slug":"Thread","permalink":"http://blog.sukiu.top/tags/Thread/"}]},{"title":"åŠ¨æ€è§„åˆ’","slug":"Dynamic-Programming","date":"2022-01-03T05:47:00.000Z","updated":"2022-01-03T05:47:00.000Z","comments":true,"path":"Computer-Basics/Algorithm/Dynamic-Programming/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Algorithm/Dynamic-Programming/","excerpt":"åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programmingï¼Œç®€ç§° DPï¼‰ï¼Œå¦‚æœæŸä¸€é—®é¢˜æœ‰å¾ˆå¤šé‡å å­é—®é¢˜ï¼Œä½¿ç”¨åŠ¨æ€è§„åˆ’æ˜¯æœ€æœ‰æ•ˆçš„ã€‚ å’Œè´ªå¿ƒçš„åŒºåˆ«åœ¨äºï¼š åŠ¨æ€è§„åˆ’ä¸­æ¯ä¸€ä¸ªçŠ¶æ€ä¸€å®šæ˜¯ç”±ä¸Šä¸€ä¸ªçŠ¶æ€æ¨å¯¼å‡ºæ¥çš„ è´ªå¿ƒæ²¡æœ‰çŠ¶æ€æ¨å¯¼ï¼Œè€Œæ˜¯ä»å±€éƒ¨ç›´æ¥é€‰æœ€ä¼˜çš„ï¼Œ","text":"åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programmingï¼Œç®€ç§° DPï¼‰ï¼Œå¦‚æœæŸä¸€é—®é¢˜æœ‰å¾ˆå¤šé‡å å­é—®é¢˜ï¼Œä½¿ç”¨åŠ¨æ€è§„åˆ’æ˜¯æœ€æœ‰æ•ˆçš„ã€‚ å’Œè´ªå¿ƒçš„åŒºåˆ«åœ¨äºï¼š åŠ¨æ€è§„åˆ’ä¸­æ¯ä¸€ä¸ªçŠ¶æ€ä¸€å®šæ˜¯ç”±ä¸Šä¸€ä¸ªçŠ¶æ€æ¨å¯¼å‡ºæ¥çš„ è´ªå¿ƒæ²¡æœ‰çŠ¶æ€æ¨å¯¼ï¼Œè€Œæ˜¯ä»å±€éƒ¨ç›´æ¥é€‰æœ€ä¼˜çš„ï¼Œ å¡å­å“¥çš„DP äº”éƒ¨æ›²ï¼š ç¡®å®š dp æ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰ ç¡®å®šé€’æ¨å…¬å¼ dp æ•°ç»„å¦‚ä½•åˆå§‹åŒ– ç¡®å®šéå†é¡ºåº ä¸¾ä¾‹æ¨å¯¼ dp æ•°ç»„ èƒŒåŒ…é—®é¢˜ å¯¹äºé¢è¯•ï¼ŒæŒæ¡ 01 èƒŒåŒ…å’Œå®Œå…¨èƒŒåŒ…å°±å¤Ÿç”¨äº†ï¼Œæœ€å¤šå¯ä»¥å†æ¥ä¸€ä¸ªå¤šé‡èƒŒåŒ…ã€‚ 01 èƒŒåŒ…æœ‰ N ä»¶ç‰©å“å’Œä¸€ä¸ªæœ€å¤šèƒ½èƒŒé‡é‡ä¸º W çš„èƒŒåŒ…ã€‚ç¬¬ i ä»¶ç‰©å“çš„é‡é‡æ˜¯ weight[i]ï¼Œå¾—åˆ°çš„ä»·å€¼æ˜¯ value[i] ã€‚ æ¯ä»¶ç‰©å“åªèƒ½ç”¨ä¸€æ¬¡ï¼Œæ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…é‡Œç‰©å“ä»·å€¼æ€»å’Œæœ€å¤§ã€‚ äºŒç»´ dp[i][j]ï¼šä»ä¸‹æ ‡ä¸º [0-i] çš„ç‰©å“é‡Œä»»æ„å–ï¼Œæ”¾è¿›å®¹é‡ä¸º j çš„èƒŒåŒ…ï¼Œä»·å€¼æ€»å’Œæœ€å¤§æ˜¯å¤šå°‘ æœ‰ä¸¤ä¸ªæ–¹å‘æ¨å‡ºæ¥ dp[i][j]ï¼š ä¸æ”¾ç‰©å“ iï¼šç”± dp[i - 1][j] æ¨å‡ºï¼Œå³èƒŒåŒ…å®¹é‡ä¸º jï¼Œé‡Œé¢ä¸æ”¾ç‰©å“ i çš„æœ€å¤§ä»·å€¼ æ”¾ç‰©å“ iï¼šç”± dp[i - 1][j - weight[i]] æ¨å‡ºï¼Œdp[i - 1][j - weight[i]] ä¸ºèƒŒåŒ…å®¹é‡ä¸º j - weight[i] çš„æ—¶å€™ä¸æ”¾ç‰©å“ i çš„æœ€å¤§ä»·å€¼ï¼Œé‚£ä¹ˆ dp[i - 1][j - weight[i]] + value[i] ï¼Œå°±æ˜¯èƒŒåŒ…æ”¾ç‰©å“ i å¾—åˆ°çš„æœ€å¤§ä»·å€¼ åŠ¨æ€è½¬ç§»å…¬å¼ï¼š$dp[i][j] &#x3D; max(dp[i-1][j], dp[i-1][j-weight[i]]+value[i])$ åˆå§‹åŒ–ï¼šç”±é€’æ¨å…¬å¼çœ‹å‡ºï¼Œå¿…é¡»åˆå§‹åŒ– dp[0][j]ï¼ˆå­˜æ”¾ç¼–å· 0 çš„ç‰©å“çš„æ—¶å€™ï¼Œå„ä¸ªå®¹é‡çš„èƒŒåŒ…æ‰€èƒ½å­˜æ”¾çš„æœ€å¤§ä»·å€¼ï¼‰ 1234vector&lt;vector&lt;int&gt;&gt; dp(weight.size(), vector&lt;int&gt;(bagWeight + 1, 0));for (int j = weight[0]; j &lt;= bagWeight; j++) &#123; dp[0][j] = value[0];&#125; éå†é¡ºåºï¼šå…ˆéå†ç‰©å“å’Œå…ˆéå†èƒŒåŒ…é‡é‡éƒ½å¯ï¼Œå…ˆéå†ç‰©å“æ›´å¥½ç†è§£ 1234567891011121314151617181920212223/* 01èƒŒåŒ…- åŠ¨æ€è½¬ç§»æ–¹ç¨‹ï¼šdp[i][j] = max(dp[i-1][j], dp[i-1][j-weight[i]]+value[i])*/func bagProblem(weight, value []int, bagWeight int) int &#123; dp := make([][]int, len(weight)) for i := range dp &#123; dp[i] = make([]int, bagWeight+1) &#125; // åˆå§‹åŒ–, dp[0][j] for j := weight[0]; j &lt;= bagWeight; j++ &#123; dp[0][j] = value[0] &#125; for i := 1; i &lt; len(weight); i++ &#123; for j := 0; j &lt;= bagWeight; j++ &#123; if j &lt; weight[i] &#123; // æ”¾ä¸ä¸‹ dp[i][j] = dp[i-1][j] &#125; else &#123; dp[i][j] = max(dp[i-1][j], dp[i-1][j-weight[i]]+value[i]) &#125; &#125; &#125; return dp[len(weight)-1][bagWeight]&#125; ä¸€ç»´æ»šåŠ¨æ•°ç»„ï¼šæŠŠäºŒç»´ dp é™ä¸ºä¸€ç»´ dp å¯¹äºèƒŒåŒ…é—®é¢˜å…¶å®çŠ¶æ€éƒ½æ˜¯å¯ä»¥å‹ç¼©çš„ã€‚ åœ¨ä½¿ç”¨äºŒç»´æ•°ç»„çš„æ—¶å€™ï¼Œé€’æ¨å…¬å¼ï¼šdp[i][j] = max(dp[i - 1][j], dp[i - 1][j - weight[i]] + value[i]) å…¶å®å¯ä»¥å‘ç°å¦‚æœæŠŠ dp[i - 1] é‚£ä¸€å±‚æ‹·è´åˆ° dp[i] ä¸Šï¼Œè¡¨è¾¾å¼å®Œå…¨å¯ä»¥æ˜¯ï¼šdp[i][j] = max(dp[i][j], dp[i][j - weight[i]] + value[i]) ä¸å…¶æŠŠ dp[i - 1] è¿™ä¸€å±‚æ‹·è´åˆ° dp[i] ä¸Šï¼Œä¸å¦‚åªç”¨ä¸€ä¸ªä¸€ç»´æ•°ç»„äº†ï¼Œåªç”¨ dp[j]ï¼ˆä¸€ç»´æ•°ç»„ï¼Œä¹Ÿå¯ä»¥ç†è§£æ˜¯ä¸€ä¸ªæ»šåŠ¨æ•°ç»„ï¼‰ å€’å™éå†æ˜¯ä¸ºäº†ä¿è¯ç‰©å“ i åªè¢«æ”¾å…¥ä¸€æ¬¡ 1234567891011// æ»šåŠ¨æ•°ç»„ä¼˜åŒ– ä¸€ç»´// - dp[j] = max(dp[j], dp[j - weight[i]] + value[i])func bagProblemBetter(weight, value []int, bagWeight int) int &#123; dp := make([]int, bagWeight+1) for i := range weight &#123; for j := bagWeight; j &gt;= weight[i]; j-- &#123; // å€’åºï¼Œæ­£åºä¼šçŠ¶æ€é‡å¤ dp[j] = max(dp[j], dp[j-weight[i]]+value[i]) &#125; &#125; return dp[bagWeight]&#125; å®Œå…¨èƒŒåŒ…æœ‰ N ä»¶ç‰©å“å’Œä¸€ä¸ªæœ€å¤šèƒ½èƒŒé‡é‡ä¸º W çš„èƒŒåŒ…ã€‚ç¬¬ i ä»¶ç‰©å“çš„é‡é‡æ˜¯ weight[i]ï¼Œå¾—åˆ°çš„ä»·å€¼æ˜¯ value[i] ã€‚ æ¯ä»¶ç‰©å“èƒ½ç”¨æ— æ•°æ¬¡ï¼Œæ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…é‡Œç‰©å“ä»·å€¼æ€»å’Œæœ€å¤§ã€‚ 01 èƒŒåŒ…å’Œå®Œå…¨èƒŒåŒ…å”¯ä¸€ä¸åŒå°±æ˜¯ä½“ç°åœ¨éå†é¡ºåºä¸Šï¼š 01 èƒŒåŒ…å†…åµŒçš„å¾ªç¯æ˜¯ä»å¤§åˆ°å°éå†ï¼Œä¸ºäº†ä¿è¯æ¯ä¸ªç‰©å“ä»…è¢«æ·»åŠ ä¸€æ¬¡ã€‚ å®Œå…¨èƒŒåŒ…çš„ç‰©å“æ˜¯å¯ä»¥æ·»åŠ å¤šæ¬¡çš„ï¼Œæ‰€ä»¥è¦ä»å°åˆ°å¤§å»éå† ä¸ºä»€ä¹ˆéå†ç‰©å“åœ¨å¤–å±‚å¾ªç¯ï¼Œéå†èƒŒåŒ…å®¹é‡åœ¨å†…å±‚å¾ªç¯ï¼Ÿ åœ¨å®Œå…¨èƒŒåŒ…ä¸­ï¼Œå¯¹äºä¸€ç»´ dp æ•°ç»„æ¥è¯´ï¼Œå…¶å®ä¸¤ä¸ª for å¾ªç¯åµŒå¥—é¡ºåºåŒæ ·æ— æ‰€è°“ 12345678910111213141516171819202122232425// å…ˆéå†ç‰©å“, å†éå†èƒŒåŒ…// ! å¦‚æœæ±‚ç»„åˆæ•°å°±æ˜¯å¤–å±‚forå¾ªç¯éå†ç‰©å“ï¼Œå†…å±‚foréå†èƒŒåŒ…ã€‚func bagProblem(weight, value []int, bagWeight int) int &#123; dp := make([]int, bagWeight+1) for i := 0; i &lt; len(weight); i++ &#123; for j := weight[i]; j &lt;= bagWeight; j++ &#123; dp[j] = max(dp[j], dp[j-weight[i]]+value[i]) &#125; &#125; return dp[bagWeight]&#125;// å…ˆéå†èƒŒåŒ…, å†éå†ç‰©å“// ! å¦‚æœæ±‚æ’åˆ—æ•°å°±æ˜¯å¤–å±‚foréå†èƒŒåŒ…ï¼Œå†…å±‚forå¾ªç¯éå†ç‰©å“func bagProblem2(weight, value []int, bagWeight int) int &#123; dp := make([]int, bagWeight+1) for j := 0; j &lt;= bagWeight; j++ &#123; for i := 0; i &lt; len(weight); i++ &#123; if j &gt;= weight[i] &#123; dp[j] = max(dp[j], dp[j-weight[i]]+value[i]) &#125; &#125; &#125; return dp[bagWeight]&#125; å¤šé‡èƒŒåŒ…æœ‰ N ç§ç‰©å“å’Œä¸€ä¸ªå®¹é‡ä¸º V çš„èƒŒåŒ…ã€‚ç¬¬ i ç§ç‰©å“æœ€å¤šæœ‰ $M_i$ ä»¶å¯ç”¨ï¼Œæ¯ä»¶è€—è´¹çš„ç©ºé—´æ˜¯ $C_i$ ï¼Œä»·å€¼æ˜¯ $W_i$ ã€‚æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…å¯ä½¿è¿™äº›ç‰©å“çš„è€—è´¹çš„ç©ºé—´æ€»å’Œä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”ä»·å€¼æ€»å’Œæœ€å¤§ã€‚ æ¯ä»¶ç‰©å“æœ€å¤šæœ‰ $M_i$ ä»¶å¯ç”¨ï¼ŒæŠŠ $M_i$ ä»¶æ‘Šå¼€ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ª 01 èƒŒåŒ…é—®é¢˜äº† 123456789101112131415// ! è½¬æ¢æˆ 01 èƒŒåŒ…// - O(m*n*k)func bagProblem(weight, value, nums []int, bagweight int) int &#123; dp := make([]int, bagweight+1) for i := range weight &#123; for j := bagweight; j &gt;= weight[i]; j-- &#123; // éå†èƒŒåŒ…ä¸ªæ•° for k := 1; k &lt;= nums[i] &amp;&amp; j-k*weight[i] &gt;= 0; k++ &#123; dp[j] = max(dp[j], dp[j-k*weight[i]]+k*value[i]) &#125; &#125; //fmt.Println(dp) &#125; return dp[bagweight]&#125; æ‰“å®¶åŠ«èˆä¸€æ¡è¾¹ ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ã€‚æ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ï¼Œå½±å“ä½ å·çªƒçš„å”¯ä¸€åˆ¶çº¦å› ç´ å°±æ˜¯ç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œå¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦ã€‚ ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œè®¡ç®—ä½  ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹ ï¼Œä¸€å¤œä¹‹å†…èƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚ dp[i]ï¼šè€ƒè™‘ä¸‹æ ‡ iï¼ˆåŒ…æ‹¬ iï¼‰ä»¥å†…çš„æˆ¿å±‹ï¼Œæœ€å¤šå¯ä»¥å·çªƒçš„é‡‘é¢ä¸º dp[i] é‚£ä¹ˆéœ€è¦è€ƒè™‘ 2 ç§æƒ…å†µï¼š i å·ï¼š$dp[i]&#x3D;dp[i-2]+nums[i]$ i ä¸å·ï¼š$dp[i]&#x3D;dp[i-1]$ æ‰€ä»¥åŠ¨æ€è½¬ç§»å…¬å¼ä¸ºï¼š$dp[i]&#x3D;max(dp[i-2]+nums[i],dp[i-1])$ 12345678910111213class Solution &#123; public: int rob(vector&lt;int&gt;&amp; nums) &#123; if (nums.size() == 1) return nums[0]; vector&lt;int&gt; dp(nums.size()); dp[0] = nums[0]; dp[1] = max(nums[0], nums[1]); for (int i = 2; i &lt; nums.size(); i++) &#123; dp[i] = max(dp[i - 2] + nums[i], dp[i - 1]); &#125; return dp[nums.size() - 1]; &#125;&#125;; è®°å½•è·¯å¾„ç±»ä¼¼è‚¡ç¥¨é—®é¢˜ï¼Œå¤šå¼€ 2 ä¸ªçŠ¶æ€ï¼š dp[i][0]ï¼šä¸å· i dp[i][1]ï¼šå· i 123456789101112131415161718192021222324class Solution &#123;public: int rob(vector&lt;int&gt;&amp; nums) &#123; if (nums.size()&lt;2) return nums[0]; int n = nums.size(); vector&lt;vector&lt;int&gt;&gt; dp(n,vector&lt;int&gt;(2)); dp[0][1]=nums[0]; for (int i=1; i&lt;n; i++)&#123; dp[i][0] = max(dp[i-1][1],dp[i-1][0]); dp[i][1] = dp[i-1][0]+nums[i]; &#125; int target = max(dp[n-1][0],dp[n-1][1]); vector&lt;int&gt; path; for (int i=dp.size()-1; i&gt;=0; i--)&#123; if (dp[i][1]==target)&#123; path.push_back(nums[i]); target-=nums[i]; &#125; &#125; for (int i=path.size()-1; i&gt;=0; i--) cout&lt;&lt;path[i]&lt;&lt;&quot; &quot;; return max(dp[n-1][0],dp[n-1][1]); &#125;&#125;; å›´æˆåœˆ åœ¨ä¸€æ¡è¾¹çš„åŸºç¡€ä¸Šï¼Œæ”¶å°¾ç›¸è¿å½¢æˆåœˆ åªè¦æ¯”è¾ƒ é¦–å’Œå°¾å­˜ä¸€ä¸ª çš„ä¸¤ç§æƒ…å†µå³å¯ã€‚ 12345678910111213141516171819class Solution &#123; public: int rob(vector&lt;int&gt;&amp; nums) &#123; if (nums.size() == 1) return nums[0]; return max(robrob(nums, 0, nums.size() - 2), robrob(nums, 1, nums.size() - 1)); &#125; int robrob(vector&lt;int&gt;&amp; nums, int start, int end) &#123; if (start == end) return nums[start]; vector&lt;int&gt; dp(nums.size()); dp[start] = nums[start]; dp[start + 1] = max(nums[start], nums[start + 1]); for (int i = start + 2; i &lt;= end; i++) &#123; dp[i] = max(dp[i - 2] + nums[i], dp[i - 1]); &#125; return dp[end]; &#125;&#125;; å½¢æˆæ ‘ å˜æˆä¸€æ£µäºŒå‰æ ‘ï¼Œæ ‘å½¢ dp 1234567891011è¾“å…¥: [3,2,3,null,3,null,1] 3 / \\ 2 3 \\ \\ 3 1è¾“å‡º: 7 è§£é‡Š: å°å·ä¸€æ™šèƒ½å¤Ÿç›—å–çš„æœ€é«˜é‡‘é¢ = 3 + 3 + 1 = 7. dp æ•°ç»„è®°å½• 2 ä¸ªçŠ¶æ€ï¼š dp[0]ï¼šè®°å½•ä¸å·è¯¥èŠ‚ç‚¹æ‰€å¾—åˆ°çš„çš„æœ€å¤§é‡‘é’± dp[1]ï¼šè®°å½•å·è¯¥èŠ‚ç‚¹æ‰€å¾—åˆ°çš„çš„æœ€å¤§é‡‘é’± é•¿åº¦ä¸º 2 çš„æ•°ç»„æ€ä¹ˆæ ‡è®°æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€å‘¢ï¼Ÿ åœ¨é€’å½’çš„è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿæ ˆä¼šä¿å­˜æ¯ä¸€å±‚é€’å½’çš„å‚æ•° å·¦å³æ ¹é¡ºåºï¼ˆååºï¼‰éå†ï¼Œé‚£ä¹ˆåˆ†ä¸º 2 ç§æƒ…å†µï¼š æ ¹å·ï¼šä¸¤ä¸ªå­ç»“ç‚¹ä¸å· $ &#x3D; left[0] + right[0] + root-&gt;val $ æ ¹ä¸å·ï¼šè€ƒè™‘ä¸¤ä¸ªå­ç»“ç‚¹å· $ &#x3D; max(left[0], left[1]) + max(right[0], right[1]) $ 12345678910111213141516class Solution &#123; public: int rob(TreeNode* root) &#123; vector&lt;int&gt; ans = robTree(root); return max(ans[0], ans[1]); &#125; vector&lt;int&gt; robTree(TreeNode* root) &#123; if (root == nullptr) return &#123;0, 0&#125;; vector&lt;int&gt; left = robTree(root-&gt;left); vector&lt;int&gt; right = robTree(root-&gt;right); int v1 = max(left[0], left[1]) + max(right[0], right[1]); int v2 = left[0] + right[0] + root-&gt;val; return &#123;v1, v2&#125;; &#125;&#125;; è‚¡ç¥¨é—®é¢˜ä¸»è¦é€šè¿‡äºŒç»´æ•°ç»„è®°å½•å„ä¸ªçŠ¶æ€ï¼Œåˆ†æå¥½æ¯ä¸ªçŠ¶æ€çš„è½¬ç§»å…¬å¼å³å¯ã€‚ ä¹Ÿå¯ä»¥æ»šåŠ¨æ•°ç»„ä¼˜åŒ–åˆ°ä¸€ç»´ï¼Œç›¸å½“äºè¦†ç›–å‰é¢çš„çŠ¶æ€ï¼Œä¸è¿‡ä¸å®¹æ˜“ç†è§£ã€‚ ä¹°å– 1 æ¬¡ç»™å®šä¸€ä¸ªæ•°ç»„ prices ï¼Œå®ƒçš„ç¬¬ i ä¸ªå…ƒç´  prices[i] è¡¨ç¤ºä¸€æ”¯ç»™å®šè‚¡ç¥¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚ ä½ åªèƒ½é€‰æ‹© æŸä¸€å¤© ä¹°å…¥è¿™åªè‚¡ç¥¨ï¼Œå¹¶é€‰æ‹©åœ¨ æœªæ¥çš„æŸä¸€ä¸ªä¸åŒçš„æ—¥å­ å–å‡ºè¯¥è‚¡ç¥¨ã€‚è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚ è¿”å›ä½ å¯ä»¥ä»è¿™ç¬”äº¤æ˜“ä¸­è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚å¦‚æœä½ ä¸èƒ½è·å–ä»»ä½•åˆ©æ¶¦ï¼Œè¿”å› 0 è™½ç„¶æœ‰åŠ¨æ€è§„åˆ’çš„æ€æƒ³ï¼Œä½†ç¬¬ä¸€æ„Ÿè§‰è¿˜æ˜¯è¿™æ ·å†™ 123456789101112class Solution &#123; public: int maxProfit(vector&lt;int&gt;&amp; prices) &#123; int minn = prices[0]; int ans = 0; for (int i = 1; i &lt; prices.size(); i++) &#123; if (prices[i] - minn &gt; 0) ans = max(ans, prices[i] - minn); minn = min(minn, prices[i]); &#125; return ans; &#125;&#125;; ä¹°å–å¤šæ¬¡ ä½ å¯ä»¥å°½å¯èƒ½åœ°å®Œæˆæ›´å¤šçš„äº¤æ˜“ äºŒç»´æ•°ç»„è®°å½• 2 ä¸ªçŠ¶æ€ï¼š dp[i][0] ï¼šè¡¨ç¤ºç¬¬ i å¤©æŒæœ‰è‚¡ç¥¨æ‰€å¾—æœ€å¤šç°é‡‘ dp[i][1] ï¼šè¡¨ç¤ºç¬¬ i å¤©ä¸æŒæœ‰è‚¡ç¥¨æ‰€å¾—æœ€å¤šç°é‡‘ 1234567891011121314151617class Solution &#123; public: // dp[i][0] æŒæœ‰è‚¡ç¥¨ // dp[i][1] ä¸æŒæœ‰è‚¡ç¥¨ int maxProfit(vector&lt;int&gt;&amp; prices) &#123; vector&lt;vector&lt;int&gt;&gt; dp(prices.size(), vector&lt;int&gt;(2)); dp[0][0] = -prices[0]; dp[0][1] = 0; for (int i = 1; i &lt; prices.size(); i++) &#123; dp[i][0] = max(dp[i - 1][1] - prices[i], dp[i - 1][0]); dp[i][1] = max(dp[i - 1][0] + prices[i], dp[i - 1][1]); &#125; return dp[prices.size() - 1][1]; &#125;&#125;; æœ€å¤šä¹°å– 2 æ¬¡ ä½ æœ€å¤šå¯ä»¥å®Œæˆ ä¸¤ç¬” äº¤æ˜“ã€‚ äºŒç»´æ•°ç»„è®°å½• 5 ä¸ªçŠ¶æ€ï¼š dp[i][0]ï¼šæ— æ“ä½œ dp[i][1]ï¼šç¬¬ä¸€æ¬¡ä¹°å…¥çŠ¶æ€ dp[i][2]ï¼šç¬¬ä¸€æ¬¡å–å‡ºçŠ¶æ€ dp[i][3]ï¼šç¬¬äºŒæ¬¡ä¹°å…¥çŠ¶æ€ dp[i][4]ï¼šç¬¬äºŒæ¬¡å–å‡ºçŠ¶æ€ ä¸Šé¢çš„çŠ¶æ€ä¸ä¸€å®šæ˜¯ç¬¬ i å¤©ä¹°å…¥å–å‡ºï¼Œåªæ˜¯ç»´æŒè¿™ç§çŠ¶æ€ 12345678910111213141516class Solution &#123; public: int maxProfit(vector&lt;int&gt;&amp; prices) &#123; vector&lt;vector&lt;int&gt;&gt; dp(prices.size(), vector&lt;int&gt;(5)); dp[0][1] = -prices[0]; dp[0][3] = -prices[0]; for (int i = 1; i &lt; prices.size(); i++) &#123; dp[i][0] = dp[i - 1][0]; dp[i][1] = max(dp[i - 1][1], dp[i - 1][0] - prices[i]); dp[i][2] = max(dp[i - 1][2], dp[i - 1][1] + prices[i]); dp[i][3] = max(dp[i - 1][3], dp[i - 1][2] - prices[i]); dp[i][4] = max(dp[i - 1][4], dp[i - 1][3] + prices[i]); &#125; return dp[prices.size() - 1][4]; &#125;&#125;; æœ€å¤šä¹°å– k æ¬¡ ä½ æœ€å¤šå¯ä»¥å®Œæˆ k ç¬”äº¤æ˜“ã€‚ ç…§ç€ä¸Šé¢é‚£ä¸ªç»´æŠ¤ $2*k+1$ ä¸ªçŠ¶æ€å³å¯ 1234567891011121314151617181920class Solution &#123; public: int maxProfit(int k, vector&lt;int&gt;&amp; prices) &#123; if (prices.size() == 0) return 0; vector&lt;vector&lt;int&gt;&gt; dp(prices.size(), vector&lt;int&gt;(2 * k + 1)); for (int i = 1; i &lt;= 2 * k; i += 2) &#123; dp[0][i] = -prices[0]; &#125; for (int i = 1; i &lt; prices.size(); i++) &#123; dp[i][0] = dp[i - 1][0]; for (int j = 1; j &lt;= 2 * k; j++) &#123; if (j &amp; 1) dp[i][j] = max(dp[i - 1][j], dp[i - 1][j - 1] - prices[i]); else dp[i][j] = max(dp[i - 1][j], dp[i - 1][j - 1] + prices[i]); &#125; &#125; return dp[prices.size() - 1][2 * k]; &#125;&#125;; å«å†·å´æœŸ ä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ å–å‡ºè‚¡ç¥¨åï¼Œä½ æ— æ³•åœ¨ç¬¬äºŒå¤©ä¹°å…¥è‚¡ç¥¨ (å³å†·å†»æœŸä¸º 1 å¤©) äºŒç»´æ•°ç»„è®°å½• 4 ä¸ªçŠ¶æ€ï¼š dp[i][0]ï¼šå–å‡ºçŠ¶æ€ï¼ˆéå†·å´æœŸï¼‰ dp[i][1]ï¼šä¹°å…¥çŠ¶æ€ dp[i][2]ï¼šå–å‡ºçŠ¶æ€ï¼ˆåˆšå–å‡ºï¼‰ dp[i][3]ï¼šå–å‡ºçŠ¶æ€ï¼ˆå†·å´æœŸï¼‰ 123456789101112131415class Solution &#123;public: int maxProfit(vector&lt;int&gt;&amp; prices) &#123; int n = prices.size(); vector&lt;vector&lt;int&gt;&gt; dp(n,vector&lt;int&gt;(4)); dp[0][1]=-prices[0]; for (int i=1; i&lt;n; i++)&#123; dp[i][0] = max(dp[i-1][0],dp[i-1][3]); // ï¼ˆå–å‡ºï¼‰éå†·å´æœŸ dp[i][1] = max(dp[i-1][1],max(dp[i-1][0],dp[i-1][3])-prices[i]); // ä¹°å…¥ dp[i][2] = dp[i-1][1]+prices[i]; // åˆšå–å‡º dp[i][3] = dp[i-1][2]; // å–å‡ºå†·å´æœŸ &#125; return max(&#123;dp[n-1][0],dp[n-1][2],dp[n-1][3]&#125;); &#125;&#125;; å«æ‰‹ç»­è´¹ æ¯ç¬”äº¤æ˜“ä½ åªéœ€è¦ä¸ºæ”¯ä»˜ä¸€æ¬¡æ‰‹ç»­è´¹ã€‚ è·Ÿä¹°å–å¤šæ¬¡å·®ä¸å¤šï¼Œæ·»ä¸Šæ‰‹ç»­è´¹å³å¯ 1234567891011121314class Solution &#123; public: int maxProfit(vector&lt;int&gt;&amp; prices, int fee) &#123; vector&lt;vector&lt;int&gt;&gt; dp(prices.size(), vector&lt;int&gt;(2)); dp[0][0] = -prices[0]; dp[0][1] = 0; for (int i = 1; i &lt; prices.size(); i++) &#123; dp[i][0] = max(dp[i - 1][1] - prices[i], dp[i - 1][0]); dp[i][1] = max(dp[i - 1][0] + prices[i] - fee, dp[i - 1][1]); // è¿™é‡Œå‡å»æ‰‹ç»­è´¹ &#125; return dp[prices.size() - 1][1]; &#125;&#125;; å­åºåˆ—é—®é¢˜æœ€é•¿é€’å¢å­åºåˆ—å­åºåˆ—ä¸è¿ç»­123456789101112131415161718192021222324252627282930313233343536373839class Solution &#123;public: int lengthOfLIS(vector&lt;int&gt;&amp; nums) &#123; vector&lt;int&gt; dp(nums.size(),1); int ans = 1; for (int i=1; i&lt;nums.size(); i++)&#123; for (int j=0; j&lt;i; j++)&#123; if (nums[j]&lt;nums[i])&#123; dp[i] = max(dp[i],dp[j]+1); &#125; &#125; ans = max(dp[i],ans); &#125; return ans; &#125;&#125;;// è´ªå¿ƒ + äºŒåˆ† nlogn// è´ªå¿ƒï¼šæ¯æ¬¡åœ¨ä¸Šå‡å­åºåˆ—æœ€ååŠ ä¸Šçš„é‚£ä¸ªæ•°å°½å¯èƒ½çš„å°class Solution &#123; public: int lengthOfLIS(vector&lt;int&gt;&amp; nums) &#123; vector&lt;int&gt; dp(nums.size(), 1); // ä¸¥æ ¼å•è°ƒå¢ï¼Œç±»ä¼¼å•è°ƒæ ˆï¼Œæ›´æ–°æ ˆé¡¶ int ans = 0; for (int num : nums) &#123; int l = 0, r = ans; // å³è¾¹ç•Œ = ç°æœ‰dpæ•°ç»„çš„é•¿åº¦ while (l &lt; r) &#123; // åœ¨ç°æœ‰çš„dpæ•°ç»„ä¸­æŸ¥æ‰¾æ¯”numå¤§çš„æ•°ï¼Œç”¨numå–ä»£å®ƒï¼›å¦‚æœæ²¡æœ‰ï¼Œå°±æ·»åŠ å…¥dp int m = (l + r) / 2; if (dp[m] &lt; num) l = m + 1; else r = m; &#125; dp[l] = num; // ä¿è¯æœ€å³è¾¹çš„æ•°å°½å¯èƒ½å° if (ans == r) ans++; // dpæ•°ç»„ä¸­çš„æ•°éƒ½æ¯”numå°ï¼Œæ·»åŠ å…¥dpï¼Œé•¿åº¦+1 &#125; return ans; &#125;&#125;; è®°å½•è·¯å¾„ä½¿ç”¨ dp çš„è¯ï¼Œæœ¬èº«å°±èƒ½å€’æ¨å‡ºè·¯å¾„ï¼›ä½¿ç”¨è´ªå¿ƒ + äºŒåˆ†ï¼Œè®°å½•çš„ä¸ä¸€å®šæ˜¯è·¯å¾„ï¼Œæ¨¡æ‹Ÿä¸€ä¸‹ä¼šå‘ç°å°çš„ä¼šæ›¿ä»£ dp æ•°ç»„ä¸­çš„å¤§å€¼ï¼Œå¯¼è‡´é¡ºåºä¸å¯¹ã€‚ 12345678910111213141516171819202122232425class Solution &#123;public: int lengthOfLIS(vector&lt;int&gt;&amp; nums) &#123; int n = nums.size(); vector&lt;int&gt; dp(n,1); int ans = 1; for (int i=1; i&lt;n; i++)&#123; for (int j=0; j&lt;i; j++)&#123; if (nums[j]&lt;nums[i]) dp[i] = max(dp[i],dp[j]+1); &#125; ans = max(ans,dp[i]); &#125; int target = ans; vector&lt;int&gt; path; for (int i = dp.size()-1; i&gt;=0; i--)&#123; if (dp[i]==target)&#123; path.push_back(nums[i]); target--; &#125; &#125; for (int i = path.size()-1; i&gt;=0; i--) cout&lt;&lt;path[i]&lt;&lt;&quot; &quot;; return ans; &#125;&#125;; å­åºåˆ—è¿ç»­12345678910111213class Solution &#123; public: int findLengthOfLCIS(vector&lt;int&gt;&amp; nums) &#123; int len = 1; int ans = 1; for (int i = 1; i &lt; nums.size(); i++) &#123; if (nums[i] &gt; nums[i - 1]) len++; else len = 1; ans = max(ans, len); &#125; return ans; &#125;&#125;; å…¬å…±å­åºåˆ—å­åºåˆ—ä¸è¿ç»­ ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² text1 å’Œ text2ï¼Œè¿”å›è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿ å…¬å…±å­åºåˆ— çš„é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨ å…¬å…±å­åºåˆ— ï¼Œè¿”å› 0 ã€‚ ä¸€ä¸ªå­—ç¬¦ä¸²çš„ å­åºåˆ— æ˜¯æŒ‡è¿™æ ·ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼šå®ƒæ˜¯ç”±åŸå­—ç¬¦ä¸²åœ¨ä¸æ”¹å˜å­—ç¬¦çš„ç›¸å¯¹é¡ºåºçš„æƒ…å†µä¸‹åˆ é™¤æŸäº›å­—ç¬¦ï¼ˆä¹Ÿå¯ä»¥ä¸åˆ é™¤ä»»ä½•å­—ç¬¦ï¼‰åç»„æˆçš„æ–°å­—ç¬¦ä¸²ã€‚ ä¾‹å¦‚ï¼Œ&quot;ace&quot; æ˜¯ &quot;abcde&quot; çš„å­åºåˆ—ï¼Œä½† &quot;aec&quot; ä¸æ˜¯ &quot;abcde&quot; çš„å­åºåˆ—ã€‚ ä¸¤ä¸ªå­—ç¬¦ä¸²çš„ å…¬å…±å­åºåˆ— æ˜¯è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²æ‰€å…±åŒæ‹¥æœ‰çš„å­åºåˆ—ã€‚ dp[i][j]ï¼šé•¿åº¦ä¸º [0, i - 1] çš„å­—ç¬¦ä¸² text1 ä¸é•¿åº¦ä¸º [0, j - 1] çš„å­—ç¬¦ä¸² text2 çš„æœ€é•¿å…¬å…±å­åºåˆ— é‚£ä¹ˆåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š text1[i - 1] ä¸ text2[j - 1] ç›¸åŒ text1[i - 1] ä¸ text2[j - 1] ä¸ç›¸åŒ 123456789101112131415class Solution &#123; public: int longestCommonSubsequence(string text1, string text2) &#123; vector&lt;vector&lt;int&gt;&gt; dp(text1.size() + 1, vector&lt;int&gt;(text2.size() + 1)); for (int i = 1; i &lt;= text1.size(); i++) &#123; for (int j = 1; j &lt;= text2.size(); j++) &#123; if (text1[i - 1] == text2[j - 1]) dp[i][j] = dp[i - 1][j - 1] + 1; else dp[i][j] = max(dp[i - 1][j], dp[i][j - 1]); &#125; &#125; return dp[text1.size()][text2.size()]; &#125;&#125;; ç±»ä¼¼é¢˜ç›®ï¼šä¸ç›¸äº¤çš„çº¿ åªæ˜¯æ¢äº†ç§é¢˜ç›®è¯´æ³•ï¼Œè§£æ³•ä¸€æ¨¡ä¸€æ ·ï¼Œè½¬æ¢è¿‡æ¥å°±æ˜¯æœ€é•¿å…¬å…±å­åºåˆ— å­åºåˆ—è¿ç»­ ç»™ä¸¤ä¸ªæ•´æ•°æ•°ç»„ A å’Œ B ï¼Œè¿”å›ä¸¤ä¸ªæ•°ç»„ä¸­å…¬å…±çš„ã€é•¿åº¦æœ€é•¿çš„å­æ•°ç»„çš„é•¿åº¦ã€‚ dp[i][j]ï¼šä»¥ä¸‹æ ‡ i - 1ç»“å°¾çš„å­—ç¬¦ä¸² A ä¸ä»¥ä¸‹æ ‡ j - 1ç»“å°¾çš„å­—ç¬¦ä¸² B çš„æœ€é•¿é‡å¤å­æ•°ç»„ é‚£ä¹ˆåªè¦è€ƒè™‘ nums1[i - 1] ä¸ nums2[j - 1] ç›¸åŒæ—¶ï¼Œæ›´æ–°é•¿åº¦ 12345678910111213141516class Solution &#123; public: int findLength(vector&lt;int&gt;&amp; nums1, vector&lt;int&gt;&amp; nums2) &#123; vector&lt;vector&lt;int&gt;&gt; dp(nums1.size() + 1, vector&lt;int&gt;(nums2.size() + 1)); int ans = 0; for (int i = 1; i &lt;= nums1.size(); i++) &#123; for (int j = 1; j &lt;= nums2.size(); j++) &#123; if (nums1[i - 1] == nums2[j - 1]) dp[i][j] = dp[i - 1][j - 1] + 1; // else æ— äº‹å‘ç”Ÿï¼Œå³ dp[i][j] = 0 ans = max(ans, dp[i][j]); &#125; &#125; return ans; &#125;&#125;; åˆ¤æ–­å­åºåˆ—å•ä¸ª ç»™å®šå­—ç¬¦ä¸² s å’Œ t ï¼Œåˆ¤æ–­ s æ˜¯å¦ä¸º t çš„å­åºåˆ—ï¼Œå³ s æ˜¯å¦åœ¨ t å­åºåˆ—ä¸­å‡ºç° åŒæŒ‡é’ˆæ›´ä½³ï¼Œdp åˆ¤æ–­å…¬å…±å­åºåˆ—ä¿®æ”¹ä¸‹å³å¯ 123456789101112131415161718192021222324252627282930class Solution &#123;public: bool isSubsequence(string s, string t) &#123; int m = s.size(), n = t.size(); vector&lt;vector&lt;int&gt;&gt; dp(m+1, vector&lt;int&gt;(n+1)); for (int i=1; i&lt;=m ;i++)&#123; for (int j=1; j&lt;=n; j++)&#123; if (s[i-1]==t[j-1]) dp[i][j] = dp[i-1][j-1]+1; else dp[i][j] = dp[i][j-1]; &#125; &#125; return dp[m][n] == m; &#125;&#125;;// åŒæŒ‡é’ˆå°±è¡Œäº†class Solution &#123;public: bool isSubsequence(string s, string t) &#123; int n = s.length(), m = t.length(); int i = 0, j = 0; while (i &lt; n &amp;&amp; j &lt; m) &#123; if (s[i] == t[j]) &#123; i++; &#125; j++; &#125; return i == n; &#125;&#125;; å¤šä¸ª ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s å’Œä¸€ä¸ªå­—ç¬¦ä¸² t ï¼Œè®¡ç®—åœ¨ s çš„å­åºåˆ—ä¸­ t å‡ºç°çš„ä¸ªæ•° dp[i][j]ï¼šä»¥ i-1 ä¸ºç»“å°¾çš„ s å­åºåˆ—ä¸­å‡ºç°ä»¥ j-1 ä¸ºç»“å°¾çš„ t çš„ä¸ªæ•° 1234567891011121314151617181920typedef unsigned long long ull;class Solution &#123; public: int numDistinct(string s, string t) &#123; int m = s.size(), n = t.size(); vector&lt;vector&lt;ull&gt;&gt; dp(m + 1, vector&lt;ull&gt;(n + 1)); for (int i = 0; i &lt; m; i++) dp[i][0] = 1; // for (int j=1; j&lt;n; j++) dp[0][j] = 0; for (int i = 1; i &lt;= m; i++) &#123; for (int j = 1; j &lt;= n; j++) &#123; if (s[i - 1] == t[j - 1]) dp[i][j] = dp[i - 1][j - 1] + dp[i - 1][j]; else dp[i][j] = dp[i - 1][j]; &#125; &#125; return dp[m][n]; &#125;&#125;; ç¼–è¾‘è·ç¦» ç»™ä½ ä¸¤ä¸ªå•è¯ word1 å’Œ word2ï¼Œè¯·ä½ è®¡ç®—å‡ºå°† word1 è½¬æ¢æˆ word2 æ‰€ä½¿ç”¨çš„æœ€å°‘æ“ä½œæ•° ã€‚ ä½ å¯ä»¥å¯¹ä¸€ä¸ªå•è¯è¿›è¡Œå¦‚ä¸‹ä¸‰ç§æ“ä½œï¼š æ’å…¥ä¸€ä¸ªå­—ç¬¦ åˆ é™¤ä¸€ä¸ªå­—ç¬¦ æ›¿æ¢ä¸€ä¸ªå­—ç¬¦ dp[i][j] è¡¨ç¤ºä»¥ä¸‹æ ‡ i-1 ä¸ºç»“å°¾çš„å­—ç¬¦ä¸² word1ï¼Œå’Œä»¥ä¸‹æ ‡ j-1 ä¸ºç»“å°¾çš„å­—ç¬¦ä¸² word2 çš„æœ€è¿‘ç¼–è¾‘è·ç¦» é‚£ä¹ˆéœ€è¦ç»´æŠ¤ä»¥ä¸‹ 4 ç§çŠ¶æ€ï¼š 123456if (word1[i - 1] == word2[j - 1]) ä¸æ“ä½œif (word1[i - 1] != word2[j - 1]) å¢ åˆ  æ¢ æ“ä½œä¸€ï¼šword1 åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå°±æ˜¯ä»¥ä¸‹æ ‡ i - 2 ä¸ºç»“å°¾çš„ word1 ä¸ j-1 ä¸ºç»“å°¾çš„ word2 çš„æœ€è¿‘ç¼–è¾‘è·ç¦» å†åŠ ä¸Šä¸€ä¸ªæ“ä½œ å³ dp[i][j] = dp[i - 1][j] + 1; æ“ä½œäºŒï¼šword2 åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå°±æ˜¯ä»¥ä¸‹æ ‡ i - 1 ä¸ºç»“å°¾çš„ word1 ä¸ j-2 ä¸ºç»“å°¾çš„ word2 çš„æœ€è¿‘ç¼–è¾‘è·ç¦» å†åŠ ä¸Šä¸€ä¸ªæ“ä½œ å³ dp[i][j] = dp[i][j - 1] + 1; word2 æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œç›¸å½“äº word1 åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œå³å¢åˆ ç­‰åŒ æ“ä½œä¸‰ï¼šæ›¿æ¢å…ƒç´ ï¼Œword1 æ›¿æ¢ word1[i - 1]ï¼Œä½¿å…¶ä¸ word2[j - 1] ç›¸åŒï¼Œæ­¤æ—¶ä¸ç”¨å¢åŠ å…ƒç´ ï¼Œé‚£ä¹ˆä»¥ä¸‹æ ‡ i-2 ä¸ºç»“å°¾çš„ word1 ä¸ j-2 ä¸ºç»“å°¾çš„ word2 çš„æœ€è¿‘ç¼–è¾‘è·ç¦» åŠ ä¸Šä¸€ä¸ªæ›¿æ¢å…ƒç´ çš„æ“ä½œã€‚ å³ dp[i][j] = dp[i - 1][j - 1] + 1; 123456789101112131415161718class Solution &#123; public: int minDistance(string word1, string word2) &#123; vector&lt;vector&lt;int&gt;&gt; dp(word1.size() + 1, vector&lt;int&gt;(word2.size() + 1)); for (int i = 0; i &lt;= word1.size(); i++) dp[i][0] = i; // åˆ é™¤ i ä¸ª for (int j = 0; j &lt;= word2.size(); j++) dp[0][j] = j; // åˆ é™¤ j ä¸ª for (int i = 1; i &lt;= word1.size(); i++) &#123; for (int j = 1; j &lt;= word2.size(); j++) &#123; if (word1[i - 1] == word2[j - 1]) dp[i][j] = dp[i - 1][j - 1]; else dp[i][j] = min(&#123;dp[i - 1][j - 1] + 1, dp[i - 1][j] + 1, dp[i][j - 1] + 1&#125;); &#125; &#125; return dp[word1.size()][word2.size()]; &#125;&#125;; å›æ–‡å›æ–‡å­ä¸² ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å›è¿™ä¸ªå­—ç¬¦ä¸²ä¸­ å›æ–‡å­ä¸² çš„æ•°ç›®ã€‚ å›æ–‡å­—ç¬¦ä¸² æ˜¯æ­£ç€è¯»å’Œå€’è¿‡æ¥è¯»ä¸€æ ·çš„å­—ç¬¦ä¸²ã€‚ å­å­—ç¬¦ä¸² æ˜¯å­—ç¬¦ä¸²ä¸­çš„ç”±è¿ç»­å­—ç¬¦ç»„æˆçš„ä¸€ä¸ªåºåˆ—ã€‚ å…·æœ‰ä¸åŒå¼€å§‹ä½ç½®æˆ–ç»“æŸä½ç½®çš„å­ä¸²ï¼Œå³ä½¿æ˜¯ç”±ç›¸åŒçš„å­—ç¬¦ç»„æˆï¼Œä¹Ÿä¼šè¢«è§†ä½œä¸åŒçš„å­ä¸²ã€‚ dp[i][j]ï¼šè¡¨ç¤ºåŒºé—´èŒƒå›´ [i,j] ï¼ˆå·¦é—­å³é—­ï¼‰çš„å­ä¸²æ˜¯å¦æ˜¯å›æ–‡å­ä¸²ï¼Œå¦‚æœæ˜¯ dp[i][j] ä¸º trueï¼Œå¦åˆ™ä¸º false å½“ s[i] ä¸ s[j] ä¸ç›¸ç­‰ï¼Œdp[i][j] ä¸€å®šæ˜¯ falseã€‚ å½“ s[i] ä¸ s[j] ç›¸ç­‰æ—¶ï¼Œ æƒ…å†µä¸€ï¼šä¸‹æ ‡ i ä¸ j ç›¸åŒï¼ŒåŒä¸€ä¸ªå­—ç¬¦ä¾‹å¦‚ aï¼Œå½“ç„¶æ˜¯å›æ–‡å­ä¸² æƒ…å†µäºŒï¼šä¸‹æ ‡ i ä¸ j ç›¸å·®ä¸º 1ï¼Œä¾‹å¦‚ aaï¼Œä¹Ÿæ˜¯æ–‡å­ä¸² æƒ…å†µä¸‰ï¼šä¸‹æ ‡ i ä¸ j ç›¸å·®å¤§äº 1 çš„æ—¶å€™ï¼Œä¾‹å¦‚ cabacï¼Œæ­¤æ—¶ s[i] ä¸ s[j] å·²ç»ç›¸åŒäº†ï¼Œæˆ‘ä»¬çœ‹ i åˆ° j åŒºé—´æ˜¯ä¸æ˜¯å›æ–‡å­ä¸²å°±çœ‹ aba æ˜¯ä¸æ˜¯å›æ–‡å°±å¯ä»¥äº†ï¼Œé‚£ä¹ˆ aba çš„åŒºé—´å°±æ˜¯ i+1 ä¸ j-1 åŒºé—´ï¼Œè¿™ä¸ªåŒºé—´æ˜¯ä¸æ˜¯å›æ–‡å°±çœ‹ dp[i + 1][j - 1] æ˜¯å¦ä¸º true ä¸€å®šè¦ä»ä¸‹åˆ°ä¸Šï¼Œä»å·¦åˆ°å³éå†ï¼Œè¿™æ ·ä¿è¯ dp[i + 1][j - 1] éƒ½æ˜¯ç»è¿‡è®¡ç®—çš„ 123456789101112131415161718class Solution &#123; public: int countSubstrings(string s) &#123; int n = s.size(); int ans = 0; vector&lt;vector&lt;bool&gt;&gt; dp(n, vector&lt;bool&gt;(n, false)); for (int i = n - 1; i &gt;= 0; i--) &#123; for (int j = i; j &lt; n; j++) &#123; if (s[i] != s[j]) continue; if (j - i &lt;= 1 || dp[i + 1][j - 1]) &#123; dp[i][j] = true; ans++; &#125; &#125; &#125; return ans; &#125;&#125;; å›æ–‡å­åºåˆ— ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œæ‰¾å‡ºå…¶ä¸­æœ€é•¿çš„å›æ–‡å­åºåˆ—ï¼Œå¹¶è¿”å›è¯¥åºåˆ—çš„é•¿åº¦ã€‚ å­åºåˆ—å®šä¹‰ä¸ºï¼šä¸æ”¹å˜å‰©ä½™å­—ç¬¦é¡ºåºçš„æƒ…å†µä¸‹ï¼Œåˆ é™¤æŸäº›å­—ç¬¦æˆ–è€…ä¸åˆ é™¤ä»»ä½•å­—ç¬¦å½¢æˆçš„ä¸€ä¸ªåºåˆ—ã€‚ dp[i][j]ï¼šå­—ç¬¦ä¸² s åœ¨ [i, j] èŒƒå›´å†…æœ€é•¿çš„å›æ–‡å­åºåˆ—çš„é•¿åº¦ å¦‚æœ s[i] ä¸ s[j] ç›¸åŒï¼Œé‚£ä¹ˆ $dp[i][j] &#x3D; dp[i + 1][j - 1] + 2$ å¦‚æœ s[i] ä¸ s[j] ä¸ç›¸åŒï¼Œé‚£ä¹ˆ $dp[i][j] &#x3D; max(dp[i + 1][j], dp[i][j - 1])$ 12345678910111213141516class Solution &#123; public: int longestPalindromeSubseq(string s) &#123; vector&lt;vector&lt;int&gt;&gt; dp(s.size(), vector&lt;int&gt;(s.size())); for (int i = 0; i &lt; s.size(); i++) dp[i][i] = 1; for (int i = s.size() - 1; i &gt;= 0; i--) &#123; for (int j = i + 1; j &lt; s.size(); j++) &#123; if (s[i] == s[j]) dp[i][j] = dp[i + 1][j - 1] + 2; else dp[i][j] = max(dp[i + 1][j], dp[i][j - 1]); &#125; &#125; return dp[0][s.size() - 1]; &#125;&#125;;","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Algorithm","slug":"Computer-Basics/Algorithm","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Algorithm/"}],"tags":[{"name":"DP","slug":"DP","permalink":"http://blog.sukiu.top/tags/DP/"}]},{"title":"Shell","slug":"Language-Shell","date":"2021-12-28T12:14:00.000Z","updated":"2021-12-28T12:14:00.000Z","comments":true,"path":"Programming-Language/Shell/Language-Shell/","link":"","permalink":"http://blog.sukiu.top/Programming-Language/Shell/Language-Shell/","excerpt":"Shell è„šæœ¬çš„ä¸€äº›æ³¨æ„ç‚¹","text":"Shell è„šæœ¬çš„ä¸€äº›æ³¨æ„ç‚¹ æ–‡ä»¶æµ‹è¯•1234567if [ -e file/dir ] ## å¦‚æœæ–‡ä»¶/ç›®å½•å­˜åœ¨ if [ -f file ] ## å¦‚æœæ–‡ä»¶å­˜åœ¨ if [ -d dir ] ## å¦‚æœç›®å½•å­˜åœ¨ if [ -s file ] ## å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”éç©º if [ -r file ] ## å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”å¯è¯» if [ -w file ] ## å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”å¯å†™ if [ -x file ] ## å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”å¯æ‰§è¡Œ æ•´æ•°æ¯”è¾ƒ123456if [ int1 -eq int2 ] ## å¦‚æœ == if [ int1 -ne int2 ] ## å¦‚æœ != if [ int1 -ge int2 ] ## å¦‚æœ &gt;= if [ int1 -gt int2 ] ## å¦‚æœ &gt; if [ int1 -le int2 ] ## å¦‚æœ &lt;= if [ int1 -lt int2 ] ## å¦‚æœ &lt; å­—ç¬¦ä¸²æ¯”è¾ƒ1234if [ $string1 == $string2 ] ## å¦‚æœ == (å­—ç¬¦ä¸²å…è®¸ä½¿ç”¨èµ‹å€¼å·åšç­‰å·) if [ $string1 != $string2 ] ## å¦‚æœ != if [ -n $string ] ## å¦‚æœstring é•¿åº¦é0 if [ -z $string ] ## å¦‚æœstring é•¿åº¦ä¸º0","categories":[{"name":"Programming Language","slug":"Programming-Language","permalink":"http://blog.sukiu.top/categories/Programming-Language/"},{"name":"Shell","slug":"Programming-Language/Shell","permalink":"http://blog.sukiu.top/categories/Programming-Language/Shell/"}],"tags":[{"name":"Shell","slug":"Shell","permalink":"http://blog.sukiu.top/tags/Shell/"}]},{"title":"å›æº¯ç®—æ³•","slug":"Backtracking","date":"2021-12-26T05:15:00.000Z","updated":"2021-12-26T05:15:00.000Z","comments":true,"path":"Computer-Basics/Algorithm/Backtracking/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Algorithm/Backtracking/","excerpt":"å›æº¯çš„æœ¬è´¨æ˜¯ç©·ä¸¾ï¼Œç©·ä¸¾æ‰€æœ‰å¯èƒ½ï¼Œç„¶åé€‰å‡ºæƒ³è¦çš„ç­”æ¡ˆï¼Œå¦‚æœæƒ³è®©å›æº¯æ³•é«˜æ•ˆä¸€äº›ï¼Œéœ€è¦è¿›è¡Œå‰ªææ“ä½œã€‚ å›æº¯æ³•ï¼Œä¸€èˆ¬å¯ä»¥è§£å†³å¦‚ä¸‹å‡ ç§é—®é¢˜ï¼š ç»„åˆé—®é¢˜ï¼šN ä¸ªæ•°é‡Œé¢æŒ‰ä¸€å®šè§„åˆ™æ‰¾å‡º k ä¸ªæ•°çš„é›†åˆ åˆ‡å‰²é—®é¢˜ï¼šä¸€ä¸ªå­—ç¬¦ä¸²æŒ‰ä¸€å®šè§„åˆ™æœ‰å‡ ç§åˆ‡å‰²æ–¹å¼ å­é›†é—®é¢˜ï¼šä¸€ä¸ª N ä¸ªæ•°çš„é›†åˆé‡Œæœ‰å¤šå°‘ç¬¦åˆæ¡ä»¶çš„å­é›† æ’åˆ—é—®é¢˜ï¼šN ä¸ªæ•°æŒ‰ä¸€å®šè§„åˆ™å…¨æ’åˆ—ï¼Œæœ‰å‡ ç§æ’åˆ—æ–¹å¼ æ£‹ç›˜é—®é¢˜ï¼šN çš‡åï¼Œè§£æ•°ç‹¬ç­‰ç­‰ ç»„åˆä¸å¼ºè°ƒå…ƒç´ é¡ºåºï¼Œæ’åˆ—å¼ºè°ƒå…ƒç´ é¡ºåºï¼š å³ ä¸åŒé¡ºåºçš„åŒæ ·å…ƒç´ é›†åˆ ç®—ä½œæ’åˆ—ï¼Œä½†ä¸ç®—ç»„åˆ","text":"å›æº¯çš„æœ¬è´¨æ˜¯ç©·ä¸¾ï¼Œç©·ä¸¾æ‰€æœ‰å¯èƒ½ï¼Œç„¶åé€‰å‡ºæƒ³è¦çš„ç­”æ¡ˆï¼Œå¦‚æœæƒ³è®©å›æº¯æ³•é«˜æ•ˆä¸€äº›ï¼Œéœ€è¦è¿›è¡Œå‰ªææ“ä½œã€‚ å›æº¯æ³•ï¼Œä¸€èˆ¬å¯ä»¥è§£å†³å¦‚ä¸‹å‡ ç§é—®é¢˜ï¼š ç»„åˆé—®é¢˜ï¼šN ä¸ªæ•°é‡Œé¢æŒ‰ä¸€å®šè§„åˆ™æ‰¾å‡º k ä¸ªæ•°çš„é›†åˆ åˆ‡å‰²é—®é¢˜ï¼šä¸€ä¸ªå­—ç¬¦ä¸²æŒ‰ä¸€å®šè§„åˆ™æœ‰å‡ ç§åˆ‡å‰²æ–¹å¼ å­é›†é—®é¢˜ï¼šä¸€ä¸ª N ä¸ªæ•°çš„é›†åˆé‡Œæœ‰å¤šå°‘ç¬¦åˆæ¡ä»¶çš„å­é›† æ’åˆ—é—®é¢˜ï¼šN ä¸ªæ•°æŒ‰ä¸€å®šè§„åˆ™å…¨æ’åˆ—ï¼Œæœ‰å‡ ç§æ’åˆ—æ–¹å¼ æ£‹ç›˜é—®é¢˜ï¼šN çš‡åï¼Œè§£æ•°ç‹¬ç­‰ç­‰ ç»„åˆä¸å¼ºè°ƒå…ƒç´ é¡ºåºï¼Œæ’åˆ—å¼ºè°ƒå…ƒç´ é¡ºåºï¼š å³ ä¸åŒé¡ºåºçš„åŒæ ·å…ƒç´ é›†åˆ ç®—ä½œæ’åˆ—ï¼Œä½†ä¸ç®—ç»„åˆ å‰è¨€çœ‹åˆ°å›æº¯ï¼Œæ„Ÿè§‰å’Œ DFSï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰åŒºåˆ«ä¸å¤ªå¤§ï¼Œä¸¤è€…å…¶å®æ˜¯åŒ…å«å…³ç³»ã€‚ å›æº¯æœç´¢æ˜¯ DFS çš„ä¸€ç§ï¼Œå¯¹äºæŸä¸€ä¸ªæœç´¢æ ‘æ¥è¯´ï¼ˆæœç´¢æ ‘è®°å½•è·¯å¾„å’ŒçŠ¶æ€åˆ¤æ–­ï¼‰ï¼Œå…¶ä¸»è¦çš„åŒºåˆ«æ˜¯ï¼š å›æº¯æ³•åœ¨æ±‚è§£è¿‡ç¨‹ä¸­ä¸ä¿ç•™å®Œæ•´çš„æ ‘ç»“æ„ï¼Œè€Œæ·±åº¦ä¼˜å…ˆæœç´¢åˆ™è®°ä¸‹å®Œæ•´çš„æœç´¢æ ‘ ä¸ºäº†å‡å°‘å­˜å‚¨ç©ºé—´ï¼Œåœ¨æ·±åº¦ä¼˜å…ˆæœç´¢ä¸­ï¼Œç”¨æ ‡å¿—çš„æ–¹æ³•è®°å½•è®¿é—®è¿‡çš„çŠ¶æ€ï¼Œè¿™ç§æ–¹æ³•ä½¿å¾—æ·±åº¦ä¼˜å…ˆæœç´¢æ³•ä¸å›æº¯æ³•æ²¡ä»€ä¹ˆåŒºåˆ« ç»„åˆé—®é¢˜ N ä¸ªæ•°é‡Œé¢æŒ‰ä¸€å®šè§„åˆ™æ‰¾å‡º k ä¸ªæ•°çš„é›†åˆã€‚ ç›´æ¥ DFS æš´æœï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶è¿”å›ï¼Œå†åŠ ä¸Šé€‚å½“å‰ªæå³å¯ã€‚ å¦‚æœæ˜¯ä¸€ä¸ªé›†åˆæ¥æ±‚ç»„åˆçš„è¯ï¼Œå°±éœ€è¦ startIndexï¼Œä¾‹å¦‚ï¼šå›æº¯ç®—æ³•ï¼šæ±‚ç»„åˆé—®é¢˜ï¼ (opens new window)ï¼Œå›æº¯ç®—æ³•ï¼šæ±‚ç»„åˆæ€»å’Œï¼ (opens new window)ã€‚å¦‚æœæ˜¯å¤šä¸ªé›†åˆå–ç»„åˆï¼Œå„ä¸ªé›†åˆä¹‹é—´ç›¸äº’ä¸å½±å“ï¼Œé‚£ä¹ˆå°±ä¸ç”¨ startIndexï¼Œä¾‹å¦‚ï¼šå›æº¯ç®—æ³•ï¼šç”µè¯å·ç çš„å­—æ¯ç»„åˆ ä¾‹é¢˜ï¼š77. ç»„åˆ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ 12345678910111213141516171819202122class Solution &#123; public: vector&lt;vector&lt;int&gt;&gt; ans; vector&lt;int&gt; tmp; void dfs(int n, int k, int idx) &#123; if (tmp.size() == k) &#123; ans.push_back(tmp); return; &#125; for (int i = idx; i &lt;= n - (k - tmp.size()) + 1; i++) &#123; tmp.push_back(i); dfs(n, k, i + 1); tmp.pop_back(); &#125; &#125; vector&lt;vector&lt;int&gt;&gt; combine(int n, int k) &#123; dfs(n, k, 1); return ans; &#125;&#125;; åˆ‡å‰²é—®é¢˜ ä¸€ä¸ªå­—ç¬¦ä¸²æŒ‰ä¸€å®šè§„åˆ™æœ‰å‡ ç§åˆ‡å‰²æ–¹å¼ å…·ä½“ç®—æ³•ç±»ä¼¼ç»„åˆé—®é¢˜ï¼Œåˆ¤æ–­å‡½æ•°æ¯”è¾ƒå¤æ‚ã€‚ ä¾‹é¢˜ï¼š131. åˆ†å‰²å›æ–‡ä¸² - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ 123456789101112131415161718192021222324252627282930class Solution &#123; public: vector&lt;vector&lt;string&gt;&gt; ans; vector&lt;string&gt; tmp; bool check(string s, int start, int end) &#123; for (int i = start, j = end; i &lt; j; i++, j--) &#123; if (s[i] != s[j]) return false; &#125; return true; &#125; void dfs(string s, int idx) &#123; if (idx &gt;= s.size()) &#123; ans.push_back(tmp); return; &#125; for (int i = idx; i &lt; s.size(); i++) &#123; if (!check(s, idx, i)) continue; tmp.push_back(s.substr(idx, i - idx + 1)); dfs(s, i + 1); tmp.pop_back(); &#125; &#125; vector&lt;vector&lt;string&gt;&gt; partition(string s) &#123; dfs(s, 0); return ans; &#125;&#125;; å­é›†é—®é¢˜ ä¸€ä¸ª N ä¸ªæ•°çš„é›†åˆé‡Œæœ‰å¤šå°‘ç¬¦åˆæ¡ä»¶çš„å­é›† å¦‚æœæŠŠ å­é›†é—®é¢˜ã€ç»„åˆé—®é¢˜ã€åˆ†å‰²é—®é¢˜éƒ½æŠ½è±¡ä¸ºä¸€æ£µæ ‘çš„è¯ï¼Œé‚£ä¹ˆç»„åˆé—®é¢˜å’Œåˆ†å‰²é—®é¢˜éƒ½æ˜¯æ”¶é›†æ ‘çš„å¶å­èŠ‚ç‚¹ï¼Œè€Œå­é›†é—®é¢˜æ˜¯æ‰¾æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚ ä¾‹é¢˜ï¼š78. å­é›† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ 1234567891011121314151617181920class Solution &#123; public: vector&lt;vector&lt;int&gt;&gt; ans; vector&lt;int&gt; tmp; void dfs(vector&lt;int&gt;&amp; nums, int idx) &#123; ans.push_back(tmp); if (idx &gt;= nums.size()) return; for (int i = idx; i &lt; nums.size(); i++) &#123; tmp.push_back(nums[i]); dfs(nums, i + 1); tmp.pop_back(); &#125; &#125; vector&lt;vector&lt;int&gt;&gt; subsets(vector&lt;int&gt;&amp; nums) &#123; dfs(nums, 0); return ans; &#125;&#125;; æ’åˆ—é—®é¢˜ N ä¸ªæ•°æŒ‰ä¸€å®šè§„åˆ™å…¨æ’åˆ—ï¼Œæœ‰å‡ ç§æ’åˆ—æ–¹å¼ æ’åˆ—æ˜¯åŒºåˆ†é¡ºåºçš„ï¼Œä¸åŒé¡ºåºçš„é›†åˆç®—ä¸åŒæ’åˆ— å’Œç»„åˆé—®é¢˜åŒºåˆ«åœ¨æ¯æ¬¡å¾ªç¯çš„èµ·å§‹ä½ç½®éƒ½æ˜¯ 0ï¼ŒåŒæ—¶ç”¨ vis æ•°ç»„æ¥è®°å½•çŠ¶æ€ã€‚ 1234567891011121314151617181920212223242526class Solution &#123; public: vector&lt;vector&lt;int&gt;&gt; ans; vector&lt;int&gt; tmp; void dfs(vector&lt;int&gt;&amp; nums, vector&lt;bool&gt;&amp; vis) &#123; if (tmp.size() == nums.size()) &#123; ans.push_back(tmp); return; &#125; for (int i = 0; i &lt; nums.size(); i++) &#123; if (vis[i]) continue; tmp.push_back(nums[i]); vis[i] = true; dfs(nums, vis); vis[i] = false; tmp.pop_back(); &#125; &#125; vector&lt;vector&lt;int&gt;&gt; permute(vector&lt;int&gt;&amp; nums) &#123; vector&lt;bool&gt; vis(nums.size(), false); dfs(nums, vis); return ans; &#125;&#125;; æ£‹ç›˜é—®é¢˜ N çš‡åï¼Œè§£æ•°ç‹¬ç­‰ç­‰ ç»™å›æº¯å‡½æ•°åŠ ä¸Š bool è¿”å›å€¼ï¼Œæ‰¾åˆ°ä¸€ç»„æˆåŠŸè§£åˆ™è¿”å›ã€‚ ä¾‹é¢˜ï¼š51. N çš‡å - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849class Solution &#123; public: vector&lt;vector&lt;string&gt;&gt; ans; /* * é€’å½’éå†è¡Œ * å¾ªç¯éå†åˆ— */ void dfs(int row, int n, vector&lt;string&gt;&amp; chess) &#123; if (row == n) &#123; ans.push_back(chess); return; &#125; for (int col = 0; col &lt; n; col++) &#123; if (check(row, col, n, chess)) &#123; chess[row][col] = &#x27;Q&#x27;; dfs(row + 1, n, chess); chess[row][col] = &#x27;.&#x27;; &#125; &#125; &#125; /* *ä¸èƒ½åŒè¡Œï¼ˆé€’å½’è¿‡ç¨‹ä¸­è¿›è¡Œäº†åŒè¡Œæ£€æŸ¥ï¼‰ *ä¸èƒ½åŒåˆ— *ä¸èƒ½åŒæ–œçº¿ ï¼ˆ45åº¦å’Œ135åº¦è§’ï¼‰ */ bool check(int row, int col, int n, vector&lt;string&gt;&amp; chess) &#123; // æ£€æŸ¥åˆ—ï¼Œå‰ªæ for (int i = 0; i &lt; row; i++) &#123; if (chess[i][col] == &#x27;Q&#x27;) return false; &#125; // âˆ 45Â° for (int i = row - 1, j = col - 1; i &gt;= 0 &amp;&amp; j &gt;= 0; i--, j--) &#123; if (chess[i][j] == &#x27;Q&#x27;) return false; &#125; // âˆ 135Â° for (int i = row - 1, j = col + 1; i &gt;= 0 &amp;&amp; j &lt; n; i--, j++) &#123; if (chess[i][j] == &#x27;Q&#x27;) return false; &#125; return true; &#125; vector&lt;vector&lt;string&gt;&gt; solveNQueens(int n) &#123; vector&lt;string&gt; chess(n, string(n, &#x27;.&#x27;)); dfs(0, n, chess); return ans; &#125;&#125;; ä¾‹é¢˜ï¼š37. è§£æ•°ç‹¬ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ 1234567891011121314151617181920212223242526272829303132333435363738class Solution &#123; public: bool check(int row, int col, int val, vector&lt;vector&lt;char&gt;&gt;&amp; board) &#123; for (int j = 0; j &lt; 9; j++) &#123; // æ£€æŸ¥åˆ— if (board[row][j] == val) return false; &#125; for (int i = 0; i &lt; 9; i++) &#123; // æ£€æŸ¥è¡Œ if (board[i][col] == val) return false; &#125; // æ£€æŸ¥ 3x3 int nRow = (row / 3) * 3; int nCol = (col / 3) * 3; for (int i = nRow; i &lt; nRow + 3; i++) &#123; for (int j = nCol; j &lt; nCol + 3; j++) if (board[i][j] == val) return false; &#125; return true; &#125; bool dfs(vector&lt;vector&lt;char&gt;&gt;&amp; board) &#123; for (int i = 0; i &lt; board.size(); i++) &#123; for (int j = 0; j &lt; board[0].size(); j++) &#123; if (board[i][j] != &#x27;.&#x27;) continue; for (char k = &#x27;1&#x27;; k &lt;= &#x27;9&#x27;; k++) &#123; if (check(i, j, k, board)) &#123; board[i][j] = k; if (dfs(board)) return true; board[i][j] = &#x27;.&#x27;; &#125; &#125; return false; // 9 ä¸ªæ•°éƒ½ä¸è¡Œ &#125; &#125; return true; &#125; void solveSudoku(vector&lt;vector&lt;char&gt;&gt;&amp; board) &#123; dfs(board); &#125;&#125;;","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Algorithm","slug":"Computer-Basics/Algorithm","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Algorithm/"}],"tags":[{"name":"Backtracking","slug":"Backtracking","permalink":"http://blog.sukiu.top/tags/Backtracking/"}]},{"title":"ç‰©ç†å±‚","slug":"Physical-Layer","date":"2021-12-23T13:47:00.000Z","updated":"2021-12-23T13:47:00.000Z","comments":true,"path":"Computer-Basics/Computer-Network/Physical-Layer/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Computer-Network/Physical-Layer/","excerpt":"ç‰©ç†å±‚ï¼ˆPhysical Layerï¼‰æ˜¯è®¡ç®—æœºç½‘ç»œ OSI æ¨¡å‹ä¸­æœ€ä½çš„ä¸€å±‚ï¼Œä¹Ÿæ˜¯æœ€åŸºæœ¬çš„ä¸€å±‚ã€‚ç®€å•çš„è¯´ï¼Œç½‘ç»œçš„ç‰©ç†å±‚é¢ç¡®ä¿åŸå§‹çš„æ•°æ®å¯åœ¨å„ç§ç‰©ç†åª’ä½“ä¸Šä¼ è¾“ã€‚ ç‰©ç†å±‚è§£å†³å¦‚ä½•åœ¨è¿æ¥å„ç§è®¡ç®—æœºçš„ä¼ è¾“åª’ä½“ä¸Šä¼ è¾“æ•°æ®æ¯”ç‰¹æµ ç‰©ç†å±‚ä¸»è¦ä»»åŠ¡ï¼šç¡®å®šä¸ä¼ è¾“åª’ä½“æ¥å£æœ‰å…³çš„ä¸€äº›ç‰¹æ€§ å››å¤§ç‰¹æ€§ï¼š æœºæ¢°ç‰¹æ€§ï¼šå®šä¹‰ç‰©ç†è¿æ¥çš„ç‰¹æ€§ï¼Œè§„å®šç‰©ç†è¿æ¥æ—¶æ‰€é‡‡ç”¨çš„è§„æ ¼ã€æ¥å£å½¢çŠ¶ã€å¼•çº¿æ•°ç›®ã€å¼•è„šæ•°é‡å’Œæ’åˆ—æƒ…å†µ ç”µæ°”ç‰¹æ€§ï¼šè§„å®šä¼ è¾“äºŒè¿›åˆ¶ä½æ—¶ï¼Œçº¿è·¯ä¸Šä¿¡å·çš„ç”µå‹èŒƒå›´ã€é˜»æŠ—åŒ¹é…ã€ä¼ è¾“é€Ÿç‡å’Œè·ç¦»é™åˆ¶ åŠŸèƒ½ç‰¹æ€§ï¼šæŒ‡æ˜æŸæ¡çº¿ä¸Šå‡ºç°çš„æŸä¸€ç”µå¹³è¡¨ç¤ºä½•ç§æ„ä¹‰ï¼Œæ¥å£éƒ¨ä»¶çš„ä¿¡å·çº¿çš„ç”¨é€” è§„ç¨‹ç‰¹æ€§ï¼šå®šä¹‰å„æ¡ç‰©ç†çº¿è·¯çš„å·¥ä½œè§„ç¨‹å’Œæ—¶åºå…³ç³» ç‰©ç†å±‚è®¾å¤‡ï¼šä¸­ç»§å™¨","text":"ç‰©ç†å±‚ï¼ˆPhysical Layerï¼‰æ˜¯è®¡ç®—æœºç½‘ç»œ OSI æ¨¡å‹ä¸­æœ€ä½çš„ä¸€å±‚ï¼Œä¹Ÿæ˜¯æœ€åŸºæœ¬çš„ä¸€å±‚ã€‚ç®€å•çš„è¯´ï¼Œç½‘ç»œçš„ç‰©ç†å±‚é¢ç¡®ä¿åŸå§‹çš„æ•°æ®å¯åœ¨å„ç§ç‰©ç†åª’ä½“ä¸Šä¼ è¾“ã€‚ ç‰©ç†å±‚è§£å†³å¦‚ä½•åœ¨è¿æ¥å„ç§è®¡ç®—æœºçš„ä¼ è¾“åª’ä½“ä¸Šä¼ è¾“æ•°æ®æ¯”ç‰¹æµ ç‰©ç†å±‚ä¸»è¦ä»»åŠ¡ï¼šç¡®å®šä¸ä¼ è¾“åª’ä½“æ¥å£æœ‰å…³çš„ä¸€äº›ç‰¹æ€§ å››å¤§ç‰¹æ€§ï¼š æœºæ¢°ç‰¹æ€§ï¼šå®šä¹‰ç‰©ç†è¿æ¥çš„ç‰¹æ€§ï¼Œè§„å®šç‰©ç†è¿æ¥æ—¶æ‰€é‡‡ç”¨çš„è§„æ ¼ã€æ¥å£å½¢çŠ¶ã€å¼•çº¿æ•°ç›®ã€å¼•è„šæ•°é‡å’Œæ’åˆ—æƒ…å†µ ç”µæ°”ç‰¹æ€§ï¼šè§„å®šä¼ è¾“äºŒè¿›åˆ¶ä½æ—¶ï¼Œçº¿è·¯ä¸Šä¿¡å·çš„ç”µå‹èŒƒå›´ã€é˜»æŠ—åŒ¹é…ã€ä¼ è¾“é€Ÿç‡å’Œè·ç¦»é™åˆ¶ åŠŸèƒ½ç‰¹æ€§ï¼šæŒ‡æ˜æŸæ¡çº¿ä¸Šå‡ºç°çš„æŸä¸€ç”µå¹³è¡¨ç¤ºä½•ç§æ„ä¹‰ï¼Œæ¥å£éƒ¨ä»¶çš„ä¿¡å·çº¿çš„ç”¨é€” è§„ç¨‹ç‰¹æ€§ï¼šå®šä¹‰å„æ¡ç‰©ç†çº¿è·¯çš„å·¥ä½œè§„ç¨‹å’Œæ—¶åºå…³ç³» ç‰©ç†å±‚è®¾å¤‡ï¼šä¸­ç»§å™¨ é€šä¿¡æ–¹å¼ ä¸»è¦è€ƒè™‘ï¼š å•å·¥é€šä¿¡ï¼šå•å‘ä¼ è¾“ åŠåŒå·¥é€šä¿¡ï¼šåŒå‘äº¤æ›¿ä¼ è¾“ å…¨åŒå·¥é€šä¿¡ï¼šåŒå‘åŒæ—¶ä¼ è¾“ æ•°æ®äº¤æ¢æ–¹å¼ ç”µè·¯äº¤æ¢ æŠ¥æ–‡äº¤æ¢ åˆ†ç»„äº¤æ¢ ä¼ è¾“ä»‹è´¨å¯¼å‘æ€§ä¼ è¾“ä»‹è´¨ åŒç»çº¿ åŒè½´ç”µç¼† å…‰çº¤ éå¯¼å‘æ€§ä¼ è¾“ä»‹è´¨ æ— çº¿ç”µæ³¢ å¾®æ³¢ çº¢å¤–çº¿ã€æ¿€å…‰","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Computer Network","slug":"Computer-Basics/Computer-Network","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Computer-Network/"}],"tags":[{"name":"Network","slug":"Network","permalink":"http://blog.sukiu.top/tags/Network/"}]},{"title":"æ•°æ®é“¾è·¯å±‚","slug":"Data-Link-Layer","date":"2021-12-23T12:57:00.000Z","updated":"2021-12-23T12:57:00.000Z","comments":true,"path":"Computer-Basics/Computer-Network/Data-Link-Layer/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Computer-Network/Data-Link-Layer/","excerpt":"æ•°æ®é“¾è·¯å±‚ æ˜¯ OSI å‚è€ƒæ¨¡å‹ä¸­çš„ç¬¬äºŒå±‚ï¼Œä»‹ä¹äºç‰©ç†å±‚å’Œç½‘ç»œå±‚ä¹‹é—´ã€‚ åŠŸèƒ½ï¼šåœ¨ç‰©ç†å±‚æä¾›æœåŠ¡çš„åŸºç¡€ä¸Šå‘ç½‘ç»œå±‚æä¾›æœåŠ¡ æœ€åŸºæœ¬çš„æœåŠ¡ï¼šå°†æºè‡ªäºç‰©ç†å±‚çš„æ•°æ®å¯é åœ°ä¼ è¾“åˆ°ç›¸é‚»ç»“ç‚¹åˆ°ç›®æ ‡æœºç½‘ç»œå±‚ ä¸»è¦ä½œç”¨ï¼šåŠ å¼ºç‰©ç†å±‚ä¼ è¾“åŸå§‹æ¯”ç‰¹æµçš„åŠŸèƒ½ï¼Œå°†ç‰©ç†å±‚æä¾›çš„å¯èƒ½å‡ºé”™çš„ç‰©ç†è¿æ¥æ”¹é€ æˆé€»è¾‘ä¸Šæ— å·®é”™çš„æ•°æ®é“¾è·¯ï¼Œä½¿ä¹‹å¯¹ç½‘ç»œå±‚è¡¨ç°ä¸ºä¸€æ¡æ— å·®é”™çš„é“¾è·¯ ä¸ºç½‘ç»œå±‚æä¾›æœåŠ¡ï¼š æ— ç¡®è®¤çš„æ— è¿æ¥æœåŠ¡ æœ‰ç¡®è®¤çš„æ— è¿æ¥æœåŠ¡ æœ‰ç¡®è®¤çš„é¢å‘è¿æ¥æœåŠ¡ é‡è¦åè®®ï¼š PPPï¼ˆPoint to Point Protocolï¼‰ç‚¹ - ç‚¹åè®® é“¾è·¯å±‚è®¾å¤‡ï¼š äº¤æ¢æœº ç½‘æ¡¥","text":"æ•°æ®é“¾è·¯å±‚ æ˜¯ OSI å‚è€ƒæ¨¡å‹ä¸­çš„ç¬¬äºŒå±‚ï¼Œä»‹ä¹äºç‰©ç†å±‚å’Œç½‘ç»œå±‚ä¹‹é—´ã€‚ åŠŸèƒ½ï¼šåœ¨ç‰©ç†å±‚æä¾›æœåŠ¡çš„åŸºç¡€ä¸Šå‘ç½‘ç»œå±‚æä¾›æœåŠ¡ æœ€åŸºæœ¬çš„æœåŠ¡ï¼šå°†æºè‡ªäºç‰©ç†å±‚çš„æ•°æ®å¯é åœ°ä¼ è¾“åˆ°ç›¸é‚»ç»“ç‚¹åˆ°ç›®æ ‡æœºç½‘ç»œå±‚ ä¸»è¦ä½œç”¨ï¼šåŠ å¼ºç‰©ç†å±‚ä¼ è¾“åŸå§‹æ¯”ç‰¹æµçš„åŠŸèƒ½ï¼Œå°†ç‰©ç†å±‚æä¾›çš„å¯èƒ½å‡ºé”™çš„ç‰©ç†è¿æ¥æ”¹é€ æˆé€»è¾‘ä¸Šæ— å·®é”™çš„æ•°æ®é“¾è·¯ï¼Œä½¿ä¹‹å¯¹ç½‘ç»œå±‚è¡¨ç°ä¸ºä¸€æ¡æ— å·®é”™çš„é“¾è·¯ ä¸ºç½‘ç»œå±‚æä¾›æœåŠ¡ï¼š æ— ç¡®è®¤çš„æ— è¿æ¥æœåŠ¡ æœ‰ç¡®è®¤çš„æ— è¿æ¥æœåŠ¡ æœ‰ç¡®è®¤çš„é¢å‘è¿æ¥æœåŠ¡ é‡è¦åè®®ï¼š PPPï¼ˆPoint to Point Protocolï¼‰ç‚¹ - ç‚¹åè®® é“¾è·¯å±‚è®¾å¤‡ï¼š äº¤æ¢æœº ç½‘æ¡¥ åŸºæœ¬é—®é¢˜å°è£…æˆå¸§å°†ç½‘ç»œå±‚ä¼ ä¸‹æ¥çš„åˆ†ç»„æ·»åŠ é¦–éƒ¨å’Œå°¾éƒ¨ï¼Œç”¨äºæ ‡è®°å¸§çš„å¼€å§‹å’Œç»“æŸã€‚ é€æ˜ä¼ è¾“é€æ˜è¡¨ç¤ºä¸€ä¸ªå®é™…å­˜åœ¨çš„äº‹ç‰©çœ‹èµ·æ¥å¥½åƒä¸å­˜åœ¨ä¸€æ ·ã€‚é’ˆå¯¹ç”¨æˆ·æ˜¯é€æ˜çš„ï¼›é¦–å°¾æ˜¯ç•Œå®šå¸§ï¼Œè½¬ä¹‰å­—ç¬¦å»é™¤æ•°æ®éƒ¨åˆ†å’Œé¦–å°¾ç›¸åŒå¼•èµ·æ­§ä¹‰ã€‚ å·®é”™æ§åˆ¶é“¾è·¯å±‚ç¼–ç é’ˆå¯¹ä¸€ç»„æ¯”ç‰¹ï¼Œé€šè¿‡å†—ä½™ç çš„æŠ€æœ¯å®ç°ä¸€ç»„äºŒè¿›åˆ¶æ¯”ç‰¹ä¸²åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦å‡ºç°å·®é”™ã€‚ ç›®å‰æ•°æ®é“¾è·¯å±‚å¹¿æ³›ä½¿ç”¨äº†å¾ªç¯å†—ä½™æ£€éªŒï¼ˆCRCï¼‰æ¥æ£€æŸ¥æ¯”ç‰¹å·®é”™ã€‚ ä¸»è¦åŒ…æ‹¬ï¼š æ£€é”™ç¼–ç  å¥‡å¶æ ¡éªŒç  å¾ªç¯å†—ä½™ç  çº é”™ç¼–ç  æµ·æ˜ç  æµé‡æ§åˆ¶ä¸»è¦é€šè¿‡æ»‘åŠ¨çª—å£åè®®ï¼Œæ ¹æ®çª—å£å¤§å°åˆ†ä¸ºï¼š åœæ­¢ - ç­‰å¾…åè®®ï¼šå‘é€çª—å£ &#x3D; 1ï¼Œæ¥æ”¶çª—å£ &#x3D; 1 åé€€ N å¸§åè®®ï¼ˆGBNï¼‰ï¼šå‘é€çª—å£ &gt; 1ï¼Œæ¥æ”¶çª—å£ &#x3D; 1 é€‰æ‹©é‡ä¼ åè®®ï¼ˆSRï¼‰ï¼šå‘é€çª—å£ &gt; 1ï¼Œæ¥æ”¶çª—å£ &gt; 1 ä»‹è´¨è®¿é—®æ§åˆ¶ CSMA&#x2F;CD CSMA&#x2F;CD ä¸ºè½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—®&#x2F;å†²çªæ£€æµ‹ï¼Œæ˜¯åƒä»¥å¤ªç½‘è¿™ç§å¹¿æ’­ç½‘ç»œé‡‡ç”¨çš„ä¸€ç§æœºåˆ¶ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨ä»¥å¤ªç½‘ä¸­å¤šå°ä¸»æœºåœ¨åŒä¸€ä¸ªä¿¡é“ä¸­è¿›è¡Œæ•°æ®ä¼ è¾“ï¼ŒCSMA&#x2F;CD å¾ˆå¥½çš„è§£å†³äº†å…±äº«ä¿¡é“é€šä¿¡ä¸­å‡ºç°çš„é—®é¢˜ï¼Œå®ƒçš„å·¥ä½œåŸç†ä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼š è½½æ³¢ç›‘å¬ï¼šå½“ä½¿ç”¨ CSMA&#x2F;CD åè®®æ—¶ï¼Œæ€»çº¿ä¸Šçš„å„ä¸ªèŠ‚ç‚¹éƒ½åœ¨ç›‘å¬ä¿¡é“ä¸Šæ˜¯å¦æœ‰ä¿¡å·åœ¨ä¼ è¾“ï¼Œå¦‚æœæœ‰çš„è¯ï¼Œè¡¨æ˜ä¿¡é“å¤„äºå¿™ç¢ŒçŠ¶æ€ï¼Œç»§ç»­ä¿æŒç›‘å¬ï¼Œç›´åˆ°ä¿¡é“ç©ºé—²ä¸ºæ­¢ã€‚å¦‚æœå‘ç°ä¿¡é“æ˜¯ç©ºé—²çš„ï¼Œå°±ç«‹å³å‘é€æ•°æ®ã€‚ å†²çªæ£€æµ‹ï¼šå½“ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸ŠèŠ‚ç‚¹åŒæ—¶ç›‘å¬åˆ°ä¿¡é“ç©ºé—²ï¼Œä¾¿å¼€å§‹å‘é€æ•°æ®ï¼Œæ­¤æ—¶å°±ä¼šå‘ç”Ÿç¢°æ’ï¼ˆæ•°æ®çš„ä¼ è¾“å»¶è¿Ÿä¹Ÿå¯èƒ½å¼•å‘ç¢°æ’ï¼‰ã€‚å½“ä¸¤ä¸ªå¸§å‘ç”Ÿå†²çªæ—¶ï¼Œæ•°æ®å¸§å°±ä¼šç ´åè€Œå¤±å»äº†ç»§ç»­ä¼ è¾“çš„æ„ä¹‰ã€‚åœ¨æ•°æ®çš„å‘é€è¿‡ç¨‹ä¸­ï¼Œä»¥å¤ªç½‘æ˜¯ä¸€ç›´åœ¨ç›‘å¬ä¿¡é“çš„ï¼Œå½“æ£€æµ‹åˆ°å½“å‰ä¿¡é“å†²çªï¼Œå°±ç«‹å³åœæ­¢è¿™æ¬¡ä¼ è¾“ï¼Œé¿å…é€ æˆç½‘ç»œèµ„æºæµªè´¹ï¼ŒåŒæ—¶å‘ä¿¡é“å‘é€ä¸€ä¸ªã€Œå†²çªã€ä¿¡å·ï¼Œç¡®ä¿å…¶å®ƒèŠ‚ç‚¹ä¹Ÿå‘ç°è¯¥å†²çªã€‚ä¹‹åé‡‡ç”¨ä¸€ç§äºŒè¿›åˆ¶é€€é¿ç­–ç•¥è®©å¾…å‘é€æ•°æ®çš„èŠ‚ç‚¹éšæœºé€€é¿ä¸€æ®µæ—¶é—´ä¹‹åé‡æ–°ã€‚ CSMA&#x2F;CD çš„å·¥ä½œæµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š å…ˆå¬åå‘ è¾¹å‘è¾¹å¬ å†²çªåœå‘ éšæœºé‡å‘ CSMA&#x2F;CD: è½½æ³¢ç›‘å¬å¤šè·¯è®¿é—® &#x2F; ç¢°æ’æ£€æµ‹ï¼ˆDetectï¼‰ï¼Œç”¨äºæœ‰çº¿å±€åŸŸç½‘ï¼ˆLANï¼‰CSMA&#x2F;CA: è½½æ³¢ç›‘å¬å¤šè·¯è®¿é—® &#x2F; ç¢°æ’é¿å…ï¼ˆAvoidï¼‰ï¼Œç”¨äºæ— çº¿å±€åŸŸç½‘ï¼ˆWIFIï¼‰ PPP åè®®äº’è”ç½‘ç”¨æˆ·é€šå¸¸éœ€è¦è¿æ¥åˆ°æŸä¸ª ISP ä¹‹åæ‰èƒ½æ¥å…¥åˆ°äº’è”ç½‘ï¼ŒPPPï¼ˆç‚¹å¯¹ç‚¹ï¼‰ åè®®æ˜¯ç”¨æˆ·è®¡ç®—æœºå’Œ ISP è¿›è¡Œé€šä¿¡æ—¶æ‰€ä½¿ç”¨çš„æ•°æ®é“¾è·¯å±‚åè®®ã€‚ MAC åœ°å€MAC åœ°å€æ˜¯é“¾è·¯å±‚åœ°å€ï¼Œé•¿åº¦ä¸º 6 å­—èŠ‚ï¼ˆ48 ä½ï¼‰ï¼Œç”¨äºå”¯ä¸€æ ‡è¯†ç½‘ç»œé€‚é…å™¨ï¼ˆç½‘å¡ï¼‰ã€‚ ä¸€å°ä¸»æœºæ‹¥æœ‰å¤šå°‘ä¸ªç½‘ç»œé€‚é…å™¨å°±æœ‰å¤šå°‘ä¸ª MAC åœ°å€ã€‚ MAC åœ°å€æ˜¯æ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚ä½¿ç”¨çš„åœ°å€ï¼Œæ˜¯å†™åœ¨ç½‘å¡ä¸Šçš„ç‰©ç†åœ°å€ã€‚MAC åœ°å€ç”¨æ¥å®šä¹‰ç½‘ç»œè®¾å¤‡çš„ä½ç½®ã€‚IP åœ°å€æ˜¯ç½‘ç»œå±‚å’Œä»¥ä¸Šå„å±‚ä½¿ç”¨çš„åœ°å€ï¼Œæ˜¯ä¸€ç§é€»è¾‘åœ°å€ã€‚IP åœ°å€ç”¨æ¥åŒºåˆ«ç½‘ç»œä¸Šçš„è®¡ç®—æœºã€‚ ä¸ºä»€ä¹ˆéœ€è¦ MAC åœ°å€åªæœ‰å½“è®¾å¤‡è¿å…¥ç½‘ç»œæ—¶ï¼Œæ‰èƒ½æ ¹æ®ä»–è¿›å…¥äº†å“ªä¸ªå­ç½‘æ¥ä¸ºå…¶åˆ†é… IP åœ°å€ï¼Œåœ¨è®¾å¤‡è¿˜æ²¡æœ‰ IP åœ°å€çš„æ—¶å€™æˆ–è€…åœ¨åˆ†é… IP åœ°å€çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ MAC åœ°å€æ¥åŒºåˆ†ä¸åŒçš„è®¾å¤‡ã€‚ ä¸ºä»€ä¹ˆéœ€è¦ IP åœ°å€å…‰æœ‰ MAC åœ°å€çš„è¯ï¼Œå¯»å€å›°éš¾ã€‚IP åœ°å€å’Œåœ°åŸŸæœ‰å…³ï¼Œå¯ä»¥åˆ†åŒºåŸŸå¯»å€ï¼Œæ•ˆç‡æ›´é«˜ã€‚","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Computer Network","slug":"Computer-Basics/Computer-Network","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Computer-Network/"}],"tags":[{"name":"Network","slug":"Network","permalink":"http://blog.sukiu.top/tags/Network/"}]},{"title":"å¼€æºå®‰å“åº”ç”¨æ¨è","slug":"Open-Source-Apk-Share","date":"2021-12-22T10:11:00.000Z","updated":"2021-12-22T10:11:00.000Z","comments":true,"path":"Mixed/Share/Open-Source-Apk-Share/","link":"","permalink":"http://blog.sukiu.top/Mixed/Share/Open-Source-Apk-Share/","excerpt":"æ¨èä¸€äº›å¼€æºçš„å®‰å“åº”ç”¨ï¼Œå¯ä»¥åœ¨ F-Droidæˆ– GitHub ä¸‹è½½ï¼Œä¸»è¦æ˜¯ä¸€äº›è½¯ä»¶çš„ç¬¬ä¸‰æ–¹ã€‚","text":"æ¨èä¸€äº›å¼€æºçš„å®‰å“åº”ç”¨ï¼Œå¯ä»¥åœ¨ F-Droidæˆ– GitHub ä¸‹è½½ï¼Œä¸»è¦æ˜¯ä¸€äº›è½¯ä»¶çš„ç¬¬ä¸‰æ–¹ã€‚ F-Droid ç¬¬ä¸‰æ–¹Aurora DroidAurora Droid Aurora å®¶æ—æˆå‘˜ï¼Œç•Œé¢ä»¿ PlayStroe é£æ ¼ï¼Œä¸è¿‡ä¸Šæ¬¡æ›´æ–°å·²ç»æ˜¯ 3 æœˆäº†ï¼Œä¸ªäººä½“éªŒä¸‹æ¥æœ‰ç‚¹å¡é¡¿çš„æ„Ÿè§‰ï¼Œæ²¡æœ‰ä¸­æ–‡ã€‚ æ¨èæŒ‡æ•°ï¼šâ­â­â­ Droid-ifyDroid-ify FoxyDroid çš„ Forkï¼ŒMatrial you é£æ ¼ï¼Œæ›´æ–°å‹¤å¿«ï¼Œç•Œé¢ç®€æ´ä¸”å¥½çœ‹ï¼Œå†…ç½®äº†ä¸å°‘ä»“åº“ï¼Œæ”¯æŒä¸­æ–‡ã€‚ æ¨èæŒ‡æ•°ï¼šâ­â­â­â­â­ Play Stroe ç¬¬ä¸‰æ–¹Aurora StoreAurora Store Auroara å®¶æ—æˆå‘˜ï¼Œç¾è§‚ä¸”æ”¯æŒåŒ¿åç™»å½•å’Œé€‰åŒºã€‚ æ¨èæŒ‡æ•°ï¼šâ­â­â­â­â­ Telegram ç¬¬ä¸‰æ–¹Nekogram XNekogram X å¯ä»¥è¯´ä¸“é—¨ä¸ºå›½äººå®šåˆ¶çš„äº†ï¼Œè‡ªå®šä¹‰é€‰é¡¹éƒ½å¾ˆå®ç”¨ï¼Œå¯ä»¥è‡ªç”±é€‰æ‹© FCM æ¨é€ã€‚ æ¨èæŒ‡æ•°ï¼šâ­â­â­â­â­ Reddit ç¬¬ä¸‰æ–¹Infinity for RedditInfinity for Reddit è‡ªå®šä¹‰é¡¹å¤šï¼Œæ”¯æŒå®‰å“ 12 Material youï¼Œæ²¡æœ‰å¹¿å‘Šï¼Œæ¯”å®˜æ–¹çš„å¥½ç”¨å¤šäº†ã€‚ æ¨èæŒ‡æ•°ï¼šâ­â­â­â­â­ Youtube ç¬¬ä¸‰æ–¹NewPipeNewPipe ä¸éœ€è¦ç™»é™†ï¼Œæ²¡æœ‰å¹¿å‘Šï¼Œæ›´æ–°å‹¤å¿«ï¼Œå¯¹è½»åº¦ä½¿ç”¨è€…æå…¶å‹å¥½ã€‚å¯æƒœä¸èƒ½è‡ªå®šä¹‰å¤–è§‚ï¼Œç•¥ä¸‘ã€‚ æ¨èæŒ‡æ•°ï¼šâ­â­â­â­ Twitter ç¬¬ä¸‰æ–¹Twidere XTwidere X æ”¯æŒç™»å½• Twitter å’Œ Mastodonï¼Œå®Œç¾æ›¿ä»£åŸç‰ˆã€‚ æ¨èæŒ‡æ•°ï¼šâ­â­â­â­â­ Pixiv ç¬¬ä¸‰æ–¹Pixiv-ShaftPixiv-Shaft ç¾è§‚ï¼Œä¸”æ”¯æŒæµè§ˆéƒ¨åˆ†çƒ­ç‚¹æ’åºï¼Œå®Œç¾æ›¿ä»£åŸç‰ˆã€‚ æ¨èæŒ‡æ•°ï¼šâ­â­â­â­â­ è´´å§ ç¬¬ä¸‰æ–¹TiebaLiteTiebaLite: è´´å§ Lite æµ‹è¯•ç‰ˆä»åœ¨æ›´æ–°ï¼Œè¯„è®ºå®¹æ˜“å°å·ï¼Œé€‚åˆåªæµè§ˆã€‚ æ¨èæŒ‡æ•°ï¼šâ­â­â­â­ V2EX ç¬¬ä¸‰æ–¹V2erV2er.Android åŸæ¥ä»˜è´¹ï¼Œç°åœ¨ä½œè€…å¼€æºäº†ï¼Œä½“éªŒæœ€å¥½çš„ V2EX ç¬¬ä¸‰æ–¹ã€‚ æ¨èæŒ‡æ•°ï¼šâ­â­â­â­â­","categories":[{"name":"Mixed","slug":"Mixed","permalink":"http://blog.sukiu.top/categories/Mixed/"},{"name":"Share","slug":"Mixed/Share","permalink":"http://blog.sukiu.top/categories/Mixed/Share/"}],"tags":[{"name":"App","slug":"App","permalink":"http://blog.sukiu.top/tags/App/"}]},{"title":"ç½‘ç»œå±‚","slug":"Network-Layer","date":"2021-12-22T06:57:00.000Z","updated":"2021-12-22T06:57:00.000Z","comments":true,"path":"Computer-Basics/Computer-Network/Network-Layer/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Computer-Network/Network-Layer/","excerpt":"ç½‘ç»œå±‚ï¼ˆNetwork Layerï¼‰æ˜¯ OSI æ¨¡å‹ ä¸­çš„ç¬¬ä¸‰å±‚ï¼ˆTCP&#x2F;IP æ¨¡å‹ä¸­çš„ç½‘é™…å±‚ï¼‰ï¼Œæä¾›è·¯ç”±å’Œå¯»å€çš„åŠŸèƒ½ï¼Œä½¿ä¸¤ç»ˆç«¯ç³»ç»Ÿèƒ½å¤Ÿäº’è¿ä¸”å†³å®šæœ€ä½³è·¯å¾„ï¼Œå¹¶å…·æœ‰ä¸€å®šçš„æ‹¥å¡æ§åˆ¶å’Œæµé‡æ§åˆ¶çš„èƒ½åŠ›ã€‚ç”±äº TCP&#x2F;IP åè®®ä½“ç³»ä¸­çš„ç½‘ç»œå±‚åŠŸèƒ½ç”± IP åè®®è§„å®šå’Œå®ç°ï¼Œæ•…åˆç§° IP å±‚ã€‚ ç½‘ç»œå±‚åè®®è´Ÿè´£æä¾›ä¸»æœºé—´çš„é€»è¾‘é€šä¿¡ï¼›ä¼ è¾“å±‚åè®®è´Ÿè´£æä¾›è¿›ç¨‹é—´çš„é€»è¾‘é€šä¿¡ã€‚ åŠŸèƒ½ï¼š è·¯ç”±é€‰æ‹©ä¸åˆ†ç»„è½¬å‘ æœ€ä½³è·¯å¾„ å¼‚æ„ç½‘ç»œäº’è” æ‹¥å¡æ§åˆ¶ ç½‘ç»œå±‚é‡è¦åè®®ï¼š IPï¼ˆInternet Protocolï¼‰ç½‘é™…äº’è¿åè®® ä¸ IP åè®®é…å¥—ä½¿ç”¨çš„è¿˜æœ‰ä¸‰ä¸ªåè®®ï¼š ARPï¼ˆAddress Resolution Protocolï¼‰åœ°å€è§£æåè®® ICMPï¼ˆInternet Control Message Protocolï¼‰ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®® IGMPï¼ˆInternet Group Management Protocolï¼‰ç½‘é™…ç»„ç®¡ç†åè®®","text":"ç½‘ç»œå±‚ï¼ˆNetwork Layerï¼‰æ˜¯ OSI æ¨¡å‹ ä¸­çš„ç¬¬ä¸‰å±‚ï¼ˆTCP&#x2F;IP æ¨¡å‹ä¸­çš„ç½‘é™…å±‚ï¼‰ï¼Œæä¾›è·¯ç”±å’Œå¯»å€çš„åŠŸèƒ½ï¼Œä½¿ä¸¤ç»ˆç«¯ç³»ç»Ÿèƒ½å¤Ÿäº’è¿ä¸”å†³å®šæœ€ä½³è·¯å¾„ï¼Œå¹¶å…·æœ‰ä¸€å®šçš„æ‹¥å¡æ§åˆ¶å’Œæµé‡æ§åˆ¶çš„èƒ½åŠ›ã€‚ç”±äº TCP&#x2F;IP åè®®ä½“ç³»ä¸­çš„ç½‘ç»œå±‚åŠŸèƒ½ç”± IP åè®®è§„å®šå’Œå®ç°ï¼Œæ•…åˆç§° IP å±‚ã€‚ ç½‘ç»œå±‚åè®®è´Ÿè´£æä¾›ä¸»æœºé—´çš„é€»è¾‘é€šä¿¡ï¼›ä¼ è¾“å±‚åè®®è´Ÿè´£æä¾›è¿›ç¨‹é—´çš„é€»è¾‘é€šä¿¡ã€‚ åŠŸèƒ½ï¼š è·¯ç”±é€‰æ‹©ä¸åˆ†ç»„è½¬å‘ æœ€ä½³è·¯å¾„ å¼‚æ„ç½‘ç»œäº’è” æ‹¥å¡æ§åˆ¶ ç½‘ç»œå±‚é‡è¦åè®®ï¼š IPï¼ˆInternet Protocolï¼‰ç½‘é™…äº’è¿åè®® ä¸ IP åè®®é…å¥—ä½¿ç”¨çš„è¿˜æœ‰ä¸‰ä¸ªåè®®ï¼š ARPï¼ˆAddress Resolution Protocolï¼‰åœ°å€è§£æåè®® ICMPï¼ˆInternet Control Message Protocolï¼‰ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®® IGMPï¼ˆInternet Group Management Protocolï¼‰ç½‘é™…ç»„ç®¡ç†åè®® IPè¯¥åè®®å·¥ä½œåœ¨ç½‘ç»œå±‚ï¼Œä¸»è¦ç›®çš„å°±æ˜¯ä¸ºäº†æé«˜ç½‘ç»œçš„å¯æ‰©å±•æ€§ã€‚ å’Œä¼ è¾“å±‚ TCP ç›¸æ¯”ï¼ŒIP åè®®æä¾›ä¸€ç§æ— è¿æ¥&#x2F;ä¸å¯é ã€å°½åŠ›è€Œä¸ºçš„æ•°æ®åŒ…ä¼ è¾“æœåŠ¡ï¼Œå…¶ä¸ TCP åè®®ï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰ä¸€èµ·æ„æˆäº† TCP&#x2F;IP åè®®æ—çš„æ ¸å¿ƒã€‚ IP åè®®ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªä½œç”¨ï¼š å¯»å€å’Œè·¯ç”±ï¼šåœ¨ IP æ•°æ®åŒ…ä¸­ä¼šæºå¸¦æº IP åœ°å€å’Œç›®çš„ IP åœ°å€æ¥æ ‡è¯†è¯¥æ•°æ®åŒ…çš„æºä¸»æœºå’Œç›®çš„ä¸»æœºã€‚IP æ•°æ®æŠ¥åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªä¸­é—´èŠ‚ç‚¹ï¼ˆIP ç½‘å…³ã€è·¯ç”±å™¨ï¼‰åªæ ¹æ®ç½‘ç»œåœ°å€è¿›è¡Œè½¬å‘ï¼Œå¦‚æœä¸­é—´èŠ‚ç‚¹æ˜¯è·¯ç”±å™¨ï¼Œåˆ™è·¯ç”±å™¨ä¼šæ ¹æ®è·¯ç”±è¡¨é€‰æ‹©åˆé€‚çš„è·¯å¾„ã€‚IP åè®®æ ¹æ®è·¯ç”±é€‰æ‹©åè®®æä¾›çš„è·¯ç”±ä¿¡æ¯å¯¹ IP æ•°æ®æŠ¥è¿›è¡Œè½¬å‘ï¼Œç›´è‡³æŠµè¾¾ç›®çš„ä¸»æœºã€‚ åˆ†æ®µä¸é‡ç»„ï¼šIP æ•°æ®åŒ…åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½ä¼šç»è¿‡ä¸åŒçš„ç½‘ç»œï¼Œåœ¨ä¸åŒçš„ç½‘ç»œä¸­æ•°æ®åŒ…çš„æœ€å¤§é•¿åº¦é™åˆ¶æ˜¯ä¸åŒçš„ï¼ŒIP åè®®é€šè¿‡ç»™æ¯ä¸ª IP æ•°æ®åŒ…åˆ†é…ä¸€ä¸ªæ ‡è¯†ç¬¦ä»¥åŠåˆ†æ®µä¸ç»„è£…çš„ç›¸å…³ä¿¡æ¯ï¼Œä½¿å¾—æ•°æ®åŒ…åœ¨ä¸åŒçš„ç½‘ç»œä¸­èƒ½å¤Ÿä¼ è¾“ï¼Œè¢«åˆ†æ®µåçš„ IP æ•°æ®æŠ¥å¯ä»¥ç‹¬ç«‹åœ°åœ¨ç½‘ç»œä¸­è¿›è¡Œè½¬å‘ï¼Œåœ¨åˆ°è¾¾ç›®çš„ä¸»æœºåç”±ç›®çš„ä¸»æœºå®Œæˆé‡ç»„å·¥ä½œï¼Œæ¢å¤å‡ºåŸæ¥çš„ IP æ•°æ®åŒ…ã€‚ æ•°æ®æŠ¥æ€»é•¿åº¦å•ä½ 1Bï¼Œç‰‡ä½ç§»å•ä½ 8Bï¼Œé¦–éƒ¨å•ä½ 4B ç”Ÿå­˜æ—¶é—´ ï¼šTTLï¼Œå®ƒçš„å­˜åœ¨æ˜¯ä¸ºäº†é˜²æ­¢æ— æ³•äº¤ä»˜çš„æ•°æ®æŠ¥åœ¨äº’è”ç½‘ä¸­ä¸æ–­å…œåœˆå­ã€‚ä»¥è·¯ç”±å™¨è·³æ•°ä¸ºå•ä½ï¼Œå½“ TTL ä¸º 0 æ—¶å°±ä¸¢å¼ƒæ•°æ®æŠ¥ã€‚ åˆ†ç‰‡ IPV4IP åœ°å€åˆ†ç±»IP åœ°å€ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œç½‘ç»œå·å’Œä¸»æœºå·ï¼Œå…¶ä¸­ä¸åŒåˆ†ç±»å…·æœ‰ä¸åŒçš„ç½‘ç»œå·é•¿åº¦ï¼Œå¹¶ä¸”æ˜¯å›ºå®šçš„ã€‚ IP åœ°å€ ::= &#123;&lt; ç½‘ç»œå· &gt;, &lt; ä¸»æœºå· &gt;&#125; ä»¥ä¸Šåˆ†ç±»è¿˜ç©ºå‡ºä¸€äº›åœ°å€ï¼Œè¿™äº›ç‰¹æ®Šçš„åœ°å€åŒ…æ‹¬ï¼š å¦å¤–è¿˜æœ‰ç§æœ‰åœ°å€ï¼ˆå±€åŸŸç½‘ï¼‰ï¼š å­ç½‘åˆ’åˆ†é€šè¿‡åœ¨ä¸»æœºå·å­—æ®µä¸­æ‹¿ä¸€éƒ¨åˆ†ä½œä¸ºå­ç½‘å·ï¼ŒæŠŠä¸¤çº§ IP åœ°å€åˆ’åˆ†ä¸ºä¸‰çº§ IP åœ°å€ã€‚ IP åœ°å€ ::= &#123;&lt; ç½‘ç»œå· &gt;, &lt; å­ç½‘å· &gt;, &lt; ä¸»æœºå· &gt;&#125; å­ç½‘æ©ç ï¼šä¸»æœºä½å…¨ 0ï¼Œå…¶ä»–å…¨ 1ï¼ˆç½‘ç»œä½ã€å­ç½‘ä½ï¼‰ NAT ç½‘ç»œåœ°å€è½¬æ¢NATï¼ˆNetwork Address Translation)ï¼Œå®ƒæ˜¯ä¸€ç§æŠŠå†…éƒ¨ç§æœ‰ç½‘ç»œåœ°å€ç¿»è¯‘æˆå…¬æœ‰ç½‘ç»œ IP åœ°å€çš„æŠ€æœ¯ã€‚ è¯¥æŠ€æœ¯ä¸ä»…èƒ½è§£å†³ IP åœ°å€ä¸è¶³çš„é—®é¢˜ï¼Œè€Œä¸”è¿˜èƒ½éšè—å’Œä¿æŠ¤ç½‘ç»œå†…éƒ¨ä¸»æœºï¼Œä»è€Œé¿å…æ¥è‡ªå¤–éƒ¨ç½‘ç»œçš„æ”»å‡»ã€‚ åœ¨ä¸“ç”¨ç½‘è¿æ¥åˆ°å› ç‰¹ç½‘ï¼ˆå…¬ç”¨åœ°å€ï¼‰çš„è·¯ç”±å™¨ä¸Šå®‰è£… NAT è½¯ä»¶ï¼ˆNAT è·¯ç”±å™¨ï¼‰ï¼Œå®ƒè‡³å°‘æœ‰ä¸€ä¸ªæœ‰æ•ˆçš„å¤–éƒ¨å…¨çƒ IP åœ°å€ NAT è·¯ç”±å™¨æ ¹æ®è½¬æ¢è¡¨æ›¿æ¢æº IP åœ°å€æˆ–è€…ç›®çš„ IP åœ°å€å’Œç«¯å£å·ï¼Œæ‰€ä»¥è½¬å‘æ•°æ®æŠ¥æ—¶éœ€æŸ¥çœ‹å’Œè½¬æ¢ä¼ è¾“å±‚çš„ç«¯å£å· æ™®é€šè·¯ç”±å™¨ä»…å·¥ä½œåœ¨ç½‘ç»œå±‚ï¼Œä¸æ”¹å˜æº IP å’Œç›®çš„ IP NAT çš„å®ç°æœ‰ä¸‰ç§æ–¹å¼ï¼š é™æ€è½¬æ¢ï¼Œä¸€å¯¹ä¸€ï¼Œä¸€ä¸ªç§æœ‰å¯¹åº”ä¸€ä¸ªå…¬æœ‰ åŠ¨æ€è½¬æ¢ï¼Œä¸€å¯¹å¤šï¼Œä¸€ä¸ªç§æœ‰æ¯æ¬¡è½¬æ¢çš„å…¬æœ‰ä¸å”¯ä¸€ ç«¯å£å¤šè·¯å¤ç”¨ï¼Œå¤šå¯¹ä¸€ï¼Œå¤šä¸ªç§æœ‰å…±äº«ä¸€ä¸ªåˆæ³•çš„å¤–éƒ¨ IPï¼Œæ˜ å°„åˆ°äº†ä¸åŒçš„ç«¯å£ä¸Š CIDR æ— åˆ†ç±»åŸŸé—´è·¯ç”±é€‰æ‹©CIDRï¼ˆClassless Inter-Domain Routingï¼‰ æ— åˆ†ç±»ç¼–å€ CIDR æ¶ˆé™¤äº†ä¼ ç»Ÿ A ç±»ã€B ç±»å’Œ C ç±»åœ°å€ä»¥åŠåˆ’åˆ†å­ç½‘çš„æ¦‚å¿µï¼Œä½¿ç”¨ç½‘ç»œå‰ç¼€å’Œä¸»æœºå·æ¥å¯¹ IP åœ°å€è¿›è¡Œç¼–ç ï¼Œç½‘ç»œå‰ç¼€çš„é•¿åº¦å¯ä»¥æ ¹æ®éœ€è¦å˜åŒ–ã€‚ IP åœ°å€ ::= &#123;&lt; ç½‘ç»œå‰ç¼€å· &gt;, &lt; ä¸»æœºå· &gt;&#125; IPV6ä»æ ¹æœ¬ä¸Šè§£å†³ IPV4 åœ°å€ä¸å¤Ÿçš„é—®é¢˜ã€‚ å…¶ä»–æ–¹æ³•ï¼šNATï¼šç½‘ç»œåœ°å€è½¬æ¢DHCPï¼šåŠ¨æ€ä¸»æœºé…ç½®åè®®ã€‚åŠ¨æ€åˆ†é… IP åœ°å€ï¼Œåªç»™æ¥å…¥ç½‘ç»œçš„è®¾å¤‡åˆ†é… IP åœ°å€ï¼ˆDHCP æ˜¯åº”ç”¨å±‚åè®®ï¼Œä½¿ç”¨å®¢æˆ·&#x2F;æœåŠ¡å™¨æ–¹å¼ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯é€šè¿‡å¹¿æ’­æ–¹å¼è¿›è¡Œäº¤äº’ï¼ŒåŸºäº UDPï¼‰ IPV6 å°†åœ°å€ä» 32 ä½ï¼ˆ4Bï¼‰æ‰©å¤§åˆ°äº† 128 ä½ï¼ˆ64Bï¼‰ ARPARPï¼ˆAddress Resolution Protocolï¼‰åœ°å€è§£æåè®®ï¼Œå®Œæˆ IP åœ°å€åˆ° MAC åœ°å€çš„æ˜ å°„ï¼ˆè§£å†³ä¸‹ä¸€è·³èµ°å“ªçš„é—®é¢˜ï¼‰ ä½¿ç”¨è¿‡ç¨‹ æ£€æŸ¥ ARP é«˜é€Ÿç¼“å­˜ï¼Œæœ‰å¯¹åº”è¡¨é¡¹åˆ™å†™å…¥ MAC å¸§ï¼Œæ²¡æœ‰åˆ™ç”¨ç›®çš„ MAC åœ°å€ä¸º FF-FF-FF-FF-FF-FF çš„å¸§å°è£…å¹¶å¹¿æ’­ ARP è¯·æ±‚åˆ†ç»„ï¼ŒåŒä¸€å±€åŸŸç½‘å†…æ‰€æœ‰ä¸»æœºéƒ½èƒ½å—åˆ°è¯¥è¯·æ±‚ ç›®çš„ä¸»æœºæ”¶åˆ°è¯·æ±‚åå°±ä¼šå‘æºä¸»æœºå•æ’­ä¸€ä¸ª ARP å“åº”åˆ†ç»„ï¼Œæºä¸»æœºæ”¶åˆ°åå°†æ­¤æ˜ å°„å†™å…¥ ARP ç¼“å­˜ï¼ˆ10ï½20min æ›´æ–°ä¸€æ¬¡ï¼‰ å…¸å‹æƒ…å†µ ä¸»æœº A å‘ç»™æœ¬ç½‘ç»œä¸Šçš„ä¸»æœº Bï¼šç”¨ ARP æ‰¾åˆ° B çš„ç¡¬ä»¶åœ°å€ ä¸»æœº A å‘ç»™å¦ä¸€ç½‘ç»œä¸Šçš„ä¸»æœº Bï¼šç”¨ ARP æ‰¾åˆ°æœ¬ç½‘ç»œä¸Šä¸€ä¸ªè·¯ç”±å™¨ï¼ˆç½‘å…³ï¼‰çš„ç¡¬ä»¶åœ°å€ è·¯ç”±å™¨å‘ç»™æœ¬ç½‘ç»œçš„ä¸»æœº Bï¼šç”¨ ARP æ‰¾åˆ° B çš„ç¡¬ä»¶åœ°å€ è·¯ç”±å™¨å‘ç»™å¦ä¸€ç½‘ç»œçš„ä¸»æœº Bï¼šç”¨ ARP æ‰¾åˆ°æœ¬ç½‘ç»œä¸Šçš„ä¸€ä¸ªè·¯ç”±å™¨çš„ç¡¬ä»¶åœ°å€ ICMPICMPï¼ˆInternet Control Message Protocolï¼‰æ˜¯ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®ï¼Œä¸»è¦æ˜¯å®ç° IP åè®®ä¸­æœªå®ç°çš„éƒ¨åˆ†åŠŸèƒ½ï¼Œæ˜¯ä¸€ç§ç½‘ç»œå±‚åè®®ã€‚è¯¥åè®®å¹¶ä¸ä¼ è¾“æ•°æ®ï¼Œåªä¼ è¾“æ§åˆ¶ä¿¡æ¯æ¥è¾…åŠ©ç½‘ç»œå±‚é€šä¿¡ã€‚ åŠŸèƒ½ éªŒè¯ç½‘ç»œæ˜¯å¦ç•…é€šï¼ˆç¡®è®¤æ¥æ”¶æ–¹æ˜¯å¦æˆåŠŸæ¥æ”¶åˆ° IP æ•°æ®åŒ…ï¼‰ è¾…åŠ© IP åè®®å®ç°å¯é ä¼ è¾“ï¼ˆè‹¥å‘ç”Ÿ IP ä¸¢åŒ…ï¼ŒICMP ä¼šé€šçŸ¥å‘é€æ–¹ IP æ•°æ®åŒ…è¢«ä¸¢å¼ƒçš„åŸå› ï¼Œä¹‹åå‘é€æ–¹ä¼šè¿›è¡Œç›¸åº”çš„å¤„ç†ï¼‰ åº”ç”¨ Pingï¼šæµ‹è¯•ä¸¤ä¸ªä¸»æœºé—´çš„è¿é€šæ€§ï¼Œä½¿ç”¨ ICMP ä¼šé€è¯·æ±‚å’Œå›ç­”æŠ¥æ–‡ TraceRouteï¼šè·Ÿè¸ªä¸€ä¸ªåˆ†ç»„ä»æºç‚¹åˆ°ç»ˆç‚¹çš„è·¯å¾„ï¼Œä½¿ç”¨ ICMP æ—¶é—´è¶…è¿‡å·®é”™æŠ¥å‘ŠæŠ¥æ–‡ ping ä¸é€šå¯èƒ½å­˜åœ¨çš„é—®é¢˜ï¼š é¦–å…ˆçœ‹ç½‘ç»œæ˜¯å¦è¿æ¥æ­£å¸¸ï¼Œæ£€æŸ¥ç½‘å¡é©±åŠ¨æ˜¯å¦æ­£ç¡®å®‰è£… å±€åŸŸç½‘è®¾ç½®é—®é¢˜ï¼Œæ£€æŸ¥ IP åœ°å€æ˜¯å¦è®¾ç½®æ­£ç¡® çœ‹æ˜¯å¦è¢«é˜²ç«å¢™é˜»æ‹¦ï¼ˆæœ‰äº›è®¾ç½®ä¸­é˜²ç«å¢™ä¼šå¯¹ ICMP æŠ¥æ–‡è¿›è¡Œè¿‡æ»¤ï¼‰ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œå°è¯•å…³é—­é˜²ç«å¢™ çœ‹æ˜¯å¦è¢«ç¬¬ä¸‰æ–¹è½¯ä»¶æ‹¦æˆª ä¸¤å°è®¾å¤‡é—´çš„ç½‘ç»œå»¶è¿Ÿæ˜¯å¦è¿‡å¤§ï¼ˆä¾‹å¦‚è·¯ç”±è®¾ç½®ä¸åˆç†ï¼‰ï¼Œå¯¼è‡´ ICMP æŠ¥æ–‡æ— æ³•åœ¨è§„å®šçš„æ—¶é—´å†…æ”¶åˆ° IGMP IGMPï¼ˆInternet Group Management Protocolï¼‰ç½‘é™…ç»„ç®¡ç†åè®®ï¼Œè®©è·¯ç”±å™¨çŸ¥é“å±€åŸŸç½‘ä¸Šæ˜¯å¦æœ‰ä¸»æœºï¼ˆçš„è¿›ç¨‹ï¼‰å‚åŠ æˆ–é€€å‡ºæŸä¸ªç»„æ’­ç»„ã€‚ è·¯ç”±å™¨ è·¯ç”±å™¨æ˜¯ç½‘ç»œå±‚è®¾å¤‡ï¼Œé€šè¿‡æ•°æ®åŒ…ä¸­çš„ç›®çš„ IP åœ°å€è¯†åˆ«ä¸åŒçš„ç½‘ç»œä»è€Œç¡®å®šæ•°æ®è½¬å‘çš„ç›®çš„åœ°å€ï¼Œç½‘ç»œå·æ˜¯å”¯ä¸€çš„ã€‚ è·¯ç”±å™¨æ ¹æ®è·¯ç”±é€‰æ‹©åè®®å’Œè·¯ç”±è¡¨ä¿¡æ¯ä»è€Œç¡®å®šæ•°æ®çš„è½¬å‘è·¯å¾„ï¼Œç›´åˆ°åˆ°è¾¾ç›®çš„ç½‘ç»œï¼Œå®ƒå·¥ä½œäºç½‘ç»œå±‚ã€‚ äº¤æ¢æœºç”¨äºå±€åŸŸç½‘ï¼Œåˆ©ç”¨ä¸»æœºçš„ç‰©ç†åœ°å€ï¼ˆMAC åœ°å€ï¼‰ç¡®å®šæ•°æ®è½¬å‘çš„ç›®çš„åœ°å€ï¼Œå®ƒå·¥ä½œäºæ•°æ®é“¾è·¯å±‚ã€‚ åˆ†ç»„è½¬å‘æµç¨‹ ä» IP æ•°æ®åŒ…ä¸­æå–å‡ºç›®çš„ä¸»æœºçš„ IP åœ°å€ï¼Œæ‰¾åˆ°å…¶æ‰€åœ¨çš„ç½‘ç»œ åˆ¤æ–­ç›®çš„ IP åœ°å€æ‰€åœ¨çš„ç½‘ç»œæ˜¯å¦ä¸æœ¬è·¯ç”±å™¨ç›´æ¥ç›¸è¿ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ä¸éœ€è¦ç»è¿‡å…¶å®ƒè·¯ç”±å™¨ç›´æ¥äº¤ä»˜ï¼Œå¦åˆ™æ‰§è¡Œ 3 æ£€æŸ¥è·¯ç”±è¡¨ä¸­æ˜¯å¦æœ‰ç›®çš„ IP åœ°å€çš„ç‰¹å®šä¸»æœºè·¯ç”±ã€‚å¦‚æœæœ‰ï¼Œåˆ™æŒ‰ç…§è·¯ç”±è¡¨ä¼ é€åˆ°ä¸‹ä¸€è·³è·¯ç”±å™¨ä¸­ï¼Œå¦åˆ™æ‰§è¡Œ 4 é€æ¡æ£€æŸ¥è·¯ç”±è¡¨ï¼Œä½¿ç”¨æ¯ä¸€è¡Œçš„å­ç½‘æ©ç ä¸ç›®çš„ IP åŒ¹é…ã€‚è‹¥æ‰¾åˆ°åŒ¹é…è·¯ç”±ï¼Œåˆ™æŒ‰ç…§è·¯ç”±è¡¨è½¬å‘åˆ°ä¸‹ä¸€è·³è·¯ç”±å™¨ä¸­ï¼Œå¦åˆ™æ‰§è¡Œæ­¥éª¤ 5 è‹¥è·¯ç”±è¡¨ä¸­è®¾ç½®æœ‰é»˜è®¤è·¯ç”±ï¼Œåˆ™æŒ‰ç…§é»˜è®¤è·¯ç”±è½¬å‘åˆ°é»˜è®¤è·¯ç”±å™¨ä¸­ï¼Œå¦åˆ™æ‰§è¡Œæ­¥éª¤ 6 æ— æ³•æ‰¾åˆ°åˆé€‚è·¯ç”±ï¼Œå‘æºä¸»æœºæŠ¥é”™ è·¯ç”±åè®® RIPï¼ˆRouting Information Protocolï¼‰è·¯ç”±ä¿¡æ¯åè®® OSPFï¼ˆOpen Shortest Path Firstï¼‰å¼€æ”¾å¼æœ€çŸ­è·¯å¾„ä¼˜å…ˆ BGPï¼ˆBorder Gateway Protocolï¼‰è¾¹ç•Œç½‘å…³åè®®","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Computer Network","slug":"Computer-Basics/Computer-Network","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Computer-Network/"}],"tags":[{"name":"Network","slug":"Network","permalink":"http://blog.sukiu.top/tags/Network/"}]},{"title":"ä¼ è¾“å±‚","slug":"Transport-Layer","date":"2021-12-21T11:17:00.000Z","updated":"2021-12-21T11:17:00.000Z","comments":true,"path":"Computer-Basics/Computer-Network/Transport-Layer/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Computer-Network/Transport-Layer/","excerpt":"ä¼ è¾“å±‚ï¼ˆTransport Layerï¼‰ä½äº OSI æ¨¡å‹ç¬¬å››å±‚ã€‚è¯¥å±‚çš„åè®®ä¸ºåº”ç”¨è¿›ç¨‹æä¾›ç«¯åˆ°ç«¯çš„é€šä¿¡æœåŠ¡ã€‚å®ƒæä¾›é¢å‘è¿æ¥çš„æ•°æ®æµæ”¯æŒã€å¯é æ€§ã€æµé‡æ§åˆ¶ã€å¤šè·¯å¤ç”¨ç­‰æœåŠ¡ã€‚ åŠŸèƒ½ï¼šä½¿ç”¨ç½‘ç»œå±‚æœåŠ¡ï¼Œä¸ºåº”ç”¨å±‚æä¾›æœåŠ¡ æä¾›è¿›ç¨‹å’Œè¿›ç¨‹ä¹‹é—´çš„é€»è¾‘é€šä¿¡ å¤ç”¨å’Œåˆ†ç”¨ ä¼ è¾“å±‚å¯¹æ”¶åˆ°çš„æŠ¥æ–‡è¿›è¡Œå·®é”™æ£€æµ‹ ä¼ è¾“å±‚çš„é‡è¦åè®®ï¼š TCPï¼ˆTransmission Control Protocolï¼‰ä¼ è¾“æ§åˆ¶åè®® UDPï¼ˆUser Datagram Protocolï¼‰ç”¨æˆ·æ•°æ®æŠ¥åè®®","text":"ä¼ è¾“å±‚ï¼ˆTransport Layerï¼‰ä½äº OSI æ¨¡å‹ç¬¬å››å±‚ã€‚è¯¥å±‚çš„åè®®ä¸ºåº”ç”¨è¿›ç¨‹æä¾›ç«¯åˆ°ç«¯çš„é€šä¿¡æœåŠ¡ã€‚å®ƒæä¾›é¢å‘è¿æ¥çš„æ•°æ®æµæ”¯æŒã€å¯é æ€§ã€æµé‡æ§åˆ¶ã€å¤šè·¯å¤ç”¨ç­‰æœåŠ¡ã€‚ åŠŸèƒ½ï¼šä½¿ç”¨ç½‘ç»œå±‚æœåŠ¡ï¼Œä¸ºåº”ç”¨å±‚æä¾›æœåŠ¡ æä¾›è¿›ç¨‹å’Œè¿›ç¨‹ä¹‹é—´çš„é€»è¾‘é€šä¿¡ å¤ç”¨å’Œåˆ†ç”¨ ä¼ è¾“å±‚å¯¹æ”¶åˆ°çš„æŠ¥æ–‡è¿›è¡Œå·®é”™æ£€æµ‹ ä¼ è¾“å±‚çš„é‡è¦åè®®ï¼š TCPï¼ˆTransmission Control Protocolï¼‰ä¼ è¾“æ§åˆ¶åè®® UDPï¼ˆUser Datagram Protocolï¼‰ç”¨æˆ·æ•°æ®æŠ¥åè®® TCPæŠ¥æ–‡ ä¸‰æ¬¡æ¡æ‰‹ä¸‰æ¬¡æ¡æ‰‹æ˜¯ TCP è¿æ¥çš„å»ºç«‹è¿‡ç¨‹ã€‚åœ¨æ¡æ‰‹ä¹‹å‰ï¼Œä¸»åŠ¨æ‰“å¼€è¿æ¥çš„å®¢æˆ·ç«¯ç»“æŸ CLOSE é˜¶æ®µï¼Œè¢«åŠ¨æ‰“å¼€çš„æœåŠ¡å™¨ä¹Ÿç»“æŸ CLOSE é˜¶æ®µï¼Œå¹¶è¿›å…¥ LISTEN é˜¶æ®µã€‚éšåè¿›å…¥ä¸‰æ¬¡æ¡æ‰‹é˜¶æ®µï¼š æ ‡å¿—ä½ï¼šSYNï¼ˆSynchronizeï¼‰ã€ACKï¼ˆACKnowledge Characterï¼‰åºå·ï¼šseqç¡®è®¤å·ï¼šack ç¬¬ 2 æ¬¡æ¡æ‰‹ä¸ºä»€ä¹ˆè¿˜è¦ä¼ å› SYNï¼š ACK æ˜¯ä¸ºäº†å‘Šè¯‰å®¢æˆ·ç«¯å‘æ¥çš„æ•°æ®å·²ç»æ¥æ”¶æ— è¯¯ï¼Œè€Œä¼ å› SYN æ˜¯ä¸ºäº†æŠŠè‡ªå·±çš„åˆå§‹åºåˆ—å·ï¼ˆseqï¼‰åŒæ­¥ç»™å®¢æˆ·ç«¯ã€‚ ä¸ºä»€ä¹ˆä¸‰æ¬¡æ¡æ‰‹ä¸‰æ¬¡æ¡æ‰‹ä¿è¯ä¸¤ç‚¹ï¼š ä¿è¯åŒæ–¹éƒ½æ˜¯åŒå·¥é€šä¿¡ï¼š ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼ŒæœåŠ¡ç«¯ç¡®å®šå®¢æˆ·ç«¯çš„å‘é€æ­£å¸¸ ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯ç¡®è®¤æœåŠ¡ç«¯çš„æ”¶å‘æ­£å¸¸ ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼ŒæœåŠ¡ç«¯ç¡®å®šå®¢æœç«¯æ¥æ”¶æ­£å¸¸ å¦‚æœåªæœ‰ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼ŒæœåŠ¡ç«¯å‘ç»™å®¢æœç«¯çš„åŒ…ä¸¢äº†ä¹‹åï¼š æœåŠ¡ç«¯ç›´æ¥å»ºç«‹äº†è¿æ¥ï¼Œç«¯å£å°±ä¼šä¸€ç›´å¼€ç€ ç­‰åˆ°å®¢æˆ·ç«¯å› è¶…æ—¶é‡æ–°å‘å‡ºè¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨å°±ä¼šé‡æ–°å¼€å¯ä¸€ä¸ªç«¯å£è¿æ¥ ç«¯å£è¶Šæ¥è¶Šå¤šï¼Œé€ æˆæœåŠ¡å™¨å¼€é”€çš„æµªè´¹ æ¡æ‰‹å¼‚å¸¸ å¼‚å¸¸ å¦‚ä½•å¤„ç† å¤‡æ³¨ ç¬¬ä¸€æ¬¡æ¡æ‰‹ SYN åŒ…ä¸¢å¤± æœåŠ¡ç«¯ä¸ä¼šè¿›è¡Œä»»ä½•ç›¸åº”çš„åŠ¨ä½œå®¢æˆ·ç«¯åœ¨ä¸€æ®µæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°æœåŠ¡å™¨å‘æ¥çš„ç¡®è®¤æŠ¥æ–‡ï¼Œ ä¼šç­‰å¾…ä¸€æ®µæ—¶é—´åé‡æ–°å‘é€ SYN åŒæ­¥æŠ¥æ–‡ï¼Œè‹¥ä»æ²¡æœ‰å›åº”ï¼Œåˆ™é‡å¤ä¸Šè¿°ç›´åˆ°å‘é€æ¬¡æ•°è¶…è¿‡æœ€å¤§é‡ä¼ æ¬¡æ•°é™åˆ¶åï¼Œå»ºç«‹è¿æ¥çš„ç³»ç»Ÿè°ƒç”¨ä¼šè¿”å› -1 å®¢æˆ·ç«¯è¶…æ—¶é‡ä¼ æœ€å¤§æ¬¡æ•°ï¼štcp_syn_retriesï¼Œé»˜è®¤ 5 æ¬¡ï¼ˆLinux 3.7 åä¸º 6 æ¬¡ï¼‰ ç¬¬äºŒæ¬¡æ¡æ‰‹ SYNã€ACK åŒ…ä¸¢å¤± å®¢æˆ·ç«¯ä¼šé‡‡å–ç¬¬ä¸€æ¬¡æ¡æ‰‹å¤±è´¥æ—¶çš„åŠ¨ä½œï¼ˆè¶…æ—¶é‡ä¼ ï¼‰æœåŠ¡ç«¯æ­¤æ—¶å°†é˜»å¡åœ¨ accept() ç³»ç»Ÿè°ƒç”¨å¤„ç­‰å¾… client å†æ¬¡å‘é€ ACK æŠ¥æ–‡ï¼ˆåŒæ ·è¶…æ—¶é‡ä¼ ï¼‰ æœåŠ¡ç«¯è¶…æ—¶é‡ä¼ æœ€å¤§æ¬¡æ•°ï¼štcp_synack_retriesï¼Œé»˜è®¤ 5 æ¬¡ ç¬¬ä¸‰æ¬¡æ¡æ‰‹ ACK åŒ…ä¸¢å¤± ä¸¤æ¬¡æ¡æ‰‹æˆåŠŸï¼Œå®¢æˆ·ç«¯è¿›å…¥ ESTABLISHED çŠ¶æ€ï¼ŒæœåŠ¡ç«¯è¿›å…¥ SYN_REC çŠ¶æ€æœåŠ¡ç«¯æ”¶ä¸åˆ° ACKï¼Œå°±ä¸€ç›´é‡ä¼  SYNã€ACK åŒ…ï¼Œç›´åˆ°è¶…è¿‡æœ€å¤§æ¬¡æ•°ï¼Œæ–­å¼€ TCP è¿æ¥å®¢æˆ·ç«¯è®¤ä¸ºè‡ªå·±è¿æ¥æˆåŠŸï¼Œå¼€å§‹å‘æœåŠ¡å™¨ç«¯å‘é€æ•°æ®ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°æ¥è‡ªå®¢æˆ·ç«¯å‘é€æ¥çš„æ•°æ®æ—¶ä¼šå‘é€ RST æŠ¥æ–‡ç»™å®¢æˆ·ç«¯ï¼Œæ¶ˆé™¤å®¢æˆ·ç«¯å•æ–¹é¢å»ºç«‹è¿æ¥çš„çŠ¶æ€ å››æ¬¡æŒ¥æ‰‹å››æ¬¡æŒ¥æ‰‹å³ TCP è¿æ¥çš„é‡Šæ”¾ï¼Œè¿™é‡Œå‡è®¾å®¢æˆ·ç«¯ä¸»åŠ¨é‡Šæ”¾è¿æ¥ã€‚åœ¨æŒ¥æ‰‹ä¹‹å‰ä¸»åŠ¨é‡Šæ”¾è¿æ¥çš„å®¢æˆ·ç«¯ç»“æŸ ESTABLISHED é˜¶æ®µï¼Œéšåå¼€å§‹å››æ¬¡æŒ¥æ‰‹ï¼š æ ‡å¿—ä½ï¼šFinï¼ˆFinishï¼‰é˜¶æ®µï¼šFIN-WAITï¼ˆåŠå…³é—­ï¼‰ CLOSE-WAITï¼šæ˜¯æœåŠ¡ç«¯å‘å‡ºç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼ˆæ•´ä½“ç¬¬äºŒæ¬¡ï¼‰è¿›å…¥çš„çŠ¶æ€ è¡¨ç¤ºâ€œæˆ‘å‡†å¤‡å…³é—­äº†ï¼Œä½†æ˜¯è¿˜æœ‰è‡ªå·±çš„äº‹æƒ…å¤„ç†ä¸€ä¸‹ï¼Œä½ ç­‰æˆ‘å¤„ç†å®Œâ€ç­‰æœåŠ¡å™¨å¤„ç†å¥½è‡ªå·±çš„æ•°æ®ä¸šåŠ¡ï¼Œåˆ™è¡¨ç¤ºâ€œæˆ‘å‡†å¤‡å¥½äº†â€ï¼Œå†å‘é€ FIN åŒ… TIME-WAITï¼šæ˜¯ç¬¬å››æ¬¡æŒ¥æ‰‹åï¼Œå®¢æˆ·ç«¯è¿›å…¥çš„çŠ¶æ€ï¼Œæ˜¯å®¢æˆ·ç«¯å¿…è¦çš„ç­‰å¾…æ—¶é—´ã€‚ ç›®çš„æ˜¯ï¼šç­‰å¾…æœåŠ¡ç«¯çš„å¯¹åº”ç«¯å£å…³é—­ä¸å®¢æˆ·ç«¯å‘é€åˆ°æœåŠ¡ç«¯çš„æ•°æ®åˆ°è¾¾ï¼ˆå¯èƒ½å‡ºç°å»¶è¿Ÿï¼‰ å¦‚æœä¸å­˜åœ¨è¿™ä¸ªæ­¥éª¤å°±ä¼šå¯¼è‡´ä¸¤ä¸ªé—®é¢˜: å®¢æˆ·ç«¯ç«‹å³å…³é—­åï¼Œç«‹å³åˆç”¨åŒæ ·çš„ç«¯å£æ¡æ‰‹å¹¶å»ºç«‹é€šä¿¡ï¼Œæ­¤æ—¶ä¸Šæ¬¡çš„è¿æ¥æ®‹ç•™çš„æ•°æ®åŒ…ä¼šè¢«è¯¯è®¤ä¸ºæ˜¯æœ¬æ¬¡çš„ï¼Œé€ æˆæ•°æ®å¼‚å¸¸ å®¢æˆ·ç«¯ç›´æ¥å…³é—­åï¼Œè‹¥æœåŠ¡ç«¯é‡æ–°å‘é€ FIN åŒ…ï¼Œå®¢æˆ·ç«¯å°±ä¼šå›åº” RSTï¼Œä¼šæŠ¥å¼‚å¸¸ï¼Œä½†æ˜¯å®é™…æ²¡æœ‰é—®é¢˜çš„ MSLï¼ˆMaximum Segment Lifetimeï¼‰ï¼šæŒ‡ä¸€æ®µ TCP æŠ¥æ–‡åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­çš„æœ€å¤§ç”Ÿå‘½å‘¨æœŸ 2 MSL å³æ˜¯æœåŠ¡å™¨ç«¯å‘å‡º FIN æŠ¥æ–‡å’Œå®¢æˆ·ç«¯å‘å‡ºçš„ ACK ç¡®è®¤æŠ¥æ–‡æ‰€èƒ½ä¿æŒæœ‰æ•ˆçš„æœ€å¤§æ—¶é•¿ï¼Œä¸ºçš„æ˜¯ç¡®è®¤æœåŠ¡å™¨èƒ½å¦æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘å‡ºçš„ ACK ç¡®è®¤æŠ¥æ–‡ ä¸ºä»€ä¹ˆå››æ¬¡æŒ¥æ‰‹ç®€å•æ¥è¯´å°±æ˜¯å› ä¸º TCP æ˜¯å…¨åŒå·¥çš„ï¼Œä¸¤ä¸ªæ–¹å‘çš„è¿æ¥éœ€è¦å•ç‹¬å…³é—­ã€‚ FIN é‡Šæ”¾è¿æ¥æŠ¥æ–‡å’Œ ACK ç¡®è®¤æ¥æ”¶æŠ¥æ–‡æ˜¯åˆ†åˆ«åœ¨ä¸¤æ¬¡æ¡æ‰‹ä¸­ä¼ è¾“çš„ï¼š å½“ä¸»åŠ¨æ–¹åœ¨æ•°æ®ä¼ é€ç»“æŸåå‘å‡ºè¿æ¥é‡Šæ”¾çš„é€šçŸ¥ï¼Œç”±äºè¢«åŠ¨æ–¹å¯èƒ½è¿˜æœ‰å¿…è¦çš„æ•°æ®è¦å¤„ç†ï¼Œæ‰€ä»¥ä¼šå…ˆè¿”å› ACK ç¡®è®¤æ”¶åˆ°æŠ¥æ–‡ å½“è¢«åŠ¨æ–¹ä¹Ÿæ²¡æœ‰æ•°æ®å†å‘é€çš„æ—¶å€™ï¼Œåˆ™å‘å‡ºè¿æ¥é‡Šæ”¾é€šçŸ¥ï¼Œå¯¹æ–¹ç¡®è®¤åæ‰å®Œå…¨å…³é—­ TCP è¿æ¥ã€‚ å¯é ä¼ è¾“TCP å¦‚ä½•ä¿è¯å¯é ä¼ è¾“ï¼š æ•°æ®åˆ†å—ï¼šåº”ç”¨æ•°æ®è¢«åˆ†å‰²æˆ TCP è®¤ä¸ºæœ€é€‚åˆå‘é€çš„æ•°æ®å—ã€‚ åºåˆ—å·å’Œç¡®è®¤åº”ç­”ï¼šTCP ç»™å‘é€çš„æ¯ä¸€ä¸ªåŒ…è¿›è¡Œç¼–å·ï¼Œåœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡æ¥æ”¶æ–¹æ”¶åˆ°æ•°æ®åï¼Œéƒ½ä¼šå¯¹ä¼ è¾“æ–¹è¿›è¡Œç¡®è®¤åº”ç­”ï¼Œå³å‘é€ ACK æŠ¥æ–‡ï¼Œè¿™ä¸ª ACK æŠ¥æ–‡å½“ä¸­å¸¦æœ‰å¯¹åº”çš„ç¡®è®¤åºåˆ—å·ï¼Œå‘Šè¯‰å‘é€æ–¹æˆåŠŸæ¥æ”¶äº†å“ªäº›æ•°æ®ä»¥åŠä¸‹ä¸€æ¬¡çš„æ•°æ®ä»å“ªé‡Œå¼€å§‹å‘ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ¥æ”¶æ–¹å¯ä»¥æ ¹æ®åºåˆ—å·å¯¹æ•°æ®åŒ…è¿›è¡Œæ’åºï¼ŒæŠŠæœ‰åºæ•°æ®ä¼ é€ç»™åº”ç”¨å±‚ï¼Œå¹¶ä¸¢å¼ƒé‡å¤çš„æ•°æ®ã€‚ æ ¡éªŒå’Œï¼šTCP å°†ä¿æŒå®ƒé¦–éƒ¨å’Œæ•°æ®éƒ¨åˆ†çš„æ£€éªŒå’Œã€‚è¿™æ˜¯ä¸€ä¸ªç«¯åˆ°ç«¯çš„æ£€éªŒå’Œï¼Œç›®çš„æ˜¯æ£€æµ‹æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­çš„ä»»ä½•å˜åŒ–ã€‚å¦‚æœæ”¶åˆ°æŠ¥æ–‡æ®µçš„æ£€éªŒå’Œæœ‰å·®é”™ï¼ŒTCP å°†ä¸¢å¼ƒè¿™ä¸ªæŠ¥æ–‡æ®µå¹¶ä¸”ä¸ç¡®è®¤æ”¶åˆ°æ­¤æŠ¥æ–‡æ®µã€‚ æµé‡æ§åˆ¶ï¼šTCP è¿æ¥çš„åŒæ–¹éƒ½æœ‰ä¸€ä¸ªå›ºå®šå¤§å°çš„ç¼“å†²ç©ºé—´ï¼Œå‘é€æ–¹å‘é€çš„æ•°æ®é‡ä¸èƒ½è¶…è¿‡æ¥æ”¶ç«¯ç¼“å†²åŒºçš„å¤§å°ã€‚å½“æ¥æ”¶æ–¹æ¥ä¸åŠå¤„ç†å‘é€æ–¹çš„æ•°æ®ï¼Œä¼šæç¤ºå‘é€æ–¹é™ä½å‘é€çš„é€Ÿç‡ï¼Œé˜²æ­¢äº§ç”Ÿä¸¢åŒ…ã€‚TCP é€šè¿‡æ»‘åŠ¨çª—å£åè®®æ¥æ”¯æŒæµé‡æ§åˆ¶æœºåˆ¶ã€‚ æ‹¥å¡æ§åˆ¶ï¼šå½“ç½‘ç»œæŸä¸ªèŠ‚ç‚¹å‘ç”Ÿæ‹¥å¡æ—¶ï¼Œå‡å°‘æ•°æ®çš„å‘é€ã€‚ ARQ åè®®ï¼šä¹Ÿæ˜¯ä¸ºäº†å®ç°å¯é ä¼ è¾“çš„ï¼Œå®ƒçš„åŸºæœ¬åŸç†å°±æ˜¯æ¯å‘å®Œä¸€ä¸ªåˆ†ç»„å°±åœæ­¢å‘é€ï¼Œç­‰å¾…å¯¹æ–¹ç¡®è®¤ã€‚åœ¨æ”¶åˆ°ç¡®è®¤åå†å‘ä¸‹ä¸€ä¸ªåˆ†ç»„ã€‚ è¶…æ—¶é‡ä¼ ï¼šå½“ TCP å‘å‡ºä¸€ä¸ªæŠ¥æ–‡æ®µåï¼Œå®ƒå¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨ï¼Œç­‰å¾…ç›®çš„ç«¯ç¡®è®¤æ”¶åˆ°è¿™ä¸ªæŠ¥æ–‡æ®µã€‚å¦‚æœè¶…è¿‡æŸä¸ªæ—¶é—´è¿˜æ²¡æœ‰æ”¶åˆ°ç¡®è®¤ï¼Œå°†é‡å‘è¿™ä¸ªæŠ¥æ–‡æ®µã€‚ åœæ­¢ - ç­‰å¾…åè®®åœ¨å·²å‘é€ä½†æœªç¡®è®¤çš„æŠ¥æ–‡è¢«ç¡®è®¤ä¹‹å‰ï¼Œå‘é€æ–¹çš„æ»‘åŠ¨çª—å£å°†ä¸ä¼šæ»‘åŠ¨ï¼ˆç±»æ¯”æ»‘åŠ¨çª—å£ç®—æ³•ï¼‰ æœ€å¤§è¿æ¥æ•°é™åˆ¶ Client æœ€å¤§ TCP è¿æ¥æ•°ï¼šTCP ç«¯å£çš„æ•°æ®ç±»å‹æ˜¯ unsigned shortï¼ˆ$2^{16}$ï¼‰ï¼Œå¯ç”¨ç«¯å£æœ€å¤šæœ‰ 65535 ä¸ªï¼ˆé™¤ç«¯å£ 0ï¼‰ Server æœ€å¤§ TCP è¿æ¥æ•°ï¼šå®¢æˆ·ç«¯ IP æ•° Ã— å®¢æˆ·ç«¯ port æ•°ï¼ˆç†è®ºï¼‰ å¯¹ IPV4ï¼Œåœ¨ä¸è€ƒè™‘ IP åœ°å€åˆ†ç±»çš„æƒ…å†µä¸‹ï¼Œæœ€å¤§ TCP è¿æ¥æ•°çº¦ä¸º $2^{32}$ï¼ˆIP æ•°ï¼‰Ã— $2^{16}$ï¼ˆport æ•°ï¼‰ï¼Œå³çº¦ä¸º $2^{48}$ æµé‡æ§åˆ¶æ‰€è°“æµé‡æ§åˆ¶å°±æ˜¯è®©å‘é€æ–¹çš„å‘é€é€Ÿç‡ä¸è¦å¤ªå¿«ï¼Œè®©æ¥æ”¶æ–¹æ¥å¾—åŠæ¥æ”¶ã€‚ æ‹¥å¡æ§åˆ¶æ‹¥å¡æ§åˆ¶æ˜¯ä½œç”¨äºç½‘ç»œçš„ï¼Œå®ƒæ˜¯é˜²æ­¢è¿‡å¤šçš„æ•°æ®æ³¨å…¥åˆ°ç½‘ç»œä¸­ï¼Œé¿å…å‡ºç°ç½‘ç»œè´Ÿè½½è¿‡å¤§çš„æƒ…å†µã€‚ å¸¸ç”¨çš„è§£å†³æ–¹æ³•æœ‰ï¼šæ…¢å¼€å§‹å’Œæ‹¥å¡é¿å…ã€å¿«é‡ä¼ å’Œå¿«æ¢å¤ã€‚ æ‹¥å¡æ§åˆ¶å’Œæµé‡æ§åˆ¶çš„åŒºåˆ«ï¼šæ‹¥å¡æ§åˆ¶å¾€å¾€æ˜¯ä¸€ç§å…¨å±€çš„æ§åˆ¶ï¼Œé˜²æ­¢è¿‡å¤šçš„æ•°æ®æ³¨å…¥åˆ°ç½‘ç»œä¹‹ä¸­æµé‡æ§åˆ¶å¾€å¾€æŒ‡ç‚¹å¯¹ç‚¹é€šä¿¡é‡çš„æ§åˆ¶ï¼Œæ˜¯ç«¯åˆ°ç«¯çš„é—®é¢˜ï¼ˆTCP è¿æ¥çš„ç«¯ç‚¹åªè¦ä¸èƒ½æ”¶åˆ°å¯¹æ–¹çš„ç¡®è®¤ä¿¡æ¯ï¼ŒçŒœæƒ³åœ¨ç½‘ç»œä¸­å‘ç”Ÿäº†æ‹¥å¡ï¼Œä½†å¹¶ä¸çŸ¥é“å‘ç”Ÿåœ¨ä½•å¤„ï¼‰ UDPæŠ¥æ–‡ åŒºåˆ« ç±»å‹ æ˜¯å¦é¢å‘è¿æ¥ ä¼ è¾“å¯é æ€§ ä¼ è¾“å½¢å¼ ä¼ è¾“æ•ˆç‡ æ‰€éœ€èµ„æº åº”ç”¨åœºæ™¯ é¦–éƒ¨å­—èŠ‚ TCP æ˜¯ å¯é  å­—èŠ‚æµ æ…¢ å¤š æ–‡ä»¶ä¼ è¾“ã€é‚®ä»¶ä¼ è¾“ 20~60 UDP å¦ ä¸å¯é  æ•°æ®æŠ¥æ–‡æ®µ å¿« å°‘ å³æ—¶é€šè®¯ã€åŸŸåè½¬æ¢ 8 ä¸ªå­—èŠ‚ ä¸å¯é ä¼ è¾“ UDP åªæœ‰ä¸€ä¸ª socket æ¥æ”¶ç¼“å†²åŒºï¼Œæ²¡æœ‰ socket å‘é€ç¼“å†²åŒºï¼Œå³åªè¦æœ‰æ•°æ®å°±å‘ï¼Œå½“å¯¹æ–¹æ¥æ”¶ç¼“å†²åŒºæ»¡äº†åå°±ä¼šä¸¢å¼ƒï¼Œå› æ­¤ UDP ä¸èƒ½ä¿è¯æ•°æ®èƒ½å¤Ÿåˆ°è¾¾ç›®çš„åœ° UDP æ²¡æœ‰æµé‡æ§åˆ¶å’Œé‡ä¼ æœºåˆ¶ UDP ä¸­è°ƒç”¨ connect åªæ˜¯æŠŠå¯¹ç«¯çš„ IP å’Œ ç«¯å£å·è®°å½•ä¸‹æ¥ï¼Œå¹¶ä¸” UDP å¯å¤šæ¬¡è°ƒç”¨ connect æ¥æŒ‡å®šä¸€ä¸ªæ–°çš„ IP å’Œç«¯å£å·ï¼Œæˆ–è€…æ–­å¼€æ—§çš„ IP å’Œç«¯å£å· è°ƒç”¨ connect çš„ UDP ä¼šæå‡æ•ˆç‡ï¼Œå¹¶ä¸”åœ¨é«˜å¹¶å‘æœåŠ¡ä¸­ä¼šå¢åŠ ç³»ç»Ÿç¨³å®šæ€§ã€‚è°ƒç”¨ bind å‡½æ•°æ—¶ï¼Œå°±ä¼šå°†è¿™ä¸ªå¥—æ¥å­—æŒ‡å®šä¸€ä¸ªç«¯å£ï¼Œè‹¥ä¸è°ƒç”¨ bind å‡½æ•°ï¼Œç³»ç»Ÿå†…æ ¸ä¼šéšæœºåˆ†é…ä¸€ä¸ªç«¯å£ç»™è¯¥å¥—æ¥å­—ã€‚å½“æ‰‹åŠ¨ç»‘å®šæ—¶ï¼Œèƒ½å¤Ÿé¿å…å†…æ ¸æ¥æ‰§è¡Œè¿™ä¸€æ“ä½œï¼Œä»è€Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜æ€§èƒ½ã€‚ MoreSYN FLOODSYN Flood æ˜¯ç§å…¸å‹çš„ DoSï¼ˆæ‹’ç»æœåŠ¡ï¼‰æ”»å‡»ï¼Œå…¶ç›®çš„æ˜¯é€šè¿‡æ¶ˆè€—æœåŠ¡å™¨æ‰€æœ‰å¯ç”¨èµ„æºä½¿æœåŠ¡å™¨æ— æ³•ç”¨äºå¤„ç†åˆæ³•è¯·æ±‚ã€‚ é€šè¿‡é‡å¤å‘é€åˆå§‹è¿æ¥è¯·æ±‚ï¼ˆSYNï¼‰æ•°æ®åŒ…ï¼Œæ”»å‡»è€…èƒ½å¤Ÿå‹å€’ç›®æ ‡æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰å¯ç”¨ç«¯å£ï¼Œå¯¼è‡´ç›®æ ‡è®¾å¤‡æ ¹æœ¬ä¸å“åº”åˆæ³•è¯·æ±‚ã€‚","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Computer Network","slug":"Computer-Basics/Computer-Network","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Computer-Network/"}],"tags":[{"name":"Network","slug":"Network","permalink":"http://blog.sukiu.top/tags/Network/"}]},{"title":"åº”ç”¨å±‚","slug":"Application-Layer","date":"2021-12-12T07:28:00.000Z","updated":"2021-12-12T07:28:00.000Z","comments":true,"path":"Computer-Basics/Computer-Network/Application-Layer/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Computer-Network/Application-Layer/","excerpt":"åº”ç”¨å±‚ï¼ˆApplication layerï¼‰ä½äº OSIæ¨¡å‹ çš„ç¬¬ä¸ƒå±‚ã€‚åº”ç”¨å±‚ç›´æ¥å’Œåº”ç”¨ç¨‹åºæ¥å£ç»“åˆï¼Œå¹¶æä¾›å¸¸è§çš„ç½‘ç»œåº”ç”¨æœåŠ¡ã€‚ åº”ç”¨å±‚çš„åŠŸèƒ½ï¼š æ–‡ä»¶ä¼ è¾“ã€è®¿é—®å’Œç®¡ç† ç”µå­é‚®ä»¶ è™šæ‹Ÿç»ˆç«¯ æŸ¥è¯¢æœåŠ¡å’Œè¿œç¨‹ä½œä¸šç™»å½• åº”ç”¨å±‚çš„é‡è¦åè®®ï¼š HTTPï¼ˆHyperText Transfer Protocolï¼‰è¶…æ–‡æœ¬ä¼ è¾“åè®® FTPï¼ˆFile Transfer Protocolï¼‰æ–‡ä»¶ä¼ è¾“åè®® TFTPï¼ˆTrivial File Transfer Protocolï¼‰ç®€å•æ–‡ä»¶ä¼ è¾“åè®® DNSï¼ˆDomain Name Systemï¼‰åŸŸåç³»ç»Ÿ SMTPï¼ˆSimple Mail Transfer Protocolï¼‰ç®€å•é‚®ä»¶ä¼ è¾“åè®® POP3ï¼ˆPost Office Protocol - Version 3ï¼‰é‚®å±€åè®® DHCP ( Dynamic Host Configuration Protocolï¼‰åŠ¨æ€ä¸»æœºè®¾ç½®åè®® SNMPï¼ˆSimple Network Management Protocolï¼‰ç®€å•ç½‘ç»œç®¡ç†åè®®","text":"åº”ç”¨å±‚ï¼ˆApplication layerï¼‰ä½äº OSIæ¨¡å‹ çš„ç¬¬ä¸ƒå±‚ã€‚åº”ç”¨å±‚ç›´æ¥å’Œåº”ç”¨ç¨‹åºæ¥å£ç»“åˆï¼Œå¹¶æä¾›å¸¸è§çš„ç½‘ç»œåº”ç”¨æœåŠ¡ã€‚ åº”ç”¨å±‚çš„åŠŸèƒ½ï¼š æ–‡ä»¶ä¼ è¾“ã€è®¿é—®å’Œç®¡ç† ç”µå­é‚®ä»¶ è™šæ‹Ÿç»ˆç«¯ æŸ¥è¯¢æœåŠ¡å’Œè¿œç¨‹ä½œä¸šç™»å½• åº”ç”¨å±‚çš„é‡è¦åè®®ï¼š HTTPï¼ˆHyperText Transfer Protocolï¼‰è¶…æ–‡æœ¬ä¼ è¾“åè®® FTPï¼ˆFile Transfer Protocolï¼‰æ–‡ä»¶ä¼ è¾“åè®® TFTPï¼ˆTrivial File Transfer Protocolï¼‰ç®€å•æ–‡ä»¶ä¼ è¾“åè®® DNSï¼ˆDomain Name Systemï¼‰åŸŸåç³»ç»Ÿ SMTPï¼ˆSimple Mail Transfer Protocolï¼‰ç®€å•é‚®ä»¶ä¼ è¾“åè®® POP3ï¼ˆPost Office Protocol - Version 3ï¼‰é‚®å±€åè®® DHCP ( Dynamic Host Configuration Protocolï¼‰åŠ¨æ€ä¸»æœºè®¾ç½®åè®® SNMPï¼ˆSimple Network Management Protocolï¼‰ç®€å•ç½‘ç»œç®¡ç†åè®® HTTPHTTP å¤´éƒ¨HTTP å¤´å­—æ®µæ ¹æ®å®é™…ç”¨é€”è¢«åˆ†ä¸ºä»¥ä¸‹ 4 ç§ç±»å‹ï¼š é€šç”¨å¤´å­—æ®µ (General Header Fields) è¯·æ±‚å¤´å­—æ®µ (Request Header Fields) å“åº”å¤´å­—æ®µ (Response Header Fields) å®ä½“å¤´å­—æ®µ (Entity Header Fields) é€šç”¨å¤´éƒ¨åŒæ—¶é€‚ç”¨äºè¯·æ±‚å’Œå“åº”æ¶ˆæ¯ï¼ˆå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½å¯ä»¥ä½¿ç”¨ï¼‰ï¼Œä½†ä¸æœ€ç»ˆæ¶ˆæ¯ä¸»ä½“ä¸­ä¼ è¾“çš„æ•°æ®æ— å…³çš„æ¶ˆæ¯å¤´ã€‚ å¯ä»¥åœ¨å®¢æˆ·ç«¯ã€æœåŠ¡å™¨å’Œå…¶ä»–åº”ç”¨ç¨‹åºä¹‹é—´æä¾›ä¸€äº›éå¸¸æœ‰ç”¨çš„é€šç”¨åŠŸèƒ½ï¼Œå¦‚ Date å¤´éƒ¨ã€‚ åè®®å¤´ è¯´æ˜ ä¸¾ä¾‹ Cache-Control ç”¨æ¥æŒ‡å®šå½“å‰çš„è¯·æ±‚/å›å¤ä¸­æ˜¯å¦ä½¿ç”¨ç¼“å­˜æœºåˆ¶ Cache-Control: no-store Connection å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰æƒ³è¦ä¼˜å…ˆä½¿ç”¨çš„è¿æ¥ç±»å‹ Connection: keep-alive (Upgrade) Date æŠ¥æ–‡åˆ›å»ºæ—¶é—´ Date: Dec, 26 Dec 2015 17: 30: 00 GMT Trailer ä¼šå®ç°è¯´æ˜åœ¨æŠ¥æ–‡ä¸»ä½“åè®°å½•å“ªäº›é¦–éƒ¨å­—æ®µï¼Œè¯¥é¦–éƒ¨å­—æ®µå¯ä»¥ä½¿ç”¨åœ¨ HTTP/1.1 ç‰ˆæœ¬åˆ†å—ä¼ è¾“ç¼–ç æ—¶ Trailer: Expiress Transfer-Encoding ç”¨æ¥æ”¹å˜æŠ¥æ–‡æ ¼å¼ Transfer-Encoding: chunked Upgrade è¦æ±‚æœåŠ¡å™¨å‡çº§åˆ°ä¸€ä¸ªé«˜ç‰ˆæœ¬åè®® Upgrade: HTTP/2.0, SHTTP/1.3, IRC/6.9, RTA/x11 Via å‘Šè¯‰æœåŠ¡å™¨ï¼Œè¿™ä¸ªè¯·æ±‚æ˜¯ç”±å“ªäº›ä»£ç†å‘å‡ºçš„ Via: 1.0 fred, 1.1 itbilu.com.com (Apache/1.1) Warning ä¸€ä¸ªä¸€èˆ¬æ€§çš„è­¦å‘Šï¼Œè¡¨ç¤ºåœ¨å®ä½“å†…å®¹ä¸­å¯èƒ½å­˜åœ¨é”™è¯¯ Warning: 199 Miscellaneous warning è¯·æ±‚å¤´éƒ¨åŒ…å«æ›´å¤šæœ‰å…³è¦è·å–çš„èµ„æºæˆ–å®¢æˆ·ç«¯æœ¬èº«ä¿¡æ¯çš„æ¶ˆæ¯å¤´ï¼Œå¦‚ Accept å¤´éƒ¨ã€‚ åè®®å¤´ è¯´æ˜ ä¸¾ä¾‹ Accept å‘Šè¯‰æœåŠ¡å™¨è‡ªå·±å…è®¸å“ªäº›åª’ä½“ç±»å‹ Accept: text/plain Accept-Charset æµè§ˆå™¨ç”³æ˜å¯æ¥å—çš„å­—ç¬¦é›† Accept-Charset: utf-8 Accept-Encoding æµè§ˆå™¨ç”³æ˜è‡ªå·±æ¥æ”¶çš„ç¼–ç æ–¹æ³• Accept-Encoding: gzip, deflate Accept-Language æµè§ˆå™¨å¯æ¥å—çš„å“åº”å†…å®¹è¯­è¨€åˆ—è¡¨ Accept-Language: en-US Authorization ç”¨äºè¡¨ç¤º HTTP åè®®ä¸­éœ€è¦è®¤è¯èµ„æºçš„è®¤è¯ä¿¡æ¯ Authorization: Basic OSdjJGRpbjpvcGVul ANIc2SdDE== Expect è¡¨ç¤ºå®¢æˆ·ç«¯è¦æ±‚æœåŠ¡å™¨åšå‡ºç‰¹å®šçš„è¡Œä¸º Expect: 100-continue From å‘èµ·æ­¤è¯·æ±‚çš„ç”¨æˆ·çš„é‚®ä»¶åœ°å€ From: user@itbilu.com Host è¡¨ç¤ºæœåŠ¡å™¨çš„åŸŸåä»¥åŠæœåŠ¡å™¨æ‰€ç›‘å¬çš„ç«¯å£å· Host: If-XXX æ¡ä»¶è¯·æ±‚ If-Modified-Since: Dec, 26 Dec 2015 17:30:00 GMT Max-Forwards é™åˆ¶è¯¥æ¶ˆæ¯å¯è¢«ä»£ç†åŠç½‘å…³è½¬å‘çš„æ¬¡æ•° Max-Forwards: 10 Range è¡¨ç¤ºè¯·æ±‚æŸä¸ªå®ä½“çš„ä¸€éƒ¨åˆ†ï¼Œå­—èŠ‚åç§»ä»¥ 0 å¼€å§‹ Range: bytes=500-999 Referer è¡¨ç¤ºæµè§ˆå™¨æ‰€è®¿é—®çš„å‰ä¸€ä¸ªé¡µé¢ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä¹‹å‰è®¿é—®é¡µé¢çš„é“¾æ¥å°†æµè§ˆå™¨å¸¦åˆ°äº†å½“å‰é¡µé¢ Referer: User-Agent æµè§ˆå™¨çš„èº«ä»½æ ‡è¯†å­—ç¬¦ä¸² User-Agent: Mozilla/â€¦â€¦ å“åº”å¤´éƒ¨åŒ…å«æœ‰å…³å“åº”çš„è¡¥å……ä¿¡æ¯ï¼Œå¦‚å…¶ä½ç½®æˆ–æœåŠ¡å™¨æœ¬èº«ï¼ˆåç§°å’Œç‰ˆæœ¬ç­‰ï¼‰çš„æ¶ˆæ¯å¤´ï¼Œå¦‚ Server å¤´éƒ¨ã€‚ åè®®å¤´ è¯´æ˜ ä¸¾ä¾‹ Accept-Ranges å­—æ®µçš„å€¼è¡¨ç¤ºå¯ç”¨äºå®šä¹‰èŒƒå›´çš„å•ä½ Accept-Ranges: bytes Age åˆ›å»ºå“åº”çš„æ—¶é—´ Ageï¼š5744337 ETag å”¯ä¸€æ ‡è¯†åˆ†é…çš„èµ„æº Etagï¼šW/\"585cd998-7c0f\" Location è¡¨ç¤ºé‡å®šå‘åçš„ URL Location: Retry-After å‘ŠçŸ¥å®¢æˆ·ç«¯å¤šä¹…åå†å‘é€è¯·æ±‚ Retry-After: 120 Server å‘ŠçŸ¥å®¢æˆ·ç«¯æœåŠ¡å™¨ä¿¡æ¯ Server: Apache/1.3.27 (Unix) (Red-Hat/Linux) Vary ç¼“å­˜æ§åˆ¶ Vary: Origin å®ä½“å¤´éƒ¨è¯·æ±‚&#x2F;å“åº”æŠ¥æ–‡ä¸­å®ä½“éƒ¨åˆ†çš„é¦–éƒ¨ï¼ŒåŒ…å«æœ‰å…³å®ä½“ä¸»ä½“çš„æ›´å¤šä¿¡æ¯ï¼Œæ¯”å¦‚ä¸»ä½“é•¿ (Content-Length) åº¦æˆ–å…¶ MIME ç±»å‹ï¼Œå¦‚ Content-Type å¤´éƒ¨ã€‚ åè®®å¤´ è¯´æ˜ ä¸¾ä¾‹ Allow å¯¹æŸç½‘ç»œèµ„æºçš„æœ‰æ•ˆçš„è¯·æ±‚è¡Œä¸ºï¼Œä¸å…è®¸åˆ™è¿”å› 405 Allow: GET, HEAD Content-encoding è¿”å›å†…å®¹çš„ç¼–ç æ–¹å¼ Content-Encoding: gzip Content-Length è¿”å›å†…å®¹çš„å­—èŠ‚é•¿åº¦ Content-Length: 348 Content-Language å“åº”ä½“çš„è¯­è¨€ Content-Language: en,zh Content-Location è¯·æ±‚èµ„æºå¯æ›¿ä»£çš„å¤‡ç”¨çš„å¦ä¸€åœ°å€ Content-Location: /index.htm Content-MD5 è¿”å›èµ„æºçš„ MD5 æ ¡éªŒå€¼ Content-MD5: Q2hlY2sgSW50ZWdyaXR5IQ== Content-Range åœ¨æ•´ä¸ªè¿”å›ä½“ä¸­æœ¬éƒ¨åˆ†çš„å­—èŠ‚ä½ç½® Content-Range: bytes 21010-47021/47022 Content-Type è¿”å›å†…å®¹çš„ MIME ç±»å‹ Content-Type: text/html; charset=utf-8 Expires å“åº”è¿‡æœŸçš„æ—¥æœŸå’Œæ—¶é—´ Expires: Thu, 01 Dec 2010 16:00:00 GMT Last-Modified è¯·æ±‚èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´ Last-Modified: Tue, 15 Nov 2010 12:45:26 GMT HTTP è¿æ¥æŒä¹…è¿æ¥é Keep-aliveï¼šæ—©æœŸ HTTP1.0ï¼Œæµè§ˆå™¨å‘èµ· http è¯·æ±‚éœ€è¦ä¸æœåŠ¡å™¨å»ºç«‹æ–°çš„ TCP è¿æ¥ï¼Œè¯·æ±‚å¤„ç†åè¿æ¥ç«‹å³æ–­å¼€ï¼Œé‡æ–°è¯·æ±‚é‡æ–°è¿æ¥ã€‚ä½†æ¯ä¸€ä¸ªè¿™æ ·çš„è¿æ¥ï¼Œå®¢æˆ·æœºå’ŒæœåŠ¡å™¨éƒ½è¦åˆ†é… TCP çš„ç¼“å†²åŒºå’Œå˜é‡ï¼Œè¿™ç»™æœåŠ¡å™¨å¸¦æ¥çš„ä¸¥é‡çš„è´Ÿæ‹…ã€‚Keep-aliveï¼šHTTP1.1 é»˜è®¤æŒä¹…è¿æ¥ï¼ŒåŒä¸€å®¢æˆ·æœºå¯ä»¥è¿ç»­è¯·æ±‚é€šè¿‡ç›¸åŒçš„è¿æ¥è¿›è¡Œä¼ é€ï¼Œä¸€å°æœåŠ¡å™¨å¤šä¸ª web é¡µé¢ä¹Ÿå¯é€šè¿‡å•ä¸ª TCP è¿æ¥ä¼ é€ç»™åŒä¸€ä¸ªå®¢æˆ·æœºã€‚ä½†é•¿æ—¶é—´ä¿æŒ TCP è¿æ¥ä¼šå¯¼è‡´ç³»ç»Ÿèµ„æºè¢«æ— æ•ˆå ç”¨ã€‚ é•¿è¿æ¥ Or çŸ­é“¾æ¥httpçš„é•¿è¿æ¥å’ŒçŸ­è¿æ¥ï¼ˆå²ä¸Šæœ€é€šä¿—ï¼ï¼‰ä»¥åŠåº”ç”¨åœºæ™¯_luzhensmartçš„ä¸“æ -CSDNåšå®¢_é•¿è¿æ¥å’ŒçŸ­è¿æ¥çš„ä½¿ç”¨åœºæ™¯ é•¿è¿æ¥ï¼šå¤šç”¨äºæ“ä½œé¢‘ç¹ï¼Œç‚¹å¯¹ç‚¹çš„é€šè®¯ï¼Œè€Œä¸”å®¢æˆ·ç«¯è¿æ¥æ•°ç›®è¾ƒå°‘çš„æƒ…å†µã€‚ä¾‹å¦‚å³æ—¶é€šè®¯ã€ç½‘ç»œæ¸¸æˆç­‰ã€‚çŸ­è¿æ¥ï¼šç”¨æˆ·æ•°ç›®è¾ƒå¤šçš„ Web ç½‘ç«™çš„ HTTP æœåŠ¡ä¸€èˆ¬ç”¨çŸ­è¿æ¥ã€‚ä¾‹å¦‚äº¬ä¸œï¼Œæ·˜å®è¿™æ ·çš„å¤§å‹ç½‘ç«™ä¸€èˆ¬å®¢æˆ·ç«¯æ•°é‡è¾¾åˆ°åƒä¸‡çº§ç”šè‡³ä¸Šäº¿ï¼Œè‹¥é‡‡ç”¨é•¿è¿æ¥åŠ¿å¿…ä¼šä½¿å¾—æœåŠ¡ç«¯å¤§é‡çš„èµ„æºè¢«æ— æ•ˆå ç”¨ï¼Œæ‰€ä»¥ä¸€èˆ¬ä½¿ç”¨çš„æ˜¯çŸ­è¿æ¥ã€‚ æŠ¥æ–‡é•¿åº¦é•¿åº¦åœ¨å“åº”æŠ¥æ–‡ä¸­æœ‰ä¸¤ç§è¡¨ç°å½¢å¼ã€‚ å¯¹äºå°ç‚¹çš„æ–‡ä»¶ï¼Œç›´æ¥ç»™å‡º content-lengthï¼Œä¹Ÿå°±æ˜¯æœ¬æ¬¡è¿”å›çš„æ•°æ®é•¿åº¦ å¯¹äºå¤§æ–‡ä»¶ï¼Œä½¿ç”¨ Transfer-Encoding:chunked å­—æ®µï¼Œä¸ä¼ è¾“æ•°æ®é•¿åº¦ï¼Œå®¢æˆ·ç«¯åªçŸ¥é“æ˜¯åˆ†å—ä¼ è¾“ï¼Œè¿™ä¹Ÿæ˜¯è®¢å¥½äº†åè®®ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°äº†ä¼šè¿›è¡Œç»„è£…ï¼Œæ¯ä¸€ä¸ªåˆ†å—åŒ…å«åå…­è¿›åˆ¶çš„é•¿åº¦å€¼å’Œæ•°æ®ï¼Œæœ€åä¸€ä¸ªåˆ†å—é•¿åº¦å€¼ä¸º 0ï¼Œè¡¨ç¤ºå®ä½“ç»“æŸï¼Œå®¢æˆ·æœºå¯ä»¥ä»¥æ­¤ä¸ºæ ‡å¿—ç¡®è®¤æ•°æ®å·²ç»æ¥æ”¶å®Œæ¯•ã€‚ æ›¾ç»ç”¨ py å†™è¿‡ä¸‹è½½è„šæœ¬ï¼Œå°±åˆ©ç”¨äº†åˆ†å—ä¼ è¾“çš„æ–¹æ³•ï¼š 1234567file_size = int(r.headers[&#x27;content-length&#x27;])with tqdm(total=file_size, unit=&#x27;B&#x27;, unit_scale=True, unit_divisor=1024, ascii=True,desc=filename) as bar: with open(file_path, &#x27;wb&#x27;) as fp: for chunk in r.iter_content(chunk_size=512): if chunk: fp.write(chunk) bar.update(len(chunk)) HTTP æ–¹æ³•HTTP&#x2F;1.0 å®šä¹‰äº†ä¸‰ç§è¯·æ±‚æ–¹æ³•ï¼šGET, POST å’Œ HEAD æ–¹æ³•ã€‚ HTTP&#x2F;1.1 å¢åŠ äº†å…­ç§è¯·æ±‚æ–¹æ³•ï¼šOPTIONS, PUT, PATCH, DELETE, TRACE å’Œ CONNECT æ–¹æ³•ã€‚ æ„Ÿè§‰å®é™…ç”Ÿäº§ä¸­å¾ˆå°‘ä¼šç”¨é‚£ 6 ç§æ–¹æ³•ï¼Œæå¤§çš„å¤æ‚åŒ–äº† api æ–¹æ³• æè¿° GET è¯·æ±‚æŒ‡å®šçš„é¡µé¢ä¿¡æ¯ï¼Œå¹¶è¿”å›å…·ä½“å†…å®¹ï¼Œé€šå¸¸åªç”¨äºè¯»å–æ•°æ®ã€‚ HEAD ç±»ä¼¼äº GET è¯·æ±‚ï¼Œåªä¸è¿‡è¿”å›çš„å“åº”ä¸­æ²¡æœ‰å…·ä½“çš„å†…å®¹ï¼Œç”¨äºè·å–æŠ¥å¤´ã€‚ POST å‘æŒ‡å®šèµ„æºæäº¤æ•°æ®è¿›è¡Œå¤„ç†è¯·æ±‚ï¼ˆä¾‹å¦‚æäº¤è¡¨å•æˆ–è€…ä¸Šä¼ æ–‡ä»¶ï¼‰ã€‚æ•°æ®è¢«åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­ã€‚POST è¯·æ±‚å¯èƒ½ä¼šå¯¼è‡´æ–°çš„èµ„æºçš„å»ºç«‹æˆ–å·²æœ‰èµ„æºçš„æ›´æ”¹ã€‚ PUT æ›¿æ¢æŒ‡å®šçš„èµ„æºï¼Œæ²¡æœ‰çš„è¯å°±æ–°å¢ã€‚ DELETE è¯·æ±‚æœåŠ¡å™¨åˆ é™¤ URL æ ‡è¯†çš„èµ„æºæ•°æ®ã€‚ CONNECT å°†æœåŠ¡å™¨ä½œä¸ºä»£ç†ï¼Œè®©æœåŠ¡å™¨ä»£æ›¿ç”¨æˆ·è¿›è¡Œè®¿é—®ã€‚ OPTIONS å‘æœåŠ¡å™¨å‘é€è¯¥æ–¹æ³•ï¼Œä¼šè¿”å›å¯¹æŒ‡å®šèµ„æºæ‰€æ”¯æŒçš„ HTTP è¯·æ±‚æ–¹æ³•ã€‚ TRACE å›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚æ•°æ®ï¼Œå³æœåŠ¡å™¨è¿”å›è‡ªå·±æ”¶åˆ°çš„æ•°æ®ï¼Œä¸»è¦ç”¨äºæµ‹è¯•å’Œè¯Šæ–­ã€‚ PATCH æ˜¯å¯¹ PUT æ–¹æ³•çš„è¡¥å……ï¼Œç”¨æ¥å¯¹å·²çŸ¥èµ„æºè¿›è¡Œå±€éƒ¨æ›´æ–°ã€‚ GET or POST get æäº¤çš„æ•°æ®ä¼šæ”¾åœ¨ URL ä¹‹åï¼Œå¹¶ä¸”è¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´çš„ä¿ç•™åœ¨æµè§ˆå™¨çš„è®°å½•é‡Œï¼Œç”±äºå‚æ•°ç›´æ¥æš´éœ²åœ¨ URL ä¸­ï¼Œå¯èƒ½ä¼šå­˜åœ¨å®‰å…¨é—®é¢˜ï¼Œå› æ­¤å¾€å¾€ç”¨äºè·å–èµ„æºä¿¡æ¯ã€‚è€Œ post å‚æ•°æ”¾åœ¨è¯·æ±‚ä¸»ä½“ä¸­ï¼Œå¹¶ä¸”å‚æ•°ä¸ä¼šè¢«ä¿ç•™ï¼Œç›¸æ¯” get æ–¹æ³•ï¼Œpost æ–¹æ³•æ›´å®‰å…¨ï¼Œä¸»è¦ç”¨äºä¿®æ”¹æœåŠ¡å™¨ä¸Šçš„èµ„æºã€‚ get è¯·æ±‚åªæ”¯æŒ URL ç¼–ç ï¼Œpost è¯·æ±‚æ”¯æŒå¤šç§ç¼–ç æ ¼å¼ã€‚ get åªæ”¯æŒ ASCII å­—ç¬¦æ ¼å¼çš„å‚æ•°ï¼Œè€Œ post æ–¹æ³•æ²¡æœ‰é™åˆ¶ã€‚ get æäº¤çš„æ•°æ®å¤§å°æœ‰é™åˆ¶ï¼ˆè¿™é‡Œæ‰€è¯´çš„é™åˆ¶æ˜¯é’ˆå¯¹æµè§ˆå™¨è€Œè¨€çš„ï¼‰ï¼Œè€Œ post æ–¹æ³•æäº¤çš„æ•°æ®æ²¡é™åˆ¶ get æ–¹å¼éœ€è¦ä½¿ç”¨ Request.QueryString æ¥å–å¾—å˜é‡çš„å€¼ï¼Œè€Œ post æ–¹å¼é€šè¿‡ Request.Form æ¥è·å–ã€‚ get æ–¹æ³•äº§ç”Ÿä¸€ä¸ª TCP æ•°æ®åŒ…ï¼Œpost æ–¹æ³•äº§ç”Ÿä¸¤ä¸ªï¼ˆå¹¶ä¸æ˜¯æ‰€æœ‰çš„æµè§ˆå™¨ä¸­éƒ½äº§ç”Ÿä¸¤ä¸ªï¼‰ å¯¹äº GET æ–¹å¼çš„è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šæŠŠ http header å’Œ data ä¸€å¹¶å‘é€å‡ºå»ï¼ŒæœåŠ¡ç«¯å“åº” 200ï¼Œè¯·æ±‚æˆåŠŸã€‚å¯¹äº POST æ–¹å¼çš„è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šå…ˆå‘é€ http header ç»™æœåŠ¡ç«¯ï¼Œå‘Šè¯‰æœåŠ¡ç«¯ç­‰ä¸€ä¸‹ä¼šæœ‰æ•°æ®è¿‡æ¥ï¼ŒæœåŠ¡ç«¯å“åº” 100 continueï¼Œå‘Šè¯‰æµè§ˆå™¨æˆ‘å·²ç»å‡†å¤‡æ¥æ”¶æ•°æ®ï¼Œæµè§ˆå™¨å† post å‘é€ä¸€ä¸ª data ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯å“åº” 200ï¼Œè¯·æ±‚æˆåŠŸã€‚ æ“ä½œæ–¹å¼ æ•°æ®ä½ç½® æ˜æ–‡å¯†æ–‡ æ•°æ®å®‰å…¨ é•¿åº¦é™åˆ¶ åº”ç”¨åœºæ™¯ GET HTTP åŒ…å¤´å¦‚æœæ•°æ®æ˜¯ä¸­æ–‡æˆ–å…¶å®ƒå­—ç¬¦ï¼Œåˆ™è¿›è¡Œ BASE64 ç¼–ç ã€‚ æ˜æ–‡ ä¸å®‰å…¨ é•¿åº¦è¾ƒå° æŸ¥è¯¢æ•°æ® POST HTTP æ­£æ–‡ å¯æ˜å¯å¯† å®‰å…¨ æ”¯æŒè¾ƒå¤§æ•°æ®ä¼ è¾“ ä¿®æ”¹æ•°æ® é•¿åº¦é™åˆ¶ï¼š GET æ–¹æ³•æ˜¯é€šè¿‡ URL ä¼ é€’æ•°æ®çš„ï¼Œè€Œ URL æœ¬èº«å¹¶æ²¡æœ‰å¯¹æ•°æ®çš„é•¿åº¦è¿›è¡Œé™åˆ¶ï¼ŒçœŸæ­£é™åˆ¶ GET é•¿åº¦çš„æ˜¯æµè§ˆå™¨ï¼Œå¹¶ä¸”è¿™ä¸ªé•¿åº¦ä¸æ˜¯åªé’ˆå¯¹æ•°æ®éƒ¨åˆ†ï¼Œè€Œæ˜¯é’ˆå¯¹æ•´ä¸ª URL è€Œè¨€ï¼Œåœ¨è¿™ä¹‹ä¸­ï¼Œä¸åŒçš„æœåŠ¡å™¨åŒæ ·å½±å“ URL çš„æœ€å¤§é•¿åº¦é™åˆ¶ã€‚å› æ­¤å¯¹äºç‰¹å®šçš„æµè§ˆå™¨ï¼ŒGET çš„é•¿åº¦é™åˆ¶ä¸åŒã€‚ POST æ–¹æ³•è¯·æ±‚å‚æ•°åœ¨è¯·æ±‚ä¸»ä½“ä¸­ï¼Œç†è®ºä¸Šè®²ï¼Œpost æ–¹æ³•æ˜¯æ²¡æœ‰å¤§å°é™åˆ¶çš„ï¼Œè€ŒçœŸæ­£èµ·é™åˆ¶ä½œç”¨çš„æ˜¯æœåŠ¡å™¨å¤„ç†ç¨‹åºçš„å¤„ç†èƒ½åŠ›ã€‚ HTTP çŠ¶æ€HTTP åè®®æ˜¯æ— è¿æ¥æ— çŠ¶æ€çš„ï¼Œå¹¶ä¸ä¿å­˜å…³äºå®¢æˆ·ç«¯çš„ä»»ä½•ä¿¡æ¯ã€‚ é€šå¸¸æœ‰ä¸¤ç§æ–¹æ³•ä¿æŒä¼šè¯ï¼š SessionæœåŠ¡å™¨åˆ›å»ºå¹¶ä¿å­˜é”®å€¼å¯¹ï¼šSessionId-Sessionï¼Œç„¶åå°† SessionId ä¸‹å‘ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°†å…¶å­˜åœ¨ Cookie ä¸­ï¼Œæ¯æ¬¡è¯·æ±‚å¸¦ä¸Šè¿™ä¸ª SessionIdï¼ŒæœåŠ¡å™¨å°±å¯ä»¥å°†çŠ¶æ€å’Œä¼šè¯è”ç³»èµ·æ¥ã€‚ ä¼˜ç‚¹ï¼šå®‰å…¨æ€§é«˜ï¼Œå› ä¸ºçŠ¶æ€ä¿¡æ¯ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯ã€‚ç¼ºç‚¹ï¼šç”±äºå¤§å‹ç½‘ç«™å¾€å¾€é‡‡ç”¨çš„æ˜¯åˆ†å¸ƒå¼æœåŠ¡å™¨ï¼Œå€˜è‹¥åŒä¸€ä¸ªæµè§ˆå™¨ä¸¤æ¬¡ HTTP è¯·æ±‚åˆ†åˆ«è½åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šæ—¶ï¼ŒåŸºäº Session çš„æ–¹æ³•å°±ä¸èƒ½å®ç°ä¼šè¯ä¿æŒäº†ã€‚ã€è§£å†³æ–¹æ³•ã€‘ï¼šé‡‡ç”¨ä¸­é—´ä»¶ï¼Œä¾‹å¦‚ Redisï¼Œæˆ‘ä»¬é€šè¿‡å°† Session çš„ä¿¡æ¯å­˜å‚¨åœ¨ Redis ä¸­ï¼Œä½¿å¾—æ¯ä¸ªæœåŠ¡å™¨éƒ½å¯ä»¥è®¿é—®åˆ°ä¹‹å‰çš„çŠ¶æ€ä¿¡æ¯ CookieæœåŠ¡å™¨å‘é€å“åº”æ¶ˆæ¯æ—¶åœ¨å“åº”å¤´ä¸­è®¾ç½® Set-Cookie å­—æ®µï¼Œå­˜å‚¨å®¢æˆ·ç«¯çš„çŠ¶æ€ä¿¡æ¯ã€‚å®¢æˆ·ç«¯æ ¹æ®è¿™ä¸ªå­—æ®µæ¥åˆ›å»º Cookie å¹¶åœ¨è¯·æ±‚æ—¶å¸¦ä¸Šï¼ˆæ¯ä¸ª Cookie éƒ½åŒ…å«ç€å®¢æˆ·ç«¯çš„çŠ¶æ€ä¿¡æ¯ï¼‰ï¼Œä»è€Œå®ç°çŠ¶æ€ä¿æŒã€‚ ä¼˜ç‚¹ï¼šæœåŠ¡å™¨ä¸ç”¨ä¿å­˜çŠ¶æ€ä¿¡æ¯ï¼Œ å‡è½»æœåŠ¡å™¨å­˜å‚¨å‹åŠ›ï¼ŒåŒæ—¶ä¾¿äºæœåŠ¡ç«¯åšæ°´å¹³æ‹“å±•ã€‚ç¼ºç‚¹ï¼šè¯¥æ–¹å¼ä¸å¤Ÿå®‰å…¨ï¼Œå› ä¸ºçŠ¶æ€ä¿¡æ¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œè¿™æ„å‘³ç€ä¸èƒ½åœ¨ä¼šè¯ä¸­ä¿å­˜æœºå¯†æ•°æ®ï¼›æ¯æ¬¡å‘èµ· HTTP è¯·æ±‚æ—¶éƒ½éœ€è¦å‘é€é¢å¤–çš„ Cookie åˆ°æœåŠ¡å™¨ç«¯ï¼Œä¼šå ç”¨æ›´å¤šå¸¦å®½ã€‚ Cookie è¢«ç¦ç”¨è‹¥é‡åˆ° Cookie è¢«ç¦ç”¨çš„æƒ…å†µï¼Œåˆ™å¯ä»¥é€šè¿‡é‡å†™ URL çš„æ–¹å¼å°†ä¼šè¯æ ‡è¯†æ”¾åœ¨ URL çš„å‚æ•°é‡Œï¼Œä¹Ÿå¯ä»¥å®ç°ä¼šè¯ä¿æŒã€‚ HTTP çŠ¶æ€ç HTTP çŠ¶æ€ç ç”±ä¸‰ä¸ªåè¿›åˆ¶æ•°å­—ç»„æˆï¼Œç¬¬ä¸€ä¸ªæ•°å­—å®šä¹‰äº†çŠ¶æ€ç çš„ç±»å‹ï¼Œåä¸¤ä¸ªå¹¶æ²¡æœ‰èµ·åˆ°åˆ†ç±»çš„ä½œç”¨ã€‚ HTTP çŠ¶æ€ç å…±æœ‰ 5 ç§ç±»å‹ï¼š åˆ†ç±» åˆ†ç±»æè¿° 1XX æŒ‡ç¤ºä¿¡æ¯ -- è¡¨ç¤ºè¯·æ±‚æ­£åœ¨å¤„ç† 2XX æˆåŠŸ -- è¡¨ç¤ºè¯·æ±‚å·²è¢«æˆåŠŸå¤„ç†å®Œæ¯• 3XX é‡å®šå‘ -- è¦å®Œæˆçš„è¯·æ±‚éœ€è¦è¿›è¡Œé™„åŠ æ“ä½œ 4XX å®¢æˆ·ç«¯é”™è¯¯ -- è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯æˆ–è€…è¯·æ±‚æ— æ³•å®ç°ï¼ŒæœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚ 5XX æœåŠ¡å™¨ç«¯é”™è¯¯ -- æœåŠ¡å™¨å¤„ç†è¯·æ±‚å‡ºç°é”™è¯¯ å¸¸è§çš„çŠ¶æ€ç æœ‰å¦‚ä¸‹å‡ ç§ï¼š 200 OK å®¢æˆ·ç«¯è¯·æ±‚æˆåŠŸ 204 No Content è¯·æ±‚å¤„ç†æˆåŠŸï¼Œä½†æ²¡æœ‰èµ„æºè¿”å› 206 Partial Content èŒƒå›´è¯·æ±‚è¿”å›ï¼ˆContent-Rangeï¼‰ 301 Moved Permanently è¯·æ±‚æ°¸ä¹…é‡å®šå‘ 302 Moved Temporarily è¯·æ±‚ä¸´æ—¶é‡å®šå‘ 304 Not Modified æ–‡ä»¶æœªä¿®æ”¹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜çš„æ–‡ä»¶ã€‚ 307 Temporary Redirect ä¸ 302 çš„åŒºåˆ«ï¼šéµç…§æµè§ˆå™¨æ ‡å‡†ï¼Œä¸ä¼šä» POST å˜æˆ GET 400 Bad Request ç”±äºå®¢æˆ·ç«¯è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯ï¼Œä¸èƒ½è¢«æœåŠ¡å™¨æ‰€ç†è§£ã€‚ 401 Unauthorized è¯·æ±‚æœªç»æˆæƒã€‚è¿™ä¸ªçŠ¶æ€ä»£ç å¿…é¡»å’Œ WWW-Authenticate æŠ¥å¤´åŸŸä¸€èµ·ä½¿ç”¨ 403 Forbidden æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æä¾›æœåŠ¡ã€‚æœåŠ¡å™¨é€šå¸¸ä¼šåœ¨å“åº”æ­£æ–‡ä¸­ç»™å‡ºä¸æä¾›æœåŠ¡çš„åŸå›  404 Not Found è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ï¼Œä¾‹å¦‚ï¼Œè¾“å…¥äº†é”™è¯¯çš„ URL 500 Internal Server Error æœåŠ¡å™¨å‘ç”Ÿä¸å¯é¢„æœŸçš„é”™è¯¯ï¼Œå¯¼è‡´æ— æ³•å®Œæˆå®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚ 501 Not Implemented æœåŠ¡å™¨ä¸æ”¯æŒè¯·æ±‚æ–¹æ³• 502 Bad Gateway ç½‘å…³é”™è¯¯ 503 Service Unavailable æœåŠ¡å™¨å½“å‰ä¸èƒ½å¤Ÿå¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œåœ¨ä¸€æ®µæ—¶é—´ä¹‹åï¼ŒæœåŠ¡å™¨å¯èƒ½ä¼šæ¢å¤æ­£å¸¸ã€‚ 504 Bad Gateway timeout ç½‘å…³è¶…æ—¶ 505 HTTP Version Not Supported ä¸æ”¯æŒçš„ HTTP ç‰ˆæœ¬ æ›´å¤šå¯è§ HTTP çŠ¶æ€ç _w3cschool é¢è¯•å¯¹çŠ¶æ€ç å¸¸è§é—®æ³•çŠ¶æ€ç  301 å’Œ 302 çš„åŒºåˆ« 301ï¼šæ°¸ä¹…ç§»åŠ¨ã€‚è¯·æ±‚çš„èµ„æºå·²è¢«æ°¸ä¹…çš„ç§»åŠ¨åˆ°æ–°çš„ URIï¼Œæ—§çš„åœ°å€å·²ç»è¢«æ°¸ä¹…çš„åˆ é™¤äº†ã€‚è¿”å›ä¿¡æ¯ä¼šåŒ…æ‹¬æ–°çš„ URIï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å®šå‘åˆ°æ–°çš„ URIã€‚ä»Šåæ–°çš„è¯·æ±‚éƒ½åº”ä½¿ç”¨æ–°çš„ URI ä»£æ›¿ã€‚ 302ï¼šä¸´æ—¶ç§»åŠ¨ã€‚ä¸ 301 ç±»ä¼¼ï¼Œå®¢æˆ·ç«¯æ‹¿åˆ°æœåŠ¡ç«¯çš„å“åº”æ¶ˆæ¯åä¼šè·³è½¬åˆ°ä¸€ä¸ªæ–°çš„ URL åœ°å€ã€‚ä½†èµ„æºåªæ˜¯ä¸´æ—¶è¢«ç§»åŠ¨ï¼Œæ—§çš„åœ°å€è¿˜åœ¨ï¼Œå®¢æˆ·ç«¯åº”ç»§ç»­ä½¿ç”¨åŸæœ‰ URIã€‚ HTTP å¼‚å¸¸çŠ¶æ€ç è¯¥é—®é¢˜ä¸€èˆ¬åªéœ€è¦å›ç­” 3, 4 , 5 å¼€å¤´çš„ä¸€äº›å¸¸è§å¼‚å¸¸çŠ¶æ€ç å³å¯ã€‚ HTTPSHTTPS å³ HTTP over TLSï¼Œæ˜¯ä¸€ç§åœ¨åŠ å¯†ä¿¡é“è¿›è¡Œ HTTP å†…å®¹ä¼ è¾“çš„åè®®ã€‚ åŠ å¯†æ–¹å¼HTTPS é‡‡ç”¨å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†ç›¸ç»“åˆçš„æ–¹å¼ï¼š é¦–å…ˆä½¿ç”¨ SSL&#x2F;TLS åè®®è¿›è¡ŒåŠ å¯†ä¼ è¾“ï¼Œä¸ºäº†å¼¥è¡¥éå¯¹ç§°åŠ å¯†çš„ç¼ºç‚¹ï¼ŒHTTPS é‡‡ç”¨è¯ä¹¦æ¥è¿›ä¸€æ­¥åŠ å¼ºéå¯¹ç§°åŠ å¯†çš„å®‰å…¨æ€§ã€‚é€šè¿‡éå¯¹ç§°åŠ å¯†ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åå•†å¥½ä¹‹åè¿›è¡Œé€šä¿¡ä¼ è¾“çš„å¯¹ç§°å¯†é’¥ï¼Œåç»­çš„æ‰€æœ‰ä¿¡æ¯éƒ½é€šè¿‡è¯¥å¯¹ç§°ç§˜é’¥è¿›è¡ŒåŠ å¯†è§£å¯†ï¼Œå®Œæˆæ•´ä¸ª HTTPS çš„æµç¨‹ã€‚ å·¥ä½œæ–¹å¼ åè®® ç‰¹ç‚¹ å·¥ä½œæ–¹å¼ HTTP æ˜æ–‡ä¼ è¾“ï¼Œæ•°æ®æœªåŠ å¯†ï¼Œå®‰å…¨æ€§è¾ƒå·® é»˜è®¤ 80 ç«¯å£ 3 æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡å™¨ 80 ç«¯å£ï¼Œå»ºç«‹ TCP è¿æ¥ å®¢æˆ·ç«¯ä»å¥—æ¥å­—æ¥å£å‘é€ HTTP è¯·æ±‚æŠ¥æ–‡å’Œæ¥æ”¶ HTTP å“åº”æŠ¥æ–‡ æœåŠ¡ç«¯ä»å¥—æ¥å­—æ¥å£æ¥æ”¶ HTTP è¯·æ±‚æŠ¥æ–‡å’Œå‘é€ HTTP å“åº”æŠ¥æ–‡ é€šä¿¡ç»“æŸï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å…³é—­è¿æ¥ HTTPS åŠ å¯†ï¼Œå®‰å…¨æ€§è¾ƒå¥½ é»˜è®¤ 443 ç«¯å£ éœ€æ•°å­—è®¤è¯æœºæ„ï¼ˆCertificate Authority, CAï¼‰çš„è¯ä¹¦ é™¤ TCP çš„ 3 æ¬¡æ¡æ‰‹ï¼Œè¿˜éœ€è¦ SSL åå•† å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡å™¨ 443 ç«¯å£ï¼Œå»ºç«‹ TCP è¿æ¥ï¼ˆåŒ…æ‹¬æ”¯æŒç®—æ³•ï¼Œå¯†é’¥é•¿åº¦ç­‰ï¼‰ æœåŠ¡ç«¯ä»åŒæ–¹å…±åŒæ”¯æŒçš„åŠ å¯†ç®—æ³•åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ç§è¿”å›ç»™å®¢æˆ·ç«¯ï¼ˆåŒ…æ‹¬å¯†é’¥ç»„ä»¶ï¼‰ æœåŠ¡å™¨è¿”å›è‡ªèº« CA è¯ä¹¦çš„æŠ¥æ–‡ï¼ˆåŒ…å«è¯ä¹¦çš„é¢å‘æœºæ„ã€è¿‡æœŸæ—¶é—´ã€æœåŠ¡ç«¯çš„å…¬é’¥ç­‰ä¿¡æ¯ï¼‰ æœåŠ¡ç«¯å‘é€ä¸€ä¸ªå®ŒæˆæŠ¥æ–‡é€šçŸ¥å®¢æˆ·ç«¯ SSL çš„ç¬¬ä¸€é˜¶æ®µå·²ç»åå•†å®Œæˆ å®¢æˆ·ç«¯ç”¨æœ¬åœ°è¯ä¹¦åº“çš„æ ¹è¯ä¹¦æ ¡éªŒ CA è¯ä¹¦ï¼Œç”Ÿæˆéšæœºå¯†ç ä¸²ï¼Œç”¨å…¬é’¥åŠ å¯†å‘é€ç»™æœåŠ¡å™¨ï¼Œå³å›åº”æŠ¥æ–‡ ç´§æ¥ç€å®¢æˆ·ç«¯ä¼šå‘é€ä¸€ä¸ªæŠ¥æ–‡æç¤ºæœåŠ¡ç«¯åœ¨æ­¤ä¹‹åçš„æŠ¥æ–‡æ˜¯é‡‡ç”¨å¯†ç ä¸²åŠ å¯†çš„ å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª finish æŠ¥æ–‡ï¼ˆåŒ…å«ç¬¬ä¸€æ¬¡æ¡æ‰‹è‡³ä»Šæ‰€æœ‰æŠ¥æ–‡çš„æ•´ä½“æ ¡éªŒå€¼ï¼‰ æœåŠ¡ç«¯åŒæ ·å‘é€ä¸ç¬¬ 6 æ­¥ä¸­ç›¸åŒä½œç”¨çš„æŠ¥æ–‡ï¼Œæœ€åå‘é€ finish æŠ¥æ–‡å‘Šè¯‰å®¢æˆ·ç«¯è‡ªå·±èƒ½å¤Ÿæ­£ç¡®è§£å¯†æŠ¥æ–‡ SSL è¿æ¥å»ºç«‹ CA è¯ä¹¦é˜²æ­¢çš„æ–¹å¼ï¼šï¼ˆä¸ºä»€ä¹ˆå¯ä»¥ä¿¡ä»» CA è¯ä¹¦ï¼‰ç¯¡æ”¹ï¼šåŠ å¯†ç­¾åä¸åŸæ–‡ç­¾åå¯¹æ¯”è°ƒåŒ…ï¼šè¯·æ±‚åŸŸåä¸è¯ä¹¦åŸŸåå¯¹æ¯” å¦é™„ HTTP ç‰ˆæœ¬æ¼”å˜ï¼š ç›´æ¥é€ è®¿ HTTP x.x DNSDNSï¼ˆDomain Name Systemï¼‰æ˜¯åŸŸåç³»ç»Ÿçš„è‹±æ–‡ç¼©å†™ï¼Œæ˜¯ä¸€ç§ç»„ç»‡æˆåŸŸå±‚æ¬¡ç»“æ„çš„è®¡ç®—æœºå’Œç½‘ç»œæœåŠ¡å‘½åç³»ç»Ÿï¼Œæä¾›äº†ä¸»æœºåå’Œ IP åœ°å€ä¹‹é—´ç›¸äº’è½¬æ¢çš„æœåŠ¡ã€‚ æŸ¥è¯¢æ–¹å¼ é€’å½’æŸ¥è¯¢ï¼šå¦‚æœä¸»æœºæ‰€è¯¢é—®çš„æœ¬åœ°åŸŸåæœåŠ¡å™¨ä¸çŸ¥é“è¢«æŸ¥è¯¢åŸŸåçš„ IP åœ°å€ï¼Œé‚£ä¹ˆæœ¬åœ°åŸŸåæœåŠ¡å™¨å°±ä»¥ DNS å®¢æˆ·ç«¯çš„èº«ä»½ï¼Œå‘å…¶ä»–æ ¹åŸŸåæœåŠ¡å™¨ç»§ç»­å‘å‡ºæŸ¥è¯¢è¯·æ±‚æŠ¥æ–‡ï¼Œå³æ›¿ä¸»æœºç»§ç»­æŸ¥è¯¢ï¼Œè€Œä¸æ˜¯è®©ä¸»æœºè‡ªå·±è¿›è¡Œä¸‹ä¸€æ­¥æŸ¥è¯¢ã€‚å¸®ä½ æŸ¥ è¿­ä»£æŸ¥è¯¢ï¼šå½“æ ¹åŸŸåæœåŠ¡å™¨æ”¶åˆ°æœ¬åœ°åŸŸåæœåŠ¡å™¨å‘å‡ºçš„è¿­ä»£æŸ¥è¯¢è¯·æ±‚æŠ¥æ–‡æ—¶ï¼Œè¦ä¹ˆç»™å‡ºæ‰€è¦æŸ¥è¯¢çš„ IP åœ°å€ï¼Œè¦ä¹ˆå‘Šè¯‰æœ¬åœ°æœåŠ¡å™¨ä¸‹ä¸€æ­¥åº”è¯¥æ‰¾å“ªä¸ªåŸŸåæœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢ï¼Œç„¶åè®©æœ¬åœ°æœåŠ¡å™¨è¿›è¡Œåç»­çš„æŸ¥è¯¢ã€‚è‡ªå·±æŸ¥ ä¼ è¾“æ–¹å¼DNS å¯ä»¥ä½¿ç”¨ UDP æˆ–è€… TCP è¿›è¡Œä¼ è¾“ï¼Œä½¿ç”¨çš„ç«¯å£å·éƒ½ä¸º 53ã€‚ å¤§å¤šæ•°æƒ…å†µä¸‹ DNS ä½¿ç”¨ UDP è¿›è¡Œä¼ è¾“ï¼Œä¸éœ€è¦ç»è¿‡ TCP ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ï¼Œä»è€Œå¤§å¤§æé«˜äº†å“åº”é€Ÿåº¦ã€‚ä½†è¦æ±‚åŸŸåè§£æå™¨å’ŒåŸŸåæœåŠ¡å™¨éƒ½å¿…é¡»è‡ªå·±å¤„ç†è¶…æ—¶å’Œé‡ä¼ ä»è€Œä¿è¯å¯é æ€§ã€‚ åœ¨ä¸¤ç§æƒ…å†µä¸‹ä¼šä½¿ç”¨ TCP è¿›è¡Œä¼ è¾“ï¼š å¦‚æœè¿”å›çš„å“åº”è¶…è¿‡çš„ 512 å­—èŠ‚ï¼ˆUDP æœ€å¤§åªæ”¯æŒ 512 å­—èŠ‚çš„æ•°æ®ï¼‰ã€‚ åŒºåŸŸä¼ é€ï¼ˆåŒºåŸŸä¼ é€æ˜¯ä¸»åŸŸåæœåŠ¡å™¨å‘è¾…åŠ©åŸŸåæœåŠ¡å™¨ä¼ é€å˜åŒ–çš„é‚£éƒ¨åˆ†æ•°æ® å› ä¸ºæ•°æ®åŒæ­¥ä¼ é€çš„æ•°æ®é‡æ¯”ä¸€ä¸ªè¯·æ±‚å’Œåº”ç­”çš„æ•°æ®é‡è¦å¤šï¼Œè€Œ TCP å…è®¸çš„æŠ¥æ–‡é•¿åº¦æ›´é•¿ï¼Œå› æ­¤ä¸ºäº†ä¿è¯æ•°æ®çš„æ­£ç¡®æ€§ï¼Œä¼šä½¿ç”¨åŸºäºå¯é è¿æ¥çš„ TCPã€‚ DNS åŠ«æŒDNS åŠ«æŒå³åŸŸååŠ«æŒï¼Œæ˜¯é€šè¿‡å°†åŸåŸŸåå¯¹åº”çš„ IP åœ°å€è¿›è¡Œæ›¿æ¢ä»è€Œä½¿å¾—ç”¨æˆ·è®¿é—®åˆ°é”™è¯¯çš„ç½‘ç«™æˆ–è€…ä½¿å¾—ç”¨æˆ·æ— æ³•æ­£å¸¸è®¿é—®ç½‘ç«™çš„ä¸€ç§æ”»å‡»æ–¹å¼ã€‚ åŸŸååŠ«æŒå¾€å¾€åªèƒ½åœ¨ç‰¹å®šçš„ç½‘ç»œèŒƒå›´å†…è¿›è¡Œï¼ŒèŒƒå›´å¤–çš„ DNS æœåŠ¡å™¨èƒ½å¤Ÿè¿”å›æ­£å¸¸çš„ IP åœ°å€ã€‚ é¢„é˜²æ‰‹æ®µ ç›´æ¥ä½¿ç”¨ IP è®¿é—® ç›´æ¥æŒ‡å®š DNS æœåŠ¡å™¨ï¼ˆå¦‚è°·æ­Œçš„ 8.8.8.8ï¼‰ MoreSocket å¥—æ¥å­— Socket æ˜¯å¯¹ TCP&#x2F;IP åè®®æ—çš„ä¸€ç§å°è£…ï¼Œæ˜¯åº”ç”¨å±‚ä¸ TCP&#x2F;IP åè®®æ—é€šä¿¡çš„ä¸­é—´è½¯ä»¶æŠ½è±¡å±‚ã€‚ä»è®¾è®¡æ¨¡å¼çš„è§’åº¦çœ‹æ¥ï¼ŒSocket å…¶å®å°±æ˜¯ä¸€ä¸ªé—¨é¢æ¨¡å¼ï¼Œå®ƒæŠŠå¤æ‚çš„ TCP&#x2F;IP åè®®æ—éšè—åœ¨ Socket æ¥å£åé¢ï¼Œå¯¹ç”¨æˆ·æ¥è¯´ï¼Œä¸€ç»„ç®€å•çš„æ¥å£å°±æ˜¯å…¨éƒ¨ï¼Œè®© Socket å»ç»„ç»‡æ•°æ®ï¼Œä»¥ç¬¦åˆæŒ‡å®šçš„åè®®ã€‚ Socket è¿˜å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ç§ç½‘ç»œé—´ä¸åŒè®¡ç®—æœºä¸Šçš„è¿›ç¨‹é€šä¿¡çš„ä¸€ç§æ–¹æ³•ï¼Œåˆ©ç”¨ä¸‰å…ƒç»„ï¼ˆip åœ°å€ï¼Œåè®®ï¼Œç«¯å£ï¼‰å°±å¯ä»¥å”¯ä¸€æ ‡è¯†ç½‘ç»œä¸­çš„è¿›ç¨‹ï¼Œç½‘ç»œä¸­çš„è¿›ç¨‹é€šä¿¡å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ ‡å¿—ä¸å…¶å®ƒè¿›ç¨‹è¿›è¡Œäº¤äº’ã€‚ Socket èµ·æºäº Unix ï¼ŒUnix&#x2F;Linux åŸºæœ¬å“²å­¦ä¹‹ä¸€å°±æ˜¯â€œä¸€åˆ‡çš†æ–‡ä»¶â€ï¼Œéƒ½å¯ä»¥ç”¨â€œæ‰“å¼€ (open) â€“&gt; è¯»å†™ (write&#x2F;read) â€“&gt; å…³é—­ (close)â€æ¨¡å¼æ¥è¿›è¡Œæ“ä½œã€‚å› æ­¤ Socket ä¹Ÿè¢«å¤„ç†ä¸ºä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶ã€‚ å¥—æ¥å­—ï¼ˆSocketï¼‰æ˜¯å¯¹ç½‘ç»œä¸­ä¸åŒä¸»æœºä¸Šçš„åº”ç”¨è¿›ç¨‹ä¹‹é—´è¿›è¡ŒåŒå‘é€šä¿¡çš„ç«¯ç‚¹çš„æŠ½è±¡ï¼Œç½‘ç»œè¿›ç¨‹é€šä¿¡çš„ä¸€ç«¯å°±æ˜¯ä¸€ä¸ªå¥—æ¥å­—ï¼Œä¸åŒä¸»æœºä¸Šçš„è¿›ç¨‹ä¾¿æ˜¯é€šè¿‡å¥—æ¥å­—å‘é€æŠ¥æ–‡æ¥è¿›è¡Œé€šä¿¡ã€‚ä¾‹å¦‚ TCP ç”¨ä¸»æœºçš„ IP åœ°å€ + ç«¯å£å·ä½œä¸º TCP è¿æ¥çš„ç«¯ç‚¹ï¼Œè¿™ä¸ªç«¯ç‚¹å°±å«åšå¥—æ¥å­—ã€‚ å¥—æ¥å­—ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç§ç±»å‹ï¼š æµå¥—æ¥å­—ï¼ˆSOCK_STREAMï¼‰ï¼šæµå¥—æ¥å­—åŸºäº TCP ä¼ è¾“åè®®ï¼Œä¸»è¦ç”¨äºæä¾›é¢å‘è¿æ¥ã€å¯é çš„æ•°æ®ä¼ è¾“æœåŠ¡ã€‚ç”±äº TCP åè®®çš„ç‰¹ç‚¹ï¼Œä½¿ç”¨æµå¥—æ¥å­—è¿›è¡Œé€šä¿¡æ—¶èƒ½å¤Ÿä¿è¯æ•°æ®æ— å·®é”™ã€æ— é‡å¤ä¼ é€ï¼Œå¹¶æŒ‰é¡ºåºæ¥æ”¶ï¼Œé€šä¿¡åŒæ–¹ä¸éœ€è¦åœ¨ç¨‹åºä¸­è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚ æ•°æ®æŠ¥å¥—æ¥å­—ï¼ˆSOCK_DGRAMï¼‰ï¼šå’Œæµå¥—æ¥å­—ä¸åŒï¼Œæ•°æ®æŠ¥å¥—æ¥å­—åŸºäº UDP ä¼ è¾“åè®®ï¼Œå¯¹åº”äºæ— è¿æ¥çš„ UDP æœåŠ¡åº”ç”¨ã€‚è¯¥æœåŠ¡å¹¶ä¸èƒ½ä¿è¯æ•°æ®ä¼ è¾“çš„å¯é æ€§ï¼Œä¹Ÿæ— æ³•ä¿è¯å¯¹ç«¯èƒ½å¤Ÿé¡ºåºæ¥æ”¶åˆ°æ•°æ®ã€‚æ­¤å¤–ï¼Œé€šä¿¡ä¸¤ç«¯ä¸éœ€å»ºç«‹é•¿æ—¶é—´çš„è¿æ¥å…³ç³»ï¼Œå½“ UDP å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªæ•°æ®ç»™æœåŠ¡å™¨åï¼Œå…¶å¯ä»¥é€šè¿‡åŒä¸€ä¸ªå¥—æ¥å­—ç»™å¦ä¸€ä¸ªæœåŠ¡å™¨å‘é€æ•°æ®ã€‚å½“ç”¨ UDP å¥—æ¥å­—æ—¶ï¼Œä¸¢åŒ…ç­‰é—®é¢˜éœ€è¦åœ¨ç¨‹åºä¸­è¿›è¡Œå¤„ç†ã€‚ åŸå§‹å¥—æ¥å­—ï¼ˆSOCK_RAWï¼‰ï¼šç”±äºæµå¥—æ¥å­—å’Œæ•°æ®æŠ¥å¥—æ¥å­—åªèƒ½è¯»å– TCP å’Œ UDP åè®®çš„æ•°æ®ï¼Œå½“éœ€è¦ä¼ é€éä¼ è¾“å±‚æ•°æ®åŒ…ï¼ˆä¾‹å¦‚ Ping å‘½ä»¤æ—¶ç”¨çš„ ICMP åè®®æ•°æ®åŒ…ï¼‰æˆ–è€…é‡åˆ°æ“ä½œç³»ç»Ÿæ— æ³•å¤„ç†çš„æ•°æ®åŒ…æ—¶ï¼Œæ­¤æ—¶å°±éœ€è¦å»ºç«‹åŸå§‹å¥—æ¥å­—æ¥å‘é€ã€‚ URI å’Œ URL URLï¼Œå³ç»Ÿä¸€èµ„æºå®šä½ç¬¦ ( Uniform Resource Locator )ï¼ŒURL å…¶å®å°±æ˜¯æˆ‘ä»¬å¹³æ—¶ä¸Šç½‘æ—¶è¾“å…¥çš„ç½‘å€ï¼Œå®ƒæ ‡è¯†ä¸€ä¸ªäº’è”ç½‘èµ„æºï¼Œå¹¶æŒ‡å®šå¯¹å…¶è¿›è¡Œæ“ä½œæˆ–è·å–è¯¥èµ„æºçš„æ–¹æ³•ã€‚ URIï¼Œå³ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼ˆ Uniform Resource Identifier ï¼‰ï¼Œåªè¦èƒ½å”¯ä¸€æ ‡è¯†èµ„æºçš„å°±æ˜¯ URIï¼Œåœ¨ URI çš„åŸºç¡€ä¸Šç»™å‡ºå…¶èµ„æºçš„è®¿é—®æ–¹å¼çš„å°±æ˜¯ URL æŠ“åŒ…å·¥å…· å…¶å®å°±æ˜¯å°†æŠ“åŒ…å·¥å…·è§†ä¸ºä¸­é—´äººï¼Œå…¶å¯¹äºæœ¬åœ°è€Œè¨€ç›¸å½“äºæœåŠ¡ç«¯ï¼›è€Œå¯¹äºçœŸæ­£çš„æœåŠ¡ç«¯è€Œè¨€åˆ™ç›¸å½“äºå®¢æˆ·ç«¯ï¼› æŠ“åŒ…å·¥å…·åˆ†åˆ«å’Œæœ¬åœ°ä»¥åŠæœåŠ¡å™¨éƒ½è¿›è¡Œ TLS æ¡æ‰‹åå•†ï¼› è¿™å°±éœ€è¦æœ¬åœ°èƒ½å¤Ÿä¿¡ä»»æŠ“åŒ…å·¥å…·æä¾›çš„è¯ä¹¦ï¼ˆä¹Ÿå°±æ˜¯éœ€è¦é¢å¤–å®‰è£…ä¸€ä¸ªè¯ä¹¦ï¼‰ ç½‘é¡µè§£æå…¨è¿‡ç¨‹ è¿™éƒ¨åˆ†å¯ä»¥çœ‹çœ‹ï¼šå½“Â·Â·Â·æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿwhat-happens-when DNS è§£æï¼šå½“ç”¨æˆ·è¾“å…¥ä¸€ä¸ªç½‘å€å¹¶æŒ‰ä¸‹å›è½¦é”®çš„æ—¶å€™ï¼Œæµè§ˆå™¨è·å¾—ä¸€ä¸ªåŸŸåï¼Œè€Œåœ¨å®é™…é€šä¿¡è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸€ä¸ª IP åœ°å€ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å…ˆæŠŠåŸŸåè½¬æ¢æˆç›¸åº” IP åœ°å€ã€‚ TCP è¿æ¥ï¼šæµè§ˆå™¨é€šè¿‡ DNS è·å–åˆ° Web æœåŠ¡å™¨çœŸæ­£çš„ IP åœ°å€åï¼Œä¾¿å‘ Web æœåŠ¡å™¨å‘èµ· TCP è¿æ¥è¯·æ±‚ï¼Œé€šè¿‡ TCP ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹å¥½è¿æ¥åï¼Œæµè§ˆå™¨ä¾¿å¯ä»¥å°† HTTP è¯·æ±‚æ•°æ®å‘é€ç»™æœåŠ¡å™¨äº† å‘é€ HTTP è¯·æ±‚ï¼šæµè§ˆå™¨å‘ Web æœåŠ¡å™¨å‘èµ·ä¸€ä¸ª HTTP è¯·æ±‚ï¼ŒHTTP åè®®æ˜¯å»ºç«‹åœ¨ TCP åè®®ä¹‹ä¸Šçš„åº”ç”¨å±‚åè®®ï¼Œå…¶æœ¬è´¨æ˜¯åœ¨å»ºç«‹èµ·çš„ TCP è¿æ¥ä¸­ï¼ŒæŒ‰ç…§ HTTP åè®®æ ‡å‡†å‘é€ä¸€ä¸ªç´¢è¦ç½‘é¡µçš„è¯·æ±‚ã€‚åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œä¼šæ¶‰åŠåˆ°è´Ÿè½½å‡è¡¡ç­‰æ“ä½œã€‚ è´Ÿè½½å‡è¡¡ï¼Œè‹±æ–‡åä¸º Load Balanceï¼Œå…¶å«ä¹‰æ˜¯æŒ‡å°†è´Ÿè½½ï¼ˆå·¥ä½œä»»åŠ¡ï¼‰è¿›è¡Œå¹³è¡¡ã€åˆ†æ‘Šåˆ°å¤šä¸ªæ“ä½œå•å…ƒä¸Šè¿›è¡Œè¿è¡Œï¼Œä¾‹å¦‚ FTP æœåŠ¡å™¨ã€Web æœåŠ¡å™¨ã€ä¼ä¸šæ ¸å¿ƒæœåŠ¡å™¨å’Œå…¶ä»–ä¸»è¦ä»»åŠ¡æœåŠ¡å™¨ç­‰ï¼Œä»è€ŒååŒå®Œæˆå·¥ä½œä»»åŠ¡ã€‚è´Ÿè½½å‡è¡¡å»ºç«‹åœ¨ç°æœ‰çš„ç½‘ç»œä¹‹ä¸Šï¼Œå®ƒæä¾›äº†ä¸€ç§é€æ˜ä¸”å»‰ä»·æœ‰æ•ˆçš„æ–¹æ³•æ‰©å±•æœåŠ¡å™¨å’Œç½‘ç»œè®¾å¤‡çš„å¸¦å®½ã€å¢åŠ ååé‡ã€åŠ å¼ºç½‘ç»œå¤„ç†èƒ½åŠ›å¹¶æé«˜ç½‘ç»œçš„çµæ´»æ€§å’Œå¯ç”¨æ€§ã€‚è´Ÿè½½å‡è¡¡æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„è®¾è®¡ä¸­å¿…é¡»è€ƒè™‘çš„å› ç´ ä¹‹ä¸€ï¼Œä¾‹å¦‚å¤©çŒ«ã€äº¬ä¸œç­‰å¤§å‹ç”¨æˆ·ç½‘ç«™ä¸­ä¸ºäº†å¤„ç†æµ·é‡ç”¨æˆ·å‘èµ·çš„è¯·æ±‚ï¼Œå…¶å¾€å¾€é‡‡ç”¨åˆ†å¸ƒå¼æœåŠ¡å™¨ï¼Œå¹¶é€šè¿‡å¼•å…¥åå‘ä»£ç†ç­‰æ–¹å¼å°†ç”¨æˆ·è¯·æ±‚å‡åŒ€åˆ†å‘åˆ°æ¯ä¸ªæœåŠ¡å™¨ä¸Šï¼Œè€Œè¿™ä¸€è¿‡ç¨‹æ‰€å®ç°çš„å°±æ˜¯è´Ÿè½½å‡è¡¡ã€‚ å¤„ç†è¯·æ±‚å¹¶è¿”å›ï¼šæœåŠ¡å™¨è·å–åˆ°å®¢æˆ·ç«¯çš„ HTTP è¯·æ±‚åï¼Œä¼šæ ¹æ® HTTP è¯·æ±‚ä¸­çš„å†…å®¹æ¥å†³å®šå¦‚ä½•è·å–ç›¸åº”çš„æ–‡ä»¶ï¼Œå¹¶å°†æ–‡ä»¶å‘é€ç»™æµè§ˆå™¨ã€‚ æµè§ˆå™¨æ¸²æŸ“ï¼šæµè§ˆå™¨æ ¹æ®å“åº”å¼€å§‹æ˜¾ç¤ºé¡µé¢ï¼Œé¦–å…ˆè§£æ HTML æ–‡ä»¶æ„å»º DOM æ ‘ï¼Œç„¶åè§£æ CSS æ–‡ä»¶æ„å»ºæ¸²æŸ“æ ‘ï¼Œç­‰åˆ°æ¸²æŸ“æ ‘æ„å»ºå®Œæˆåï¼Œæµè§ˆå™¨å¼€å§‹å¸ƒå±€æ¸²æŸ“æ ‘å¹¶å°†å…¶ç»˜åˆ¶åˆ°å±å¹•ä¸Šã€‚ æ–­å¼€è¿æ¥ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é€šè¿‡å››æ¬¡æŒ¥æ‰‹ç»ˆæ­¢ TCP è¿æ¥ã€‚","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Computer Network","slug":"Computer-Basics/Computer-Network","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Computer-Network/"}],"tags":[{"name":"Network","slug":"Network","permalink":"http://blog.sukiu.top/tags/Network/"}]},{"title":"è®¡ç®—æœºç½‘ç»œæ¨¡å‹ä¸åè®®","slug":"Models-And-Protocols","date":"2021-12-09T01:17:00.000Z","updated":"2021-12-09T01:17:00.000Z","comments":true,"path":"Computer-Basics/Computer-Network/Models-And-Protocols/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Computer-Network/Models-And-Protocols/","excerpt":"è®¡ç®—æœºç½‘ç»œä¸»è¦æœ‰ 3 ç§æ¨¡å‹ï¼š ISO&#x2F;OSI å‚è€ƒæ¨¡å‹ 7 å±‚ TCP&#x2F;IP å‚è€ƒæ¨¡å‹ 5 å±‚ TCP&#x2F;IP å‚è€ƒæ¨¡å‹ 4 å±‚ OSIæ˜¯ä¸€ç§ç†è®ºä¸‹çš„æ¨¡å‹ï¼Œè€Œ TCP&#x2F;IPï¼ˆ4 å±‚ï¼‰å·²è¢«å¹¿æ³›ä½¿ç”¨ï¼Œæˆä¸ºç½‘ç»œäº’è”äº‹å®ä¸Šçš„æ ‡å‡†ã€‚","text":"è®¡ç®—æœºç½‘ç»œä¸»è¦æœ‰ 3 ç§æ¨¡å‹ï¼š ISO&#x2F;OSI å‚è€ƒæ¨¡å‹ 7 å±‚ TCP&#x2F;IP å‚è€ƒæ¨¡å‹ 5 å±‚ TCP&#x2F;IP å‚è€ƒæ¨¡å‹ 4 å±‚ OSIæ˜¯ä¸€ç§ç†è®ºä¸‹çš„æ¨¡å‹ï¼Œè€Œ TCP&#x2F;IPï¼ˆ4 å±‚ï¼‰å·²è¢«å¹¿æ³›ä½¿ç”¨ï¼Œæˆä¸ºç½‘ç»œäº’è”äº‹å®ä¸Šçš„æ ‡å‡†ã€‚ å‚è€ƒæ¨¡å‹OSI ä¸ƒå±‚æ¨¡å‹OSI æ¨¡å‹å…¨ç§°ä¸ºå¼€æ”¾å¼é€šä¿¡ç³»ç»Ÿäº’è¿å‚è€ƒæ¨¡å‹ï¼Œæ˜¯å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ ( ISO ) æå‡ºçš„ä¸€ä¸ªè¯•å›¾ä½¿å„ç§è®¡ç®—æœºåœ¨ä¸–ç•ŒèŒƒå›´å†…äº’è¿ä¸ºç½‘ç»œçš„æ ‡å‡†æ¡†æ¶ã€‚ OSI å°†è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„åˆ’åˆ†ä¸ºä¸ƒå±‚ï¼Œæ¯ä¸€å±‚å®ç°å„è‡ªçš„åŠŸèƒ½å’Œåè®®ï¼Œå¹¶å®Œæˆä¸ç›¸é‚»å±‚çš„æ¥å£é€šä¿¡ã€‚ OSI çš„æœåŠ¡å®šä¹‰è¯¦ç»†è¯´æ˜äº†å„å±‚æ‰€æä¾›çš„æœåŠ¡ã€‚æŸä¸€å±‚çš„æœåŠ¡å°±æ˜¯è¯¥å±‚åŠå…¶ä¸‹å„å±‚çš„ä¸€ç§èƒ½åŠ›ï¼Œå®ƒé€šè¿‡æ¥å£æä¾›ç»™æ›´é«˜ä¸€å±‚ã€‚å„å±‚æ‰€æä¾›çš„æœåŠ¡ä¸è¿™äº›æœåŠ¡æ˜¯æ€ä¹ˆå®ç°çš„æ— å…³ã€‚ åº”ç”¨å±‚ï¼šç”¨æˆ·ä¸ç½‘ç»œçš„ç•Œé¢ï¼Œé€šè¿‡åº”ç”¨ç¨‹åºé—´çš„äº¤äº’æ¥å®Œæˆç‰¹å®šçš„ç½‘ç»œåº”ç”¨ è¯¥å±‚åè®®å®šä¹‰äº†åº”ç”¨è¿›ç¨‹ä¹‹é—´çš„äº¤äº’è§„åˆ™ï¼Œé€šè¿‡ä¸åŒçš„åº”ç”¨å±‚åè®®ä¸ºä¸åŒçš„ç½‘ç»œåº”ç”¨æä¾›æœåŠ¡ã€‚ä¾‹å¦‚åŸŸåç³»ç»Ÿ DNSï¼Œæ”¯æŒä¸‡ç»´ç½‘åº”ç”¨çš„ HTTP åè®®ï¼Œç”µå­é‚®ä»¶ç³»ç»Ÿé‡‡ç”¨çš„ SMTP åè®®ç­‰ã€‚åœ¨åº”ç”¨å±‚äº¤äº’çš„æ•°æ®å•å…ƒä¸ºæŠ¥æ–‡ã€‚ è¡¨ç¤ºå±‚ï¼šä½¿é€šä¿¡çš„åº”ç”¨ç¨‹åºèƒ½å¤Ÿè§£é‡Šäº¤æ¢æ•°æ®çš„å«ä¹‰ æ•°æ®æ ¼å¼å˜æ¢ ç¿»è¯‘å®˜ æ•°æ®æè¿° æ•°æ®åŠ å¯†è§£å¯† æ•°æ®åŠ å¯† æ•°æ®å‹ç¼©å’Œæ¢å¤ æ•°æ®å‹ç¼© è¿™ä½¿å¾—åº”ç”¨ç¨‹åºä¸å¿…æ‹…å¿ƒåœ¨å„å°è®¡ç®—æœºä¸­è¡¨ç¤ºå’Œå­˜å‚¨çš„å†…éƒ¨æ ¼å¼å·®å¼‚ã€‚ ä¼šè¯å±‚ï¼šè´Ÿè´£å»ºç«‹ã€ç®¡ç†å’Œç»ˆæ­¢è¡¨ç¤ºå±‚å®ä½“ä¹‹é—´çš„é€šä¿¡ä¼šè¯ã€‚ è¯¥å±‚æä¾›äº†æ•°æ®äº¤æ¢çš„å®šç•Œå’ŒåŒæ­¥åŠŸèƒ½ï¼ŒåŒ…æ‹¬äº†å»ºç«‹æ£€æŸ¥ç‚¹å’Œæ¢å¤æ–¹æ¡ˆçš„æ–¹æ³•ï¼ˆç±»ä¼¼æ–­ç‚¹ç»­ä¼ ï¼‰ã€‚ ä¼ è¾“å±‚ï¼šè´Ÿè´£ä¸»æœºä¸­ä¸¤ä¸ªè¿›ç¨‹çš„é€šä¿¡ï¼Œå³ç«¯åˆ°ç«¯é€šä¿¡ã€‚ä¼ è¾“å•ä½æ˜¯æŠ¥æ–‡æ®µæˆ–ç”¨æˆ·æ•°æ®æŠ¥ å¯ * é ä¼ è¾“ã€ä¸å¯é ä¼ è¾“ å·® * é”™æ§åˆ¶ æµ * é‡æ§åˆ¶ å¤ * ç”¨åˆ†ç”¨ï¼ˆè®°å¿†ï¼šå¯å·®çš„ä¹Ÿèƒ½æµç”¨ï¼Ÿï¼‰ å¤ç”¨ï¼šå¤šä¸ªåº”ç”¨å±‚è¿›ç¨‹å¯åŒæ—¶ä½¿ç”¨ä¸‹é¢ä¼ è¾“å±‚çš„æœåŠ¡ åˆ†ç”¨ï¼šä¼ è¾“å±‚æŠŠæ”¶åˆ°çš„ä¿¡æ¯åˆ†åˆ«äº¤ä»˜ç»™ä¸Šé¢åº”ç”¨å±‚ç›¸åº”çš„è¿›ç¨‹ ç½‘ç»œå±‚ï¼šé€‰æ‹©åˆé€‚çš„ç½‘é—´è·¯ç”±å’Œäº¤æ¢èŠ‚ç‚¹ï¼Œç¡®ä¿æ•°æ®æŒ‰æ—¶æˆåŠŸä¼ é€ã€‚ä¼ è¾“å•ä½æ˜¯æ•°æ®æŠ¥ è·¯ç”±é€‰æ‹©ä¸åˆ†ç»„è½¬å‘ æœ€ä½³è·¯å¾„ åœ¨å‘é€æ•°æ®æ—¶ï¼Œç½‘ç»œå±‚æŠŠä¼ è¾“å±‚äº§ç”Ÿçš„æŠ¥æ–‡æˆ–ç”¨æˆ·æ•°æ®æŠ¥å°è£…æˆåˆ†ç»„å’ŒåŒ…å‘ä¸‹ä¼ è¾“åˆ°æ•°æ®é“¾è·¯å±‚ã€‚ æµé‡æ§åˆ¶ å‘é€é€Ÿåº¦ å·®é”™æ§åˆ¶ æ‹¥å¡æ§åˆ¶ æ€»ä½“é€Ÿåº¦ æ•°æ®é“¾è·¯å±‚ï¼šæŠŠç½‘ç»œå±‚ä¼ ä¸‹æ¥çš„æ•°æ®æŠ¥ç»„è£…æˆå¸§ã€‚ä¼ è¾“å•ä½æ˜¯å¸§ æˆå¸§ï¼ˆå®šä¹‰å¸§çš„å¼€å§‹å’Œç»“æŸï¼‰ å·®é”™æ§åˆ¶ å¸§é”™ + ä½é”™ æµé‡æ§åˆ¶ è®¿é—®ï¼ˆæ¥å…¥ï¼‰æ§åˆ¶ æ§åˆ¶å¯¹ä¿¡é“çš„è®¿é—® ç‰©ç†å±‚ï¼šåœ¨ç‰©ç†åª’ä½“ä¸Šå®ç°æ¯”ç‰¹æµçš„é€æ˜ä¼ è¾“ã€‚ä¼ è¾“å•ä½æ˜¯æ¯”ç‰¹ å°½å¯èƒ½å±è”½æ‰å…·ä½“ä¼ è¾“ä»‹è´¨å’Œç‰©ç†è®¾å¤‡çš„å·®å¼‚ï¼Œä½¿å…¶ä¸Šé¢çš„æ•°æ®é“¾è·¯å±‚ä¸å¿…è€ƒè™‘ç½‘ç»œçš„å…·ä½“ä¼ è¾“ä»‹è´¨æ˜¯ä»€ä¹ˆ å®šä¹‰æ¥å£ç‰¹æ€§ï¼ˆæœºæ¢°ç‰¹æ€§ã€ç”µæ°”ç‰¹æ€§ã€åŠŸèƒ½ç‰¹æ€§ï¼Œè¿‡ç¨‹ç‰¹æ€§ï¼‰ å®šä¹‰ä¼ è¾“æ¨¡å¼ ï¼ˆå•å·¥ã€åŠåŒå·¥ã€åŒå·¥ï¼‰ å®šä¹‰ä¼ è¾“é€Ÿç‡ æ¯”ç‰¹åŒæ­¥ æ¯”ç‰¹ç¼–ç  TCP&#x2F;IP å››å±‚æ¨¡å‹ ç”±äºä¼šè¯å±‚ã€è¡¨ç¤ºå±‚ã€åº”ç”¨å±‚éƒ½æ˜¯åœ¨åº”ç”¨ç¨‹åºå†…éƒ¨å®ç°çš„ï¼Œæœ€ç»ˆäº§å‡ºçš„æ˜¯ä¸€ä¸ªåº”ç”¨æ•°æ®åŒ…ï¼Œè€Œåº”ç”¨ç¨‹åºä¹‹é—´æ˜¯å‡ ä¹æ— æ³•å®ç°ä»£ç çš„æŠ½è±¡å…±äº«çš„ï¼Œè¿™ä¹Ÿå°±é€ æˆ OSI è®¾æƒ³ä¸­çš„åº”ç”¨ç¨‹åºç»´åº¦çš„åˆ†å±‚æ˜¯æ— æ³•å®ç°çš„ã€‚ä¸‰å±‚éƒ½åœ¨åº”ç”¨ç¨‹åºå†…å®ç°ï¼Œç¨‹åºé—´æ— æ³•å…±äº«ï¼Œåˆä¸‰ä¸ºä¸€å°±å½¢æˆäº† TCP&#x2F;IP æ¨¡å‹ã€‚ åº”ç”¨å±‚ TCP&#x2F;IP æ¨¡å‹å°† OSI å‚è€ƒæ¨¡å‹ä¸­çš„ä¼šè¯å±‚ã€è¡¨ç¤ºå±‚å’Œåº”ç”¨å±‚çš„åŠŸèƒ½åˆå¹¶åˆ°ä¸€ä¸ªåº”ç”¨å±‚å®ç°ï¼Œé€šè¿‡ä¸åŒçš„åº”ç”¨å±‚åè®®ä¸ºä¸åŒçš„åº”ç”¨æä¾›æœåŠ¡ã€‚ ä¾‹å¦‚ï¼šFTPã€Telnetã€DNSã€SMTP ç­‰ã€‚ ä¼ è¾“å±‚ è¯¥å±‚å¯¹åº”äº OSI å‚è€ƒæ¨¡å‹çš„ä¼ è¾“å±‚ï¼Œä¸ºä¸Šå±‚å®ä½“æä¾›æºç«¯åˆ°å¯¹ç«¯ä¸»æœºçš„é€šä¿¡åŠŸèƒ½ã€‚ ä¼ è¾“å±‚å®šä¹‰äº†ä¸¤ä¸ªä¸»è¦åè®®ï¼šä¼ è¾“æ§åˆ¶åè®®ï¼ˆTCPï¼‰å’Œç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆUDPï¼‰ã€‚ å…¶ä¸­é¢å‘è¿æ¥çš„ TCP åè®®ä¿è¯äº†æ•°æ®çš„ä¼ è¾“å¯é æ€§ï¼Œé¢å‘æ— è¿æ¥çš„ UDP åè®®èƒ½å¤Ÿå®ç°æ•°æ®åŒ…ç®€å•ã€å¿«é€Ÿåœ°ä¼ è¾“ã€‚ ç½‘é™…äº’è”å±‚ ç½‘é™…äº’è”å±‚å¯¹åº” OSI å‚è€ƒæ¨¡å‹çš„ç½‘ç»œå±‚ï¼Œä¸»è¦è´Ÿè´£ç›¸åŒæˆ–ä¸åŒç½‘ç»œä¸­è®¡ç®—æœºä¹‹é—´çš„é€šä¿¡ã€‚ åœ¨ç½‘é™…äº’è”å±‚ï¼Œ IP åè®®æä¾›çš„æ˜¯ä¸€ä¸ªä¸å¯é ã€æ— è¿æ¥çš„æ•°æ®æŠ¥ä¼ é€’æœåŠ¡ã€‚è¯¥åè®®å®ç°ä¸¤ä¸ªåŸºæœ¬åŠŸèƒ½ï¼šå¯»å€å’Œåˆ†æ®µã€‚ æ ¹æ®æ•°æ®æŠ¥æŠ¥å¤´ä¸­çš„ç›®çš„åœ°å€å°†æ•°æ®ä¼ é€åˆ°ç›®çš„åœ°å€ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ IP è´Ÿè´£é€‰æ‹©ä¼ é€è·¯çº¿ã€‚ é™¤äº† IP åè®®å¤–ï¼Œè¯¥å±‚å¦å¤–ä¸¤ä¸ªä¸»è¦åè®®æ˜¯äº’è”ç½‘ç»„ç®¡ç†åè®®ï¼ˆIGMPï¼‰å’Œäº’è”ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ï¼ˆICMPï¼‰ã€‚ ç½‘ç»œæ¥å£å±‚ ç½‘ç»œæ¥å…¥å±‚çš„åŠŸèƒ½å¯¹åº”äº OSI å‚è€ƒæ¨¡å‹ä¸­çš„ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚ï¼Œå®ƒè´Ÿè´£ç›‘è§†æ•°æ®åœ¨ä¸»æœºå’Œç½‘ç»œä¹‹é—´çš„äº¤æ¢ã€‚ äº‹å®ä¸Šï¼ŒTCP&#x2F;IP å¹¶æœªçœŸæ­£æè¿°è¿™ä¸€å±‚çš„å®ç°ï¼Œè€Œç”±å‚ä¸äº’è¿çš„å„ç½‘ç»œä½¿ç”¨è‡ªå·±çš„ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚åè®®ï¼Œç„¶åä¸ TCP&#x2F;IP çš„ç½‘ç»œæ¥å…¥å±‚è¿›è¡Œè¿æ¥ï¼Œå› æ­¤å…·ä½“çš„å®ç°æ–¹æ³•å°†éšç€ç½‘ç»œç±»å‹çš„ä¸åŒè€Œæœ‰æ‰€å·®å¼‚ã€‚ TCP&#x2F;IP äº”å±‚æ¨¡å‹äº”å±‚ä½“ç³»çš„åè®®ç»“æ„æ˜¯ç»¼åˆäº† OSI å’Œ TCP&#x2F;IP ä¼˜ç‚¹çš„ä¸€ç§åè®®ï¼ŒåŒ…æ‹¬åº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚ã€‚å…¶ä¸­åº”ç”¨å±‚å¯¹åº” OSI çš„ä¸Šä¸‰å±‚ï¼Œä¸‹å››å±‚å’Œ OSI ç›¸åŒã€‚ äº”å±‚åè®®çš„ä½“ç³»ç»“æ„åªæ˜¯ä¸ºä»‹ç»ç½‘ç»œåŸç†è€Œè®¾è®¡çš„ï¼Œå®é™…åº”ç”¨è¿˜æ˜¯ TCP&#x2F;IP å››å±‚ä½“ç³»ç»“æ„ã€‚ æ¨¡å‹å¼‚åŒç›¸åŒç‚¹ OSI å‚è€ƒæ¨¡å‹ä¸ TCP&#x2F;IP å‚è€ƒæ¨¡å‹éƒ½é‡‡ç”¨äº†å±‚æ¬¡ç»“æ„ã€‚ éƒ½èƒ½å¤Ÿæä¾›é¢å‘è¿æ¥å’Œæ— è¿æ¥ä¸¤ç§é€šä¿¡æœåŠ¡æœºåˆ¶ã€‚ ä¸åŒç‚¹ OSI é‡‡ç”¨çš„ä¸ƒå±‚æ¨¡å‹ï¼› TCP&#x2F;IP æ˜¯å››å±‚ç»“æ„ã€‚ TCP&#x2F;IP å‚è€ƒæ¨¡å‹æ²¡æœ‰å¯¹ç½‘ç»œæ¥å£å±‚è¿›è¡Œç»†åˆ†ï¼Œåªæ˜¯ä¸€äº›æ¦‚å¿µæ€§çš„æè¿°ï¼› OSI å‚è€ƒæ¨¡å‹å¯¹æœåŠ¡å’Œåè®®åšäº†æ˜ç¡®çš„åŒºåˆ†ã€‚ OSI å…ˆæœ‰æ¨¡å‹ï¼Œåæœ‰åè®®è§„èŒƒï¼Œé€‚åˆäºæè¿°å„ç§ç½‘ç»œï¼›TCP&#x2F;IP æ˜¯å…ˆæœ‰åè®®é›†ç„¶åå»ºç«‹æ¨¡å‹ï¼Œä¸é€‚ç”¨äºé TCP&#x2F;IP ç½‘ç»œã€‚ TCP&#x2F;IP ä¸€å¼€å§‹å°±æå‡ºé¢å‘è¿æ¥å’Œæ— è¿æ¥æœåŠ¡ï¼Œè€Œ OSI ä¸€å¼€å§‹åªå¼ºè°ƒé¢å‘è¿æ¥æœåŠ¡ï¼Œç›´åˆ°å¾ˆæ™šæ‰å¼€å§‹åˆ¶å®šæ— è¿æ¥çš„æœåŠ¡æ ‡å‡†ã€‚ OSI å‚è€ƒæ¨¡å‹è™½ç„¶è¢«çœ‹å¥½ï¼Œä½†å°†ç½‘ç»œåˆ’åˆ†ä¸ºä¸ƒå±‚ï¼Œå®ç°èµ·æ¥è¾ƒå›°éš¾ï¼›ç›¸åï¼ŒTCP&#x2F;IP å‚è€ƒæ¨¡å‹è™½ç„¶æœ‰è®¸å¤šä¸å°½äººæ„çš„åœ°æ–¹ï¼Œä½†ä½œä¸ºä¸€ç§ç®€åŒ–çš„åˆ†å±‚ç»“æ„è¿˜æ˜¯æ¯”è¾ƒæˆåŠŸçš„ã€‚ å„å±‚åè®® OSI ä¸ƒå±‚ç½‘ç»œæ¨¡å‹ TCP/IP å››å±‚æ¦‚å¿µæ¨¡å‹ å¯¹åº”çš„ç½‘ç»œåè®® åº”ç”¨å±‚ï¼ˆApplicationï¼‰ åº”ç”¨å±‚ HTTP, FTP, DNS, SMTP,TFTP,NFS, WAIS, Telnet, SNMP è¡¨ç¤ºå±‚ï¼ˆPresentationï¼‰ TIFF, GIF, JPEG, PICT ä¼šè¯å±‚ï¼ˆSessionï¼‰ RPC, SQL, NFS, NetBIOS, names, AppleTalk ä¼ è¾“å±‚ï¼ˆTransportï¼‰ ä¼ è¾“å±‚ TCP, UDP ç½‘ç»œå±‚ï¼ˆNetworkï¼‰ ç½‘é™…å±‚ IP, ICMP, ARP, RARP, RIP, IPX æ•°æ®é“¾è·¯å±‚ï¼ˆData Linkï¼‰ ç½‘ç»œæ¥å£å±‚ FDDI, Frame Relay, HDLC, SLIP, PPP ç‰©ç†å±‚ï¼ˆPhysicalï¼‰ EIA/TIA-232, EIA/TIA-499, V.35, 802.3","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Computer Network","slug":"Computer-Basics/Computer-Network","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Computer-Network/"}],"tags":[{"name":"Network","slug":"Network","permalink":"http://blog.sukiu.top/tags/Network/"}]},{"title":"Redis","slug":"Redis","date":"2021-12-07T01:22:00.000Z","updated":"2021-12-07T01:22:00.000Z","comments":true,"path":"Database/Redis/Redis/","link":"","permalink":"http://blog.sukiu.top/Database/Redis/Redis/","excerpt":"Redis (Remote Dictionary Server ) è¿œç¨‹å­—å…¸æœåŠ¡ï¼Œæ˜¯å½“ä¸‹æœ€çƒ­é—¨çš„ NoSQL æŠ€æœ¯ä¹‹ä¸€ï¼Œä¹Ÿè¢«äººä»¬ç§°ä¸ºç»“æ„åŒ–æ•°æ®åº“ã€‚ Redis æ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨ ANSI C è¯­è¨€ç¼–å†™ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€Key-Value æ•°æ®åº“,å¹¶æä¾›å¤šç§è¯­è¨€çš„ APlã€‚ å’Œ Memcached ç±»ä¼¼ï¼Œå®ƒæ”¯æŒå­˜å‚¨çš„ value ç±»å‹ç›¸å¯¹æ›´å¤šï¼ŒåŒ…æ‹¬ï¼š stringï¼ˆå­—ç¬¦ä¸²ï¼‰ listï¼ˆé“¾è¡¨ï¼‰ setï¼ˆé›†åˆï¼‰ zsetï¼ˆsorted set æœ‰åºé›†åˆï¼‰ hashï¼ˆå“ˆå¸Œç±»å‹ï¼‰ ä¸ memcached ä¸€æ ·ï¼Œä¸ºäº†ä¿è¯æ•ˆç‡ï¼Œæ•°æ®éƒ½æ˜¯ç¼“å­˜åœ¨å†…å­˜ä¸­ã€‚åŒºåˆ«çš„æ˜¯ redis ä¼šå‘¨æœŸæ€§çš„æŠŠæ›´æ–°çš„æ•°æ®å†™å…¥ç£ç›˜æˆ–è€…æŠŠä¿®æ”¹æ“ä½œå†™å…¥è¿½åŠ çš„è®°å½•æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨æ­¤åŸºç¡€ä¸Šå®ç°äº† master-slave (ä¸»ä») åŒæ­¥ã€‚","text":"Redis (Remote Dictionary Server ) è¿œç¨‹å­—å…¸æœåŠ¡ï¼Œæ˜¯å½“ä¸‹æœ€çƒ­é—¨çš„ NoSQL æŠ€æœ¯ä¹‹ä¸€ï¼Œä¹Ÿè¢«äººä»¬ç§°ä¸ºç»“æ„åŒ–æ•°æ®åº“ã€‚ Redis æ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨ ANSI C è¯­è¨€ç¼–å†™ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€Key-Value æ•°æ®åº“,å¹¶æä¾›å¤šç§è¯­è¨€çš„ APlã€‚ å’Œ Memcached ç±»ä¼¼ï¼Œå®ƒæ”¯æŒå­˜å‚¨çš„ value ç±»å‹ç›¸å¯¹æ›´å¤šï¼ŒåŒ…æ‹¬ï¼š stringï¼ˆå­—ç¬¦ä¸²ï¼‰ listï¼ˆé“¾è¡¨ï¼‰ setï¼ˆé›†åˆï¼‰ zsetï¼ˆsorted set æœ‰åºé›†åˆï¼‰ hashï¼ˆå“ˆå¸Œç±»å‹ï¼‰ ä¸ memcached ä¸€æ ·ï¼Œä¸ºäº†ä¿è¯æ•ˆç‡ï¼Œæ•°æ®éƒ½æ˜¯ç¼“å­˜åœ¨å†…å­˜ä¸­ã€‚åŒºåˆ«çš„æ˜¯ redis ä¼šå‘¨æœŸæ€§çš„æŠŠæ›´æ–°çš„æ•°æ®å†™å…¥ç£ç›˜æˆ–è€…æŠŠä¿®æ”¹æ“ä½œå†™å…¥è¿½åŠ çš„è®°å½•æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨æ­¤åŸºç¡€ä¸Šå®ç°äº† master-slave (ä¸»ä») åŒæ­¥ã€‚ ç®€ä»‹Redis æ˜¯å®Œå…¨å¼€æºå…è´¹çš„ï¼Œéµå®ˆ BSD åè®®ï¼Œæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ key-value æ•°æ®åº“ï¼Œå®ƒå¯ä»¥ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯ä¸­é—´ä»¶ã€‚ Redis ä¸å…¶ä»– key - value ç¼“å­˜äº§å“æœ‰ä»¥ä¸‹ä¸‰ä¸ªç‰¹ç‚¹ï¼š Redis æ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿æŒåœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚ Redis ä¸ä»…ä»…æ”¯æŒç®€å•çš„ key-value ç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾› listï¼Œsetï¼Œzsetï¼Œhash ç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚ Redis æ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³ master-slave æ¨¡å¼çš„æ•°æ®å¤‡ä»½ã€‚ ä¼˜åŠ¿ æ€§èƒ½æé«˜ Redis èƒ½è¯»çš„é€Ÿåº¦æ˜¯ 110000 æ¬¡&#x2F;s,å†™çš„é€Ÿåº¦æ˜¯ 81000 æ¬¡&#x2F;s ã€‚ ä¸°å¯Œçš„æ•°æ®ç±»å‹ Redis æ”¯æŒäºŒè¿›åˆ¶æ¡ˆä¾‹çš„ Strings, Lists, Hashes, Sets åŠ Ordered Sets æ•°æ®ç±»å‹æ“ä½œã€‚ åŸå­ Redis çš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ï¼ŒåŒæ—¶ Redis è¿˜æ”¯æŒå¯¹å‡ ä¸ªæ“ä½œå…¨å¹¶åçš„åŸå­æ€§æ‰§è¡Œã€‚ ä¸°å¯Œçš„ç‰¹æ€§ Redis è¿˜æ”¯æŒ publish&#x2F;subscribe, é€šçŸ¥, key è¿‡æœŸç­‰ç­‰ç‰¹æ€§ã€‚ Redis ä¸å…¶ä»– Key-value å­˜å‚¨çš„åŒºåˆ« Redis è¿è¡Œåœ¨å†…å­˜ä¸­ä½†æ˜¯å¯ä»¥ æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚ Redis ä¸ä»…ä»…æ”¯æŒç®€å•çš„ Key-Value ç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾› Listï¼ŒSetï¼ŒSorted setï¼Œhash ç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚ Redis è¿˜æ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³ Master-Slave ä¸»ä»æ¨¡å¼çš„æ•°æ®å¤‡ä»½ã€‚ Redis å’Œ MongoDB çš„åŒºåˆ«æ›´å¤šå¯è§ï¼šNoSQLï¼Œæµ…è°ˆredisä¸mongoDBçš„åŒºåˆ« - çŸ¥ä¹ æ€§èƒ½æ–¹é¢ï¼ŒäºŒè€…éƒ½å¾ˆé«˜ï¼Œæ€»ä½“è€Œè¨€ï¼ŒTPS æ–¹é¢ Redis è¦å¤§äº MongoDBï¼› å¯æ“ä½œæ€§ä¸Šï¼ŒMongoDB æ”¯æŒä¸°å¯Œçš„æ•°æ®è¡¨è¾¾ã€ç´¢å¼•ï¼Œæœ€ç±»ä¼¼äºå…³ç³»æ•°æ®åº“ï¼Œæ”¯æŒ ä¸°å¯Œçš„æŸ¥è¯¢è¯­è¨€ï¼Œæ“ä½œæ¯” Redis æ›´ä¸ºä¾¿åˆ©ï¼› å†…å­˜åŠå­˜å‚¨æ–¹é¢ï¼ŒMongoDB é€‚åˆ å¤§æ•°æ®é‡å­˜å‚¨ï¼Œä¾èµ–æ“ä½œç³»ç»Ÿè™šæ‹Ÿåšå†…å­˜ç®¡ç†ï¼Œé‡‡ç”¨é•œåƒæ–‡ä»¶å­˜å‚¨ï¼Œå†…å­˜å æœ‰ç‡æ¯”è¾ƒé«˜ï¼ŒRedis 2.0 åå¢åŠ  è™šæ‹Ÿå†…å­˜ç‰¹æ€§ï¼Œçªç ´ç‰©ç†å†…å­˜é™åˆ¶ï¼Œæ•°æ®å¯ä»¥è®¾ç½®æ—¶æ•ˆæ€§ï¼› å¯¹äºæ•°æ®æŒä¹…åŒ–å’Œæ•°æ®æ¢å¤ï¼ŒMongoDB 1.8 åï¼Œé‡‡ç”¨ binlog æ–¹å¼ï¼ˆåŒ MySQLï¼‰æ”¯æŒæŒä¹…åŒ–ï¼Œå¢åŠ äº†å¯é æ€§ï¼Œè€Œ Redis ä¾èµ–å¿«ç…§è¿›è¡ŒæŒä¹…åŒ–ã€AOF å¢å¼ºå¯é æ€§ï¼Œä½†æ˜¯å¢å¼ºå¯é æ€§çš„åŒæ—¶ï¼Œä¹Ÿä¼šå½±å“è®¿é—®æ€§èƒ½ï¼› åœ¨æ•°æ®ä¸€è‡´æ€§ä¸Šï¼ŒMongoDB ä¸æ”¯æŒäº‹åŠ¡ï¼Œé å®¢æˆ·ç«¯è‡ªèº«ä¿è¯ï¼Œè€Œ Redis æ”¯æŒäº‹åŠ¡ï¼Œèƒ½ä¿è¯äº‹åŠ¡ä¸­çš„æ“ä½œæŒ‰é¡ºåºæ‰§è¡Œï¼› æ•°æ®åˆ†æä¸Šï¼ŒMongoDB å†…ç½® æ•°æ®åˆ†æåŠŸèƒ½ï¼ˆmapreduceï¼‰ï¼Œè€Œ Redis ä¸æ”¯æŒæ•°æ®åˆ†æï¼› åº”ç”¨åœºæ™¯ä¸åŒï¼ŒMongoDB é€‚åˆæµ·é‡æ•°æ®ï¼Œä¾§é‡äºè®¿é—®æ•ˆç‡çš„æå‡ï¼Œè€Œ Redis é€‚åˆäºè¾ƒå°æ•°æ®é‡ï¼Œä¾§é‡äºæ€§èƒ½ã€‚ æ•°æ®ç±»å‹Redis æ”¯æŒäº”ç§æ•°æ®ç±»å‹ï¼š stringï¼ˆå­—ç¬¦ä¸²ï¼‰ hashï¼ˆå“ˆå¸Œï¼‰ listï¼ˆåˆ—è¡¨ï¼‰ setï¼ˆé›†åˆï¼‰ zset(sorted setï¼šæœ‰åºé›†åˆ) Stringæœ€åŸºæœ¬çš„ç±»å‹ï¼Œä¸€ä¸ª key å¯¹åº”ä¸€ä¸ª valueã€‚string ç±»å‹æ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ï¼Œå³ redis çš„ string å¯ä»¥åŒ…å«ä»»ä½•æ•°æ®ã€‚æ¯”å¦‚ jpg å›¾ç‰‡æˆ–è€…åºåˆ—åŒ–çš„å¯¹è±¡ ã€‚ ä¸€ä¸ªé”®æœ€å¤§èƒ½å­˜å‚¨ 512MBã€‚ 1234redis 127.0.0.1:6379&gt; set name &quot;sukiu.top&quot;OKredis 127.0.0.1:6379&gt; get name&quot;sukiu.top&quot; Redis å­—ç¬¦ä¸²(String)_w3cschool HashRedis hash æ˜¯ä¸€ä¸ªé”®å€¼ (key=&gt;value) å¯¹é›†åˆã€‚Redis hash æ˜¯ä¸€ä¸ª string ç±»å‹çš„ field å’Œ value çš„æ˜ å°„è¡¨ï¼Œhash ç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ã€‚ æ¯ä¸ª hash å¯ä»¥å­˜å‚¨ 232 - 1 é”®å€¼å¯¹ï¼ˆ40 å¤šäº¿ï¼‰ã€‚ 12345678910111213redis 127.0.0.1:6379&gt; hmset user:1 username sukiu.top password sukiu.top points 200OKredis 127.0.0.1:6379&gt; hgetall user:11) &quot;username&quot;2) &quot;sukiu.top&quot;3) &quot;password&quot;4) &quot;sukiu.top&quot;5) &quot;points&quot;6) &quot;200&quot;redis 127.0.0.1:6379&gt; hkeys user:11) &quot;username&quot;2) &quot;password&quot;3) &quot;points&quot; Redis å“ˆå¸Œ(Hash)_w3cschool ListRedis åˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºã€‚ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨çš„å¤´éƒ¨ï¼ˆå·¦è¾¹ï¼‰æˆ–è€…å°¾éƒ¨ï¼ˆå³è¾¹ï¼‰ã€‚ åˆ—è¡¨æœ€å¤šå¯å­˜å‚¨ 232 - 1 å…ƒç´  (4294967295, æ¯ä¸ªåˆ—è¡¨å¯å­˜å‚¨ 40 å¤šäº¿)ã€‚ 12345678910127.0.0.1:6379&gt; lpush test redis(integer) 1127.0.0.1:6379&gt; lpush test mongodb(integer) 2127.0.0.1:6379&gt; lpush test rabitmq(integer) 3127.0.0.1:6379&gt; lrange test 0 101) &quot;rabitmq&quot;2) &quot;mongodb&quot;3) &quot;redis&quot; Redis åˆ—è¡¨(List)_w3cschool SetRedis çš„ Set æ˜¯ string ç±»å‹çš„æ— åºé›†åˆã€‚é›†åˆæ˜¯é€šè¿‡å“ˆå¸Œè¡¨å®ç°çš„ï¼Œæ‰€ä»¥æ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯ O(1)ã€‚ é›†åˆä¸­æœ€å¤§çš„æˆå‘˜æ•°ä¸º 232 - 1 (4294967295, æ¯ä¸ªé›†åˆå¯å­˜å‚¨ 40 å¤šäº¿ä¸ªæˆå‘˜)ã€‚ 123456789101112127.0.0.1:6379&gt; sadd t1 redis(integer) 1127.0.0.1:6379&gt; sadd t1 mongodb(integer) 1127.0.0.1:6379&gt; sadd t1 rabitmq(integer) 1127.0.0.1:6379&gt; sadd t1 rabitmq(integer) 0127.0.0.1:6379&gt; smembers t11) &quot;rabitmq&quot;2) &quot;mongodb&quot;3) &quot;redis&quot; Redis é›†åˆ(Set)_w3cschool Zsetå’Œ set ä¸åŒçš„æ˜¯æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ª double ç±»å‹çš„åˆ†æ•°ã€‚redis æ­£æ˜¯é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºã€‚ zset çš„æˆå‘˜æ˜¯å”¯ä¸€çš„,ä½†åˆ†æ•° (score) å´å¯ä»¥é‡å¤ã€‚ 123456789101112127.0.0.1:6379&gt; zadd t2 0 redis(integer) 1127.0.0.1:6379&gt; zadd t2 0 mongodb(integer) 1127.0.0.1:6379&gt; zadd t2 0 rabitmq(integer) 1127.0.0.1:6379&gt; zadd t2 0 rabitmq(integer) 0127.0.0.1:6379&gt; zrangebyscore t2 0 10001) &quot;mongodb&quot;2) &quot;rabitmq&quot;3) &quot;redis&quot; Redis æœ‰åºé›†åˆ(sorted set)_w3cschool é«˜çº§æŒä¹…åŒ– æ›´å¤šï¼šRedisä¸“é¢˜ï¼šä¸‡å­—é•¿æ–‡è¯¦è§£æŒä¹…åŒ–åŸç† - SegmentFault æ€å¦ Redis æ˜¯å†…å­˜æ•°æ®åº“,å¦‚æœä¸å°†å†…å­˜ä¸­çš„æ•°æ®åº“çŠ¶æ€ä¿å­˜åˆ°ç£ç›˜,é‚£ä¹ˆä¸€æ—¦æœåŠ¡å™¨è¿›ç¨‹é€€å‡º,æœåŠ¡å™¨ä¸­çš„æ•°æ®åº“çŠ¶æ€ä¹Ÿä¼šæ¶ˆå¤±ã€‚ Redis æ”¯æŒä¸¤ç§æ–¹å¼çš„æŒä¹…åŒ–ï¼šRDB å¿«ç…§å’Œ AOFã€‚ RDBRDB å¿«ç…§ç”¨å®˜æ–¹çš„è¯æ¥è¯´ï¼šRDB æŒä¹…åŒ–æ–¹æ¡ˆæ˜¯æŒ‰ç…§æŒ‡å®šæ—¶é—´é—´éš”å¯¹ä½ çš„æ•°æ®é›†ç”Ÿæˆçš„æ—¶é—´ç‚¹å¿«ç…§ï¼ˆpoint-to-time snapshotï¼‰ã€‚ å®ƒä»¥ç´§ç¼©çš„äºŒè¿›åˆ¶æ–‡ä»¶ä¿å­˜ Redis æ•°æ®åº“æŸä¸€æ—¶åˆ»æ‰€æœ‰æ•°æ®å¯¹è±¡çš„å†…å­˜å¿«ç…§ï¼Œå¯ç”¨äº Redis çš„æ•°æ®å¤‡ä»½ã€è½¬ç§»ä¸æ¢å¤ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä»æ˜¯å®˜æ–¹çš„é»˜è®¤æ”¯æŒæ–¹æ¡ˆã€‚ åŸç†ï¼š Redis ä¼šå•ç‹¬åˆ›å»º ( fork ) ä¸€ä¸ªå­è¿›ç¨‹æ¥è¿›è¡ŒæŒä¹…åŒ–ï¼Œä¼šå…ˆå°†æ•°æ®å†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œå¾…æŒä¹…åŒ–è¿‡ç¨‹éƒ½ç»“æŸäº†ï¼Œå†ç”¨è¿™ä¸ªä¸´æ—¶æ–‡ä»¶æ›¿æ¢ä¸Šæ¬¡æŒä¹…åŒ–å¥½çš„æ–‡ä»¶ã€‚ æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸»è¿›ç¨‹æ˜¯ä¸è¿›è¡Œä»»ä½• I0 æ“ä½œçš„ï¼Œç¡®ä¿äº†æé«˜çš„æ€§èƒ½ã€‚ ä¼˜ç‚¹: é€‚åˆå¤§è§„æ¨¡çš„æ•°æ®æ¢å¤ å¯¹æ•°æ®çš„å®Œæ•´æ€§è¦ä¸é«˜ ç¼ºç‚¹ï¼š éœ€è¦ä¸€å®šçš„æ—¶é—´é—´éš”è¿›ç¨‹æ“ä½œï¼Œå¦‚æœ redis æ„å¤–å®•æœºäº†ï¼Œè¿™ä¸ªæœ€åä¸€æ¬¡ä¿®æ”¹æ•°æ®å°±æ²¡æœ‰çš„äº† fork è¿›ç¨‹çš„æ—¶å€™ï¼Œä¼šå ç”¨ä¸€å®šçš„å†…å®¹ç©ºé—´ AOFAOFï¼ˆAppend Only Fileï¼‰ï¼Œå®ƒæ˜¯ Redis çš„å®Œå…¨æŒä¹…åŒ–ç­–ç•¥ã€‚ åŸç†ï¼š ä»¥æ—¥å¿—çš„å½¢å¼æ¥è®°å½•æ¯ä¸ªå†™æ“ä½œï¼Œå°† Redis æ‰§è¡Œè¿‡çš„æ‰€æœ‰æŒ‡ä»¤è®°å½•ä¸‹æ¥ (è¯»æ“ä½œä¸è®°å½•) ï¼Œåªè®¸è¿½åŠ æ–‡ä»¶ä½†ä¸å¯ä»¥æ”¹å†™æ–‡ä»¶,ï¼Œredis å¯åŠ¨ä¹‹åˆä¼šè¯»å–è¯¥æ–‡ä»¶é‡æ–°æ„å»ºæ•°æ®ã€‚æ¢è¨€ä¹‹ï¼Œredis é‡å¯çš„è¯å°±æ ¹æ®æ—¥å¿—æ–‡ä»¶çš„å†…å®¹å°†å†™æŒ‡ä»¤ä»å‰åˆ°åæ‰§è¡Œä¸€æ¬¡ä»¥å®Œæˆæ•°æ®çš„æ¢å¤å·¥ä½œã€‚ AOF æŒä¹…åŒ–é»˜è®¤æ˜¯å…³é—­çš„ï¼Œä¿®æ”¹ redis.conf ä»¥ä¸‹ä¿¡æ¯å¹¶é‡å¯ï¼Œå³å¯å¼€å¯ AOF æŒä¹…åŒ–åŠŸèƒ½ã€‚ 123456# no-å…³é—­ï¼Œyes-å¼€å¯ï¼Œé»˜è®¤noappendonly yesappendfilename &quot;appendonTy.aof&quot; #æŒä¹…åŒ–çš„æ–‡ä»¶çš„åå­—# appendfsync always #æ¯æ¬¡ä¿®æ”¹éƒ½ä¼šsync,æ¶ˆè€—æ€§èƒ½ appendfsync everysec #æ¯ç§’æ‰§è¡Œä¸€æ¬¡sync,å¯èƒ½ä¼šä¸¢å¤±è¿™1sçš„æ•°æ®# appendfsync no #ä¸æ‰§è¡Œsync,è¿™ä¸ªæ—¶å€™æ“ä½œç³»ç»Ÿè‡ªå·±åŒæ­¥æ•°æ®,é€Ÿåº¦æœ€å¿«! ä¼˜ç‚¹ï¼š æ¯ä¸€æ¬¡ä¿®æ”¹éƒ½åŒæ­¥ï¼Œæ–‡ä»¶çš„å®Œæ•´ä¼šæ›´åŠ å¥½ æ¯ç§’åŒæ­¥ä¸€æ¬¡ï¼Œå¯èƒ½ä¼šä¸¢å¤±ä¸€ç§’çš„æ•°æ® ä»ä¸åŒæ­¥ï¼Œæ•ˆç‡æœ€é«˜ ç¼ºç‚¹ï¼š ç›¸å¯¹äºæ•°æ®æ–‡ä»¶æ¥è¯´, aof è¿œè¿œå¤§äº rdbï¼Œä¿®å¤çš„é€Ÿåº¦ä¹Ÿæ¯” rdb æ…¢ Aof è¿è¡Œæ•ˆç‡ä¹Ÿè¦æ¯” rdb æ…¢ï¼Œæ‰€ä»¥æˆ‘ä»¬ redis é»˜è®¤çš„é…ç½®å°±æ˜¯ rdb æŒä¹…åŒ– ä¸»ä»å¤åˆ¶ä¸»ä»å¤åˆ¶ï¼šæ˜¯æŒ‡å°†ä¸€å° Redis æœåŠ¡å™¨çš„æ•°æ®ï¼Œå¤åˆ¶åˆ°å…¶ä»–çš„ Redis æœåŠ¡å™¨ã€‚ å‰è€…ç§°ä¸ºä¸»èŠ‚ç‚¹ (master&#x2F;leader) åè€…ç§°ä¸ºä»èŠ‚ç‚¹ (slavel&#x2F;follower) æ•°æ®çš„å¤åˆ¶æ˜¯å•å‘çš„ï¼Œåªèƒ½ç”±ä¸»èŠ‚ç‚¹åˆ°ä»èŠ‚ç‚¹ã€‚Master ä»¥å†™ä¸ºä¸»ï¼ŒSlave ä»¥è¯»ä¸ºä¸»ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯å° Redis æœåŠ¡å™¨éƒ½æ˜¯ä¸»èŠ‚ç‚¹ä¸€ä¸ªä¸»èŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªä»èŠ‚ç‚¹ (æˆ–æ²¡æœ‰ä»èŠ‚ç‚¹)ï¼Œä½†ä¸€ä¸ªä»èŠ‚ç‚¹åªèƒ½æœ‰ä¸€ä¸ªä¸»èŠ‚ç‚¹ ä¸»ä»å¤åˆ¶çš„ä½œç”¨ä¸»è¦åŒ…æ‹¬: æ•°æ®å†—ä½™ï¼šä¸»ä»å¤åˆ¶å®ç°äº†æ•°æ®çš„çƒ­å¤‡ä»½,æ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„ä¸€ç§æ•°æ®å†—ä½™æ–¹å¼ã€‚ æ•…éšœæ¢å¤ï¼šå½“ä¸»èŠ‚ç‚¹å‡ºç°é—®é¢˜æ—¶ï¼Œå¯ä»¥ç”±ä»èŠ‚ç‚¹æä¾›æœåŠ¡ï¼Œå®ç°å¿«é€Ÿçš„æ•…éšœæ¢å¤ï¼›å®é™…ä¸Šæ˜¯ä¸€ç§æœåŠ¡çš„å†—ä½™ã€‚ è´Ÿè½½å‡è¡¡ï¼šåœ¨ä¸»ä»å¤åˆ¶çš„åŸºç¡€ä¸Šï¼Œåˆè¯»å†™åˆ†ç¦»ï¼Œå¯ä»¥ç”±ä¸»èŠ‚ç‚¹æä¾›å†™æœåŠ¡ï¼Œç”±ä»èŠ‚ç‚¹æä¾›è¯»æœåŠ¡ (å³å†™ Redis æ•°æ®æ—¶åº”ç”¨è¿æ¥ä¸»èŠ‚ç‚¹ï¼Œè¯» Redis æ•°æ®æ—¶åº”ç”¨è¿æ¥ä»èŠ‚ç‚¹) ï¼Œåˆ†æ‹…æœåŠ¡å™¨è´Ÿè½½ï¼›å°¤å…¶æ˜¯åœ¨å†™å°‘è¯»å¤šçš„åœºæ™¯ä¸‹ï¼Œé€šè¿‡å¤šä¸ªä»èŠ‚ç‚¹åˆ†æ‹…è¯»è´Ÿè½½ï¼Œå¯ä»¥å¤§å¤§æé«˜ Redis æœåŠ¡å™¨çš„å¹¶å‘é‡ã€‚ é«˜å¯ç”¨åŸºçŸ³ï¼šé™¤äº†ä¸Šè¿°ä½œç”¨ä»¥å¤–ï¼Œä¸»ä»å¤åˆ¶è¿˜æ˜¯å“¨å…µå’Œé›†ç¾¤èƒ½å¤Ÿå®æ–½çš„åŸºç¡€ï¼Œå› æ­¤è¯´ä¸»ä»å¤åˆ¶æ˜¯ Redis é«˜å¯ç”¨çš„åŸºç¡€ã€‚ é›†ç¾¤æ¨¡å¼ æ›´å¤šï¼šredisç³»åˆ—ä¹‹â€”â€”é«˜å¯ç”¨ï¼ˆä¸»ä»ã€å“¨å…µã€é›†ç¾¤ï¼‰ ä¸»ä»åŸç†åŒä¸Šæ–¹çš„ä¸»ä»å¤åˆ¶ï¼Œç³»ç»Ÿçš„é«˜å¯ç”¨éƒ½æ˜¯é€šè¿‡éƒ¨ç½²å¤šå°æœºå™¨å®ç°çš„ã€‚ redis ä¸ºäº†é¿å…å•ç‚¹æ•…éšœï¼Œä¹Ÿéœ€è¦éƒ¨ç½²å¤šå°æœºå™¨ã€‚ å“¨å…µä¸»ä»æ¨¡å¼ä¸‹ï¼Œå½“ä¸»æœåŠ¡å™¨å®•æœºåï¼Œéœ€è¦æ‰‹åŠ¨æŠŠä¸€å°ä»æœåŠ¡å™¨åˆ‡æ¢ä¸ºä¸»æœåŠ¡å™¨ï¼Œè¿™å°±éœ€è¦äººå·¥å¹²é¢„ï¼Œè´¹äº‹è´¹åŠ›ï¼Œè¿˜ä¼šé€ æˆä¸€æ®µæ—¶é—´å†…æœåŠ¡ä¸å¯ç”¨ã€‚å®é™…ç”Ÿäº§ä¸­ï¼Œä¼˜å…ˆè€ƒè™‘å“¨å…µæ¨¡å¼ã€‚è¿™ç§æ¨¡å¼ä¸‹ï¼Œmaster å®•æœºï¼Œå“¨å…µä¼šè‡ªåŠ¨é€‰ä¸¾ master å¹¶å°†å…¶ä»–çš„ slave æŒ‡å‘æ–°çš„ masterï¼Œå³ è‡ªåŠ¨é€‰å–è€å¤§çš„æ¨¡å¼ é›†ç¾¤Redis çš„å“¨å…µæ¨¡å¼åŸºæœ¬å·²ç»å¯ä»¥å®ç°é«˜å¯ç”¨ï¼Œè¯»å†™åˆ†ç¦» ï¼Œä½†æ˜¯åœ¨è¿™ç§æ¨¡å¼ä¸‹æ¯å° Redis æœåŠ¡å™¨éƒ½å­˜å‚¨ç›¸åŒçš„æ•°æ®ï¼Œå¾ˆæµªè´¹å†…å­˜ã€‚ åœ¨ redis3.0 ä¸ŠåŠ å…¥äº† Cluster é›†ç¾¤æ¨¡å¼ï¼Œå®ç°äº† Redis çš„åˆ†å¸ƒå¼å­˜å‚¨ï¼Œå¯¹æ•°æ®è¿›è¡Œåˆ†ç‰‡ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯å° Redis èŠ‚ç‚¹ä¸Šå­˜å‚¨ä¸åŒçš„å†…å®¹ã€‚","categories":[{"name":"Database","slug":"Database","permalink":"http://blog.sukiu.top/categories/Database/"},{"name":"Redis","slug":"Database/Redis","permalink":"http://blog.sukiu.top/categories/Database/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"http://blog.sukiu.top/tags/Redis/"}]},{"title":"SQL","slug":"SQL","date":"2021-12-02T12:58:00.000Z","updated":"2021-12-02T12:58:00.000Z","comments":true,"path":"Database/SQL/","link":"","permalink":"http://blog.sukiu.top/Database/SQL/","excerpt":"SQL è¯­å¥å¯åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š æ•°æ®å®šä¹‰è¯­è¨€ DDLï¼ˆData Ddefinition Languageï¼‰ï¼šå³é€»è¾‘æ“ä½œï¼Œå¦‚ CREATEï¼ŒDROPï¼ŒALTER æ•°æ®æŸ¥è¯¢è¯­è¨€ DQLï¼ˆData Query Languageï¼‰ï¼šå³æŸ¥è¯¢æ“ä½œï¼Œä»¥ SELECT å…³é”®å­—ä¸ºä¸» æ•°æ®æ“çºµè¯­è¨€ DMLï¼ˆData Manipulation Languageï¼‰ï¼šå³å¢åˆ æ”¹æ“ä½œï¼Œå¦‚ INSERTï¼ŒUPDATEï¼ŒDELETE æ•°æ®æ§åˆ¶åŠŸèƒ½ DCLï¼ˆData Control Languageï¼‰ï¼šå³æƒé™æ§åˆ¶æ“ä½œï¼Œå¦‚ GRANTï¼ŒREVOKEï¼ŒCOMMITï¼ŒROLLBACK","text":"SQL è¯­å¥å¯åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š æ•°æ®å®šä¹‰è¯­è¨€ DDLï¼ˆData Ddefinition Languageï¼‰ï¼šå³é€»è¾‘æ“ä½œï¼Œå¦‚ CREATEï¼ŒDROPï¼ŒALTER æ•°æ®æŸ¥è¯¢è¯­è¨€ DQLï¼ˆData Query Languageï¼‰ï¼šå³æŸ¥è¯¢æ“ä½œï¼Œä»¥ SELECT å…³é”®å­—ä¸ºä¸» æ•°æ®æ“çºµè¯­è¨€ DMLï¼ˆData Manipulation Languageï¼‰ï¼šå³å¢åˆ æ”¹æ“ä½œï¼Œå¦‚ INSERTï¼ŒUPDATEï¼ŒDELETE æ•°æ®æ§åˆ¶åŠŸèƒ½ DCLï¼ˆData Control Languageï¼‰ï¼šå³æƒé™æ§åˆ¶æ“ä½œï¼Œå¦‚ GRANTï¼ŒREVOKEï¼ŒCOMMITï¼ŒROLLBACK 1ã€é”® è¶…é”®ï¼šåœ¨å…³ç³»ä¸­ï¼Œèƒ½å”¯ä¸€æ ‡è¯†å…ƒç»„çš„å±æ€§é›†ç§°ä¸ºå…³ç³»æ¨¡å¼çš„è¶…é”®ã€‚ ä¸€ä¸ªå±æ€§å¯ä»¥ä½œä¸ºä¸€ä¸ªè¶…é”®ï¼Œå¤šä¸ªå±æ€§ç»„åˆåœ¨ä¸€èµ·ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªè¶…é”®ã€‚è¶…é”®åŒ…å«å€™é€‰é”®å’Œä¸»é”®ã€‚ å€™é€‰é”®ï¼šæ˜¯æœ€å°è¶…é”®ï¼Œå³æ²¡æœ‰å†—ä½™å…ƒç´ çš„è¶…é”®ã€‚ ä¸»é”®ï¼šæ•°æ®åº“è¡¨ä¸­å¯¹å‚¨å­˜æ•°æ®å¯¹è±¡äºˆä»¥ å”¯ä¸€å’Œå®Œæ•´æ ‡è¯†çš„æ•°æ®åˆ—æˆ–å±æ€§çš„ç»„åˆã€‚ ä¸€ä¸ªæ•°æ®åˆ—åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ï¼Œä¸”ä¸»é”®çš„å–å€¼ä¸èƒ½ç¼ºå¤±ï¼Œå³ä¸èƒ½ä¸ºç©ºå€¼ï¼ˆNULLï¼‰ã€‚ å¤–é”®ï¼šåœ¨ä¸€ä¸ªè¡¨ä¸­å­˜åœ¨çš„å¦ä¸€ä¸ªè¡¨çš„ä¸»é”®ç§°æ­¤è¡¨çš„å¤–é”®ã€‚ å¤–é”®å¯ä»¥æœ‰é‡å¤çš„, å¯ä»¥æ˜¯ç©ºå€¼ã€‚ 2ã€çº¦æŸçº¦æŸæ˜¯ä¸€ç§ç®€å•åœ°å¼ºåŠ äºè¡¨ä¸­ä¸€åˆ—æˆ–å¤šåˆ—çš„é™åˆ¶ï¼Œä»è€Œä¿è¯è¡¨ä¸­æ•°æ®ä¸€è‡´æ€§ï¼ˆå‡†ç¡®å’Œå¯é ï¼‰ã€‚ä»¥ä¸‹ä¸ºå…­å¤§çº¦æŸï¼š éç©ºçº¦æŸï¼ˆNOT NULLï¼‰ï¼šä¿è¯è¯¥å­—æ®µå€¼ä¸€å®šä¸ä¸ºç©ºï¼› é»˜è®¤çº¦æŸï¼ˆDEFAULTï¼‰ï¼šä¿è¯å­—æ®µæœ‰é»˜è®¤å€¼ï¼› ä¸»é”®çº¦æŸï¼ˆPRIMARY KEYï¼‰ï¼šæ ‡å¿—ä¸€åˆ—æˆ–è€…å¤šåˆ—ï¼Œå¹¶ä¿è¯å…¶å€¼åœ¨è¡¨å†…çš„å”¯ä¸€æ€§ï¼› å¤–é”®çº¦æŸï¼ˆFOREIGN KEYï¼‰ï¼šé™åˆ¶ä¸€åˆ—æˆ–å¤šåˆ—ä¸­çš„å€¼å¿…é¡»è¢«åŒ…å«åœ¨å¦ä¸€è¡¨çš„å¤–é”®åˆ—ä¸­ï¼Œå¹¶ä¸”åœ¨çº§è”æ›´æ–°æˆ–çº§è”åˆ é™¤è§„åˆ™å»ºç«‹åä¹Ÿå¯ä»¥é™åˆ¶å…¶ä»–è¡¨ä¸­çš„å¯ç”¨å€¼ï¼› å”¯ä¸€çº¦æŸï¼ˆUNIQUEï¼‰ï¼š é™åˆ¶ä¸€åˆ—æˆ–å¤šåˆ—çš„å€¼ï¼Œä¿è¯å­—æ®µå€¼åœ¨è¡¨å†…çš„å”¯ä¸€æ€§ï¼Œå¯ä»¥ä¸ºç©ºï¼ˆä¸»é”®çº¦æŸæ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å”¯ä¸€çº¦æŸï¼‰ï¼› æ£€æŸ¥çº¦æŸï¼ˆCHECKï¼‰ï¼šé™åˆ¶ä¸€åˆ—çš„å¯ç”¨å€¼èŒƒå›´ã€‚ åˆ›å»ºçº¦æŸ åˆ›å»ºè¡¨æ—¶ï¼Œåœ¨å­—æ®µæè¿°å¤„ï¼Œå£°æ˜æŒ‡å®šå­—æ®µä¸ºä¸»é”®ï¼š 1234CREATE TABLE persons ( pid int primary key, -- æ·»åŠ äº†ä¸»é”®çº¦æŸ...); åˆ›å»ºè¡¨æ—¶ï¼Œåœ¨ constraint çº¦æŸåŒºåŸŸï¼Œå£°æ˜æŒ‡å®šå­—æ®µä¸ºä¸»é”®ï¼š 12345678CREATE TABLE persons ( pid INT, lastname VARCHAR(255), firstname VARCHAR(255), address VARCHAR(255), CONSTRAINT pk_persons PRIMARY KEY (lastname, firstname) -- æ·»åŠ ä¸»é”®çº¦æŸ, å¤šä¸ªå­—æ®µ, æˆ‘ä»¬ç§°ä¸ºè”åˆä¸»é”®ã€‚);-- pk_persons æ˜¯çº¦æŸåï¼Œåœ¨æ•°æ®åº“ä¸­åº”æ˜¯æƒŸä¸€çš„ã€‚å¦‚æœä¸æŒ‡å®šï¼Œåˆ™ç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªçº¦æŸåã€‚ åˆ›å»ºè¡¨ä¹‹åï¼Œé€šè¿‡ä¿®æ”¹è¡¨ç»“æ„ï¼Œå£°æ˜æŒ‡å®šå­—æ®µä¸ºä¸»é”®ï¼š 123-- æ·»åŠ è”åˆä¸»é”®çº¦æŸ-- å…¶ä»–çº¦æŸç±»ä¼¼alter table persons add constraint pk_persons primary key (lastname, firstname); åˆ é™¤çº¦æŸ123456789101112131415-- åˆ é™¤ä¸»é”®çº¦æŸ-- ALTER TABLE è¡¨å DROP PRIMARY KEYalter table persons drop primary key; -- åˆ é™¤éç©ºçº¦æŸ-- ALTER TABLE è¡¨å MODIFY å­—æ®µå æ•°æ®ç±»å‹[é•¿åº¦]alter table persons modify lastname varchar(255);-- åˆ é™¤å”¯ä¸€çº¦æŸ-- ALTER TABLE è¡¨å DROP INDEX åç§°-- æœ‰å”¯ä¸€çº¦æŸåç§°, ä½¿ç”¨çº¦æŸåç§°åˆ é™¤alter table persons drop index uni_persons_address; -- æ²¡æœ‰å”¯ä¸€çº¦æŸåç§°, ä½¿ç”¨å­—æ®µååˆ é™¤alter table persons drop index address; 3ã€SQL è¯­å¥å‚è€ƒ w3cschool å³å¯ï¼š è¯¦å°½çš„SQLè¯­å¥å¤§å…¨åˆ†ç±»æ•´ç†_w3cschool å¢åˆ æ”¹æŸ¥ CRUD123456789101112131415161718192021222324-- æ’å…¥-- æ’å…¥å®Œæ•´è¡ŒINSERT INTO user VALUES (10, &#x27;root&#x27;, &#x27;root&#x27;, &#x27;xxxx@163.com&#x27;);-- æ’å…¥è¡Œçš„éƒ¨åˆ†INSERT INTO user(username, password, email) VALUES (&#x27;admin&#x27;, &#x27;admin&#x27;, &#x27;xxxx@163.com&#x27;);-- æ›´æ–°UPDATE user SET username=&#x27;robot&#x27;, password=&#x27;robot&#x27; WHERE username = &#x27;root&#x27;;-- åˆ é™¤-- åˆ é™¤æŒ‡å®šæ•°æ®DELETE FROM user WHERE username = &#x27;robot&#x27;;-- æ¸…ç©ºè¡¨TRUNCATE TABLE user;-- æŸ¥è¯¢-- å¤šè¡ŒæŸ¥è¯¢SELECT prod_id, prod_name, prod_price FROM products;-- å…¨éƒ¨æŸ¥è¯¢SELECT * FROM products;-- æŸ¥è¯¢å»é‡SELECT DISTINCT vend_id FROM products;-- æŸ¥è¯¢é™åˆ¶ limit x,y ä»xï¼ˆèµ·å§‹0ï¼‰è¡Œå¼€å§‹ï¼ŒæŸ¥è¯¢yæ¡è®°å½•SELECT * FROM mytable LIMIT 0, 5; å…³è”æŸ¥è¯¢åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨æ•°æ®åº“æŸ¥è¯¢è¯­å¥æ—¶ï¼Œæœ‰å¾ˆå¤šéœ€æ±‚éƒ½æ˜¯è¦æ¶‰åŠåˆ°è¾ƒä¸ºå¤æ‚æˆ–è€…å¤šè¡¨çš„è¿æ¥æŸ¥è¯¢ï¼Œéœ€è¦å…³è”æŸ¥è¯¢å®ç°ã€‚ä»¥ä¸‹ä¸ºæ€»ç»“çš„ MySQL çš„äº”ç§å…³è”æŸ¥è¯¢ã€‚ äº¤å‰è¿æ¥ï¼ˆCROSS JOINï¼‰ é™¤äº†åœ¨ FROM å­å¥ä¸­ä½¿ç”¨ é€—å·é—´éš”è¿æ¥çš„è¡¨ å¤–ï¼ŒSQL è¿˜æ”¯æŒå¦ä¸€ç§è¢«ç§°ä¸ºäº¤å‰è¿æ¥çš„æ“ä½œï¼Œå®ƒä»¬éƒ½è¿”å›è¢«è¿æ¥çš„ä¸¤ä¸ªè¡¨æ‰€æœ‰æ•°æ®è¡Œçš„ ç¬›å¡å°”ç§¯ï¼Œè¿”å›åˆ°çš„æ•°æ®è¡Œæ•°ç­‰äºç¬¬ä¸€ä¸ªè¡¨ä¸­ç¬¦åˆæŸ¥è¯¢æ¡ä»¶çš„æ•°æ®è¡Œæ•° ä¹˜ä»¥ ç¬¬äºŒä¸ªè¡¨ä¸­ç¬¦åˆæŸ¥è¯¢æ¡ä»¶çš„æ•°æ®è¡Œæ•°ã€‚æƒŸä¸€çš„ä¸åŒåœ¨äºï¼Œäº¤å‰è¿æ¥åˆ†å¼€åˆ—åæ—¶ï¼Œä½¿ç”¨ CROSS JOIN å…³é”®å­—è€Œä¸æ˜¯é€—å·ï¼Œå³ä»¥ä¸‹ä¸¤ä¸ªè¡¨è¾¾å¼ç­‰ä»·ï¼š SELECT * FROM A, B SELECT * FROM A CROSS JOIN B å†…è¿æ¥ï¼ˆINNER JOINï¼‰ å†…è¿æ¥åˆ†ä¸ºä¸‰ç±»ï¼Œåˆ†åˆ«æ˜¯ ç­‰å€¼è¿æ¥ï¼šON A.id = B.idã€ä¸ç­‰å€¼è¿æ¥ï¼šON A.id &gt; B.id å’Œ è‡ªè¿æ¥ï¼šSELECT * FROM A T1 INNER JOIN A T2 ON T1.id = T2.pid å¤–è¿æ¥ï¼ˆLEFT JOIN&#x2F;RIGHT JOINï¼‰ å·¦å¤–è¿æ¥ï¼šä»¥å·¦è¡¨ä¸ºä¸»ï¼Œå…ˆæŸ¥è¯¢å‡ºå·¦è¡¨ï¼ŒæŒ‰ç…§ ON åçš„å…³è”æ¡ä»¶åŒ¹é…å³è¡¨ï¼Œæ²¡æœ‰åŒ¹é…åˆ°çš„ç”¨ NULL å¡«å……ï¼Œå¯ä»¥ç®€å†™æˆ LEFT JOIN å³å¤–è¿æ¥ï¼šä»¥å³è¡¨ä¸ºä¸»ï¼Œå…ˆæŸ¥è¯¢å‡ºå³è¡¨ï¼ŒæŒ‰ç…§ ON åçš„å…³è”æ¡ä»¶åŒ¹é…å·¦è¡¨ï¼Œæ²¡æœ‰åŒ¹é…åˆ°çš„ç”¨ NULL å¡«å……ï¼Œå¯ä»¥ç®€å†™æˆ RIGHT JOIN è”åˆæŸ¥è¯¢ï¼ˆUNION ä¸ UNION ALLï¼‰ SELECT * FROM A UNION SELECT * FROM B UNION â€¦ è”åˆæŸ¥è¯¢å°±æ˜¯æŠŠå¤šä¸ªç»“æœé›†é›†ä¸­åœ¨ä¸€èµ·ï¼ŒUNION å‰çš„ç»“æœä¸ºåŸºå‡†ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è”åˆæŸ¥è¯¢çš„ åˆ—æ•°è¦ç›¸ç­‰ï¼Œç›¸åŒçš„è®°å½•è¡Œä¼šåˆå¹¶ï¼› å¦‚æœä½¿ç”¨ UNION ALLï¼Œä¸ä¼šåˆå¹¶é‡å¤çš„è®°å½•è¡Œï¼Œæ‰€ä»¥æ•ˆç‡æ›´é«˜ã€‚ å…¨è¿æ¥ï¼ˆFULL JOINï¼‰ MySQL æœ¬èº«ä¸æ”¯æŒå…¨è¿æ¥ï¼Œä½†å¯ä»¥é€šè¿‡è”åˆä½¿ç”¨ LEFT JOINã€UNION å’Œ RIGHT JOIN æ¥å®ç°ã€‚ SELECT * FROM A LEFT JOIN B ON A.id = B.id UNIONSELECT * FROM A RIGHT JOIN B ON A.id = B.id 123456789101112131415-- join-- å†…è¿æ¥SELECT vend_name FROM vendors INNER JOIN products ON vendors.vend_id = products.vend_id;-- è‡ªç„¶è¿æ¥ï¼šå†…è¿æ¥æä¾›è¿æ¥çš„åˆ—ï¼Œè€Œè‡ªç„¶è¿æ¥è‡ªåŠ¨è¿æ¥æ‰€æœ‰åŒååˆ—ã€‚SELECT c1.cust_id FROM customers c1, customers c2 WHERE c1.cust_name = c2.cust_name AND c2.cust_contact = &#x27;Jim Jones&#x27;;-- å¤–è¿æ¥-- å·¦è¿æ¥ï¼šå·¦å¤–è¿æ¥å°±æ˜¯ä¿ç•™å·¦è¡¨æ²¡æœ‰å…³è”çš„è¡ŒSELECT orders.order_num FROM customers LEFT JOIN orders ON customers.cust_id = orders.cust_id;-- å³è¿æ¥ï¼šå·¦å¤–è¿æ¥å°±æ˜¯ä¿ç•™å·¦è¡¨æ²¡æœ‰å…³è”çš„è¡ŒSELECT orders.order_num FROM customers RIGHT JOIN orders ON customers.cust_id = orders.cust_id;-- unionSELECT cust_name, cust_contact, cust_email FROM customers WHERE cust_state IN (&#x27;IL&#x27;, &#x27;IN&#x27;, &#x27;MI&#x27;)UNIONSELECT cust_name, cust_contact, cust_email FROM customers WHERE cust_name = &#x27;Fun4All&#x27;; å­æŸ¥è¯¢å¤šæ¡ MySQL è¯­å¥åµŒå¥—ä½¿ç”¨æ—¶ï¼Œå†…éƒ¨çš„ MySQL æŸ¥è¯¢è¯­å¥ç§°ä¸ºå­æŸ¥è¯¢ã€‚ å­æŸ¥è¯¢æ˜¯ä¸€ä¸ª SELECT è¯­å¥ï¼Œå®ƒåµŒå¥—åœ¨å¦ä¸€ä¸ª SELECTã€SELECTâ€¦INTO è¯­å¥ã€INSERTâ€¦INTO è¯­å¥ã€DELETE è¯­å¥ã€ UPDATE è¯­å¥æˆ–åµŒå¥—åœ¨å¦ä¸€å­æŸ¥è¯¢ä¸­ã€‚ MySQL çš„å­æŸ¥è¯¢æ˜¯å¤šè¡¨æŸ¥è¯¢çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå¸¸å¸¸å’Œ è¿æ¥æŸ¥è¯¢ ä¸€èµ·ä½¿ç”¨ï¼Œæ˜¯å¤šè¡¨æŸ¥è¯¢çš„åŸºç¡€ã€‚ å­æŸ¥è¯¢åˆ†ä¸ºä»¥ä¸‹å››ç±»ï¼š æ ‡é‡å­æŸ¥è¯¢ æŸ¥è¯¢è¿”å›å•ä¸€å€¼çš„æ ‡é‡ï¼Œå¦‚ä¸€ä¸ªæ•°å­—æˆ–ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ˜¯å­æŸ¥è¯¢ä¸­æœ€ç®€å•çš„å½¢å¼ã€‚ åˆ—å­æŸ¥è¯¢ å­æŸ¥è¯¢è¿”å›çš„ç»“æœé›†æ˜¯ N è¡Œä¸€åˆ—ï¼Œè¯¥ç»“æœé€šå¸¸æ¥è‡ªå¯¹è¡¨çš„ æŸä¸ªå­—æ®µ æŸ¥è¯¢è¿”å›ã€‚ è¡Œå­æŸ¥è¯¢ å­æŸ¥è¯¢è¿”å›çš„ç»“æœé›†æ˜¯ä¸€è¡Œ N åˆ—ï¼Œè¯¥ç»“æœé€šå¸¸æ˜¯å¯¹è¡¨çš„ æŸè¡Œæ•°æ® è¿›è¡ŒæŸ¥è¯¢è€Œè¿”å›çš„ç»“æœé›† è¡¨å­æŸ¥è¯¢ å­æŸ¥è¯¢è¿”å›çš„ç»“æœé›†æ˜¯ N è¡Œ N åˆ—çš„ä¸€ä¸ªè¡¨æ•°æ®ã€‚ 12345678910-- whereSELECT * FROM Customers WHERE cust_name = &#x27;Kids Place&#x27;;-- inSELECT * FROM products WHERE vend_id IN (&#x27;DLL01&#x27;, &#x27;BRS01&#x27;);-- betweenSELECT * FROM products WHERE prod_price BETWEEN 3 AND 5;-- æ¡ä»¶ï¼šand or not çœç•¥-- likeï¼š% åŒ¹é…næ¬¡ï¼Œ_ åŒ¹é…ä¸€æ¬¡SELECT prod_id FROM products WHERE prod_name LIKE &#x27;%bean bag%&#x27;;SELECT prod_id FROM products WHERE prod_name LIKE &#x27;__ inch teddy bear&#x27;; æ’åºå’Œåˆ†ç»„ ORDER BYï¼šç”¨äºå¯¹ç»“æœé›†è¿›è¡Œæ’åºã€‚ ASC ï¼šå‡åºï¼ˆé»˜è®¤ï¼‰ DESC ï¼šé™åº å¯ä»¥æŒ‰å¤šä¸ªåˆ—è¿›è¡Œæ’åºï¼Œå¹¶ä¸”ä¸ºæ¯ä¸ªåˆ—æŒ‡å®šä¸åŒçš„æ’åºæ–¹å¼ GROUP BYï¼šå°†è®°å½•åˆ†ç»„åˆ°æ±‡æ€»è¡Œä¸­ ä¸ºæ¯ä¸ªç»„è¿”å›ä¸€ä¸ªè®°å½• æŒ‰åˆ†ç»„å­—æ®µè¿›è¡Œæ’åºåï¼ŒORDER BY å¯ä»¥ä»¥æ±‡æ€»å­—æ®µæ¥è¿›è¡Œæ’åº HAVINGï¼šå¯¹æ±‡æ€»çš„ GROUP BY ç»“æœè¿›è¡Œè¿‡æ»¤ è¦æ±‚å­˜åœ¨ä¸€ä¸ª GROUP BY å­å¥ WHERE å’Œ HAVING éƒ½æ˜¯ç”¨äºè¿‡æ»¤ã€‚ HAVING é€‚ç”¨äºæ±‡æ€»çš„ç»„è®°å½•ï¼›è€Œ WHERE é€‚ç”¨äºå•ä¸ªè®°å½•ã€‚ 12345678910-- order byï¼šDESC é€’å‡SELECT * FROM products ORDER BY prod_price DESC, prod_name ASC;-- group bySELECT cust_name, COUNT(cust_address) AS addr_num FROM Customers GROUP BY cust_name;-- havingSELECT cust_name, COUNT(*) AS numFROM CustomersWHERE cust_email IS NOT NULLGROUP BY cust_nameHAVING COUNT(*) &gt;= 1; MoreChar ä¸ Varchar çš„åŒºåˆ« char è¡¨ç¤ºå®šé•¿å­—ç¬¦ä¸²ï¼Œé•¿åº¦æ˜¯å›ºå®šçš„ï¼Œæœ€å¤šèƒ½å­˜æ”¾çš„å­—ç¬¦ä¸ªæ•°ä¸º 255ï¼Œå’Œç¼–ç æ— å…³ï¼›è€Œ varchar è¡¨ç¤ºå¯å˜é•¿å­—ç¬¦ä¸²ï¼Œé•¿åº¦æ˜¯å¯å˜çš„ï¼Œæœ€å¤šèƒ½å­˜æ”¾çš„å­—ç¬¦ä¸ªæ•°ä¸º 65532ï¼› ä½¿ç”¨ char æ—¶ï¼Œå¦‚æœæ’å…¥æ•°æ®çš„é•¿åº¦å°äº char çš„å›ºå®šé•¿åº¦æ—¶ï¼Œåˆ™ç”¨ç©ºæ ¼å¡«å……ï¼› å› ä¸ºå›ºå®šé•¿åº¦ï¼Œchar çš„å­˜å–é€Ÿåº¦æ¯” varchar å¿«å¾ˆå¤šï¼ŒåŒæ—¶ç¼ºç‚¹æ˜¯ä¼šå ç”¨å¤šä½™ç©ºé—´ï¼Œå±äºç©ºé—´æ¢æ—¶é—´ï¼› DROPã€DELETE ä¸ TRUNCATE çš„åŒºåˆ« DROP DELETE TRUNCATE SQL è¯­å¥ç±»å‹ DDL DML DDL å›æ»š ä¸å¯å›æ»š å¯å›æ»š ä¸å¯å›æ»š åˆ é™¤å†…å®¹ ä»æ•°æ®åº“ä¸­ åˆ é™¤è¡¨ï¼Œæ‰€æœ‰çš„æ•°æ®è¡Œï¼Œç´¢å¼•å’Œæƒé™ä¹Ÿä¼šè¢«åˆ é™¤ è¡¨ç»“æ„è¿˜åœ¨ï¼Œåˆ é™¤è¡¨çš„ å…¨éƒ¨æˆ–è€…ä¸€éƒ¨åˆ†æ•°æ®è¡Œ è¡¨ç»“æ„è¿˜åœ¨ï¼Œåˆ é™¤è¡¨ä¸­çš„ æ‰€æœ‰æ•°æ® åˆ é™¤é€Ÿåº¦ åˆ é™¤é€Ÿåº¦æœ€å¿« åˆ é™¤é€Ÿåº¦æ…¢ï¼Œéœ€è¦é€è¡Œåˆ é™¤ åˆ é™¤é€Ÿåº¦å¿« åœ¨ä¸å†éœ€è¦ä¸€å¼ è¡¨çš„æ—¶å€™ï¼Œé‡‡ç”¨ DROPåœ¨æƒ³åˆ é™¤éƒ¨åˆ†æ•°æ®è¡Œæ—¶å€™ï¼Œç”¨ DELETEåœ¨ä¿ç•™è¡¨è€Œåˆ é™¤æ‰€æœ‰æ•°æ®çš„æ—¶å€™ç”¨ TRUNCATE UNION ä¸ UNION ALL çš„åŒºåˆ« UNION ç”¨äºæŠŠæ¥è‡ªå¤šä¸ª SELECT è¯­å¥çš„ç»“æœç»„åˆåˆ°ä¸€ä¸ªç»“æœé›†åˆä¸­ï¼ŒMySQL ä¼šæŠŠç»“æœé›†ä¸­ é‡å¤çš„è®°å½•åˆ æ‰ UNION ALLï¼ŒMySQL ä¼šæŠŠæ‰€æœ‰çš„è®°å½•è¿”å›ï¼Œä¸”æ•ˆç‡é«˜äº UNION","categories":[{"name":"Database","slug":"Database","permalink":"http://blog.sukiu.top/categories/Database/"}],"tags":[{"name":"Database","slug":"Database","permalink":"http://blog.sukiu.top/tags/Database/"},{"name":"SQL","slug":"SQL","permalink":"http://blog.sukiu.top/tags/SQL/"}]},{"title":"B Tree","slug":"B-Tree","date":"2021-11-29T11:07:00.000Z","updated":"2021-11-29T11:07:00.000Z","comments":true,"path":"Computer-Basics/Data-Structure/B-Tree/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Data-Structure/B-Tree/","excerpt":"B æ ‘ç›¸å¯¹äºå¹³è¡¡äºŒå‰æ ‘çš„ä¸åŒæ˜¯ï¼šæ¯ä¸ªèŠ‚ç‚¹åŒ…å«çš„å…³é”®å­—å¢å¤šäº†ã€‚ ç‰¹åˆ«æ˜¯åœ¨ B æ ‘åº”ç”¨åˆ°æ•°æ®åº“ä¸­çš„æ—¶å€™ï¼Œæ•°æ®åº“å……åˆ†åˆ©ç”¨äº†ç£ç›˜å—çš„åŸç†ï¼ˆç£ç›˜æ•°æ®å­˜å‚¨æ˜¯é‡‡ç”¨å—çš„å½¢å¼å­˜å‚¨çš„ï¼Œæ¯ä¸ªå—çš„å¤§å°ä¸º 4Kï¼Œæ¯æ¬¡ IO è¿›è¡Œæ•°æ®è¯»å–æ—¶ï¼ŒåŒä¸€ä¸ªç£ç›˜å—çš„æ•°æ®å¯ä»¥ä¸€æ¬¡æ€§è¯»å–å‡ºæ¥ï¼‰æŠŠèŠ‚ç‚¹å¤§å°é™åˆ¶å’Œå……åˆ†ä½¿ç”¨åœ¨ç£ç›˜å¿«å¤§å°èŒƒå›´ï¼› æŠŠæ ‘çš„èŠ‚ç‚¹å…³é”®å­—å¢å¤šåæ ‘çš„å±‚çº§æ¯”åŸæ¥çš„äºŒå‰æ ‘å°‘äº†ï¼Œå‡å°‘æ•°æ®æŸ¥æ‰¾çš„æ¬¡æ•°å’Œå¤æ‚åº¦ã€‚","text":"B æ ‘ç›¸å¯¹äºå¹³è¡¡äºŒå‰æ ‘çš„ä¸åŒæ˜¯ï¼šæ¯ä¸ªèŠ‚ç‚¹åŒ…å«çš„å…³é”®å­—å¢å¤šäº†ã€‚ ç‰¹åˆ«æ˜¯åœ¨ B æ ‘åº”ç”¨åˆ°æ•°æ®åº“ä¸­çš„æ—¶å€™ï¼Œæ•°æ®åº“å……åˆ†åˆ©ç”¨äº†ç£ç›˜å—çš„åŸç†ï¼ˆç£ç›˜æ•°æ®å­˜å‚¨æ˜¯é‡‡ç”¨å—çš„å½¢å¼å­˜å‚¨çš„ï¼Œæ¯ä¸ªå—çš„å¤§å°ä¸º 4Kï¼Œæ¯æ¬¡ IO è¿›è¡Œæ•°æ®è¯»å–æ—¶ï¼ŒåŒä¸€ä¸ªç£ç›˜å—çš„æ•°æ®å¯ä»¥ä¸€æ¬¡æ€§è¯»å–å‡ºæ¥ï¼‰æŠŠèŠ‚ç‚¹å¤§å°é™åˆ¶å’Œå……åˆ†ä½¿ç”¨åœ¨ç£ç›˜å¿«å¤§å°èŒƒå›´ï¼› æŠŠæ ‘çš„èŠ‚ç‚¹å…³é”®å­—å¢å¤šåæ ‘çš„å±‚çº§æ¯”åŸæ¥çš„äºŒå‰æ ‘å°‘äº†ï¼Œå‡å°‘æ•°æ®æŸ¥æ‰¾çš„æ¬¡æ•°å’Œå¤æ‚åº¦ã€‚ B æ ‘ (B-tree) æ³¨æ„: ä¹‹å‰æœ‰çœ‹åˆ°æœ‰å¾ˆå¤šæ–‡ç« æŠŠ B æ ‘å’Œ B-tree ç†è§£æˆäº†ä¸¤ç§ä¸åŒç±»åˆ«çš„æ ‘ï¼Œå…¶å®è¿™ä¸¤ä¸ªæ˜¯åŒä¸€ç§æ ‘; æ¦‚å¿µB æ ‘å’Œå¹³è¡¡äºŒå‰æ ‘ç¨æœ‰ä¸åŒçš„æ˜¯ B æ ‘å±äºå¤šå‰æ ‘åˆåå¹³è¡¡å¤šè·¯æŸ¥æ‰¾æ ‘ï¼ˆæŸ¥æ‰¾è·¯å¾„ä¸åªä¸¤ä¸ªï¼‰ï¼Œæ•°æ®åº“ç´¢å¼•æŠ€æœ¯é‡Œå¤§é‡ä½¿ç”¨è€… B æ ‘å’Œ B+ æ ‘çš„æ•°æ®ç»“æ„ è§„åˆ™ï¼š ï¼ˆ1ï¼‰æ’åºæ–¹å¼ï¼šæ‰€æœ‰èŠ‚ç‚¹å…³é”®å­—æ˜¯æŒ‰é€’å¢æ¬¡åºæ’åˆ—ï¼Œå¹¶éµå¾ªå·¦å°å³å¤§åŸåˆ™ ï¼ˆ2ï¼‰å­èŠ‚ç‚¹æ•°ï¼šéå¶èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ•°&gt;1ï¼Œä¸”&lt;&#x3D;M ï¼Œä¸” M&gt;&#x3D;2ï¼Œç©ºæ ‘é™¤å¤–ï¼ˆæ³¨ï¼šM é˜¶ä»£è¡¨ä¸€ä¸ªæ ‘èŠ‚ç‚¹æœ€å¤šæœ‰å¤šå°‘ä¸ªæŸ¥æ‰¾è·¯å¾„ï¼ŒM&#x3D;M è·¯,å½“ M&#x3D;2 åˆ™æ˜¯ 2 å‰æ ‘,M&#x3D;3 åˆ™æ˜¯ 3 å‰ï¼‰ ï¼ˆ3ï¼‰å…³é”®å­—æ•°ï¼šæèŠ‚ç‚¹çš„å…³é”®å­—æ•°é‡å¤§äºç­‰äº ceil(m&#x2F;2)-1 ä¸ªä¸”å°äºç­‰äº M-1 ä¸ªï¼ˆæ³¨ï¼šceil() æ˜¯ä¸ªæœæ­£æ— ç©·æ–¹å‘å–æ•´çš„å‡½æ•°å¦‚ ceil(1.1) ç»“æœä¸º 2) ï¼ˆ4ï¼‰æ‰€æœ‰å¶å­èŠ‚ç‚¹å‡åœ¨åŒä¸€å±‚ã€å¶å­èŠ‚ç‚¹é™¤äº†åŒ…å«äº†å…³é”®å­—å’Œå…³é”®å­—è®°å½•çš„æŒ‡é’ˆå¤–ä¹Ÿæœ‰æŒ‡å‘å…¶å­èŠ‚ç‚¹çš„æŒ‡é’ˆåªä¸è¿‡å…¶æŒ‡é’ˆåœ°å€éƒ½ä¸º null å¯¹åº”ä¸‹å›¾æœ€åä¸€å±‚èŠ‚ç‚¹çš„ç©ºæ ¼å­ ä¾‹å­ï¼š æ¥ç†è§£ B æ ‘ï¼ˆä¸ºäº†ç†è§£æ–¹ä¾¿ç›´æ¥ç”¨å®é™…å­—æ¯çš„å¤§å°æ¥æ’åˆ— C&gt;B&gt;Aï¼‰ B æ ‘çš„æŸ¥è¯¢å¦‚ä¸Šå›¾æˆ‘è¦ä»ä¸Šå›¾ä¸­æ‰¾åˆ° E å­—æ¯ï¼ŒæŸ¥æ‰¾æµç¨‹å¦‚ä¸‹ ï¼ˆ1ï¼‰è·å–æ ¹èŠ‚ç‚¹çš„å…³é”®å­—è¿›è¡Œæ¯”è¾ƒï¼Œå½“å‰æ ¹èŠ‚ç‚¹å…³é”®å­—ä¸º Mï¼ŒE&lt;Mï¼ˆ26 ä¸ªå­—æ¯é¡ºåºï¼‰ï¼Œæ‰€ä»¥å¾€æ‰¾åˆ°æŒ‡å‘å·¦è¾¹çš„å­èŠ‚ç‚¹ï¼ˆäºŒåˆ†æ³•è§„åˆ™ï¼Œå·¦å°å³å¤§ï¼Œå·¦è¾¹æ”¾å°äºå½“å‰èŠ‚ç‚¹å€¼çš„å­èŠ‚ç‚¹ã€å³è¾¹æ”¾å¤§äºå½“å‰èŠ‚ç‚¹å€¼çš„å­èŠ‚ç‚¹ï¼‰ï¼› ï¼ˆ2ï¼‰æ‹¿åˆ°å…³é”®å­— D å’Œ Gï¼ŒD&lt;E&lt;G æ‰€ä»¥ç›´æ¥æ‰¾åˆ° D å’Œ G ä¸­é—´çš„èŠ‚ç‚¹ï¼› ï¼ˆ3ï¼‰æ‹¿åˆ° E å’Œ Fï¼Œå› ä¸º E&#x3D;E æ‰€ä»¥ç›´æ¥è¿”å›å…³é”®å­—å’ŒæŒ‡é’ˆä¿¡æ¯ï¼ˆå¦‚æœæ ‘ç»“æ„é‡Œé¢æ²¡æœ‰åŒ…å«æ‰€è¦æŸ¥æ‰¾çš„èŠ‚ç‚¹åˆ™è¿”å› nullï¼‰ï¼› B æ ‘çš„æ’å…¥å®šä¹‰ä¸€ä¸ª 5 é˜¶æ ‘ï¼ˆå¹³è¡¡ 5 è·¯æŸ¥æ‰¾æ ‘;ï¼‰ï¼Œç°åœ¨æˆ‘ä»¬è¦æŠŠ 3ã€8ã€31ã€11ã€23ã€29ã€50ã€28 è¿™äº›æ•°å­—æ„å»ºå‡ºä¸€ä¸ª 5 é˜¶æ ‘å‡ºæ¥; ï¼ˆ1ï¼‰èŠ‚ç‚¹æ‹†åˆ†è§„åˆ™ï¼šå½“å‰æ˜¯è¦ç»„æˆä¸€ä¸ª 5 è·¯æŸ¥æ‰¾æ ‘ï¼Œé‚£ä¹ˆæ­¤æ—¶ m&#x3D;5,å…³é”®å­—æ•°å¿…é¡»&lt;&#x3D;5-1ï¼ˆè¿™é‡Œå…³é”®å­—æ•°&gt;4 å°±è¦è¿›è¡ŒèŠ‚ç‚¹æ‹†åˆ†ï¼‰ï¼› ï¼ˆ2ï¼‰æ’åºè§„åˆ™ï¼šæ»¡è¶³èŠ‚ç‚¹æœ¬èº«æ¯”å·¦è¾¹èŠ‚ç‚¹å¤§ï¼Œæ¯”å³è¾¹èŠ‚ç‚¹å°çš„æ’åºè§„åˆ™; å…ˆæ’å…¥ 3ã€8ã€31ã€11 å†æ’å…¥ 23ã€29 å†æ’å…¥ 50ã€28 B æ ‘çš„åˆ é™¤ ï¼ˆ1ï¼‰èŠ‚ç‚¹åˆå¹¶è§„åˆ™ï¼šå½“å‰æ˜¯è¦ç»„æˆä¸€ä¸ª 5 è·¯æŸ¥æ‰¾æ ‘ï¼Œé‚£ä¹ˆæ­¤æ—¶ m&#x3D;5,å…³é”®å­—æ•°å¿…é¡»å¤§äºç­‰äº ceilï¼ˆ5&#x2F;2ï¼‰ï¼ˆè¿™é‡Œå…³é”®å­—æ•°&lt;2 å°±è¦è¿›è¡ŒèŠ‚ç‚¹åˆå¹¶ï¼‰ï¼› ï¼ˆ2ï¼‰æ»¡è¶³èŠ‚ç‚¹æœ¬èº«æ¯”å·¦è¾¹èŠ‚ç‚¹å¤§ï¼Œæ¯”å³è¾¹èŠ‚ç‚¹å°çš„æ’åºè§„åˆ™; ï¼ˆ3ï¼‰å…³é”®å­—æ•°å°äºäºŒæ—¶å…ˆä»å­èŠ‚ç‚¹å–ï¼Œå­èŠ‚ç‚¹æ²¡æœ‰ç¬¦åˆæ¡ä»¶æ—¶å°±å‘å‘çˆ¶èŠ‚ç‚¹å–ï¼Œå–ä¸­é—´å€¼å¾€çˆ¶èŠ‚ç‚¹æ”¾ï¼› 2ã€B+ æ ‘æ¦‚å¿µB+ æ ‘æ˜¯ B æ ‘çš„ä¸€ä¸ªå‡çº§ç‰ˆï¼Œç›¸å¯¹äº B æ ‘æ¥è¯´ B+ æ ‘æ›´å……åˆ†çš„åˆ©ç”¨äº†èŠ‚ç‚¹çš„ç©ºé—´ï¼Œè®©æŸ¥è¯¢é€Ÿåº¦æ›´åŠ ç¨³å®šï¼Œå…¶é€Ÿåº¦å®Œå…¨æ¥è¿‘äºäºŒåˆ†æ³•æŸ¥æ‰¾ã€‚ä¸ºä»€ä¹ˆè¯´ B+ æ ‘æŸ¥æ‰¾çš„æ•ˆç‡è¦æ¯” B æ ‘æ›´é«˜ã€æ›´ç¨³å®šï¼›æˆ‘ä»¬å…ˆçœ‹çœ‹ä¸¤è€…çš„åŒºåˆ« ï¼ˆ1ï¼‰B+ è·Ÿ B æ ‘ä¸åŒ B+ æ ‘çš„éå¶å­èŠ‚ç‚¹ä¸ä¿å­˜å…³é”®å­—è®°å½•çš„æŒ‡é’ˆï¼Œåªè¿›è¡Œæ•°æ®ç´¢å¼•ï¼Œè¿™æ ·ä½¿å¾— B+ æ ‘æ¯ä¸ªéå¶å­èŠ‚ç‚¹æ‰€èƒ½ä¿å­˜çš„å…³é”®å­—å¤§å¤§å¢åŠ ï¼› ï¼ˆ2ï¼‰B+ æ ‘å¶å­èŠ‚ç‚¹ä¿å­˜äº†çˆ¶èŠ‚ç‚¹çš„æ‰€æœ‰å…³é”®å­—è®°å½•çš„æŒ‡é’ˆï¼Œæ‰€æœ‰æ•°æ®åœ°å€å¿…é¡»è¦åˆ°å¶å­èŠ‚ç‚¹æ‰èƒ½è·å–åˆ°ã€‚æ‰€ä»¥æ¯æ¬¡æ•°æ®æŸ¥è¯¢çš„æ¬¡æ•°éƒ½ä¸€æ ·ï¼› ï¼ˆ3ï¼‰B+ æ ‘å¶å­èŠ‚ç‚¹çš„å…³é”®å­—ä»å°åˆ°å¤§æœ‰åºæ’åˆ—ï¼Œå·¦è¾¹ç»“å°¾æ•°æ®éƒ½ä¼šä¿å­˜å³è¾¹èŠ‚ç‚¹å¼€å§‹æ•°æ®çš„æŒ‡é’ˆã€‚ ï¼ˆ4ï¼‰éå¶å­èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ•°&#x3D;å…³é”®å­—æ•°ï¼ˆæ¥æºç™¾åº¦ç™¾ç§‘ï¼‰ï¼ˆæ ¹æ®å„ç§èµ„æ–™è¿™é‡Œæœ‰ä¸¤ç§ç®—æ³•çš„å®ç°æ–¹å¼ï¼Œå¦ä¸€ç§ä¸ºéå¶èŠ‚ç‚¹çš„å…³é”®å­—æ•°&#x3D;å­èŠ‚ç‚¹æ•° -1ï¼ˆæ¥æºç»´åŸºç™¾ç§‘)ï¼Œè™½ç„¶ä»–ä»¬æ•°æ®æ’åˆ—ç»“æ„ä¸ä¸€æ ·ï¼Œä½†å…¶åŸç†è¿˜æ˜¯ä¸€æ ·çš„ Mysql çš„ B+ æ ‘æ˜¯ç”¨ç¬¬ä¸€ç§æ–¹å¼å®ç°ï¼‰; ç‰¹ç‚¹1ã€B+æ ‘çš„å±‚çº§æ›´å°‘ï¼šç›¸è¾ƒäº B æ ‘ B+ æ¯ä¸ªéå¶å­èŠ‚ç‚¹å­˜å‚¨çš„å…³é”®å­—æ•°æ›´å¤šï¼Œæ ‘çš„å±‚çº§æ›´å°‘æ‰€ä»¥æŸ¥è¯¢æ•°æ®æ›´å¿«ï¼› 2ã€B+æ ‘æŸ¥è¯¢é€Ÿåº¦æ›´ç¨³å®šï¼šB+ æ‰€æœ‰å…³é”®å­—æ•°æ®åœ°å€éƒ½å­˜åœ¨å¶å­èŠ‚ç‚¹ä¸Šï¼Œæ‰€ä»¥æ¯æ¬¡æŸ¥æ‰¾çš„æ¬¡æ•°éƒ½ç›¸åŒæ‰€ä»¥æŸ¥è¯¢é€Ÿåº¦è¦æ¯” B æ ‘æ›´ç¨³å®š; 3ã€B+æ ‘å¤©ç„¶å…·å¤‡æ’åºåŠŸèƒ½ï¼šB+ æ ‘æ‰€æœ‰çš„å¶å­èŠ‚ç‚¹æ•°æ®æ„æˆäº†ä¸€ä¸ªæœ‰åºé“¾è¡¨ï¼Œåœ¨æŸ¥è¯¢å¤§å°åŒºé—´çš„æ•°æ®æ—¶å€™æ›´æ–¹ä¾¿ï¼Œæ•°æ®ç´§å¯†æ€§å¾ˆé«˜ï¼Œç¼“å­˜çš„å‘½ä¸­ç‡ä¹Ÿä¼šæ¯” B æ ‘é«˜ã€‚ 4ã€B+æ ‘å…¨èŠ‚ç‚¹éå†æ›´å¿«ï¼šB+ æ ‘éå†æ•´æ£µæ ‘åªéœ€è¦éå†æ‰€æœ‰çš„å¶å­èŠ‚ç‚¹å³å¯ï¼Œï¼Œè€Œä¸éœ€è¦åƒ B æ ‘ä¸€æ ·éœ€è¦å¯¹æ¯ä¸€å±‚è¿›è¡Œéå†ï¼Œè¿™æœ‰åˆ©äºæ•°æ®åº“åšå…¨è¡¨æ‰«æã€‚ B æ ‘ç›¸å¯¹äºB+ æ ‘çš„ä¼˜ç‚¹æ˜¯ï¼Œå¦‚æœç»å¸¸è®¿é—®çš„æ•°æ®ç¦»æ ¹èŠ‚ç‚¹å¾ˆè¿‘ï¼Œè€ŒB æ ‘çš„éå¶å­èŠ‚ç‚¹æœ¬èº«å­˜æœ‰å…³é”®å­—å…¶æ•°æ®çš„åœ°å€ï¼Œæ‰€ä»¥è¿™ç§æ•°æ®æ£€ç´¢çš„æ—¶å€™ä¼šè¦æ¯”B+ æ ‘å¿«ã€‚ æ€»ç»“ç›¸åŒæ€æƒ³å’Œç­–ç•¥ä»å¹³è¡¡äºŒå‰æ ‘ã€B æ ‘ã€B+ æ ‘ã€B* æ ‘æ€»ä½“æ¥çœ‹å®ƒä»¬çš„è´¯å½»çš„æ€æƒ³æ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯é‡‡ç”¨äºŒåˆ†æ³•å’Œæ•°æ®å¹³è¡¡ç­–ç•¥æ¥æå‡æŸ¥æ‰¾æ•°æ®çš„é€Ÿåº¦ï¼› ä¸åŒçš„æ–¹å¼çš„ç£ç›˜ç©ºé—´åˆ©ç”¨ä¸åŒç‚¹æ˜¯ä»–ä»¬ä¸€ä¸ªä¸€ä¸ªåœ¨æ¼”å˜çš„è¿‡ç¨‹ä¸­é€šè¿‡ IO ä»ç£ç›˜è¯»å–æ•°æ®çš„åŸç†è¿›è¡Œä¸€æ­¥æ­¥çš„æ¼”å˜ï¼Œæ¯ä¸€æ¬¡æ¼”å˜éƒ½æ˜¯ä¸ºäº†è®©èŠ‚ç‚¹çš„ç©ºé—´æ›´åˆç†çš„è¿ç”¨èµ·æ¥ï¼Œä»è€Œä½¿æ ‘çš„å±‚çº§å‡å°‘è¾¾åˆ°å¿«é€ŸæŸ¥æ‰¾æ•°æ®çš„ç›®çš„ï¼›","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Data Structure","slug":"Computer-Basics/Data-Structure","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Data-Structure/"}],"tags":[{"name":"Tree","slug":"Tree","permalink":"http://blog.sukiu.top/tags/Tree/"}]},{"title":"æ•°æ®åº“","slug":"Database-Introduction","date":"2021-11-27T01:58:00.000Z","updated":"2021-11-27T01:58:00.000Z","comments":true,"path":"Database/Database-Introduction/","link":"","permalink":"http://blog.sukiu.top/Database/Database-Introduction/","excerpt":"æ•°æ®åº“ï¼ˆDatabaseï¼‰ æ˜¯ä¿å­˜æœ‰ç»„ç»‡çš„æ•°æ®çš„å®¹å™¨ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªæ–‡ä»¶æˆ–ä¸€ç»„æ–‡ä»¶ï¼‰ï¼Œæ˜¯é€šè¿‡ æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDataBaseManagement Systemï¼ŒDBMSï¼‰ åˆ›å»ºå’Œæ“çºµçš„å®¹å™¨ã€‚DBMS çš„ä¸»è¦ç›®æ ‡æ˜¯æä¾›ä¸€ç§å¯ä»¥æ–¹ä¾¿ã€é«˜æ•ˆåœ°å­˜å–æ•°æ®åº“ä¿¡æ¯çš„é€”å¾„ã€‚","text":"æ•°æ®åº“ï¼ˆDatabaseï¼‰ æ˜¯ä¿å­˜æœ‰ç»„ç»‡çš„æ•°æ®çš„å®¹å™¨ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªæ–‡ä»¶æˆ–ä¸€ç»„æ–‡ä»¶ï¼‰ï¼Œæ˜¯é€šè¿‡ æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDataBaseManagement Systemï¼ŒDBMSï¼‰ åˆ›å»ºå’Œæ“çºµçš„å®¹å™¨ã€‚DBMS çš„ä¸»è¦ç›®æ ‡æ˜¯æä¾›ä¸€ç§å¯ä»¥æ–¹ä¾¿ã€é«˜æ•ˆåœ°å­˜å–æ•°æ®åº“ä¿¡æ¯çš„é€”å¾„ã€‚ æ¦‚å¿µæ•°æ®åº“æœ‰ä¸¤ç§ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ å…³ç³»å‹æ•°æ®åº“ å’Œ éå…³ç³»å‹æ•°æ®åº“ã€‚ æ•°æ®åº“ç±»å‹ å®šä¹‰ ä¼˜ç‚¹ ç¼ºç‚¹ å¸¸è§ å…³ç³»å‹æ•°æ®åº“ å»ºç«‹åœ¨å…³ç³»æ¨¡å‹åŸºç¡€ä¸Šï¼Œç”±å¤šå¼ èƒ½äº’ç›¸è¿æ¥çš„ è¡¨ ç»„æˆçš„æ•°æ®åº“ ä½¿ç”¨è¡¨ç»“æ„ï¼Œæ ¼å¼ä¸€è‡´ï¼Œæ˜“äºç»´æŠ¤ï¼› ä½¿ç”¨ SQL è¯­å¥ï¼Œå¯ç”¨äºå¤æ‚æŸ¥è¯¢ï¼› æ•°æ®å­˜å‚¨åœ¨ç£ç›˜ä¸­ï¼Œå®‰å…¨æ€§é«˜ è¯»å†™æ€§èƒ½æ¯”è¾ƒå·®ï¼› å»ºç«‹åœ¨å…³ç³»æ¨¡å‹ä¸Šï¼Œä¸å¯é¿å…ç©ºé—´æµªè´¹ï¼› å›ºå®šçš„è¡¨ç»“æ„ï¼Œçµæ´»åº¦è¾ƒä½ MySQLï¼ŒMicrosoft SQL Serverï¼ŒOracleï¼ŒPostgreSQL ç­‰ éå…³ç³»å‹æ•°æ®åº“ éå…³ç³»å‹æ•°æ®åº“åˆè¢«ç§°ä¸º NoSQLï¼ˆNot Only SQL )ï¼Œé€šå¸¸æŒ‡æ•°æ®ä»¥ å¯¹è±¡ çš„å½¢å¼å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œè€Œå¯¹è±¡ä¹‹é—´çš„å…³ç³»é€šè¿‡æ¯ä¸ªå¯¹è±¡è‡ªèº«çš„å±æ€§æ¥å†³å®šã€‚ å­˜å‚¨æ•°æ®çš„æ ¼å¼å¯ä»¥æ˜¯ key-value ã€æ–‡æ¡£ã€å›¾ç‰‡ç­‰å½¢å¼ï¼Œåº”ç”¨åœºæ™¯æ›´å¹¿æ³›ï¼› å¯è½»æ¾è¿›è¡Œæµ·é‡æ•°æ®çš„ç»´æŠ¤å’Œå¤„ç†ï¼› å…·æœ‰å¯æ‰©å±•ã€é«˜å¹¶å‘ã€é«˜ç¨³å®šæ€§ã€æˆæœ¬ä½çš„ä¼˜åŠ¿ï¼› å¯ä»¥å®ç°æ•°æ®çš„åˆ†å¸ƒå¼å¤„ç† ä¸æä¾› SQL æ”¯æŒï¼› æ— äº‹åŠ¡å¤„ç†ï¼Œæ— æ³•ä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œå®‰å…¨æ€§ï¼› åŠŸèƒ½æ²¡æœ‰å…³ç³»å‹æ•°æ®åº“å®Œå–„ Neo4jï¼ŒRedisï¼ŒMongoDB ç­‰ SQL æ˜¯ ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆStructured Query Languageï¼‰ çš„ç¼©å†™ï¼Œæ˜¯ä¸€ç§æ•°æ®åº“æŸ¥è¯¢è¯­è¨€ï¼Œç”¨äºå­˜å–æ•°æ®ã€æŸ¥è¯¢ã€æ›´æ–°å’Œç®¡ç†å…³ç³»æ•°æ®åº“ç³»ç»Ÿã€‚ MySQL æ˜¯ä¸€ä¸ª å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆRDBMSï¼‰ï¼Œä½¿ç”¨ SQL æ‰§è¡Œæ‰€æœ‰æ•°æ®åº“æ“ä½œã€‚ å‡½æ•°ä¾èµ– éƒ¨åˆ†ä¾èµ–ï¼šAB&#x3D;&gt;Cï¼ŒA&#x3D;&gt;Cï¼ŒB&#x3D;&gt;Cï¼Œé‚£ä¹ˆ C éƒ¨åˆ†ä¾èµ–äº AB å®Œå…¨ä¾èµ–ï¼šAB&#x3D;&gt;Cï¼ŒAã€B ä¸èƒ½å•ç‹¬&#x3D;&gt;Cï¼Œé‚£ä¹ˆ C å®Œå…¨ä¾èµ–äº AB ä¼ é€’ä¾èµ–ï¼šA&#x3D;&gt;Bï¼ŒB&#x3D;&gt;Cï¼Œé‚£ä¹ˆ C ä¼ é€’ä¾èµ–äº A èŒƒå¼æ•°æ®åº“èŒƒå¼æ˜¯è®¾è®¡æ•°æ®åº“æ—¶ï¼Œéœ€è¦éµå¾ªçš„ä¸€äº›è§„èŒƒã€‚å„ç§èŒƒå¼æ˜¯æ¡ä»¶é€’å¢çš„è”ç³»ï¼Œè¶Šé«˜çš„èŒƒå¼æ•°æ®åº“å†—ä½™è¶Šå°ã€‚ å¸¸ç”¨çš„æ•°æ®åº“ä¸‰å¤§èŒƒå¼ä¸ºï¼š ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ï¼šæ¯ä¸ªåˆ—ï¼ˆå±æ€§ï¼‰éƒ½ä¸å¯ä»¥å†æ‹†åˆ†ï¼Œå¼ºè°ƒçš„æ˜¯åˆ—çš„åŸå­æ€§ï¼ˆä¸å¯åˆ†å‰²ï¼‰ï¼ˆå±æ€§ä¸èƒ½æœ‰å¤šä¸ªå€¼æˆ–è€…ä¸èƒ½æœ‰é‡å¤çš„å±æ€§ï¼‰ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç¬¬ä¸€èŒƒå¼å°±æ˜¯æ— é‡å¤çš„åˆ—ã€‚å…³ç³»æ¨¡å¼çš„åŸºæœ¬è¦æ±‚ ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰ï¼šåœ¨ç¬¬ä¸€èŒƒå¼çš„åŸºç¡€ä¸Šï¼Œä¸€ä¸ªè¡¨å¿…é¡»æœ‰ä¸€ä¸ªä¸»é”®ï¼Œéä¸»é”®åˆ— å®Œå…¨ä¾èµ– äºä¸»é”®ï¼Œè€Œä¸èƒ½æ˜¯ä¾èµ–äºä¸»é”®çš„ä¸€éƒ¨åˆ†ã€‚æ¶ˆé™¤éƒ¨åˆ†ä¾èµ– ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰ï¼šåœ¨ç¬¬äºŒèŒƒå¼çš„åŸºç¡€ä¸Šï¼Œéä¸»é”®åˆ—åªä¾èµ–ï¼ˆç›´æ¥ä¾èµ–ï¼Œå³ä¸å­˜åœ¨ä¼ é€’ä¾èµ–ï¼‰äºä¸»é”®ï¼Œä¸ä¾èµ–äºå…¶ä»–éä¸»é”®ã€‚æ¶ˆé™¤ä¼ é€’ä¾èµ– ç´¢å¼•ç´¢å¼•æ˜¯ä¸€ç§ æ•°æ®ç»“æ„ã€‚æ•°æ®åº“ç´¢å¼•æ˜¯ DBMS ä¸­ä¸€ä¸ª æ’åºçš„æ•°æ®ç»“æ„ï¼Œä»¥ ååŠ©å¿«é€ŸæŸ¥è¯¢ã€æ›´æ–° æ•°æ®åº“è¡¨ä¸­æ•°æ®ã€‚ ç´¢å¼•çš„å®ç°é€šå¸¸ä½¿ç”¨ B æ ‘ä»¥åŠå˜ç§ B+ æ ‘ã€‚ ä»¥æ“ä½œç³»ç»Ÿçš„è§‚ç‚¹ï¼Œç´¢å¼•å°±ç›¸å½“äºç›®å½•ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿æ•°æ®å†…å®¹æŸ¥æ‰¾ï¼Œæœ¬èº«ä¹Ÿå ç”¨ç‰©ç†ç©ºé—´ã€‚ ä¼˜ç‚¹ ç¼ºç‚¹ é€šè¿‡åˆ›å»º å”¯ä¸€æ€§ç´¢å¼• ï¼Œå¯ä»¥ä¿è¯æ•°æ®åº“è¡¨ä¸­æ¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ€§ï¼› å¯ä»¥åŠ å¿«æ•°æ®çš„ æ£€ç´¢é€Ÿåº¦ ï¼Œè¿™ä¹Ÿæ˜¯åˆ›å»ºç´¢å¼•çš„ä¸»è¦åŸå› ï¼› å¯ä»¥åŠ é€Ÿè¡¨å’Œè¡¨ä¹‹é—´çš„è¿æ¥ï¼Œç‰¹åˆ«æ˜¯åœ¨å®ç° æ•°æ®çš„å‚è€ƒå®Œæ•´æ€§ æ–¹é¢ç‰¹åˆ«æœ‰æ„ä¹‰ï¼› é€šè¿‡ä½¿ç”¨ç´¢å¼•ï¼Œå¯ä»¥åœ¨æŸ¥è¯¢çš„è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ ä¼˜åŒ–éšè—å™¨ ï¼Œæé«˜ç³»ç»Ÿæ€§èƒ½ã€‚ æ—¶é—´ä¸Šï¼Œåˆ›å»ºå’Œç»´æŠ¤ç´¢å¼•éƒ½è¦è€—è´¹æ—¶é—´ï¼Œè¿™ç§æ—¶é—´éšç€æ•°æ®é‡çš„å¢åŠ è€Œå¢åŠ ï¼Œå…·ä½“åœ°ï¼Œå½“å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢åŠ ã€åˆ é™¤å’Œä¿®æ”¹çš„æ—¶å€™ï¼Œç´¢å¼•ä¹Ÿè¦åŠ¨æ€çš„ç»´æŠ¤ï¼Œè¿™æ ·å°±é™ä½äº†æ•°æ®çš„ç»´æŠ¤é€Ÿåº¦ï¼› ç©ºé—´ä¸Šï¼Œç´¢å¼•éœ€è¦å  ç‰©ç†ç©ºé—´ ï¼Œé™¤äº†æ•°æ®è¡¨å æ•°æ®ç©ºé—´ä¹‹å¤–ï¼Œæ¯ä¸€ä¸ªç´¢å¼•è¿˜è¦å ä¸€å®šçš„ç‰©ç†ç©ºé—´ï¼Œå¦‚æœè¦å»ºç«‹èšç°‡ç´¢å¼•ï¼Œé‚£ä¹ˆéœ€è¦çš„ç©ºé—´å°±ä¼šæ›´å¤§ã€‚ ç´¢å¼•åˆ†ç±»æ•°æ®åº“ç´¢å¼•æ ¹æ®ç»“æ„åˆ†ç±»ï¼Œä¸»è¦æœ‰ B æ ‘ç´¢å¼•ï¼ˆä½¿ç”¨æœ€é¢‘ç¹ï¼‰ã€Hash ç´¢å¼• å’Œ ä½å›¾ç´¢å¼• ä¸‰ç§ã€‚ å…³äº B æ ‘å¯ä»¥å‚è€ƒï¼šB Tree ä½¿ç”¨ B+ æ ‘çš„ä¼˜ç‚¹ï¼š ç”±äº B+ æ ‘çš„å†…éƒ¨ç»“ç‚¹åªå­˜æ”¾é”®ï¼Œä¸å­˜æ”¾å€¼ï¼Œå› æ­¤ï¼Œä¸€æ¬¡è¯»å–ï¼Œå¯ä»¥åœ¨åŒä¸€å†…å­˜é¡µä¸­è·å–æ›´å¤šçš„é”®ï¼Œæœ‰åˆ©äºæ›´å¿«åœ°ç¼©å°æŸ¥æ‰¾èŒƒå›´ã€‚ B+ æ ‘çš„å¶ç»“ç‚¹ç”±ä¸€æ¡é“¾ç›¸è¿ï¼Œå› æ­¤å½“éœ€è¦è¿›è¡Œä¸€æ¬¡ å…¨æ•°æ®éå† çš„æ—¶å€™ï¼ŒB+ æ ‘åªéœ€è¦ä½¿ç”¨ O(logN) æ—¶é—´æ‰¾åˆ°æœ€å°ç»“ç‚¹ï¼Œç„¶åé€šè¿‡é“¾è¿›è¡Œ O(N) çš„é¡ºåºéå†å³å¯ï¼›æˆ–è€…ï¼Œåœ¨æ‰¾ å¤§äºæŸä¸ªå…³é”®å­—æˆ–è€…å°äºæŸä¸ªå…³é”®å­—çš„æ•°æ® çš„æ—¶å€™ï¼ŒB+ æ ‘åªéœ€è¦æ‰¾åˆ°è¯¥å…³é”®å­—ç„¶åæ²¿ç€é“¾è¡¨éå†å³å¯ã€‚ Hash ç´¢å¼•å’Œ B+ æ ‘ç´¢å¼•çš„åŒºåˆ«ï¼š Hash ç´¢å¼•è¿›è¡Œç­‰å€¼æŸ¥è¯¢æ›´å¿«ï¼ˆä¸€èˆ¬æƒ…å†µä¸‹ï¼‰ï¼Œä½†æ˜¯å´æ— æ³•è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ï¼› Hash ç´¢å¼•ä¸æ”¯æŒä½¿ç”¨ç´¢å¼•è¿›è¡Œæ’åºï¼› Hash ç´¢å¼•ä¸æ”¯æŒæ¨¡ç³ŠæŸ¥è¯¢ä»¥åŠå¤šåˆ—ç´¢å¼•çš„æœ€å·¦å‰ç¼€åŒ¹é…ï¼ŒåŸç†ä¹Ÿæ˜¯å› ä¸º Hash å‡½æ•°çš„ä¸å¯é¢„æµ‹ï¼› Hash ç´¢å¼•ä»»ä½•æ—¶å€™éƒ½é¿å…ä¸äº†å›è¡¨æŸ¥è¯¢æ•°æ®ï¼Œè€Œ B+ æ ‘åœ¨ç¬¦åˆæŸäº›æ¡ä»¶ï¼ˆèšç°‡ç´¢å¼•ï¼Œè¦†ç›–ç´¢å¼•ç­‰ï¼‰çš„æ—¶å€™å¯ä»¥åªé€šè¿‡ç´¢å¼•å®ŒæˆæŸ¥è¯¢ï¼› Hash ç´¢å¼•è™½ç„¶åœ¨ç­‰å€¼æŸ¥è¯¢ä¸Šè¾ƒå¿«ï¼Œä½†æ˜¯ä¸ç¨³å®šï¼Œæ€§èƒ½ä¸å¯é¢„æµ‹ï¼Œå½“æŸä¸ªé”®å€¼å­˜åœ¨å¤§é‡é‡å¤çš„æ—¶å€™ï¼Œå‘ç”Ÿ Hash ç¢°æ’ï¼Œæ­¤æ—¶æ•ˆç‡å¯èƒ½æå·®ï¼›è€Œ B+ æ ‘çš„æŸ¥è¯¢æ•ˆç‡æ¯”è¾ƒç¨³å®šï¼Œå¯¹äºæ‰€æœ‰çš„æŸ¥è¯¢éƒ½æ˜¯ä»æ ¹ç»“ç‚¹åˆ°å¶å­ç»“ç‚¹ï¼Œä¸”æ ‘çš„é«˜åº¦è¾ƒä½ã€‚ èšç°‡ç´¢å¼•èšç°‡ç´¢å¼•æŒ‡å°† æ•°æ®å­˜å‚¨ å’Œ ç´¢å¼• æ”¾åˆ°ä¸€èµ·ï¼Œæ‰¾åˆ°ç´¢å¼•ä¹Ÿå°±æ‰¾åˆ°äº†æ•°æ®ã€‚ äº‹åŠ¡æ•°æ®åº“çš„ äº‹åŠ¡ï¼ˆTransactionï¼‰æ˜¯ä¸€ç§æœºåˆ¶ã€ä¸€ä¸ªæ“ä½œåºåˆ—ï¼ŒåŒ…å«äº†ä¸€ç»„æ•°æ®åº“æ“ä½œå‘½ä»¤ï¼Œå…¶æ‰§è¡Œçš„ç»“æœå¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ç§ä¸€è‡´æ€§çŠ¶æ€å˜åˆ°å¦ä¸€ç§ä¸€è‡´æ€§çŠ¶æ€ã€‚ äº‹åŠ¡æŠŠæ‰€æœ‰çš„å‘½ä»¤ä½œä¸ºä¸€ä¸ªæ•´ä½“ä¸€èµ·å‘ç³»ç»Ÿæäº¤æˆ–æ’¤é”€æ“ä½œè¯·æ±‚ï¼Œå³è¿™ä¸€ç»„æ•°æ®åº“å‘½ä»¤è¦ä¹ˆéƒ½æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œï¼Œå› æ­¤äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œé€»è¾‘å•å…ƒã€‚ å¦‚æœä»»æ„ä¸€ä¸ªæ“ä½œå¤±è´¥ï¼Œé‚£ä¹ˆæ•´ç»„æ“ä½œå³ä¸ºå¤±è´¥ï¼Œä¼šå›åˆ°æ“ä½œå‰çŠ¶æ€æˆ–è€…æ˜¯ä¸Šä¸€ä¸ªèŠ‚ç‚¹ã€‚ å› æ­¤ï¼Œäº‹åŠ¡æ˜¯ä¿æŒ é€»è¾‘æ•°æ®ä¸€è‡´æ€§ å’Œ å¯æ¢å¤æ€§ çš„é‡è¦åˆ©å™¨ã€‚è€Œé”æ˜¯å®ç°äº‹åŠ¡çš„å…³é”®ï¼Œå¯ä»¥ä¿è¯äº‹åŠ¡çš„å®Œæ•´æ€§å’Œå¹¶å‘æ€§ ç‰¹æ€§äº‹åŠ¡å…·æœ‰ 4 ä¸ªç‰¹æ€§ï¼Œé€šå¸¸ç®€ç§°ä¸º ACIDï¼Œå…³ç³»å‹æ•°æ®åº“ éœ€è¦éµå¾ª ACID è§„åˆ™ã€‚ åŸå­æ€§ï¼ˆAtomicityï¼‰ äº‹åŠ¡æ˜¯æœ€å°çš„æ‰§è¡Œå•ä½ï¼Œä¸å¯åˆ†å‰²çš„ï¼ˆåŸå­çš„ï¼‰ã€‚äº‹åŠ¡çš„åŸå­æ€§ç¡®ä¿åŠ¨ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚ ä»¥é“¶è¡Œè½¬è´¦äº‹åŠ¡ä¸ºä¾‹ï¼š å¦‚æœè¯¥äº‹åŠ¡æäº¤äº†ï¼Œåˆ™è¿™ä¸¤ä¸ªè´¦æˆ·çš„æ•°æ®å°†ä¼šæ›´æ–°ï¼› å¦‚æœç”±äºæŸç§åŸå› ï¼Œäº‹åŠ¡åœ¨æˆåŠŸæ›´æ–°è¿™ä¸¤ä¸ªè´¦æˆ·ä¹‹å‰ç»ˆæ­¢äº†ï¼Œåˆ™ä¸ä¼šæ›´æ–°è¿™ä¸¤ä¸ªè´¦æˆ·çš„ä½™é¢ï¼Œå¹¶ä¸”ä¼š æ’¤é”€ å¯¹ä»»ä½•è´¦æˆ·ä½™é¢çš„ä¿®æ”¹ï¼Œå›åˆ°æ­¤æ“ä½œå‰çŠ¶æ€ï¼Œå³äº‹åŠ¡ä¸èƒ½éƒ¨åˆ†æäº¤ã€‚ ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ å½“äº‹åŠ¡å®Œæˆæ—¶ï¼Œæ•°æ®å¿…é¡»å¤„äºä¸€è‡´çŠ¶æ€ï¼Œå¤šä¸ªäº‹åŠ¡å¯¹åŒä¸€ä¸ªæ•°æ®è¯»å–çš„ç»“æœæ˜¯ç›¸åŒçš„ã€‚ ä»¥é“¶è¡Œè½¬è´¦äº‹åŠ¡äº‹åŠ¡ä¸ºä¾‹ï¼š åœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰ï¼Œæ‰€æœ‰ è´¦æˆ·ä½™é¢çš„æ€»é¢å¤„äºä¸€è‡´çŠ¶æ€ã€‚ åœ¨äº‹åŠ¡è¿›è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªè´¦æˆ·ä½™é¢å‡å°‘äº†ï¼Œè€Œå¦ä¸€ä¸ªè´¦æˆ·ä½™é¢å°šæœªä¿®æ”¹ã€‚ å› æ­¤ï¼Œæ‰€æœ‰è´¦æˆ·ä½™é¢çš„æ€»é¢å¤„äºä¸ä¸€è‡´çŠ¶æ€ã€‚ ä½†æ˜¯å½“äº‹åŠ¡å®Œæˆä»¥åï¼Œè´¦æˆ·ä½™é¢çš„æ€»é¢å†æ¬¡æ¢å¤åˆ°ä¸€è‡´çŠ¶æ€ã€‚ éš”ç¦»æ€§ï¼ˆIsolationï¼‰ å¹¶å‘è®¿é—®æ•°æ®åº“ æ—¶ï¼Œä¸€ä¸ªç”¨æˆ·çš„äº‹åŠ¡ä¸è¢«å…¶ä»–äº‹åŠ¡æ‰€å¹²æ‰°ï¼Œå„ä¸ªäº‹åŠ¡ä¸å¹²æ¶‰å†…éƒ¨çš„æ•°æ®ã€‚ ä¿®æ”¹æ•°æ®çš„äº‹åŠ¡å¯ä»¥åœ¨å¦ä¸€ä¸ªä½¿ç”¨ç›¸åŒæ•°æ®çš„äº‹åŠ¡å¼€å§‹ä¹‹å‰è®¿é—®è¿™äº›æ•°æ®ï¼Œæˆ–è€…åœ¨å¦ä¸€ä¸ªä½¿ç”¨ç›¸åŒæ•°æ®çš„äº‹åŠ¡ç»“æŸä¹‹åè®¿é—®è¿™äº›æ•°æ®ã€‚ æŒä¹…æ€§ï¼ˆDurabilityï¼‰ ä¸€ä¸ªäº‹åŠ¡è¢«æäº¤ä¹‹åï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜æ˜¯æŒä¹…çš„ï¼Œå³ä½¿æ•°æ®åº“å‘ç”Ÿæ•…éšœä¹Ÿä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“ã€‚ å®ç°DBMS é‡‡ç”¨ æ—¥å¿— æ¥ä¿è¯äº‹åŠ¡çš„ åŸå­æ€§ã€ä¸€è‡´æ€§ å’Œ æŒä¹…æ€§ã€‚ æ—¥å¿—è®°å½•äº†äº‹åŠ¡å¯¹æ•°æ®åº“æ‰€åšçš„æ›´æ–°ï¼Œå¦‚æœæŸä¸ªäº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œå°±å¯ä»¥æ ¹æ®æ—¥å¿—ï¼Œæ’¤é”€äº‹åŠ¡å¯¹æ•°æ®åº“å·²åšçš„æ›´æ–°ï¼Œä½¿æ•°æ®åº“é€€å›åˆ°æ‰§è¡Œäº‹åŠ¡å‰çš„åˆå§‹çŠ¶æ€ã€‚ DBMS é‡‡ç”¨ é”æœºåˆ¶ æ¥å®ç°äº‹åŠ¡çš„éš”ç¦»æ€§ã€‚ å½“å¤šä¸ªäº‹åŠ¡åŒæ—¶æ›´æ–°æ•°æ®åº“ä¸­ç›¸åŒçš„æ•°æ®æ—¶ï¼Œåªå…è®¸ æŒæœ‰é”çš„äº‹åŠ¡ èƒ½æ›´æ–°è¯¥æ•°æ®ï¼Œå…¶ä»–äº‹åŠ¡å¿…é¡»ç­‰å¾…ï¼Œç›´åˆ°å‰ä¸€ä¸ªäº‹åŠ¡é‡Šæ”¾äº†é”ï¼Œå…¶ä»–äº‹åŠ¡æ‰æœ‰æœºä¼šæ›´æ–°è¯¥æ•°æ®ã€‚ ç›¸åº”çš„åŸç† åŸå­æ€§ï¼šç”± undo log æ—¥å¿—ä¿è¯ï¼Œå®ƒè®°å½•äº†éœ€è¦å›æ»šçš„æ—¥å¿—ä¿¡æ¯ï¼Œäº‹åŠ¡å›æ»šæ—¶æ’¤é”€å·²ç»æ‰§è¡ŒæˆåŠŸçš„ sql ä¸€è‡´æ€§ï¼šä¸€èˆ¬ç”±ä»£ç å±‚é¢æ¥ä¿è¯ éš”ç¦»æ€§ï¼šç”± MVCC æ¥ä¿è¯ æŒä¹…æ€§ï¼šç”±å†…å­˜ +redo log æ¥ä¿è¯ï¼Œmysql ä¿®æ”¹æ•°æ®åŒæ—¶åœ¨å†…å­˜å’Œ redo log è®°å½•è¿™æ¬¡æ“ä½œï¼Œäº‹åŠ¡æäº¤çš„æ—¶å€™é€šè¿‡ redo log åˆ·ç›˜ï¼Œå®•æœºçš„æ—¶å€™å¯ä»¥ä» redo log æ¢å¤ å†²çª è„è¯»ï¼ˆDirty Readï¼‰ ä¸€ä¸ªäº‹åŠ¡è¯»å–äº†å¦ä¸€ä¸ªäº‹åŠ¡æœªæäº¤çš„æ•°æ®ã€‚ ä¸å¯é‡å¤è¯»ï¼ˆNon-repeatable Readï¼‰ å°±æ˜¯åœ¨ä¸€ä¸ªäº‹åŠ¡èŒƒå›´å†…ï¼Œä¸¤æ¬¡ç›¸åŒçš„æŸ¥è¯¢ä¼šè¿”å›ä¸¤ä¸ªä¸åŒçš„æ•°æ®ï¼Œè¿™æ˜¯å› ä¸ºåœ¨æ­¤é—´éš”å†…æœ‰å…¶ä»–äº‹åŠ¡å¯¹æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ã€‚ å¹»è¯»ï¼ˆPhantom Readï¼‰ å¹»è¯»æ˜¯æŒ‡å½“äº‹åŠ¡ ä¸æ˜¯ç‹¬ç«‹æ‰§è¡Œæ—¶ å‘ç”Ÿçš„ä¸€ç§ç°è±¡ï¼Œä¾‹å¦‚æœ‰ä¸€ä¸ªäº‹åŠ¡å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ï¼Œè¿™ç§ä¿®æ”¹æ¶‰åŠåˆ°è¡¨ä¸­çš„å…¨éƒ¨æ•°æ®è¡Œï¼ŒåŒæ—¶ï¼Œç¬¬ä¸€ä¸ªäº‹åŠ¡ä¹Ÿä¿®æ”¹è¿™ä¸ªè¡¨ä¸­çš„æ•°æ®ï¼Œè¿™ç§ä¿®æ”¹æ˜¯å‘è¡¨ä¸­ æ’å…¥ä¸€è¡Œæ–°æ•°æ®ã€‚é‚£ä¹ˆï¼Œç¬¬ä¸€ä¸ªäº‹åŠ¡çš„ç”¨æˆ·å‘ç°è¡¨ä¸­è¿˜æœ‰æ²¡æœ‰ä¿®æ”¹çš„æ•°æ®è¡Œï¼Œå°±å¥½åƒå‘ç”Ÿäº†å¹»è§‰ä¸€æ ·ã€‚ ä¸¢å¤±æ›´æ–°ï¼ˆLost Updateï¼‰ ä¸¤ä¸ªäº‹åŠ¡åŒæ—¶è¯»å–åŒä¸€æ¡è®°å½•ï¼Œäº‹åŠ¡ A å…ˆä¿®æ”¹è®°å½•ï¼Œäº‹åŠ¡ B ä¹Ÿä¿®æ”¹è®°å½•ï¼ˆB æ˜¯ä¸çŸ¥é“ A ä¿®æ”¹è¿‡ï¼‰ï¼Œå½“ B æäº¤æ•°æ®åï¼Œ å…¶ä¿®æ”¹ç»“æœè¦†ç›–äº† A çš„ä¿®æ”¹ç»“æœï¼Œå¯¼è‡´äº‹åŠ¡ A æ›´æ–°ä¸¢å¤±ã€‚ éš”ç¦»çº§åˆ«SQL æ ‡å‡†å®šä¹‰äº† 4 ç§ä¸åŒçš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼ˆTRANSACTION ISOLATION LEVELï¼‰ï¼Œå³ å¹¶å‘äº‹åŠ¡å¯¹åŒä¸€èµ„æºçš„è¯»å–æ·±åº¦å±‚æ¬¡ã€‚ ç”±ä½åˆ°é«˜ä¾æ¬¡æ˜¯ è¯»å–æœªæäº¤ï¼ˆREAD-UNCOMMITTEDï¼‰ã€è¯»å–å·²æäº¤ï¼ˆREAD-COMMITTEDï¼‰ã€å¯é‡å¤è¯»ï¼ˆREPEATABLE-READï¼‰ã€å¯ä¸²è¡ŒåŒ–ï¼ˆSERIALIZABLEï¼‰ éš”ç¦»çº§åˆ« è¯»æ•°æ®ä¸€è‡´æ€§ è„è¯» ä¸å¯é‡å¤è¯» å¹»è¯» æœªæäº¤ (RU) åªèƒ½ä¿è¯ä¸è¯»å–ç‰©ç†ä¸Šçš„æŸå âˆš âˆš âˆš å·²æäº¤ (RC) è¯­å¥çº§ Ã— âˆš âˆš å¯é‡å¤è¯» (RR) äº‹åŠ¡çº§ Ã— Ã— âˆš ä¸²è¡ŒåŒ– (SR) æœ€é«˜çº§åˆ«ï¼Œäº‹åŠ¡çº§ Ã— Ã— Ã— é”ä»æ•°æ®åº“ç³»ç»Ÿçš„è§’åº¦ï¼Œé”æ¨¡å¼å¯åˆ†ä¸ºä»¥ä¸‹ 6 ç§ç±»å‹ï¼š å…±äº«é”ï¼ˆSï¼‰ï¼šåˆå« ä»–è¯»é”ã€‚ å¯ä»¥å¹¶å‘è¯»å–æ•°æ®ï¼Œä½†ä¸èƒ½ä¿®æ”¹æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´å½“æ•°æ®èµ„æºä¸Šå­˜åœ¨å…±äº«é”æ—¶ï¼Œæ‰€æœ‰çš„äº‹åŠ¡éƒ½ä¸èƒ½å¯¹è¯¥æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œç›´åˆ°æ•°æ®è¯»å–å®Œæˆï¼Œå…±äº«é”é‡Šæ”¾ã€‚ æ’å®ƒé”ï¼ˆXï¼‰ï¼šåˆå« ç‹¬å é”ã€å†™é”ã€‚ å¯¹æ•°æ®èµ„æºè¿›è¡Œå¢åˆ æ”¹æ“ä½œæ—¶ï¼Œä¸å…è®¸å…¶å®ƒäº‹åŠ¡æ“ä½œè¿™å—èµ„æºï¼Œç›´åˆ°æ’å®ƒé”è¢«é‡Šæ”¾ï¼Œä»è€Œé˜²æ­¢åŒæ—¶å¯¹åŒä¸€èµ„æºè¿›è¡Œå¤šé‡æ“ä½œã€‚ æ›´æ–°é”ï¼ˆUï¼‰ï¼š é˜²æ­¢å‡ºç° æ­»é” çš„é”æ¨¡å¼ï¼Œä¸¤ä¸ªäº‹åŠ¡å¯¹ä¸€ä¸ªæ•°æ®èµ„æºè¿›è¡Œå…ˆè¯»å–å†ä¿®æ”¹çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨å…±äº«é”å’Œæ’å®ƒé”æœ‰æ—¶ä¼šå‡ºç°æ­»é”ç°è±¡ï¼Œè€Œä½¿ç”¨æ›´æ–°é”å°±å¯ä»¥é¿å…æ­»é”çš„å‡ºç°ã€‚ èµ„æºçš„æ›´æ–°é”ä¸€æ¬¡åªèƒ½åˆ†é…ç»™ä¸€ä¸ªäº‹åŠ¡ï¼Œå¦‚æœéœ€è¦å¯¹èµ„æºè¿›è¡Œä¿®æ”¹ï¼Œæ›´æ–°é”ä¼šå˜æˆæ’å®ƒé”ï¼Œå¦åˆ™å˜ä¸ºå…±äº«é”ã€‚ æ„å‘é”ï¼š è¡¨ç¤º SQL Server éœ€è¦åœ¨ å±‚æ¬¡ç»“æ„ä¸­çš„æŸäº›åº•å±‚èµ„æºä¸Š è·å–å…±äº«é”æˆ–æ’å®ƒé”ã€‚ ä¾‹å¦‚ï¼Œæ”¾ç½®åœ¨ è¡¨çº§ çš„ å…±äº«æ„å‘é” è¡¨ç¤ºäº‹åŠ¡æ‰“ç®—åœ¨è¡¨ä¸­çš„é¡µæˆ–è¡Œä¸Šæ”¾ç½®å…±äº«é”ã€‚åœ¨è¡¨çº§è®¾ç½®æ„å‘é”å¯é˜²æ­¢å¦ä¸€ä¸ªäº‹åŠ¡éšååœ¨åŒ…å«é‚£ä¸€é¡µçš„è¡¨ä¸Šè·å–æ’å®ƒé”ã€‚ æ„å‘é”å¯ä»¥æé«˜æ€§èƒ½ï¼Œå› ä¸º SQL Server ä»…åœ¨ è¡¨çº§ æ£€æŸ¥æ„å‘é”æ¥ç¡®å®šäº‹åŠ¡æ˜¯å¦å¯ä»¥å®‰å…¨åœ°è·å–è¯¥è¡¨ä¸Šçš„é”ï¼Œè€Œæ— é¡»æ£€æŸ¥è¡¨ä¸­çš„æ¯è¡Œæˆ–æ¯é¡µä¸Šçš„é”ä»¥ç¡®å®šäº‹åŠ¡æ˜¯å¦å¯ä»¥é”å®šæ•´ä¸ªè¡¨ã€‚ æ„å‘é”åŒ…æ‹¬æ„å‘å…±äº« (IS)ã€æ„å‘æ’å®ƒ (IX) ä»¥åŠä¸æ„å‘æ’å®ƒå…±äº« (SIX)ã€‚ æ¶æ„é”ï¼š åœ¨æ‰§è¡Œ ä¾èµ–äºè¡¨æ¶æ„çš„æ“ä½œ æ—¶ä½¿ç”¨ã€‚æ¶æ„é”çš„ç±»å‹ä¸ºï¼šæ¶æ„ä¿®æ”¹ (Sch-M) å’Œæ¶æ„ç¨³å®šæ€§ (Sch-S)ï¼Œæ‰§è¡Œè¡¨çš„æ•°æ®å®šä¹‰è¯­è¨€ ï¼ˆDDLï¼‰æ“ä½œï¼ˆä¾‹å¦‚æ·»åŠ åˆ—æˆ–é™¤å»è¡¨ï¼‰æ—¶ä½¿ç”¨æ¶æ„ä¿®æ”¹é”ï¼Œå½“ç¼–è¯‘æŸ¥è¯¢æ—¶ï¼Œä½¿ç”¨æ¶æ„ç¨³å®šæ€§é”ã€‚ å¤§å®¹é‡æ›´æ–°é”ï¼ˆBUï¼‰ï¼š å‘è¡¨ä¸­å¤§å®¹é‡å¤åˆ¶æ•°æ®å¹¶æŒ‡å®šäº† TABLOCK æç¤ºæ—¶ä½¿ç”¨ã€‚ å¤§å®¹é‡æ›´æ–°é”å…è®¸è¿›ç¨‹å°†æ•°æ®å¹¶å‘åœ°å¤§å®¹é‡å¤åˆ¶åˆ°åŒä¸€è¡¨ï¼ŒåŒæ—¶é˜²æ­¢å…¶å®ƒä¸è¿›è¡Œå¤§å®¹é‡å¤åˆ¶æ•°æ®çš„è¿›ç¨‹è®¿é—®è¯¥è¡¨ã€‚ å…³ç³» åœ¨ è¯»å–æœªæäº¤ éš”ç¦»çº§åˆ«ä¸‹ï¼Œè¯»å–æ•°æ®ä¸éœ€è¦åŠ  å…±äº«é”ï¼Œè¿™æ ·å°±ä¸ä¼šè·Ÿè¢«ä¿®æ”¹çš„æ•°æ®ä¸Šçš„ æ’ä»–é” å†²çªï¼› åœ¨ è¯»å–å·²æäº¤ éš”ç¦»çº§åˆ«ä¸‹ï¼Œè¯»æ“ä½œéœ€è¦åŠ  å…±äº«é”ï¼Œä½†æ˜¯åœ¨è¯­å¥æ‰§è¡Œå®Œä»¥åé‡Šæ”¾å…±äº«é”ï¼› åœ¨ å¯é‡å¤è¯» éš”ç¦»çº§åˆ«ä¸‹ï¼Œè¯»æ“ä½œéœ€è¦åŠ  å…±äº«é”ï¼Œä½†æ˜¯åœ¨äº‹åŠ¡æäº¤ä¹‹å‰å¹¶ä¸é‡Šæ”¾å…±äº«é”ï¼Œä¹Ÿå°±æ˜¯å¿…é¡»ç­‰å¾…äº‹åŠ¡æ‰§è¡Œå®Œæ¯•ä»¥åæ‰é‡Šæ”¾å…±äº«é”ï¼› å¯ä¸²è¡ŒåŒ– æ˜¯é™åˆ¶æ€§æœ€å¼ºçš„éš”ç¦»çº§åˆ«ï¼Œå› ä¸ºè¯¥çº§åˆ« é”å®šæ•´ä¸ªèŒƒå›´çš„é”®ï¼Œå¹¶ä¸€ç›´æŒæœ‰é”ï¼Œç›´åˆ°äº‹åŠ¡å®Œæˆã€‚ æ­»é”æ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹åŠ¡åœ¨åŒä¸€èµ„æºä¸Šç›¸äº’å ç”¨ï¼Œå¹¶è¯·æ±‚é”å®šå¯¹æ–¹çš„èµ„æºï¼Œä»è€Œå¯¼è‡´æ¶æ€§å¾ªç¯çš„ç°è±¡ã€‚ å¸¸è§çš„è§£å†³æ­»é”çš„æ–¹æ³• å¦‚æœä¸åŒç¨‹åºå¹¶å‘å­˜å–å¤šä¸ªè¡¨ï¼Œå°½é‡çº¦å®š ä»¥ç›¸åŒçš„é¡ºåºè®¿é—®è¡¨ï¼Œå¯ä»¥å¤§å¤§é™ä½æ­»é”æœºä¼šï¼› åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œå°½å¯èƒ½åšåˆ° ä¸€æ¬¡é”å®šæ‰€éœ€è¦çš„æ‰€æœ‰èµ„æºï¼Œå‡å°‘æ­»é”äº§ç”Ÿæ¦‚ç‡ï¼› å¯¹äºéå¸¸å®¹æ˜“äº§ç”Ÿæ­»é”çš„ä¸šåŠ¡éƒ¨åˆ†ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨ å‡çº§é”å®šé¢—ç²’åº¦ï¼Œé€šè¿‡ è¡¨çº§é” å®šæ¥å‡å°‘æ­»é”äº§ç”Ÿçš„æ¦‚ç‡ã€‚ ä¹&#x2F;æ‚²è§‚é”DBMS ä¸­çš„ å¹¶å‘æ§åˆ¶ çš„ä»»åŠ¡æ˜¯ç¡®ä¿åœ¨ å¤šä¸ªäº‹åŠ¡åŒæ—¶å­˜å–æ•°æ®åº“ä¸­åŒä¸€æ•°æ® æ—¶ä¸ç ´åäº‹åŠ¡çš„éš”ç¦»æ€§å’Œç»Ÿä¸€æ€§ä»¥åŠæ•°æ®åº“çš„ç»Ÿä¸€æ€§ã€‚ä¹è§‚å¹¶å‘æ§åˆ¶ï¼ˆä¹è§‚é”ï¼‰å’Œæ‚²è§‚å¹¶å‘æ§åˆ¶ï¼ˆæ‚²è§‚é”ï¼‰æ˜¯å¹¶å‘æ§åˆ¶ä¸»è¦é‡‡ç”¨çš„æŠ€æœ¯æ‰‹æ®µã€‚ æ‚²è§‚é”ï¼šå‡å®šä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œå±è”½ä¸€åˆ‡å¯èƒ½è¿åæ•°æ®å®Œæ•´æ€§çš„æ“ä½œã€‚åœ¨æŸ¥è¯¢å®Œæ•°æ®çš„æ—¶å€™å°±æŠŠäº‹åŠ¡é”èµ·æ¥ï¼Œç›´åˆ°æäº¤äº‹åŠ¡ã€‚è¿™å¯¹äºé•¿äº‹åŠ¡æ¥è®²ï¼Œå¯èƒ½ä¼šä¸¥é‡å½±å“ç³»ç»Ÿçš„å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚å®ç°æ–¹å¼ï¼šä½¿ç”¨æ•°æ®åº“ä¸­çš„é”æœºåˆ¶ã€‚ä¹è§‚é”ï¼šå‡è®¾ä¸ä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œåªåœ¨æäº¤æ“ä½œæ—¶æ£€æŸ¥æ˜¯å¦è¿åæ•°æ®å®Œæ•´æ€§ã€‚ä¹è§‚é”é€‚ç”¨äº è¯»å¤šå†™å°‘ çš„åº”ç”¨åœºæ™¯ï¼Œè¿™æ ·å¯ä»¥æé«˜ååé‡ã€‚å®ç°æ–¹å¼ï¼šä¸€èˆ¬ä¼šä½¿ç”¨ç‰ˆæœ¬å·æœºåˆ¶æˆ– CAS ç®—æ³•å®ç°ã€‚","categories":[{"name":"Database","slug":"Database","permalink":"http://blog.sukiu.top/categories/Database/"}],"tags":[{"name":"Database","slug":"Database","permalink":"http://blog.sukiu.top/tags/Database/"}]},{"title":"ä½è¿ç®—","slug":"Bit-Operation","date":"2021-11-25T11:12:00.000Z","updated":"2021-11-25T11:12:00.000Z","comments":true,"path":"Computer-Basics/Algorithm/Bit-Operation/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Algorithm/Bit-Operation/","excerpt":"è®¡ç®—æœºé‡‡ç”¨çš„æ˜¯äºŒè¿›åˆ¶ï¼ŒäºŒè¿›åˆ¶åŒ…æ‹¬ä¸¤ä¸ªæ•°ç ï¼š0,1ã€‚åœ¨è®¡ç®—æœºçš„åº•å±‚ï¼Œä¸€åˆ‡è¿ç®—éƒ½æ˜¯åŸºäºä½è¿ç®—å®ç°çš„ã€‚ ä½è¿ç®—å…±æœ‰ 6 ç§ï¼Œåˆ†åˆ«æ˜¯ï¼šä¸ã€æˆ–ã€å¼‚æˆ–ã€å–åã€å·¦ç§»å’Œå³ç§»ï¼Œå…¶ä¸­å·¦ç§»å’Œå³ç§»ç»Ÿç§°ç§»ä½è¿ç®—ï¼Œç§»ä½è¿ç®—åˆåˆ†ä¸ºç®—æœ¯ç§»ä½å’Œé€»è¾‘ç§»ä½ã€‚ ä¸Šè¿°ä½è¿ç®—ä¸­ï¼Œåªæœ‰å–åæ˜¯ä¸€å…ƒè¿ç®—ï¼Œå…¶ä½™çš„éƒ½æ˜¯äºŒå…ƒè¿ç®—ã€‚","text":"è®¡ç®—æœºé‡‡ç”¨çš„æ˜¯äºŒè¿›åˆ¶ï¼ŒäºŒè¿›åˆ¶åŒ…æ‹¬ä¸¤ä¸ªæ•°ç ï¼š0,1ã€‚åœ¨è®¡ç®—æœºçš„åº•å±‚ï¼Œä¸€åˆ‡è¿ç®—éƒ½æ˜¯åŸºäºä½è¿ç®—å®ç°çš„ã€‚ ä½è¿ç®—å…±æœ‰ 6 ç§ï¼Œåˆ†åˆ«æ˜¯ï¼šä¸ã€æˆ–ã€å¼‚æˆ–ã€å–åã€å·¦ç§»å’Œå³ç§»ï¼Œå…¶ä¸­å·¦ç§»å’Œå³ç§»ç»Ÿç§°ç§»ä½è¿ç®—ï¼Œç§»ä½è¿ç®—åˆåˆ†ä¸ºç®—æœ¯ç§»ä½å’Œé€»è¾‘ç§»ä½ã€‚ ä¸Šè¿°ä½è¿ç®—ä¸­ï¼Œåªæœ‰å–åæ˜¯ä¸€å…ƒè¿ç®—ï¼Œå…¶ä½™çš„éƒ½æ˜¯äºŒå…ƒè¿ç®—ã€‚ ä¸ã€æˆ–ã€å¼‚æˆ–å’Œå–å ä¸è¿ç®—çš„ç¬¦å·æ˜¯ $\\And$ ï¼Œè¿ç®—è§„åˆ™æ˜¯ï¼šå…¨ 1 ä¸º 1ï¼Œæœ‰ 0 ä¸º 0 æˆ–è¿ç®—çš„ç¬¦å·æ˜¯ $âˆ£$ ï¼Œè¿ç®—è§„åˆ™æ˜¯ï¼šæœ‰ 1 ä¸º 1ï¼Œå…¨ 0 ä¸º 0 å¼‚æˆ–è¿ç®—çš„ç¬¦å·æ˜¯ $\\oplus$ï¼ˆåœ¨ä»£ç ä¸­ç”¨ $\\wedge$ è¡¨ç¤ºå¼‚æˆ–ï¼‰ï¼Œè¿ç®—è§„åˆ™æ˜¯ï¼šç›¸åŒä¸º 0 ï¼Œä¸åŒä¸º 1 å–åè¿ç®—çš„ç¬¦å·æ˜¯ $\\sim$ï¼Œè¿ç®—è§„åˆ™æ˜¯ï¼š0 å˜ 1ï¼Œ 1 å˜ 0 ç§»ä½è¿ç®—ç§»ä½è¿ç®—æŒ‰ç…§ç§»ä½æ–¹å‘åˆ†ç±»å¯ä»¥åˆ†æˆå·¦ç§»å’Œå³ç§»ï¼ŒæŒ‰ç…§æ˜¯å¦å¸¦ç¬¦å·åˆ†ç±»å¯ä»¥åˆ†æˆç®—æœ¯ç§»ä½å’Œé€»è¾‘ç§»ä½ã€‚ å·¦ç§»è¿ç®—çš„ç¬¦å·æ˜¯ $&lt;&lt;$ ã€‚å·¦ç§»è¿ç®—æ—¶ï¼Œå°†å…¨éƒ¨äºŒè¿›åˆ¶ä½å‘å·¦ç§»åŠ¨è‹¥å¹²ä½ï¼Œé«˜ä½ä¸¢å¼ƒï¼Œä½ä½è¡¥ 0ã€‚å¯¹äºå·¦ç§»è¿ç®—ï¼Œç®—æœ¯ç§»ä½å’Œé€»è¾‘ç§»ä½æ˜¯ç›¸åŒçš„ã€‚ å³ç§»è¿ç®—çš„ç¬¦å·æ˜¯ $&gt;&gt;$ ã€‚å³ç§»è¿ç®—æ—¶ï¼Œå°†å…¨éƒ¨äºŒè¿›åˆ¶ä½å‘å³ç§»åŠ¨è‹¥å¹²ä½ï¼Œä½ä½ä¸¢å¼ƒï¼Œé«˜ä½çš„è¡¥ä½ç”±ç®—æœ¯ç§»ä½æˆ–é€»è¾‘ç§»ä½å†³å®šï¼š ç®—æœ¯å³ç§»æ—¶ï¼Œé«˜ä½è¡¥æœ€é«˜ä½ï¼› é€»è¾‘å³ç§»æ—¶ï¼Œé«˜ä½è¡¥ 0ã€‚ C++ ä¸­ï¼šå¯¹äºæœ‰ç¬¦å·ç±»å‹ï¼Œå³ç§»è¿ç®—ä¸ºç®—æœ¯å³ç§»ï¼›å¯¹äºæ— ç¬¦å·ç±»å‹ï¼Œå³ç§»è¿ç®—ä¸ºé€»è¾‘å³ç§»ã€‚Java ä¸­ï¼šä¸å­˜åœ¨æ— ç¬¦å·ç±»å‹ï¼Œæ‰€æœ‰çš„è¡¨ç¤ºæ•´æ•°çš„ç±»å‹éƒ½æ˜¯æœ‰ç¬¦å·ç±»å‹ï¼Œå› æ­¤éœ€è¦åŒºåˆ†ç®—æœ¯å³ç§»å’Œé€»è¾‘å³ç§»ã€‚ç®—æœ¯å³ç§»çš„ç¬¦å·æ˜¯ $&gt;&gt;$ï¼Œé€»è¾‘å³ç§»çš„ç¬¦å·æ˜¯ $&gt;&gt;&gt;$Go ä¸­ï¼šåªæœ‰ç®—æ•°ç§»ä½ ä½è¿ç®—ä¸ä¹˜é™¤æ³•ä½¿ç”¨ç§»ä½è¿ç®—å®ç°ä¹˜é™¤æ³•çš„æ•ˆç‡æ˜¾è‘—é«˜äºç›´æ¥ä¹˜é™¤æ³•çš„æ•ˆç‡ã€‚ å·¦ç§»è¿ç®—å¯¹åº”ä¹˜æ³•è¿ç®—ã€‚å°†ä¸€ä¸ªæ•°å·¦ç§» k ä½ï¼Œç­‰ä»·äºå°†è¿™ä¸ªæ•°ä¹˜ä»¥ $2^k$ ä¾‹å¦‚ï¼Œ$29 &lt;&lt; 2 &#x3D; 116$ï¼Œç­‰ä»·äº $ 29 \\times 4 $ å½“ä¹˜æ•°ä¸æ˜¯ 2 çš„æ•´æ•°æ¬¡å¹‚æ—¶ï¼Œå¯ä»¥å°†ä¹˜æ•°æ‹†æˆè‹¥å¹²é¡¹ 2 çš„æ•´æ•°æ¬¡å¹‚ä¹‹å’Œï¼š ä¾‹å¦‚ï¼Œ$a \\times 6$ ç­‰ä»·äº $(a&lt;&lt;2)+(a&lt;&lt;1)$ å¯¹äºä»»æ„æ•´æ•°ï¼Œä¹˜æ³•è¿ç®—éƒ½å¯ä»¥ç”¨å·¦ç§»è¿ç®—å®ç°ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„æº¢å‡ºçš„æƒ…å†µï¼Œä¾‹å¦‚åœ¨ 8 ä½äºŒè¿›åˆ¶è¡¨ç¤ºä¸‹ï¼Œ29 å·¦ç§» 3 ä½å°±ä¼šå‡ºç°æº¢å‡ºã€‚ ç®—æœ¯å³ç§»è¿ç®—å¯¹åº”é™¤æ³•è¿ç®—ã€‚å°†ä¸€ä¸ªæ•°å³ç§» k ä½ï¼Œç›¸å½“äºå°†è¿™ä¸ªæ•°é™¤ä»¥ $2^k$ ä¾‹å¦‚ï¼Œ$50 &gt;&gt; 2 &#x3D; 12$ ï¼Œç­‰ä»·äº $50 &#x2F; 4$ï¼Œç»“æœå‘ä¸‹å–æ•´ ä¸€ä¸ªæ•°ï¼ˆç®—æœ¯ï¼‰å³ç§» k ä½ï¼Œå’Œå°†è¿™ä¸ªæ•°é™¤ä»¥ $2^k$ æ˜¯ä¸ç­‰ä»·çš„ï¼ˆåªå¯¹ 0 å’Œæ­£æ•°æˆç«‹ï¼‰ åŒæ—¶ï¼Œä½è¿ç®—ä¹Ÿèƒ½ç”¨æ¥æ›¿ä»£å–æ¨¡è¿ç®—åˆ¤æ–­å¥‡å¶ï¼š å¥‡æ•°ï¼šæ•´æ•°&amp;1 &#x3D;&#x3D; 1 ï¼ˆäºŒè¿›åˆ¶æœ€ä½ä½æ˜¯ 1ï¼Œå°±æ˜¯å¥‡æ•° å¶æ•°ï¼šæ•´æ•°&amp;1 &#x3D;&#x3D; 0 ï¼ˆäºŒè¿›åˆ¶æœ€ä½ä½æ˜¯ 0ï¼Œå°±æ˜¯å¶æ•° ä½è¿ç®—æ€§è´¨æ­¤å¤„åˆ—ä¸¾ä½è¿ç®—ä¸­çš„ä¸ã€æˆ–ã€å¼‚æˆ–å’Œå–åçš„å¸¸è§æ€§è´¨ã€‚å‡è®¾ä»¥ä¸‹å‡ºç°çš„å˜é‡éƒ½æ˜¯æœ‰ç¬¦å·æ•´æ•°ã€‚ å¹‚ç­‰å¾‹ï¼š$a \\And a &#x3D; a$ ï¼Œ$a âˆ£ a&#x3D;a$ ï¼ˆæ³¨æ„å¼‚æˆ–ä¸æ»¡è¶³å¹‚ç­‰å¾‹ï¼‰ äº¤æ¢å¾‹ï¼š$a \\And b &#x3D; b \\And a$ï¼Œ$a âˆ£ b &#x3D; b âˆ£ a$ï¼Œ$a \\oplus b &#x3D; b \\oplus a$ ç»“åˆå¾‹ï¼š$(a \\And b) \\And c &#x3D; a \\And (b \\And c)$ï¼Œ$(a âˆ£ b) âˆ£ c &#x3D; a âˆ£ (b âˆ£ c)$ï¼Œ$(a \\oplus b) \\oplus c &#x3D; a \\oplus (b \\oplus c)$ åˆ†é…å¾‹ï¼š$(a \\And b) âˆ£ c &#x3D; (a âˆ£ c) \\And (b âˆ£ c)$ï¼Œ$(a âˆ£ b) \\And c &#x3D; (a \\And c) âˆ£ (b \\And c)$ï¼Œ$(a âŠ• b) \\And c &#x3D; (a \\And c) âŠ• (b \\And c)$ å¾·Â·æ‘©æ ¹å¾‹ï¼š$\\sim (a \\And b) &#x3D; ( \\sim a) âˆ£ (\\sim b)$ ï¼Œ$\\sim(a âˆ£ b) &#x3D; (\\sim a) \\And (\\sim b)$ å–åè¿ç®—æ€§è´¨ï¼š$-1 &#x3D; \\sim 0ï¼Œ-a &#x3D; \\sim (a-1)$ ä¸è¿ç®—æ€§è´¨ï¼š$a \\And 0 &#x3D; 0$ï¼Œ$a \\And (-1) &#x3D; a$ï¼Œ$a \\And (\\sim a) &#x3D; 0$ æˆ–è¿ç®—æ€§è´¨ï¼š$a âˆ£ 0 &#x3D; a$ï¼Œ$a âˆ£ (\\sim a) &#x3D; -1$ å¼‚æˆ–è¿ç®—æ€§è´¨ï¼š$a \\oplus 0 &#x3D; a$ï¼Œ$a \\oplus a &#x3D; 0$ å…¶ä»–æ€§è´¨ï¼š $a \\And (a-1)$ çš„ç»“æœï¼šå°† a çš„äºŒè¿›åˆ¶è¡¨ç¤ºçš„æœ€åä¸€ä¸ª 1 å˜æˆ 0 $a \\And (-a)$ï¼ˆä¸ $a \\And (\\sim (a-1))$ ç­‰ä»·ï¼‰çš„ç»“æœï¼šåªä¿ç•™ a çš„äºŒè¿›åˆ¶è¡¨ç¤ºçš„æœ€åä¸€ä¸ª 1ï¼Œå…¶ä½™çš„ 1 éƒ½å˜æˆ 0","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Algorithm","slug":"Computer-Basics/Algorithm","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Algorithm/"}],"tags":[{"name":"Bit Operation","slug":"Bit-Operation","permalink":"http://blog.sukiu.top/tags/Bit-Operation/"}]},{"title":"å“ˆå¸Œ","slug":"Hash-Insider","date":"2021-11-21T08:35:00.000Z","updated":"2021-11-21T08:35:00.000Z","comments":true,"path":"Computer-Basics/Data-Structure/Hash-Insider/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Data-Structure/Hash-Insider/","excerpt":"å“ˆå¸Œè¡¨æ˜¯ä¸€ç§ä½¿ç”¨å“ˆå¸Œå‡½æ•°ç»„ç»‡æ•°æ®ï¼Œä»¥æ”¯æŒå¿«é€Ÿæ’å…¥å’Œæœç´¢çš„æ•°æ®ç»“æ„ã€‚","text":"å“ˆå¸Œè¡¨æ˜¯ä¸€ç§ä½¿ç”¨å“ˆå¸Œå‡½æ•°ç»„ç»‡æ•°æ®ï¼Œä»¥æ”¯æŒå¿«é€Ÿæ’å…¥å’Œæœç´¢çš„æ•°æ®ç»“æ„ã€‚ æ•£åˆ—åŸºæœ¬æ¦‚å¿µæ•£åˆ—ï¼š ç¢°æ’ï¼š æ•£åˆ—å‡½æ•°ï¼š é™¤ä½™æ³•ï¼š ä¾‹å­ï¼š m&#x3D;16*2&#x3D;32 p&#x3D;31 æ•£åˆ—å‡½æ•° h(key)&#x3D;key%p çº¿æ€§å‹˜å¯Ÿæ³•ï¼ˆå¼€åœ°å€æ³•å¤„ç†ç¢°æ’ï¼‰ ä¾‹å­ï¼š å·²çŸ¥ n ä¸ªå…³é”®ç å…·æœ‰ç›¸åŒçš„æ•£åˆ—å€¼ dï¼Œè‹¥é‡‡ç”¨çº¿æ€§æ¢æŸ¥æ³•è§£å†³ç¢°æ’ï¼Œåˆ™åœ¨æ•£åˆ—è¿™ n ä¸ªå…³é”®ç çš„è¿‡ç¨‹ä¸­ï¼Œå…±å°†è¦å‘ç”Ÿn(n-1)&#x2F;2 æ¬¡ç¢°æ’ æ‹‰é“¾æ³•è§£å†³ç¢°æ’ ä¾‹å­ï¼š å¹³å‡æŸ¥æ‰¾é•¿åº¦ ASLï¼š å¸¸è§çš„ä¸‰ç§å“ˆå¸Œç»“æ„ å‚è€ƒï¼š å“ˆå¸Œè¡¨ç†è®ºåŸºç¡€ å½“æˆ‘ä»¬æƒ³ä½¿ç”¨å“ˆå¸Œæ³•æ¥è§£å†³é—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šé€‰æ‹©å¦‚ä¸‹ä¸‰ç§æ•°æ®ç»“æ„ã€‚ æ•°ç»„ setï¼ˆé›†åˆï¼‰ mapï¼ˆæ˜ å°„ï¼‰ åœ¨ C++ ä¸­ï¼Œset å’Œ map åˆ†åˆ«æä¾›ä»¥ä¸‹ä¸‰ç§æ•°æ®ç»“æ„ï¼Œå…¶åº•å±‚å®ç°ä»¥åŠä¼˜åŠ£å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š é›†åˆ åº•å±‚å®ç° æ˜¯å¦æœ‰åº æ•°å€¼æ˜¯å¦å¯ä»¥é‡å¤ èƒ½å¦æ›´æ”¹æ•°å€¼ æŸ¥è¯¢æ•ˆç‡ å¢åˆ æ•ˆç‡ std::set çº¢é»‘æ ‘ æœ‰åº å¦ å¦ O(logn) O(logn) std::multiset çº¢é»‘æ ‘ æœ‰åº æ˜¯ å¦ O(logn) O(logn) std::unordered_set å“ˆå¸Œè¡¨ æ— åº å¦ å¦ O(1) O(1) std::unordered_set åº•å±‚å®ç°ä¸ºå“ˆå¸Œè¡¨ std::set å’Œ std::multiset çš„åº•å±‚å®ç°æ˜¯çº¢é»‘æ ‘ çº¢é»‘æ ‘æ˜¯ä¸€ç§å¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼Œæ‰€ä»¥ key å€¼æ˜¯æœ‰åºçš„ï¼Œä½† key ä¸å¯ä»¥ä¿®æ”¹ï¼Œæ”¹åŠ¨ key å€¼ä¼šå¯¼è‡´æ•´æ£µæ ‘çš„é”™ä¹±ï¼Œæ‰€ä»¥åªèƒ½åˆ é™¤å’Œå¢åŠ ã€‚ æ˜ å°„ åº•å±‚å®ç° æ˜¯å¦æœ‰åº æ•°å€¼æ˜¯å¦å¯ä»¥é‡å¤ èƒ½å¦æ›´æ”¹æ•°å€¼ æŸ¥è¯¢æ•ˆç‡ å¢åˆ æ•ˆç‡ std::map çº¢é»‘æ ‘ key æœ‰åº key ä¸å¯é‡å¤ key ä¸å¯ä¿®æ”¹ O(logn) O(logn) std::multimap çº¢é»‘æ ‘ key æœ‰åº key å¯é‡å¤ key ä¸å¯ä¿®æ”¹ O(logn) O(logn) std::unordered_map å“ˆå¸Œè¡¨ key æ— åº key ä¸å¯é‡å¤ key ä¸å¯ä¿®æ”¹ O(1) O(1) std::unordered_map åº•å±‚å®ç°ä¸ºå“ˆå¸Œè¡¨ std::map å’Œ std::multimap çš„åº•å±‚å®ç°æ˜¯çº¢é»‘æ ‘ ä½¿ç”¨æ—¶ï¼š è§£å†³å“ˆå¸Œé—®é¢˜çš„æ—¶å€™ï¼Œä¼˜å…ˆä½¿ç”¨ unordered_setï¼Œå› ä¸ºå®ƒçš„æŸ¥è¯¢å’Œå¢åˆ æ•ˆç‡æ˜¯æœ€ä¼˜çš„ å¦‚æœéœ€è¦é›†åˆæ˜¯æœ‰åºçš„ï¼Œé‚£ä¹ˆå°±ç”¨ setï¼Œå¦‚æœè¦æ±‚ä¸ä»…æœ‰åºè¿˜è¦æœ‰é‡å¤æ•°æ®çš„è¯ï¼Œé‚£ä¹ˆå°±ç”¨ multiset map ä¸­ï¼Œå¯¹ key æ˜¯æœ‰é™åˆ¶ï¼Œå¯¹ value æ²¡æœ‰é™åˆ¶çš„ï¼Œå› ä¸º key çš„å­˜å‚¨æ–¹å¼ä½¿ç”¨çº¢é»‘æ ‘å®ç°çš„ã€‚ java é‡Œçš„ HashMap ï¼ŒTreeMap éƒ½æ˜¯ä¸€æ ·çš„åŸç†ã€‚ è™½ç„¶ std::setã€std::multiset çš„åº•å±‚å®ç°æ˜¯çº¢é»‘æ ‘ï¼Œä¸æ˜¯å“ˆå¸Œè¡¨ï¼Œä½†æ˜¯ std::setã€std::multiset ä¾ç„¶ä½¿ç”¨å“ˆå¸Œå‡½æ•°æ¥åšæ˜ å°„ï¼Œåªä¸è¿‡åº•å±‚çš„ç¬¦å·è¡¨ä½¿ç”¨äº†çº¢é»‘æ ‘æ¥å­˜å‚¨æ•°æ®ï¼Œæ‰€ä»¥ä½¿ç”¨è¿™äº›æ•°æ®ç»“æ„æ¥è§£å†³æ˜ å°„é—®é¢˜çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä¾ç„¶ç§°ä¹‹ä¸ºå“ˆå¸Œæ³•ã€‚ map ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ã€‚ ä¸€äº› C++ çš„ç»å…¸ä¹¦ç±ä¸Š ä¾‹å¦‚ STL æºç å‰–æï¼Œè¯´åˆ°äº† hash_set hash_mapï¼Œè¿™ä¸ªä¸ unordered_setï¼Œunordered_map åˆæœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ å®é™…ä¸ŠåŠŸèƒ½éƒ½æ˜¯ä¸€æ ·ä¸€æ ·çš„ï¼Œ ä½†æ˜¯ unordered_set åœ¨ C++11 çš„æ—¶å€™è¢«å¼•å…¥æ ‡å‡†åº“äº†ï¼Œè€Œ hash_set å¹¶æ²¡æœ‰ï¼Œæ‰€ä»¥å»ºè®®è¿˜æ˜¯ä½¿ç”¨ unordered_set æ¯”è¾ƒå¥½ï¼Œè¿™å°±å¥½æ¯”ä¸€ä¸ªæ˜¯å®˜æ–¹è®¤è¯çš„ï¼Œhash_setï¼Œhash_map æ˜¯ C++11 æ ‡å‡†ä¹‹å‰æ°‘é—´é«˜æ‰‹è‡ªå‘é€ çš„è½®å­ã€‚","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Data Structure","slug":"Computer-Basics/Data-Structure","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Data-Structure/"}],"tags":[{"name":"Hash","slug":"Hash","permalink":"http://blog.sukiu.top/tags/Hash/"}]},{"title":"Binary Search äºŒåˆ†æŸ¥æ‰¾","slug":"Binary-Search","date":"2021-11-21T08:23:00.000Z","updated":"2021-11-21T08:23:00.000Z","comments":true,"path":"Computer-Basics/Algorithm/Binary-Search/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Algorithm/Binary-Search/","excerpt":"äºŒåˆ†æŸ¥æ‰¾ä¹Ÿç§°æŠ˜åŠæŸ¥æ‰¾ï¼Œå®ƒæ˜¯ä¸€ç§æ•ˆç‡è¾ƒé«˜çš„æŸ¥æ‰¾æ–¹æ³•ã€‚","text":"äºŒåˆ†æŸ¥æ‰¾ä¹Ÿç§°æŠ˜åŠæŸ¥æ‰¾ï¼Œå®ƒæ˜¯ä¸€ç§æ•ˆç‡è¾ƒé«˜çš„æŸ¥æ‰¾æ–¹æ³•ã€‚ å‰ææ•°ç»„ä¸ºæœ‰åºæ•°ç»„ï¼Œæ•°ç»„ä¸­æ— é‡å¤å…ƒç´ ã€‚ å› ä¸ºä¸€æ—¦æœ‰é‡å¤å…ƒç´ ï¼Œä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ³•è¿”å›çš„å…ƒç´ ä¸‹æ ‡å¯èƒ½ä¸æ˜¯å”¯ä¸€çš„ï¼Œè¿™äº›éƒ½æ˜¯ä½¿ç”¨äºŒåˆ†æ³•çš„å‰ææ¡ä»¶ã€‚ äºŒåˆ†æŸ¥æ‰¾æ¶‰åŠçš„å¾ˆå¤šçš„è¾¹ç•Œæ¡ä»¶ï¼Œé€»è¾‘æ¯”è¾ƒç®€å•ï¼Œä½†å°±æ˜¯å†™ä¸å¥½ã€‚ åˆ°åº•æ˜¯ while(left &lt; right) è¿˜æ˜¯ while(left &lt;&#x3D; right)ï¼Ÿ åˆ°åº•æ˜¯ right &#x3D; middle å‘¢ï¼Œè¿˜æ˜¯è¦ right &#x3D; middle - 1 å‘¢ï¼Ÿ åŒºé—´çš„å®šä¹‰å°±æ˜¯ä¸å˜é‡ã€‚è¦åœ¨äºŒåˆ†æŸ¥æ‰¾çš„è¿‡ç¨‹ä¸­ï¼Œä¿æŒä¸å˜é‡ï¼Œå°±æ˜¯åœ¨ while å¯»æ‰¾ä¸­æ¯ä¸€æ¬¡è¾¹ç•Œçš„å¤„ç†éƒ½è¦åšæŒæ ¹æ®åŒºé—´çš„å®šä¹‰æ¥æ“ä½œï¼Œè¿™å°±æ˜¯å¾ªç¯ä¸å˜é‡è§„åˆ™ã€‚ å†™äºŒåˆ†æ³•ï¼ŒåŒºé—´çš„å®šä¹‰ä¸€èˆ¬ä¸ºä¸¤ç§ï¼Œå·¦é—­å³é—­å³ [left, right]ï¼Œæˆ–è€…å·¦é—­å³å¼€å³ [left, right)ã€‚ å†™æ³•å·¦é—­å³é—­å®šä¹‰ target æ˜¯åœ¨ä¸€ä¸ªåœ¨å·¦é—­å³é—­çš„åŒºé—´é‡Œï¼Œä¹Ÿå°±æ˜¯ [left, right] åŒºé—´çš„å®šä¹‰è¿™å°±å†³å®šäº†äºŒåˆ†æ³•çš„ä»£ç åº”è¯¥å¦‚ä½•å†™ï¼Œå› ä¸ºå®šä¹‰ target åœ¨ [left, right] åŒºé—´ï¼Œæ‰€ä»¥æœ‰å¦‚ä¸‹ä¸¤ç‚¹ï¼š while (left &lt;&#x3D; right) è¦ä½¿ç”¨ &lt;&#x3D; ï¼Œå› ä¸º left &#x3D;&#x3D; right æ˜¯æœ‰æ„ä¹‰çš„ï¼Œæ‰€ä»¥ä½¿ç”¨ &lt;&#x3D; if (nums[middle] &gt; target) right è¦èµ‹å€¼ä¸º middle - 1ï¼Œå› ä¸ºå½“å‰è¿™ä¸ª nums[middle] ä¸€å®šä¸æ˜¯ targetï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥è¦æŸ¥æ‰¾çš„å·¦åŒºé—´ç»“æŸä¸‹æ ‡ä½ç½®å°±æ˜¯ middle - 1 ä»£ç ï¼š 12345678910111213int search(vector&lt;int&gt;&amp; nums, int target) &#123; // å·¦é—­å³é—­ int left = 0, right = nums.size() - 1; while (left &lt;= right) &#123; int middle = left + ((right - left) &gt;&gt; 1); // é˜²æ­¢æº¢å‡º if (nums[middle] &gt; target) right = middle - 1; else if (nums[middle] &lt; target) left = middle + 1; else return middle; &#125; return -1;&#125; Go 1234567891011121314func search(nums []int, target int) int &#123; left, right := 0, len(nums)-1 for left &lt;= right &#123; middle := left + (right-left)&gt;&gt;1 if nums[middle] &gt; target &#123; right = middle - 1 &#125; else if nums[middle] &lt; target &#123; left = middle + 1 &#125; else &#123; return middle &#125; &#125; return -1&#125; å·¦é—­å³å¼€å®šä¹‰ target æ˜¯åœ¨ä¸€ä¸ªåœ¨å·¦é—­å³å¼€çš„åŒºé—´é‡Œï¼Œä¹Ÿå°±æ˜¯ [left, right) ï¼Œé‚£ä¹ˆäºŒåˆ†æ³•çš„è¾¹ç•Œå¤„ç†æ–¹å¼åˆ™æˆªç„¶ä¸åŒã€‚ æœ‰å¦‚ä¸‹ä¸¤ç‚¹ï¼š while (left &lt; right)ï¼Œè¿™é‡Œä½¿ç”¨ &lt; ,å› ä¸º left &#x3D;&#x3D; right åœ¨åŒºé—´ [left, right) æ˜¯æ²¡æœ‰æ„ä¹‰çš„ if (nums[middle] &gt; target) right æ›´æ–°ä¸º middleï¼Œå› ä¸ºå½“å‰ nums[middle] ä¸ç­‰äº targetï¼Œå»å·¦åŒºé—´ç»§ç»­å¯»æ‰¾ï¼Œè€Œå¯»æ‰¾åŒºé—´æ˜¯å·¦é—­å³å¼€åŒºé—´ï¼Œæ‰€ä»¥ right æ›´æ–°ä¸º middleï¼Œå³ï¼šä¸‹ä¸€ä¸ªæŸ¥è¯¢åŒºé—´ä¸ä¼šå»æ¯”è¾ƒ nums[middle] ä»£ç ï¼š 12345678910111213141516int search(vector&lt;int&gt;&amp; nums, int target) &#123; int left = 0; int right = nums.size(); // å·¦é—­å³å¼€ while (left &lt; right) &#123; // left == rightåœ¨[left, right)æ˜¯æ— æ•ˆçš„ç©ºé—´ int middle = left + ((right - left) &gt;&gt; 1); if (nums[middle] &gt; target) &#123; right = middle; // target åœ¨å·¦åŒºé—´ï¼Œåœ¨[left, middle)ä¸­ &#125; else if (nums[middle] &lt; target) &#123; left = middle + 1; // target åœ¨å³åŒºé—´ï¼Œåœ¨[middle + 1, right)ä¸­ &#125; else &#123; // nums[middle] == target return middle; // æ•°ç»„ä¸­æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œç›´æ¥è¿”å›ä¸‹æ ‡ &#125; &#125; // æœªæ‰¾åˆ°ç›®æ ‡å€¼ return -1;&#125; è¿›é˜¶ç¬¬ä¸€ä¸ªå¤§äº&#x2F;ç­‰äºåœ¨äºŒåˆ†è¿‡ç¨‹ä¸­ï¼Œæ›´æ–°ç­”æ¡ˆã€‚ å¦‚æœæ‰¾ç¬¬åä¸€ä¸ªå°äºä¹Ÿç±»ä¼¼ã€‚ 1234567891011int bsh(vector&lt;int&gt;&amp; nums, int target, bool flag) &#123; // flag trueï¼šç¬¬ä¸€ä¸ªå¤§äºç­‰äº int l = 0, r = nums.size() - 1, ans = nums.size(); while (l &lt;= r) &#123; int m = l + ((r - l) &gt;&gt; 1); if (nums[m] &gt; target || (flag &amp;&amp; nums[m] &gt;= target)) &#123; r = m - 1; ans = m; &#125; else l = m + 1; &#125; return ans;&#125;","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Algorithm","slug":"Computer-Basics/Algorithm","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Algorithm/"}],"tags":[{"name":"Search","slug":"Search","permalink":"http://blog.sukiu.top/tags/Search/"}]},{"title":"Thanox æƒ…æ™¯æ¨¡å¼","slug":"Thanox-Profile","date":"2021-11-17T02:04:00.000Z","updated":"2022-06-25T08:26:00.000Z","comments":true,"path":"Mixed/Thanox-Profile/","link":"","permalink":"http://blog.sukiu.top/Mixed/Thanox-Profile/","excerpt":"æƒ…æ™¯æ¨¡å¼ç®€å•ç†è§£ï¼š ä»€ä¹ˆæ—¶å€™ï¼Œå¹²ä»€ä¹ˆã€‚ ä»€ä¹ˆæ—¶å€™å°±æ˜¯è§¦å‘æ¡ä»¶ï¼ˆconditionï¼‰ å¹²ä»€ä¹ˆå°±æ˜¯åŠ¨ä½œï¼ˆactionsï¼‰ æœ¬æ–‡åˆ†äº«è‡ªç”¨çš„æƒ…æ™¯æ¨¡å¼ï¼Œä¸å®šæœŸæ›´æ–°~","text":"æƒ…æ™¯æ¨¡å¼ç®€å•ç†è§£ï¼š ä»€ä¹ˆæ—¶å€™ï¼Œå¹²ä»€ä¹ˆã€‚ ä»€ä¹ˆæ—¶å€™å°±æ˜¯è§¦å‘æ¡ä»¶ï¼ˆconditionï¼‰ å¹²ä»€ä¹ˆå°±æ˜¯åŠ¨ä½œï¼ˆactionsï¼‰ æœ¬æ–‡åˆ†äº«è‡ªç”¨çš„æƒ…æ™¯æ¨¡å¼ï¼Œä¸å®šæœŸæ›´æ–°~ GPSè‡ªåŠ¨å¼€å…³1234567891011[ &#123; &quot;name&quot;: &quot;Auto GPS&quot;, &quot;description&quot;: &quot;å…¨å±€å˜é‡gps&quot;, &quot;priority&quot;: 1, &quot;condition&quot;: &quot;(frontPkgChanged &amp;&amp; globalVarOf$gps.contains(to) &amp;&amp; !hw.isLocationEnabled()) || (pkgKilled &amp;&amp; globalVarOf$gps.contains(pkgName) &amp;&amp; hw.isLocationEnabled())&quot;, &quot;actions&quot;: [ &quot;if (!hw.isLocationEnabled()) hw.enableLocation(); else hw.disableLocation();&quot; ] &#125;] å¾®ä¿¡å°ç¨‹åº &amp; å†…ç½®ç½‘é¡µ1234567891011[ &#123; &quot;name&quot;: &quot;Wechat GPS&quot;, &quot;description&quot;: &quot;å°ç¨‹åºå’Œå†…ç½®ç½‘é¡µ&quot;, &quot;priority&quot;: 1, &quot;condition&quot;: &quot;(activityResumed &amp;&amp; !hw.isLocationEnabled() &amp;&amp; (componentNameAsString.contains(&#x27;.appbrand.ui.&#x27;) || componentNameAsString.contains(&#x27;.plugin.webview.&#x27;))) || (frontPkgChanged &amp;&amp; hw.isLocationEnabled() &amp;&amp; from == &#x27;com.tencent.mm&#x27;)&quot;, &quot;actions&quot;: [ &quot;if (!hw.isLocationEnabled()) hw.enableLocation(); else hw.disableLocation();&quot; ] &#125;] NFCè‡ªåŠ¨å¼€å…³1234567891011[ &#123; &quot;name&quot;: &quot;Auto NFC&quot;, &quot;description&quot;: &quot;å…¨å±€å˜é‡nfc&quot;, &quot;priority&quot;: 1, &quot;condition&quot;: &quot;(frontPkgChanged &amp;&amp; globalVarOf$nfc.contains(to) &amp;&amp; !hw.isNfcEnabled()) || (pkgKilled &amp;&amp; globalVarOf$nfc.contains(pkgName) &amp;&amp; hw.isNfcEnabled())&quot;, &quot;actions&quot;: [ &quot;if (!hw.isNfcEnabled()) hw.enableNfc(); else hw.disableNfc();&quot; ] &#125;] å†»ç»“ç›¸å…³è“ç‰™å¼€å…³å†»ç»“1234567name: &quot;BTå†»ç»“&quot;description: &quot;è“ç‰™å…³é—­å†»ç»“æŒ‡å®šåº”ç”¨ï¼Œå…¨å±€å˜é‡ btkill&quot;priority: 2condition: &quot;btStateChanged &amp;&amp; btStateOff&quot;actions: - &quot;for (String s : globalVarOf$btkill) &#123; if (pkg.isApplicationEnabled(s)) pkg.disableApplication(s) &#125;&quot; - &#x27;ui.showShortToast(&quot;ğŸ‰BTå†»ç»“&quot;)&#x27; 1234567name: &quot;BTè§£å†»&quot;description: &quot;è“ç‰™æ‰“å¼€è§£å†»æŒ‡å®šåº”ç”¨ï¼Œå…¨å±€å˜é‡ btkill&quot;priority: 2condition: &quot;btStateChanged &amp;&amp; btStateOn&quot;actions: - &quot;for (String s : globalVarOf$btkill) &#123; if (!pkg.isApplicationEnabled(s)) pkg.enableApplication(s) &#125;&quot; - &#x27;ui.showShortToast(&quot;ğŸ‰BTè§£å†»&quot;)&#x27; æ¸¸æˆå¼€å…³å†»ç»“ è‡ªè¡Œä¿®æ”¹ä»¥ä¸‹ com.oneplus.gamespace åŒ…å 12345678name: &quot;Gameå†»ç»“&quot;description: &quot;å…³é—­æ¸¸æˆå†»ç»“æ¸¸æˆç©ºé—´ï¼Œå…¨å±€å˜é‡ game&quot;# ä¸€åŠ ä¸“å±priority: 2condition: &#x27;taskRemoved &amp;&amp; globalVarOf$game.contains(pkgName) &amp;&amp; pkg.isApplicationEnabled(&quot;com.oneplus.gamespace&quot;)&#x27;actions: - &#x27;pkg.disableApplication(&quot;com.oneplus.gamespace&quot;)&#x27; - &#x27;ui.showShortToast(&quot;ğŸ‰å†»ç»“æ¸¸æˆç©ºé—´&quot;)&#x27; 12345678name: &quot;Gameè§£å†»&quot;description: &quot;æ‰“å¼€æ¸¸æˆè§£å†»æ¸¸æˆç©ºé—´ï¼Œå…¨å±€å˜é‡ game&quot;# ä¸€åŠ ä¸“å±priority: 2condition: &#x27;frontPkgChanged &amp;&amp; globalVarOf$game.contains(to) &amp;&amp; !pkg.isApplicationEnabled(&quot;com.oneplus.gamespace&quot;)&#x27;actions: - &#x27;pkg.enableApplication(&quot;com.oneplus.gamespace&quot;)&#x27; - &#x27;ui.showShortToast(&quot;ğŸ‰è§£å†»æ¸¸æˆç©ºé—´&quot;)&#x27; åº”ç”¨ç›¸å…³APP ä¿æ´» æ¨èç”¨ä¹–å·§æ¨¡å¼çš„è§„åˆ™æ¥ KEEP æƒ³ä¿æŒçš„æœåŠ¡ ä»¥ä¸‹è²Œä¼¼æ²¡ç”¨ï¼Œå¯ä»¥å¼€å¯ç”µæ± ä¸ä¼˜åŒ–è¯•è¯• 12345678name: &quot;APPä¿æ´»&quot;description: &quot;åº”ç”¨åœæ­¢è¿è¡Œæ—¶é‡å¯åº”ç”¨è¿›ç¨‹ï¼Œå…¨å±€å˜é‡ apps&quot;# APP åå°ä¸ä¼˜åŒ–priority: 2condition: &quot;pkgKilled &amp;&amp; globalVarOf$apps.contains(pkgName)&quot;actions: - &quot;activity.launchProcessForPackage(pkgName)&quot; - &#x27;ui.showShortToast(&quot;ğŸ‰ä¿æ´»app&quot;)&#x27; APP ä¼‘çœ 123456name: &quot;APPä¼‘çœ &quot;description: &quot;åå°åº”ç”¨ä¼‘çœ ï¼Œå…¨å±€å˜é‡ idle&quot;priority: 2condition: &quot;frontPkgChanged &amp;&amp; globalVarOf$idle.contains(from)&quot;actions: - &quot;activity.setInactive(from)&quot; Data ç›¸å…³Data è‡ªåŠ¨å¼€å¯1234567name: &quot;Dataè‡ªåŠ¨å¼€å¯&quot;description: &quot;æ‰“å¼€åº”ç”¨æ‰“å¼€ç§»åŠ¨æ•°æ®ï¼Œå…¨å±€å˜é‡ data&quot;priority: 2condition: &quot;frontPkgChanged &amp;&amp; globalVarOf$data.contains(to) &amp;&amp; !hw.isWifiEnabled() &amp;&amp; !data.isDataEnabled()&quot;actions: - &quot;data.setDataEnabled(true)&quot; - &#x27;ui.showShortToast(&quot;ğŸ‰æ‰“å¼€ç§»åŠ¨æ•°æ®&quot;)&#x27; äº®åº¦ç›¸å…³è‡ªåŠ¨äº®åº¦å…³é—­1234567name: &quot;è‡ªåŠ¨äº®åº¦å…³é—­&quot;description: &quot;æ‰“å¼€åº”ç”¨å…³é—­è‡ªåŠ¨äº®åº¦ï¼Œå…¨å±€å˜é‡ bright&quot;priority: 2condition: &quot;frontPkgChanged &amp;&amp; globalVarOf$bright.contains(to) &amp;&amp; power.isAutoBrightnessEnabled()&quot;actions: - &quot;power.setAutoBrightnessEnabled(false)&quot; - &#x27;ui.showShortToast(&quot;ğŸ‰å…³é—­è‡ªåŠ¨äº®åº¦&quot;)&#x27; è‡ªåŠ¨äº®åº¦å¼€å¯123456789name: &quot;è‡ªåŠ¨äº®åº¦å¼€å¯&quot;description: &quot;åœæ­¢åº”ç”¨æ‰“å¼€è‡ªåŠ¨äº®åº¦ï¼Œå…¨å±€å˜é‡ bright&quot;priority: 2condition: &quot;pkgKilled &amp;&amp; globalVarOf$bright.contains(pkgName) &amp;&amp; !power.isAutoBrightnessEnabled()&quot;actions: - &quot;power.setAutoBrightnessEnabled(true)&quot; - &quot;power.setBrightness(power.getBrightness())&quot; - &#x27;ui.showShortToast(&quot;ğŸ‰å¼€å¯è‡ªåŠ¨äº®åº¦&quot;)&#x27; çŠ¶æ€æ å›¾æ ‡ç›¸å…³ éšè—çŠ¶æ€æ å›¾æ ‡çš„ shell å‘½ä»¤ï¼š settings put secure icon_blacklist ã€Œargsã€ è‡ªè¡Œä¿®æ”¹ ã€Œargsã€ å‚æ•° çŠ¶æ€æ å›¾æ ‡éšè— ä»…ä¾›å‚è€ƒï¼Œéœ€è¦ su æ’ä»¶ 1234567name: &quot;çŠ¶æ€æ å›¾æ ‡éšè—&quot;description: &quot;æ‰“å¼€åº”ç”¨éšè—çŠ¶æ€æ å›¾æ ‡,å…¨å±€å˜é‡ bar&quot;priority: 2condition: &quot;frontPkgChanged &amp;&amp; globalVarOf$bar.contains(to)&quot;actions: - &#x27;su.exe(&quot;settings put secure icon_blacklist volte,vowifi,rotate,zen,clock,battery,vpn&quot;)&#x27; - &#x27;ui.showShortToast(&quot;ğŸ‰éšè—çŠ¶æ€æ å›¾æ ‡&quot;)&#x27; çŠ¶æ€æ å›¾æ ‡æ˜¾ç¤º1234567name: &quot;çŠ¶æ€æ å›¾æ ‡æ˜¾ç¤º&quot;description: &quot;åœæ­¢åº”ç”¨æ˜¾ç¤ºçŠ¶æ€æ å›¾æ ‡,å…¨å±€å˜é‡ bar&quot;priority: 2condition: &quot;pkgKilled &amp;&amp; globalVarOf$bar.contains(pkgName)&quot;actions: - &#x27;su.exe(&quot;settings put secure icon_blacklist volte,vowifi,rotate,zen,battery,vpn&quot;)&#x27; - &#x27;ui.showShortToast(&quot;ğŸ‰æ˜¾ç¤ºçŠ¶æ€æ å›¾æ ‡&quot;)&#x27;","categories":[{"name":"Mixed","slug":"Mixed","permalink":"http://blog.sukiu.top/categories/Mixed/"}],"tags":[{"name":"Thanox","slug":"Thanox","permalink":"http://blog.sukiu.top/tags/Thanox/"}]},{"title":"Go Module","slug":"Go-Module","date":"2021-11-17T00:54:00.000Z","updated":"2021-11-17T00:54:00.000Z","comments":true,"path":"Programming-Language/Go/Go-Module/","link":"","permalink":"http://blog.sukiu.top/Programming-Language/Go/Go-Module/","excerpt":"ä» Go 1.11 ç‰ˆæœ¬å¼€å§‹ï¼Œé™¤äº† GOPATH æ„å»ºæ¨¡å¼å¤–ï¼ŒGo åˆå¢åŠ äº†ä¸€ç§ Go Module æ„å»ºæ¨¡å¼ã€‚ åœ¨ Go Module æ¨¡å¼ä¸‹ï¼Œé€šå¸¸ä¸€ä¸ªä»£ç ä»“åº“å¯¹åº”ä¸€ä¸ª Go Moduleã€‚ ä¸€ä¸ª Go Module çš„é¡¶å±‚ç›®å½•ä¸‹ä¼šæ”¾ç½®ä¸€ä¸ª go.mod æ–‡ä»¶ï¼Œæ¯ä¸ª go.mod æ–‡ä»¶ä¼šå®šä¹‰å”¯ä¸€ä¸€ä¸ª moduleï¼Œä¹Ÿå°±æ˜¯è¯´ Go Module ä¸ go.mod æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚ go.mod æ–‡ä»¶æ‰€åœ¨çš„é¡¶å±‚ç›®å½•ä¹Ÿè¢«ç§°ä¸º module çš„æ ¹ç›®å½•ï¼Œmodule æ ¹ç›®å½•ä»¥åŠå®ƒå­ç›®å½•ä¸‹çš„æ‰€æœ‰ Go åŒ…å‡å½’å±äºè¿™ä¸ª Go Moduleï¼Œè¿™ä¸ª module ä¹Ÿè¢«ç§°ä¸º main moduleã€‚","text":"ä» Go 1.11 ç‰ˆæœ¬å¼€å§‹ï¼Œé™¤äº† GOPATH æ„å»ºæ¨¡å¼å¤–ï¼ŒGo åˆå¢åŠ äº†ä¸€ç§ Go Module æ„å»ºæ¨¡å¼ã€‚ åœ¨ Go Module æ¨¡å¼ä¸‹ï¼Œé€šå¸¸ä¸€ä¸ªä»£ç ä»“åº“å¯¹åº”ä¸€ä¸ª Go Moduleã€‚ ä¸€ä¸ª Go Module çš„é¡¶å±‚ç›®å½•ä¸‹ä¼šæ”¾ç½®ä¸€ä¸ª go.mod æ–‡ä»¶ï¼Œæ¯ä¸ª go.mod æ–‡ä»¶ä¼šå®šä¹‰å”¯ä¸€ä¸€ä¸ª moduleï¼Œä¹Ÿå°±æ˜¯è¯´ Go Module ä¸ go.mod æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚ go.mod æ–‡ä»¶æ‰€åœ¨çš„é¡¶å±‚ç›®å½•ä¹Ÿè¢«ç§°ä¸º module çš„æ ¹ç›®å½•ï¼Œmodule æ ¹ç›®å½•ä»¥åŠå®ƒå­ç›®å½•ä¸‹çš„æ‰€æœ‰ Go åŒ…å‡å½’å±äºè¿™ä¸ª Go Moduleï¼Œè¿™ä¸ª module ä¹Ÿè¢«ç§°ä¸º main moduleã€‚ å‰è¨€Go çš„é¡¹ç›®ä¾èµ–ç®¡ç†ç»å†äº†ä» Go Path =&gt; Go Vendor =&gt; Go Moudle çš„æ¼”å˜ã€‚ Go PathGo Path ä¸»è¦ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š 1234.|__bin # é¡¹ç›®ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶|__pkg # é¡¹ç›®ç¼–è¯‘ä¸­é—´äº§ç‰©ï¼ŒåŠ é€Ÿç¼–è¯‘|__src # é¡¹ç›®æºç  ç„¶è€Œï¼Œå½“é‡åˆ° A å’Œ B ä¾èµ–äºæŸä¸€ä¸ªåŒ…çš„ä¸åŒç‰ˆæœ¬æ—¶ï¼Œæ— æ³•å®ç° package çš„å¤šç‰ˆæœ¬æ§åˆ¶ã€‚ Go Vendoråœ¨ Go Path çš„ç›®å½•ç»“æ„ä¸­ï¼Œæ–°å¢äº† vendor ç›®å½•ï¼Œå¦‚æœå­˜åœ¨è¯¥ç›®å½•ï¼Œä¼˜å…ˆä½¿ç”¨å…¶ä¸‹çš„ä¾èµ–ï¼Œå¦åˆ™ä» Go Path ä¸­å¯»æ‰¾ã€‚ ä½†æ˜¯ï¼ŒGo Vendor ä¸èƒ½å¾ˆæ¸…æ™°åœ°æ ‡è¯†ç‰ˆæœ¬çš„æ¦‚å¿µï¼š æ— æ³•æ§åˆ¶ä¾èµ–çš„ç‰ˆæœ¬ æ›´æ–°é¡¹ç›®å¯èƒ½å‡ºç°ä¾èµ–å†²çªï¼Œå¯¼è‡´ç¼–è¯‘å‡ºé”™ Go Module æ„å»ºæ¨¡å¼è¯­ä¹‰å¯¼å…¥ç‰ˆæœ¬æœºåˆ¶åœ¨ Go Module æ„å»ºæ¨¡å¼ä¸‹ï¼Œä¸€ä¸ªç¬¦åˆ Go Module è¦æ±‚çš„ç‰ˆæœ¬å·ï¼Œç”±å‰ç¼€ v å’Œä¸€ä¸ªæ»¡è¶³è¯­ä¹‰ç‰ˆæœ¬è§„èŒƒçš„ç‰ˆæœ¬å·ç»„æˆ æŒ‰ç…§è¯­ä¹‰ç‰ˆæœ¬è§„èŒƒï¼Œ ä¸»ç‰ˆæœ¬å·ä¸åŒçš„ä¸¤ä¸ªç‰ˆæœ¬æ˜¯ç›¸äº’ä¸å…¼å®¹çš„ï¼› åœ¨ä¸»ç‰ˆæœ¬å·ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œæ¬¡ç‰ˆæœ¬å·å¤§éƒ½æ˜¯å‘åå…¼å®¹æ¬¡ç‰ˆæœ¬å·å°çš„ç‰ˆæœ¬ï¼› è¡¥ä¸ç‰ˆæœ¬å·ä¹Ÿä¸å½±å“å…¼å®¹æ€§ã€‚ Go Module è§„å®šï¼šå¦‚æœåŒä¸€ä¸ªåŒ…çš„æ–°æ—§ç‰ˆæœ¬æ˜¯å…¼å®¹çš„ï¼Œé‚£ä¹ˆå®ƒä»¬çš„åŒ…å¯¼å…¥è·¯å¾„åº”è¯¥æ˜¯ç›¸åŒçš„ã€‚ 12345678910// é€šè¿‡åœ¨åŒ…å¯¼å…¥è·¯å¾„ä¸­å¼•å…¥ä¸»ç‰ˆæœ¬å·çš„æ–¹å¼ï¼Œæ¥åŒºåˆ«åŒä¸€ä¸ªåŒ…çš„ä¸å…¼å®¹ç‰ˆæœ¬// å‡å¦‚è¿™æ˜¯ v1.x.x ç‰ˆæœ¬import &quot;github.com/sirupsen/logrus&quot; // å¦‚æœè¦å¯¼å…¥ v2.x.x ç‰ˆæœ¬import &quot;github.com/sirupsen/logrus/v2&quot;// ç”šè‡³å¯ä»¥åŒæ—¶ä¾èµ–ä¸€ä¸ªåŒ…çš„ä¸¤ä¸ªä¸å…¼å®¹ç‰ˆæœ¬import ( &quot;github.com/sirupsen/logrus&quot; logv2 &quot;github.com/sirupsen/logrus/v2&quot;) Go Module å°†è¿™æ ·çš„ç‰ˆæœ¬ (v0) ä¸ä¸»ç‰ˆæœ¬å· v1 åšåŒç­‰å¯¹å¾…ï¼Œä¹Ÿå°±æ˜¯é‡‡ç”¨ä¸å¸¦ä¸»ç‰ˆæœ¬å·çš„åŒ…å¯¼å…¥è·¯å¾„ æœ€å°ç‰ˆæœ¬é€‰æ‹©åŸåˆ™ä¾èµ–å…³ç³»ä¸€æ—¦å¤æ‚èµ·æ¥ï¼Œæ¯”å¦‚åƒä¸‹å›¾ä¸­å±•ç¤ºçš„è¿™æ ·ï¼ŒGo åˆæ˜¯å¦‚ä½•ç¡®å®šä½¿ç”¨ä¾èµ–åŒ… C çš„å“ªä¸ªç‰ˆæœ¬çš„å‘¢ï¼Ÿ å½“å‰å­˜åœ¨çš„ä¸»æµç¼–ç¨‹è¯­è¨€ï¼Œä»¥åŠ Go Module å‡ºç°ä¹‹å‰çš„å¾ˆå¤š Go åŒ…ä¾èµ–ç®¡ç†å·¥å…·éƒ½ä¼šé€‰æ‹©ä¾èµ–é¡¹çš„â€œæœ€æ–°æœ€å¤§ (Latest Greatest) ç‰ˆæœ¬â€ï¼Œå¯¹åº”åˆ°å›¾ä¸­çš„ä¾‹å­ï¼Œè¿™ä¸ªç‰ˆæœ¬å°±æ˜¯ v1.7.0ã€‚ ä¸è¿‡ï¼ŒGo ä¼šåœ¨è¯¥é¡¹ç›®ä¾èµ–é¡¹çš„æ‰€æœ‰ç‰ˆæœ¬ä¸­ï¼Œé€‰å‡ºç¬¦åˆé¡¹ç›®æ•´ä½“è¦æ±‚çš„â€œæœ€å°ç‰ˆæœ¬â€ è¿™ä¸ªä¾‹å­ä¸­ï¼ŒC v1.3.0 æ˜¯ç¬¦åˆé¡¹ç›®æ•´ä½“è¦æ±‚çš„ç‰ˆæœ¬é›†åˆä¸­çš„ç‰ˆæœ¬æœ€å°çš„é‚£ä¸ªï¼Œäºæ˜¯ Go å‘½ä»¤é€‰æ‹©äº† C v1.3.0ï¼Œè€Œä¸æ˜¯æœ€æ–°æœ€å¤§çš„ C v1.7.0ã€‚ Go Module ç‰ˆæœ¬ç®¡ç†ï¼ˆ1ï¼‰Go Module åˆ›å»ºåˆ›å»ºä¸€ä¸ª Go Moduleï¼Œé€šå¸¸æœ‰å¦‚ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š é€šè¿‡ go mod init åˆ›å»º go.mod æ–‡ä»¶ï¼Œå°†å½“å‰é¡¹ç›®å˜ä¸ºä¸€ä¸ª Go Moduleï¼› é€šè¿‡ go mod tidy å‘½ä»¤è‡ªåŠ¨æ›´æ–°å½“å‰ module çš„ä¾èµ–ä¿¡æ¯ï¼› æ‰§è¡Œ go buildï¼Œæ‰§è¡Œæ–° module çš„æ„å»ºã€‚ ï¼ˆ2ï¼‰ä¸ºå½“å‰ Module æ·»åŠ ä¸€ä¸ªä¾èµ–12345# æ‰‹åŠ¨æ·»åŠ $ go get github.com/google/uuid# è‡ªåŠ¨æ·»åŠ $ go mod tidy ï¼ˆ3ï¼‰å‡çº§ &#x2F; é™çº§ä¾èµ–çš„ç‰ˆæœ¬12# é€‰å®šæŒ‡å®šç‰ˆæœ¬å³å¯$go get github.com/sirupsen/logrus@v1.7.0 ï¼ˆ4ï¼‰ç§»é™¤ä¸€ä¸ªä¾èµ–ä»…ä»æºç ä¸­åˆ é™¤å¯¹ä¾èµ–é¡¹çš„å¯¼å…¥è¯­å¥è¿˜ä¸å¤Ÿï¼Œè¿˜å¾—ç”¨ go mod tidy å‘½ä»¤ï¼Œå°†è¿™ä¸ªä¾èµ–é¡¹å½»åº•ä» Go Module æ„å»ºä¸Šä¸‹æ–‡ä¸­æ¸…é™¤æ‰ã€‚ go mod tidy ä¼šè‡ªåŠ¨åˆ†ææºç ä¾èµ–ï¼Œè€Œä¸”å°†ä¸å†ä½¿ç”¨çš„ä¾èµ–ä» go.mod å’Œ go.sum ä¸­ç§»é™¤ã€‚ ï¼ˆ5ï¼‰vendorvendor æœºåˆ¶å¯ä»¥å¯¹ vendor ç›®å½•ä¸‹ç¼“å­˜çš„ä¾èµ–åŒ…è¿›è¡Œè‡ªåŠ¨ç®¡ç†ã€‚ åœ¨ Go 1.14 åŠä»¥åç‰ˆæœ¬ä¸­ï¼Œå¦‚æœ Go é¡¹ç›®çš„é¡¶å±‚ç›®å½•ä¸‹å­˜åœ¨ vendor ç›®å½•ï¼Œé‚£ä¹ˆ go build é»˜è®¤ä¹Ÿä¼šä¼˜å…ˆåŸºäº vendor æ„å»ºï¼Œé™¤é go build ä¼ å…¥ -mod=mod çš„å‚æ•°ã€‚ 12345678910$go mod vendor$tree -LF 2 vendorvendorâ”œâ”€â”€ github.com/â”‚ â”œâ”€â”€ google/â”‚ â”œâ”€â”€ magefile/â”‚ â””â”€â”€ sirupsen/â”œâ”€â”€ golang.org/â”‚ â””â”€â”€ x/â””â”€â”€ modules.txt ç©ºå¯¼å…¥åƒä¸‹é¢ä»£ç è¿™æ ·çš„åŒ…å¯¼å…¥æ–¹å¼è¢«ç§°ä¸ºâ€œç©ºå¯¼å…¥â€ï¼šimport _ &quot;foo&quot; ç©ºå¯¼å…¥ä¹Ÿæ˜¯å¯¼å…¥ï¼Œæ„å‘³ç€æˆ‘ä»¬å°†ä¾èµ– foo è¿™ä¸ªè·¯å¾„ä¸‹çš„åŒ…ã€‚ ç”±äºæ˜¯ç©ºå¯¼å…¥ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰æ˜¾å¼ä½¿ç”¨è¿™ä¸ªåŒ…ä¸­çš„ä»»ä½•è¯­æ³•å…ƒç´ ã€‚ é€šå¸¸å®è·µä¸­ç©ºå¯¼å…¥æ„å‘³ç€æœŸæœ›ä¾èµ–åŒ…çš„ init å‡½æ•°å¾—åˆ°æ‰§è¡Œï¼Œè¿™ä¸ª init å‡½æ•°ä¸­æœ‰æˆ‘ä»¬éœ€è¦çš„é€»è¾‘ã€‚","categories":[{"name":"Programming Language","slug":"Programming-Language","permalink":"http://blog.sukiu.top/categories/Programming-Language/"},{"name":"Go","slug":"Programming-Language/Go","permalink":"http://blog.sukiu.top/categories/Programming-Language/Go/"}],"tags":[{"name":"Go","slug":"Go","permalink":"http://blog.sukiu.top/tags/Go/"}]},{"title":"ä¸»æµå¼€æºåè®®","slug":"Open-Source-License","date":"2021-11-12T10:49:00.000Z","updated":"2021-11-12T10:49:00.000Z","comments":true,"path":"Mixed/Open-Source-License/","link":"","permalink":"http://blog.sukiu.top/Mixed/Open-Source-License/","excerpt":"å¸¸è§çš„å¼€æºè®¸å¯è¯ä¸»è¦æœ‰ Apacheã€MITã€BSDã€GPLã€LGPLã€MPLã€SSPL ç­‰ï¼Œå¯ä»¥å¤§è‡´åˆ†ä¸ºä¸¤å¤§ç±»ï¼š å®½æ¾è‡ªç”±è½¯ä»¶è®¸å¯åè®® Permissive free software licence è‘—ä½æƒè®¸å¯è¯ copyleft license å…¶ä¸­ï¼ŒApacheã€MITã€BSD éƒ½æ˜¯å®½æ¾è®¸å¯è¯ï¼ŒGPL æ˜¯å…¸å‹çš„å¼ºè‘—ä½æƒï¼ˆcopyleft ï¼‰è®¸å¯è¯ï¼ŒLGPLã€MPL æ˜¯å¼±è‘—ä½æƒï¼ˆcopyleft ï¼‰è®¸å¯è¯ã€‚","text":"å¸¸è§çš„å¼€æºè®¸å¯è¯ä¸»è¦æœ‰ Apacheã€MITã€BSDã€GPLã€LGPLã€MPLã€SSPL ç­‰ï¼Œå¯ä»¥å¤§è‡´åˆ†ä¸ºä¸¤å¤§ç±»ï¼š å®½æ¾è‡ªç”±è½¯ä»¶è®¸å¯åè®® Permissive free software licence è‘—ä½æƒè®¸å¯è¯ copyleft license å…¶ä¸­ï¼ŒApacheã€MITã€BSD éƒ½æ˜¯å®½æ¾è®¸å¯è¯ï¼ŒGPL æ˜¯å…¸å‹çš„å¼ºè‘—ä½æƒï¼ˆcopyleft ï¼‰è®¸å¯è¯ï¼ŒLGPLã€MPL æ˜¯å¼±è‘—ä½æƒï¼ˆcopyleft ï¼‰è®¸å¯è¯ã€‚ åŒºåˆ« Permissive free software licence ï¼š ä¸€ç§å¯¹è½¯ä»¶çš„ä½¿ç”¨ã€ä¿®æ”¹ã€ä¼ æ’­ç­‰æ–¹å¼é‡‡ç”¨æœ€ä½é™åˆ¶çš„è‡ªç”±è½¯ä»¶è®¸å¯åè®®æ¡æ¬¾ç±»å‹ã€‚è¿™ç§ç±»å‹çš„è½¯ä»¶è®¸å¯åè®®å°†ä¸ä¿è¯åŸä½œå“çš„æ´¾ç”Ÿä½œå“ä¼šç»§ç»­ä¿æŒä¸åŸä½œå“å®Œå…¨ç›¸åŒçš„ç›¸å…³é™åˆ¶æ¡ä»¶ï¼Œä»è€Œä¸ºåŸä½œå“çš„è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œä¼ æ’­ç­‰æä¾›æ›´å¤§çš„ç©ºé—´ã€‚ Copyleft License ï¼š åœ¨æœ‰é™ç©ºé—´å†…çš„è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œä¼ æ’­ï¼Œä¸”ä¸å¾—è¿èƒŒåŸä½œå“çš„é™åˆ¶æ¡æ¬¾ã€‚å¦‚æœä¸€æ¬¾è½¯ä»¶ä½¿ç”¨ Copyleft ç±»å‹è®¸å¯åè®®è§„å®šè½¯ä»¶ä¸å¾—ç”¨äºå•†ä¸šç›®çš„ï¼Œä¸”ä¸å¾—é—­æºï¼Œé‚£ä¹ˆåç»­çš„è¡ç”Ÿå­è½¯ä»¶ä¹Ÿå¿…é¡»å¾—éµå¾ªè¯¥æ¡æ¬¾ã€‚ ä¸¤è€…æœ€å¤§çš„å·®åˆ«åœ¨äºï¼šåœ¨è½¯ä»¶è¢«ä¿®æ”¹å¹¶å†å‘è¡Œæ—¶ï¼Œ Copyleft License ä»ç„¶å¼ºåˆ¶è¦æ±‚å…¬å¼€æºä»£ç ï¼ˆè¡ç”Ÿè½¯ä»¶éœ€è¦å¼€æºï¼‰ï¼Œè€Œ Permissive free software licence ä¸è¦æ±‚å…¬å¼€æºä»£ç ï¼ˆè¡ç”Ÿè½¯ä»¶å¯ä»¥å˜ä¸ºä¸“æœ‰è½¯ä»¶ï¼‰ã€‚ å…¶ä¸­ï¼ŒApacheã€MITã€BSD éƒ½æ˜¯å®½æ¾è®¸å¯è¯ï¼ŒGPL æ˜¯å…¸å‹çš„å¼ºè‘—ä½æƒï¼ˆcopyleft ï¼‰è®¸å¯è¯ï¼ŒLGPLã€MPL æ˜¯å¼±è‘—ä½æƒï¼ˆcopyleft ï¼‰è®¸å¯è¯ã€‚ å¸¸è§å¼€æºè®¸å¯è¯ MITMIT è®¸å¯è¯æ˜¯å²ä¸Šæœ€ä¸ºç®€æ´å’Œæ…·æ…¨ï¼ˆpermissiveï¼‰çš„å¼€æºåè®®ä¹‹ä¸€ã€‚åº”ç”¨æ¡ˆä¾‹æœ‰ï¼šJQueryã€Rails ç­‰ã€‚ BSDBerkeley Software Distribution license BSD è®¸å¯è¯ä¸ MIT å·®ä¸å¤šã€‚ äº‹å®ä¸Šï¼ŒBSD è®¸å¯è¯è¢«è®¤ä¸ºæ˜¯ copycenterï¼ˆä¸­é—´è‘—ä½œæƒï¼‰ï¼Œä»‹ä¹æ ‡å‡†çš„ copyright ä¸ GPL çš„ copyleft ä¹‹é—´ã€‚ å¯ä»¥è¯´ï¼ŒGPL å¼ºè¿«åç»­ç‰ˆæœ¬å¿…é¡»ä¸€æ ·æ˜¯è‡ªç”±è½¯ä»¶ï¼ŒBSD çš„åç»­ç‰ˆæœ¬å¯ä»¥é€‰æ‹©è¦ç»§ç»­æ˜¯ BSD æˆ–å…¶ä»–è‡ªç”±è½¯ä»¶æ¡æ¬¾æˆ–é—­æºè½¯ä»¶ç­‰ç­‰ã€‚ ApacheApache 2 çš„æ•ˆåŠ›ä¸ MIT è¿‘ä¼¼ï¼ŒåŒºåˆ«ä¸»è¦åœ¨äºå‰è€…é¢å¤–æä¾›äº†ä¸€ä»½ç®€æ˜“çš„ä¸“åˆ©è®¸å¯æˆæƒï¼Œæ˜ç¡®ç¦æ­¢å•†æ ‡ä½¿ç”¨æƒä»¥åŠè¦æ±‚æ˜ç¡®æŒ‡æ˜æ‰€æœ‰ä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼ˆstate changesï¼‰ã€‚ Apache è®¸å¯è¯è¦æ±‚è¢«æˆæƒè€…ä¿ç•™è‘—ä½œæƒå’Œæ”¾å¼ƒæƒåˆ©çš„å£°æ˜ï¼Œä½†å®ƒä¸æ˜¯ä¸€ä¸ªåè‘—ä½œæƒçš„è®¸å¯è¯ã€‚æ­¤è®¸å¯è¯æœ€æ–°ç‰ˆæœ¬ä¸º â€œç‰ˆæœ¬ 2â€ï¼Œäº 2004 å¹´ 1 æœˆå‘å¸ƒã€‚ Apache è®¸å¯è¯æ˜¯å®½æ¾çš„ï¼Œå› ä¸ºå®ƒä¸ä¼šå¼ºåˆ¶æ´¾ç”Ÿå’Œä¿®æ”¹ä½œå“ä½¿ç”¨ç›¸åŒçš„è®¸å¯è¯è¿›è¡Œå‘å¸ƒã€‚ GPLGPL çš„å‡ºå‘ç‚¹æ˜¯ä»£ç çš„å¼€æº&#x2F;å…è´¹ä½¿ç”¨å’Œå¼•ç”¨&#x2F;ä¿®æ”¹&#x2F;è¡ç”Ÿä»£ç çš„å¼€æº&#x2F;å…è´¹ä½¿ç”¨ï¼Œä½†ä¸å…è®¸ä¿®æ”¹åå’Œè¡ç”Ÿçš„ä»£ç åšä¸ºé—­æºçš„å•†ä¸šè½¯ä»¶å‘å¸ƒå’Œé”€å”®ã€‚ ç”±äº GPL ä¸¥æ ¼è¦æ±‚ä½¿ç”¨äº† GPL ç±»åº“çš„è½¯ä»¶äº§å“å¿…é¡»ä½¿ç”¨ GPL åè®®ï¼Œå¯¹äºä½¿ç”¨ GPL åè®®çš„å¼€æºä»£ç ï¼Œå•†ä¸šè½¯ä»¶æˆ–è€…å¯¹ä»£ç æœ‰ä¿å¯†è¦æ±‚çš„éƒ¨é—¨å°±ä¸é€‚åˆé›†æˆ&#x2F;é‡‡ç”¨æ­¤ä½œä¸ºç±»åº“å’ŒäºŒæ¬¡å¼€å‘çš„åŸºç¡€ã€‚ LGPLæ›´å®½æ¾çš„ GPL åè®®ã€‚ ä¸ GPL åè®®çš„åŒºåˆ«ä¸ºï¼Œåè€…å¦‚æœåªæ˜¯å¯¹ LGPL è½¯ä»¶çš„ç¨‹åºåº“çš„ç¨‹åºè¿›è¡Œè°ƒç”¨è€Œä¸æ˜¯åŒ…å«å…¶æºä»£ç æ—¶ï¼Œç›¸å…³çš„æºç¨‹åºæ— éœ€å¼€æºã€‚ è°ƒç”¨å’ŒåŒ…å«çš„åŒºåˆ«ç±»ä¼¼åœ¨äº’è”ç½‘ç½‘ç½‘é¡µä¸Šå¯¹ä»–äººç½‘é¡µå†…å®¹çš„å¼•ç”¨ï¼šå¦‚æœæŠŠä»–äººçš„å†…å®¹å…¨éƒ¨æˆ–éƒ¨åˆ†å¤åˆ¶åˆ°è‡ªå·±çš„ç½‘é¡µä¸Šï¼Œå°±ç±»ä¼¼åŒ…å«ï¼Œå¦‚æœåªæ˜¯è´´ä¸€ä¸ªä»–äººç½‘é¡µçš„ç½‘å€é“¾æ¥è€Œä¸å¼•ç”¨å†…å®¹ï¼Œå°±ç±»ä¼¼è°ƒç”¨ã€‚æœ‰äº†è¿™ä¸ªåè®®ï¼Œå¾ˆå¤šå¤§å…¬å¸å°±å¯ä»¥æŠŠå¾ˆå¤šè‡ªå·±åç»­å¼€å‘å†…å®¹çš„æºç¨‹åºéšè—èµ·æ¥ã€‚","categories":[{"name":"Mixed","slug":"Mixed","permalink":"http://blog.sukiu.top/categories/Mixed/"}],"tags":[{"name":"License","slug":"License","permalink":"http://blog.sukiu.top/tags/License/"}]},{"title":"Binary Search Tree äºŒå‰æœç´¢æ ‘","slug":"Binary-Search-Tree","date":"2021-11-12T02:42:00.000Z","updated":"2021-11-12T02:42:00.000Z","comments":true,"path":"Computer-Basics/Data-Structure/Binary-Search-Tree/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Data-Structure/Binary-Search-Tree/","excerpt":"ç®€ç§° BSTï¼Œä¹Ÿç§°äºŒå‰æ’åºæ ‘æˆ–äºŒå‰æŸ¥æ‰¾æ ‘ã€‚ ç‰¹ç‚¹ï¼š ä»»ä¸€ç»“ç‚¹ &gt; å…¶å·¦å­æ ‘çš„æ‰€æœ‰ç»“ç‚¹ï¼Œ å¹¶ä¸”&lt; å…¶å³å­æ ‘çš„æ‰€æœ‰ç»“ç‚¹ï¼› ç»“ç‚¹çš„å·¦ã€å³å­æ ‘ï¼Œä¹Ÿæ˜¯äºŒå‰æ’åºæ ‘ï¼› æ¯ä¸ªç»“ç‚¹é”®å€¼å”¯ä¸€ï¼ˆä¸èƒ½é‡å¤ï¼‰ é‡è¦æ€§è´¨ï¼š ä¸­åºéå†äºŒå‰æ’åºæ ‘å¾—åˆ°é€’å¢åºåˆ— æ‰€ä»¥åˆ¤æ–­ 1 æ£µäºŒå‰æ ‘æ˜¯å¦æ˜¯äºŒå‰æ’åºæ ‘ï¼Ÿåªè¦ä¸­åºéå†ï¼Œå¾—åˆ°é€’å¢åºåˆ—æ‰æ˜¯ã€‚","text":"ç®€ç§° BSTï¼Œä¹Ÿç§°äºŒå‰æ’åºæ ‘æˆ–äºŒå‰æŸ¥æ‰¾æ ‘ã€‚ ç‰¹ç‚¹ï¼š ä»»ä¸€ç»“ç‚¹ &gt; å…¶å·¦å­æ ‘çš„æ‰€æœ‰ç»“ç‚¹ï¼Œ å¹¶ä¸”&lt; å…¶å³å­æ ‘çš„æ‰€æœ‰ç»“ç‚¹ï¼› ç»“ç‚¹çš„å·¦ã€å³å­æ ‘ï¼Œä¹Ÿæ˜¯äºŒå‰æ’åºæ ‘ï¼› æ¯ä¸ªç»“ç‚¹é”®å€¼å”¯ä¸€ï¼ˆä¸èƒ½é‡å¤ï¼‰ é‡è¦æ€§è´¨ï¼š ä¸­åºéå†äºŒå‰æ’åºæ ‘å¾—åˆ°é€’å¢åºåˆ— æ‰€ä»¥åˆ¤æ–­ 1 æ£µäºŒå‰æ ‘æ˜¯å¦æ˜¯äºŒå‰æ’åºæ ‘ï¼Ÿåªè¦ä¸­åºéå†ï¼Œå¾—åˆ°é€’å¢åºåˆ—æ‰æ˜¯ã€‚ æ’å…¥ è‹¥å½“å‰æ ‘ä¸ºç©ºï¼Œåˆ™æ–°ç»“ç‚¹ä¸ºæ ¹ è‹¥å½“å‰æ ‘ä¸ç©ºï¼Œ å°†å¾…æ’å…¥ x ä¸æ ¹æ¯”è¾ƒï¼› è‹¥ x ç­‰äºæ ¹ï¼Œä¸ç”¨æ’å…¥ è‹¥ x å¤§äºæ ¹ï¼Œåˆ™å»å³å­æ ‘ (æ‰¾ä½ç½®)ï¼› è‹¥ x å°äºæ ¹ï¼Œåˆ™å»å·¦å­æ ‘ (æ‰¾ä½ç½®)ï¼› å¯ä»¥æ€»ç»“ä¸ºï¼š æ’å…¥ä¹‹å‰ï¼Œå…ˆæŸ¥æ‰¾ï¼š è‹¥æ‰¾åˆ°ï¼Œä¸ç”¨æ’å…¥ è‹¥æ‰¾ä¸åˆ°ï¼Œåˆ™åœ¨åˆ°è¾¾çš„ç©ºä½ç½®å¤„ï¼Œæ”¾å…¥ xï¼› æ‰€ä»¥æœ€æ–°æ’å…¥çš„ç»“ç‚¹ï¼Œä¸€å®šæ˜¯å¶å­ï¼› 1234567891011121314func insertIntoBST(root *TreeNode, val int) *TreeNode &#123; if root == nil &#123; return &amp;TreeNode&#123; Val: val, &#125; &#125; if root.Val &gt; val &#123; root.Left = insertIntoBST(root.Left, val) &#125; if root.Val &lt; val &#123; root.Right = insertIntoBST(root.Right, val) &#125; return root&#125; æŸ¥æ‰¾ ä»æ ¹ç»“ç‚¹å¼€å§‹ï¼Œå¦‚æœæ ‘ä¸ºç©ºï¼Œåˆ™è¿”å› NULL å¦‚æœéç©ºï¼Œä»æ ¹ç»“ç‚¹å¼€å§‹ï¼Œæ¯”è¾ƒå¾…æ£€ç´¢çš„é”®å€¼ è‹¥ç›¸ç­‰ï¼Œåˆ™æˆåŠŸï¼› è‹¥å°äºæ ¹ï¼Œ åˆ™å»æ ¹çš„å·¦å­æ ‘ï¼› è‹¥å¤§äºæ ¹ï¼Œ åˆ™å»æ ¹çš„å³å­æ ‘ï¼Œ è¿­ä»£123456789101112func searchBST(root *TreeNode, val int) *TreeNode &#123; for root != nil &#123; if root.Val &gt; val &#123; root = root.Left &#125; else if root.Val &lt; val &#123; root = root.Right &#125; else &#123; return root &#125; &#125; return nil&#125; åˆ é™¤è€ƒè™‘ä¸‰ç§æƒ…å†µï¼š â‘  è¦åˆ é™¤å¶å­ç»“ç‚¹ ç›´æ¥åˆ é™¤ï¼Œå¹¶å°†çˆ¶ç»“ç‚¹æŒ‡é’ˆç½®ä¸º NULL â‘¡ åˆ é™¤åªæœ‰ 1 ä¸ªå­©å­çš„ç»“ç‚¹ å°†çˆ¶ç»“ç‚¹æŒ‡é’ˆæŒ‡å‘è¦åˆ é™¤ç»“ç‚¹çš„å­©å­ç»“ç‚¹ â‘¢ åˆ é™¤æœ‰å·¦å³å­æ ‘çš„ç»“ç‚¹ ç”¨å¦ä¸€ä¸ªç»“ç‚¹æ›¿ä»£åˆ é™¤çš„ç»“ç‚¹ï¼š å³å­æ ‘çš„æœ€å°å…ƒç´  æˆ–è€… å·¦å­æ ‘çš„æœ€å¤§å…ƒç´  12345678910111213141516171819202122232425262728func deleteNode(root *TreeNode, key int) *TreeNode &#123; if root == nil &#123; return root &#125; if root.Val &gt; key &#123; root.Left = deleteNode(root.Left, key) return root &#125; if root.Val &lt; key &#123; root.Right = deleteNode(root.Right, key) return root &#125; // æƒ…å†µ 1 : ä»¥ä¸‹ä¸¤ä¸ª if å·²ç»å¤„ç† if root.Left == nil &#123; // æƒ…å†µ 2 å·¦ return root.Right &#125; if root.Right == nil &#123; // æƒ…å†µ 2 å³ return root.Left &#125; // æƒ…å†µ 3 ï¼š ä½¿ç”¨å³å­æ ‘æœ€å°å…ƒç´  minNode := root.Right for minNode.Left != nil &#123; minNode = minNode.Left &#125; root.Val = minNode.Val root.Right = deleteNode(root.Right, minNode.Val) return root&#125; å¹³å‡æ£€ç´¢é•¿åº¦ ASLæ¯”è¾ƒæ¬¡æ•°ï¼šä¸å¤§äºæ ‘çš„æ·±åº¦ æœ€åå¹³å‡æŸ¥æ‰¾é•¿åº¦ ASLï¼š(n+1)&#x2F;2 æœ€å¥½ ASLï¼š$log2(n)$ (å‚è€ƒäºŒåˆ†æŸ¥æ‰¾) æ‰€æœ‰æ“ä½œçš„å¤æ‚åº¦éƒ½æ˜¯ $O(logn)$","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Data Structure","slug":"Computer-Basics/Data-Structure","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Data-Structure/"}],"tags":[{"name":"Tree","slug":"Tree","permalink":"http://blog.sukiu.top/tags/Tree/"}]},{"title":"LinuxæŒ‡ä»¤ä¹‹ç³»ç»Ÿç®¡ç†","slug":"Linux-System-Management","date":"2021-11-07T14:50:00.000Z","updated":"2021-11-07T14:50:00.000Z","comments":true,"path":"Programming-Language/Shell/Linux-System-Management/","link":"","permalink":"http://blog.sukiu.top/Programming-Language/Shell/Linux-System-Management/","excerpt":"Linux ä¸­å¸¸ç”¨çš„ç³»ç»Ÿå·¥ä½œå‘½ä»¤ä»¥åŠç³»ç»ŸçŠ¶æ€æ£€æµ‹å‘½ä»¤ã€‚","text":"Linux ä¸­å¸¸ç”¨çš„ç³»ç»Ÿå·¥ä½œå‘½ä»¤ä»¥åŠç³»ç»ŸçŠ¶æ€æ£€æµ‹å‘½ä»¤ã€‚ å¸¸ç”¨ç³»ç»Ÿå·¥ä½œå‘½ä»¤Echo ï¼šåœ¨ç»ˆç«¯è¾“å‡ºå­—ç¬¦ä¸²æˆ–å˜é‡æå–åçš„å€¼å‘½ä»¤æè¿°ï¼šecho å‘½ä»¤ç”¨äºåœ¨ç»ˆç«¯è¾“å‡ºå­—ç¬¦ä¸²æˆ–å˜é‡æå–åçš„å€¼ã€‚ å‘½ä»¤æ ¼å¼ï¼šecho [å­—ç¬¦ä¸² | $å˜é‡] å‘½ä»¤ç”¨æ³•ç¤ºä¾‹ï¼š æ˜¾ç¤ºæ™®é€šå­—ç¬¦ä¸² 1echo &quot;Hello World&quot; æ˜¾ç¤ºå˜é‡é¦–å…ˆåœ¨ shell ç¯å¢ƒä¸­å®šä¹‰ä¸€ä¸ªä¸´æ—¶å˜é‡ nameï¼Œä½¿ç”¨ echo å‘½ä»¤å°†å˜é‡ name çš„å€¼æ˜¾ç¤ºåˆ°ç»ˆç«¯ã€‚ 12export name=&quot;Tom&quot;echo $name æ˜¾ç¤ºç»“æœå®šå‘è‡³æ–‡ä»¶ä»¥ä¸‹å‘½ä»¤ä¼šå°†æ–‡æœ¬ This is a test text.è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶ test.txt ä¸­ï¼Œå¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œå°†ä¼šè¦†ç›–æ–‡ä»¶å†…å®¹ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºã€‚å…¶ä¸­&gt;ç¬¦å·è¡¨ç¤ºè¾“å‡ºé‡å®šå‘ã€‚ 1echo &quot;This is a test text.&quot; &gt; test.txt å¦‚æœæ‚¨å¸Œæœ›å°†æ–‡æœ¬è¿½åŠ åˆ°æ–‡ä»¶å†…å®¹æœ€åï¼Œè€Œä¸æ˜¯è¦†ç›–å®ƒï¼Œè¯·ä½¿ç”¨&gt;&gt;è¾“å‡ºè¿½åŠ é‡å®šå‘ç¬¦å·ã€‚ æ˜¾ç¤ºå‘½ä»¤æ‰§è¡Œç»“æœä»¥ä¸‹å‘½ä»¤å°†ä¼šåœ¨ç»ˆç«¯æ˜¾ç¤ºå½“å‰çš„å·¥ä½œè·¯å¾„ã€‚ 1echo `pwd` æ³¨æ„ï¼špwd å‘½ä»¤æ˜¯ç”¨ä¸€å¯¹åå¼•å·ï¼ˆ&#96;&#96;ï¼‰åŒ…è£¹ï¼Œè€Œä¸æ˜¯ä¸€å¯¹å•å¼•å·ï¼ˆâ€™â€™ï¼‰ã€‚ä½¿ç”¨ $(command) å½¢å¼å¯ä»¥è¾¾åˆ°ç›¸åŒæ•ˆæœã€‚ 1echo $(pwd) Date ï¼šæ˜¾ç¤ºå’Œè®¾ç½®ç³»ç»Ÿçš„æ—¶é—´å’Œæ—¥æœŸå‘½ä»¤æè¿°ï¼šdate å‘½ä»¤ç”¨äºæ˜¾ç¤ºå’Œè®¾ç½®ç³»ç»Ÿçš„æ—¶é—´å’Œæ—¥æœŸã€‚ å‘½ä»¤æ ¼å¼ï¼šdate [é€‰é¡¹] [+ æ ¼å¼] å…¶ä¸­ï¼Œæ—¶é—´æ ¼å¼çš„éƒ¨åˆ†æ§åˆ¶å­—ç¬¦è§£é‡Šå¦‚ä¸‹ï¼š å­—ç¬¦è¯´æ˜%aå½“åœ°æ—¶é—´çš„æ˜ŸæœŸåç¼©å†™ï¼ˆä¾‹å¦‚ï¼š æ—¥ï¼Œä»£è¡¨æ˜ŸæœŸæ—¥ï¼‰%Aå½“åœ°æ—¶é—´çš„æ˜ŸæœŸåå…¨ç§° ï¼ˆä¾‹å¦‚ï¼šæ˜ŸæœŸæ—¥ï¼‰%bå½“åœ°æ—¶é—´çš„æœˆåç¼©å†™ ï¼ˆä¾‹å¦‚ï¼šä¸€ï¼Œä»£è¡¨ä¸€æœˆï¼‰%Bå½“åœ°æ—¶é—´çš„æœˆåå…¨ç§° ï¼ˆä¾‹å¦‚ï¼šä¸€æœˆï¼‰%cå½“åœ°æ—¶é—´çš„æ—¥æœŸå’Œæ—¶é—´ ï¼ˆä¾‹å¦‚ï¼š2005 å¹´ 3 æœˆ 3 æ—¥ æ˜ŸæœŸå›› 23:05:25ï¼‰%Cä¸–çºªï¼›æ¯”å¦‚ %Yï¼Œé€šå¸¸ä¸ºçœç•¥å½“å‰å¹´ä»½çš„åä¸¤ä½æ•°å­—ï¼ˆä¾‹å¦‚ï¼š20ï¼‰%dæŒ‰æœˆè®¡çš„æ—¥æœŸï¼ˆä¾‹å¦‚ï¼š01ï¼‰%DæŒ‰æœˆè®¡çš„æ—¥æœŸï¼›ç­‰äº%m/%d/%y%Få®Œæ•´æ—¥æœŸæ ¼å¼ï¼Œç­‰ä»·äº %Y-%m-%d%jæŒ‰å¹´è®¡çš„æ—¥æœŸï¼ˆ001-366ï¼‰%pæŒ‰å¹´è®¡çš„æ—¥æœŸï¼ˆ001-366ï¼‰%rå½“åœ°æ—¶é—´ä¸‹çš„ 12 å°æ—¶æ—¶é’Ÿæ—¶é—´ ï¼ˆä¾‹å¦‚ï¼š11:11:04 ä¸‹åˆï¼‰%R24 å°æ—¶æ—¶é—´çš„æ—¶å’Œåˆ†ï¼Œç­‰ä»·äº %H:%M%sè‡ª UTC æ—¶é—´ 1970-01-01 00:00:00 ä»¥æ¥æ‰€ç»è¿‡çš„ç§’æ•°%Tæ—¶é—´ï¼Œç­‰äº%H:%M:%S%Uä¸€å¹´ä¸­çš„ç¬¬å‡ å‘¨ï¼Œä»¥å‘¨æ—¥ä¸ºæ¯æ˜ŸæœŸç¬¬ä¸€å¤©ï¼ˆ00-53ï¼‰%xå½“åœ°æ—¶é—´ä¸‹çš„æ—¥æœŸæè¿° ï¼ˆä¾‹å¦‚ï¼š12/31/99ï¼‰%Xå½“åœ°æ—¶é—´ä¸‹çš„æ—¶é—´æè¿° ï¼ˆä¾‹å¦‚ï¼š23:13:48ï¼‰%wä¸€æ˜ŸæœŸä¸­çš„ç¬¬å‡ æ—¥ï¼ˆ0-6ï¼‰ï¼Œ0 ä»£è¡¨å‘¨ä¸€%Wä¸€å¹´ä¸­çš„ç¬¬å‡ å‘¨ï¼Œä»¥å‘¨ä¸€ä¸ºæ¯æ˜ŸæœŸç¬¬ä¸€å¤©ï¼ˆ00-53ï¼‰ å‘½ä»¤ç”¨æ³•ç¤ºä¾‹ï¼š æŒ‰ç…§é»˜è®¤æ ¼å¼æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ—¶é—´ 1date æŒ‰ç…§æŒ‡å®šæ ¼å¼æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ—¶é—´ 1date &quot;+%Y-%m-%d %H:%M:%S&quot; æŸ¥çœ‹ä»Šå¤©æ˜¯å½“å¹´ä¸­çš„ç¬¬å‡ å¤© 1date &quot;+%j&quot; å°†ç³»ç»Ÿçš„å½“å‰æ—¶é—´è®¾ç½®ä¸º 2020 å¹´ 02 æœˆ 20 æ—¥ 20 ç‚¹ 20 åˆ† 20 ç§’ 1date -s &quot;20200220 20:20:20&quot; æ ¡æ­£ç³»ç»Ÿæ—¶é—´ï¼Œä¸ç½‘ç»œæ—¶é—´åŒæ­¥ a. å®‰è£… ntp æ ¡æ—¶å·¥å…· 1yum -y install ntp b. ç”¨ ntpdate ä»æ—¶é—´æœåŠ¡å™¨æ›´æ–°æ—¶é—´ 1ntpdate time.nist.gov Wget ï¼šåœ¨ç»ˆç«¯ä¸­ä¸‹è½½æ–‡ä»¶å‘½ä»¤æè¿°ï¼šåœ¨ç»ˆç«¯ä¸­ä¸‹è½½æ–‡ä»¶ã€‚ å‘½ä»¤æ ¼å¼ï¼šwget [å‚æ•°] ä¸‹è½½åœ°å€ å‚æ•°è¯´æ˜ï¼š å‚æ•°ä½œç”¨-båå°ä¸‹è½½-Pä¸‹è½½åˆ°æŒ‡å®šç›®å½•-tæœ€å¤§é‡è¯•æ¬¡æ•°-cæ–­ç‚¹ç»­ä¼ -pä¸‹è½½é¡µé¢å†…æ‰€æœ‰èµ„æºï¼ŒåŒ…æ‹¬å›¾ç‰‡ã€è§†é¢‘ç­‰-ré€’å½’ä¸‹è½½ å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š ä¸‹è½½ä¸€å¼ å›¾ç‰‡åˆ°è·¯å¾„&#x2F;root&#x2F;static&#x2F;img&#x2F;ä¸­ï¼Œ-p å‚æ•°é»˜è®¤å€¼ä¸ºå½“å‰è·¯å¾„ï¼Œå¦‚æœæŒ‡å®šè·¯å¾„ä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»ºã€‚ 1wget -P /root/static/img/ http://img.alicdn.com/tfs/TB1.R._t7L0gK0jSZFxXXXWHVXa-2666-1500.png Ps ï¼šæŸ¥çœ‹ç³»ç»Ÿä¸­çš„è¿›ç¨‹çŠ¶æ€å‘½ä»¤æè¿°ï¼šps å‘½ä»¤ç”¨äºæŸ¥çœ‹ç³»ç»Ÿä¸­çš„è¿›ç¨‹çŠ¶æ€ã€‚ å‘½ä»¤æ ¼å¼ï¼šps [å‚æ•°] å‘½ä»¤å‚æ•°è¯´æ˜ï¼š å‚æ•°ä½œç”¨-aæ˜¾ç¤ºç°è¡Œç»ˆç«¯æœºä¸‹çš„æ‰€æœ‰ç¨‹åºï¼ŒåŒ…æ‹¬å…¶ä»–ç”¨æˆ·çš„ç¨‹åº-uä»¥ç”¨æˆ·ä¸ºä¸»çš„æ ¼å¼æ¥æ˜¾ç¤ºç¨‹åºçŠ¶å†µ-xæ˜¾ç¤ºæ²¡æœ‰æ§åˆ¶ç»ˆç«¯çš„è¿›ç¨‹ï¼ŒåŒæ—¶æ˜¾ç¤ºå„ä¸ªå‘½ä»¤çš„å…·ä½“è·¯å¾„-eåˆ—å‡ºç¨‹åºæ—¶ï¼Œæ˜¾ç¤ºæ¯ä¸ªç¨‹åºæ‰€ä½¿ç”¨çš„ç¯å¢ƒå˜é‡-fæ˜¾ç¤ºå½“å‰æ‰€æœ‰çš„è¿›ç¨‹-tæŒ‡å®šç»ˆç«¯æœºç¼–å·ï¼Œå¹¶åˆ—å‡ºå±äºè¯¥ç»ˆç«¯æœºçš„ç¨‹åºçš„çŠ¶å†µ å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š 1ps -ef | grep sshd Top ï¼šåŠ¨æ€åœ°ç›‘è§†è¿›ç¨‹æ´»åŠ¨ä¸ç³»ç»Ÿè´Ÿè½½ç­‰ä¿¡æ¯å‘½ä»¤æè¿°ï¼štop å‘½ä»¤åŠ¨æ€åœ°ç›‘è§†è¿›ç¨‹æ´»åŠ¨ä¸ç³»ç»Ÿè´Ÿè½½ç­‰ä¿¡æ¯ã€‚ å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š 1top å‘½ä»¤è¾“å‡ºå‚æ•°è§£é‡Šï¼š ä»¥ä¸Šå‘½ä»¤è¾“å‡ºè§†å›¾ä¸­åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼Œä¸€ä¸ªç»Ÿè®¡ä¿¡æ¯åŒºï¼Œä¸€ä¸ªè¿›ç¨‹ä¿¡æ¯åŒºã€‚ ç»Ÿè®¡ä¿¡æ¯åŒº ç¬¬ä¸€è¡Œä¿¡æ¯ä¾æ¬¡ä¸ºï¼šç³»ç»Ÿæ—¶é—´ã€è¿è¡Œæ—¶é—´ã€ç™»å½•ç»ˆç«¯æ•°ã€ç³»ç»Ÿè´Ÿè½½ï¼ˆä¸‰ä¸ªæ•°å€¼åˆ†åˆ«ä¸º 1 åˆ†é’Ÿã€5 åˆ†é’Ÿã€15 åˆ†é’Ÿå†…çš„å¹³å‡å€¼ï¼Œæ•°å€¼è¶Šå°æ„å‘³ç€è´Ÿè½½è¶Šä½ï¼‰ã€‚ ç¬¬äºŒè¡Œä¿¡æ¯ä¾æ¬¡ä¸ºï¼šè¿›ç¨‹æ€»æ•°ã€è¿è¡Œä¸­çš„è¿›ç¨‹æ•°ã€ç¡çœ ä¸­çš„è¿›ç¨‹æ•°ã€åœæ­¢çš„è¿›ç¨‹æ•°ã€åƒµæ­»çš„è¿›ç¨‹æ•°ã€‚ ç¬¬ä¸‰è¡Œä¿¡æ¯ä¾æ¬¡ä¸ºï¼šç”¨æˆ·å ç”¨èµ„æºç™¾åˆ†æ¯”ã€ç³»ç»Ÿå†…æ ¸å ç”¨èµ„æºç™¾åˆ†æ¯”ã€æ”¹å˜è¿‡ä¼˜å…ˆçº§çš„è¿›ç¨‹èµ„æºç™¾åˆ†æ¯”ã€ç©ºé—²çš„èµ„æºç™¾åˆ†æ¯”ç­‰ã€‚ ç¬¬å››è¡Œä¿¡æ¯ä¾æ¬¡ä¸ºï¼šç‰©ç†å†…å­˜æ€»é‡ã€å†…å­˜ä½¿ç”¨é‡ã€å†…å­˜ç©ºé—²é‡ã€ä½œä¸ºå†…æ ¸ç¼“å­˜çš„å†…å­˜é‡ã€‚ ç¬¬äº”è¡Œä¿¡æ¯ä¾æ¬¡ä¸ºï¼šè™šæ‹Ÿå†…å­˜æ€»é‡ã€è™šæ‹Ÿå†…å­˜ä½¿ç”¨é‡ã€è™šæ‹Ÿå†…å­˜ç©ºé—²é‡ã€é¢„åŠ è½½å†…å­˜é‡ã€‚ è¿›ç¨‹ä¿¡æ¯åŒº åˆ—åå«ä¹‰PIDè¿›ç¨‹ IDUSERè¿›ç¨‹æ‰€æœ‰è€…çš„ç”¨æˆ·åPRè¿›ç¨‹ä¼˜å…ˆçº§NInice å€¼ã€‚è´Ÿå€¼è¡¨ç¤ºé«˜ä¼˜å…ˆçº§ï¼Œæ­£å€¼è¡¨ç¤ºä½ä¼˜å…ˆçº§VIRTè¿›ç¨‹ä½¿ç”¨çš„è™šæ‹Ÿå†…å­˜æ€»é‡ï¼Œå•ä½ kbRESè¿›ç¨‹ä½¿ç”¨çš„ã€æœªè¢«æ¢å‡ºçš„ç‰©ç†å†…å­˜å¤§å°ï¼Œå•ä½ kbSHRå…±äº«å†…å­˜å¤§å°ï¼Œå•ä½ kbSè¿›ç¨‹çŠ¶æ€Dï¼šä¸å¯ä¸­æ–­çš„ç¡çœ çŠ¶æ€Rï¼šæ­£åœ¨è¿è¡ŒSï¼šç¡çœ Tï¼šåœæ­¢Zï¼šåƒµå°¸è¿›ç¨‹%CPUä¸Šæ¬¡æ›´æ–°åˆ°ç°åœ¨çš„ CPU æ—¶é—´å ç”¨ç™¾åˆ†æ¯”%MEMè¿›ç¨‹ä½¿ç”¨çš„ç‰©ç†å†…å­˜ç™¾åˆ†æ¯”TIME+è¿›ç¨‹ä½¿ç”¨çš„ CPU æ—¶é—´æ€»è®¡ï¼Œå•ä½ 1&#x2F;100 ç§’COMMANDå‘½ä»¤å æŒ‰ q é”®é€€å‡ºç›‘æ§é¡µé¢ã€‚ Pidof ï¼šæŸ¥è¯¢æŒ‡å®šæœåŠ¡è¿›ç¨‹çš„ PID å€¼å‘½ä»¤æè¿°ï¼špidof å‘½ä»¤ç”¨äºæŸ¥è¯¢æŒ‡å®šæœåŠ¡è¿›ç¨‹çš„ PID å€¼ã€‚ å‘½ä»¤æ ¼å¼ï¼špidof [æœåŠ¡åç§°] å‘½ä»¤å‚æ•°è¯´æ˜ï¼š å‚æ•°è¯´æ˜-sä»…è¿”å›ä¸€ä¸ªè¿›ç¨‹å·-cåªæ˜¾ç¤ºè¿è¡Œåœ¨ root ç›®å½•ä¸‹çš„è¿›ç¨‹ï¼Œè¿™ä¸ªé€‰é¡¹åªå¯¹ root ç”¨æˆ·æœ‰æ•ˆ-oå¿½ç•¥æŒ‡å®šè¿›ç¨‹å·çš„è¿›ç¨‹-xæ˜¾ç¤ºç”±è„šæœ¬å¼€å¯çš„è¿›ç¨‹ å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š æŸ¥è¯¢å‡º crond æœåŠ¡ä¸‹çš„æ‰€æœ‰è¿›ç¨‹ IDã€‚ 1pidof crond Kill ï¼šç»ˆæ­¢æŒ‡å®š PID çš„æœåŠ¡è¿›ç¨‹å‘½ä»¤æè¿°ï¼škill å‘½ä»¤ç”¨äºç»ˆæ­¢æŒ‡å®š PID çš„æœåŠ¡è¿›ç¨‹ã€‚ kill å¯å°†æŒ‡å®šçš„ä¿¡æ¯é€è‡³ç¨‹åºã€‚é¢„è®¾çš„ä¿¡æ¯ä¸º SIGTERM(15)ï¼Œå¯å°†æŒ‡å®šç¨‹åºç»ˆæ­¢ã€‚è‹¥ä»æ— æ³•ç»ˆæ­¢è¯¥ç¨‹åºï¼Œå¯ä½¿ç”¨ SIGKILL(9) ä¿¡æ¯å°è¯•å¼ºåˆ¶åˆ é™¤ç¨‹åºã€‚ å‘½ä»¤æ ¼å¼ï¼škill [å‚æ•°] [è¿›ç¨‹ PID] å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š åˆ é™¤ pid ä¸º 1247 çš„è¿›ç¨‹ã€‚ 1kill -9 1247 Killall ï¼šç»ˆæ­¢æŒ‡å®šåç§°çš„æœåŠ¡å¯¹åº”çš„å…¨éƒ¨è¿›ç¨‹å‘½ä»¤æè¿°ï¼škillall å‘½ä»¤ç”¨äºç»ˆæ­¢æŒ‡å®šåç§°çš„æœåŠ¡å¯¹åº”çš„å…¨éƒ¨è¿›ç¨‹ã€‚ å‘½ä»¤æ ¼å¼ï¼škillall [è¿›ç¨‹åç§°] å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š åˆ é™¤ crond æœåŠ¡ä¸‹çš„æ‰€æœ‰è¿›ç¨‹ã€‚ 1killall crond Reboot ï¼šé‡å¯ç³»ç»Ÿå‘½ä»¤æè¿°ï¼šreboot å‘½ä»¤ç”¨æ¥é‡å¯ç³»ç»Ÿã€‚ å‘½ä»¤æ ¼å¼ï¼šreboot [-n] [-w] [-d] [-f] [-i] å‘½ä»¤å‚æ•°è¯´æ˜ï¼š -nï¼šä¿å­˜æ•°æ®åå†é‡æ–°å¯åŠ¨ç³»ç»Ÿã€‚ -wï¼šä»…åšæµ‹è¯•ï¼Œå¹¶ä¸æ˜¯çœŸçš„å°†ç³»ç»Ÿé‡æ–°å¼€æœºï¼Œåªä¼šæŠŠé‡æ–°å¼€æœºçš„æ•°æ®å†™å…¥è®°å½•æ–‡ä»¶&#x2F;var&#x2F;log&#x2F;wtmpã€‚ -dï¼šé‡æ–°å¯åŠ¨æ—¶ä¸æŠŠæ•°æ®å†™å…¥è®°å½•æ–‡ä»¶&#x2F;var&#x2F;tmp&#x2F;wtmpã€‚ -fï¼šå¼ºåˆ¶é‡æ–°å¼€æœºï¼Œä¸è°ƒç”¨ shutdown æŒ‡ä»¤çš„åŠŸèƒ½ã€‚ -iï¼šå…³é—­ç½‘ç»œè®¾ç½®ä¹‹åå†é‡æ–°å¯åŠ¨ç³»ç»Ÿã€‚ å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š 1reboot Poweroff ï¼šå…³é—­ç³»ç»Ÿå‘½ä»¤æè¿°ï¼špoweroff å‘½ä»¤ç”¨æ¥å…³é—­ç³»ç»Ÿã€‚ å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š 1poweroff ç³»ç»ŸçŠ¶æ€æ£€æµ‹å‘½ä»¤Ifconfig ï¼šè·å–ç½‘å¡é…ç½®ä¸ç½‘ç»œçŠ¶æ€ç­‰ä¿¡æ¯å‘½ä»¤æè¿°ï¼šifconfig å‘½ä»¤ç”¨äºè·å–ç½‘å¡é…ç½®ä¸ç½‘ç»œçŠ¶æ€ç­‰ä¿¡æ¯ã€‚ å‘½ä»¤ç¤ºä¾‹ï¼š å‘½ä»¤è¾“å‡ºè¯´æ˜ï¼š ç¬¬ä¸€éƒ¨åˆ†çš„ç¬¬ä¸€è¡Œæ˜¾ç¤ºç½‘å¡çŠ¶æ€ä¿¡æ¯ã€‚ eth0 è¡¨ç¤ºç¬¬ä¸€å—ç½‘å¡ã€‚ UP ä»£è¡¨ç½‘å¡å¼€å¯çŠ¶æ€ã€‚ RUNNING ä»£è¡¨ç½‘å¡çš„ç½‘çº¿è¢«æ¥ä¸Šã€‚ MULTICAST è¡¨ç¤ºæ”¯æŒç»„æ’­ã€‚ ç¬¬äºŒè¡Œæ˜¾ç¤ºç½‘å¡çš„ç½‘ç»œä¿¡æ¯ã€‚ inetï¼ˆIP åœ°å€ï¼‰ï¼š172.16.132.195ã€‚ broadcastï¼ˆå¹¿æ’­åœ°å€ï¼‰ï¼š172.16.143.255ã€‚ netmaskï¼ˆæ©ç åœ°å€ï¼‰ï¼š255.255.240.0ã€‚ RX è¡¨ç¤ºæ¥æ”¶æ•°æ®åŒ…çš„æƒ…å†µï¼ŒTX è¡¨ç¤ºå‘é€æ•°æ®åŒ…çš„æƒ…å†µã€‚ lo è¡¨ç¤ºä¸»æœºçš„å›ç¯ç½‘å¡ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„ç½‘ç»œæ¥å£ï¼Œä¸ä¸ä»»ä½•å®é™…è®¾å¤‡è¿æ¥ï¼Œè€Œæ˜¯å®Œå…¨ç”±è½¯ä»¶å®ç°ã€‚ä¸å›ç¯åœ°å€ï¼ˆ127.0.0.0&#x2F;8 æˆ– ::1&#x2F;128ï¼‰ä¸åŒï¼Œå›ç¯ç½‘å¡å¯¹ç³»ç»Ÿæ˜¾ç¤ºä¸ºä¸€å—ç¡¬ä»¶ã€‚ä»»ä½•å‘é€åˆ°è¯¥ç½‘å¡ä¸Šçš„æ•°æ®éƒ½å°†ç«‹åˆ»è¢«åŒä¸€ç½‘å¡æ¥æ”¶åˆ°ã€‚ Uname ï¼šæŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ä¸ç³»ç»Ÿç‰ˆæœ¬ç­‰ä¿¡æ¯å‘½ä»¤æè¿°ï¼šuname å‘½ä»¤ç”¨äºæŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ä¸ç³»ç»Ÿç‰ˆæœ¬ç­‰ä¿¡æ¯ã€‚ å‘½ä»¤è¯­æ³•ï¼šuname [-amnrsv][--help][--version] å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š æ˜¾ç¤ºç³»ç»Ÿä¿¡æ¯ã€‚ 1uname -a æ˜¾ç¤ºå½“å‰ç³»ç»Ÿçš„ç¡¬ä»¶æ¶æ„ã€‚ 1uname -i æ˜¾ç¤ºæ“ä½œç³»ç»Ÿå‘è¡Œç¼–å·ã€‚ 1uname -r æ˜¾ç¤ºæ“ä½œç³»ç»Ÿåç§°ã€‚ 1uname -s æ˜¾ç¤ºä¸»æœºåç§°ã€‚ 1uname -n Uptime ï¼šæŸ¥çœ‹ç³»ç»Ÿçš„è´Ÿè½½ä¿¡æ¯å‘½ä»¤æè¿°ï¼šuptime ç”¨äºæŸ¥çœ‹ç³»ç»Ÿçš„è´Ÿè½½ä¿¡æ¯ã€‚ å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š å‘½ä»¤è¾“å‡ºè¯´æ˜ï¼š è´Ÿè½½ä¿¡æ¯å‘½ä»¤è¾“å‡ºå€¼å½“å‰æœåŠ¡å™¨æ—¶é—´14:20:27å½“å‰æœåŠ¡å™¨è¿è¡Œæ—¶é•¿2 minå½“å‰ç”¨æˆ·æ•°2 userså½“å‰è´Ÿè½½æƒ…å†µload average: 0.03, 0.04, 0.02ï¼ˆåˆ†åˆ«å– 1minï¼Œ5minï¼Œ15min çš„å‡å€¼ï¼‰ Free ï¼šæ˜¾ç¤ºå½“å‰ç³»ç»Ÿä¸­å†…å­˜çš„ä½¿ç”¨é‡ä¿¡æ¯å‘½ä»¤æè¿°ï¼šfree ç”¨äºæ˜¾ç¤ºå½“å‰ç³»ç»Ÿä¸­å†…å­˜çš„ä½¿ç”¨é‡ä¿¡æ¯ã€‚ å‘½ä»¤è¯­æ³•ï¼šfree [-bkmotV][-s &lt;é—´éš”ç§’æ•°&gt;] å‘½ä»¤å‚æ•°è¯´æ˜ï¼š å‚æ•°è¯´æ˜-bä»¥ Byte ä¸ºå•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µ-kä»¥ KB ä¸ºå•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µ-mä»¥ MB ä¸ºå•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µ-hä»¥åˆé€‚çš„å•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µï¼Œæœ€å¤§ä¸ºä¸‰ä½æ•°ï¼Œè‡ªåŠ¨è®¡ç®—å¯¹åº”çš„å•ä½å€¼ã€‚ å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š å‘½ä»¤è¾“å‡ºè¯´æ˜ï¼š å‚æ•°è¯´æ˜totalç‰©ç†å†…å­˜æ€»æ•°usedå·²ç»ä½¿ç”¨çš„å†…å­˜æ•°freeç©ºé—´çš„å†…å­˜æ•°shareå¤šä¸ªè¿›ç¨‹å…±äº«çš„å†…å­˜æ€»é¢buff/cacheåº”ç”¨ä½¿ç”¨å†…å­˜æ•°availableå¯ç”¨çš„å†…å­˜æ•°Swapè™šæ‹Ÿå†…å­˜ï¼ˆé˜¿é‡Œäº‘ ECS æœåŠ¡å™¨é»˜è®¤ä¸å¼€å¯è™šæ‹Ÿå†…å­˜ï¼‰ Who ï¼šæ˜¾ç¤ºå…³äºå½“å‰åœ¨æœ¬åœ°ç³»ç»Ÿä¸Šçš„æ‰€æœ‰ç”¨æˆ·çš„ä¿¡æ¯å‘½ä»¤æè¿°ï¼šwho å‘½ä»¤æ˜¾ç¤ºå…³äºå½“å‰åœ¨æœ¬åœ°ç³»ç»Ÿä¸Šçš„æ‰€æœ‰ç”¨æˆ·çš„ä¿¡æ¯ã€‚ å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š æ˜¾ç¤ºå½“å‰ç™»å½•ç³»ç»Ÿçš„ç”¨æˆ· 1who æ˜¾ç¤ºç”¨æˆ·ç™»å½•æ¥æº 1who -l -H åªæ˜¾ç¤ºå½“å‰ç”¨æˆ· 1who -m -H ç²¾ç®€æ¨¡å¼æ˜¾ç¤º 1who -q Last ï¼šæ˜¾ç¤ºç”¨æˆ·æœ€è¿‘ç™»å½•ä¿¡æ¯å‘½ä»¤æè¿°ï¼š last å‘½ä»¤ç”¨äºæ˜¾ç¤ºç”¨æˆ·æœ€è¿‘ç™»å½•ä¿¡æ¯ã€‚ 1last History ï¼šæ˜¾ç¤ºå†å²æ‰§è¡Œè¿‡çš„å‘½ä»¤å‘½ä»¤æè¿°ï¼šhistory å‘½ä»¤ç”¨äºæ˜¾ç¤ºå†å²æ‰§è¡Œè¿‡çš„å‘½ä»¤ã€‚ bash é»˜è®¤è®°å½• 1000 æ¡æ‰§è¡Œè¿‡çš„å†å²å‘½ä»¤ï¼Œè¢«è®°å½•åœ¨~&#x2F;.bash_history æ–‡ä»¶ä¸­ã€‚ å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š æ˜¾ç¤ºæœ€æ–° 10 æ¡æ‰§è¡Œè¿‡çš„å‘½ä»¤ã€‚ 1history 10 æ¸…é™¤å†å²è®°å½•ã€‚ 1history -c","categories":[{"name":"Programming Language","slug":"Programming-Language","permalink":"http://blog.sukiu.top/categories/Programming-Language/"},{"name":"Shell","slug":"Programming-Language/Shell","permalink":"http://blog.sukiu.top/categories/Programming-Language/Shell/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://blog.sukiu.top/tags/Linux/"}]},{"title":"LinuxæŒ‡ä»¤ä¹‹æ–‡æœ¬å¤„ç†","slug":"Linux-Text-Processing","date":"2021-11-07T14:38:00.000Z","updated":"2021-11-07T14:38:00.000Z","comments":true,"path":"Programming-Language/Shell/Linux-Text-Processing/","link":"","permalink":"http://blog.sukiu.top/Programming-Language/Shell/Linux-Text-Processing/","excerpt":"å¦‚ä½•ä½¿ç”¨ Linux ç³»ç»Ÿä¸­çš„æ–‡æœ¬ç¼–è¾‘å·¥å…· Vim ä»¥åŠæ–‡æœ¬å¤„ç†å‘½ä»¤ã€‚","text":"å¦‚ä½•ä½¿ç”¨ Linux ç³»ç»Ÿä¸­çš„æ–‡æœ¬ç¼–è¾‘å·¥å…· Vim ä»¥åŠæ–‡æœ¬å¤„ç†å‘½ä»¤ã€‚ æ–‡æœ¬ç¼–è¾‘å·¥å…· Vimvim çš„ä¸‰ç§æ“ä½œæ¨¡å¼ï¼š å‘½ä»¤æ¨¡å¼ï¼ˆCommand modeï¼‰ è¾“å…¥æ¨¡å¼ï¼ˆInsert modeï¼‰ åº•çº¿å‘½ä»¤æ¨¡å¼ï¼ˆLast line modeï¼‰ ä¸‰ç§æ¨¡å¼åˆ‡æ¢å¿«æ·é”®ï¼š æ¨¡å¼ å¿«æ·é”® å‘½ä»¤æ¨¡å¼ ESC è¾“å…¥æ¨¡å¼ i æˆ– a åº•çº¿å‘½ä»¤æ¨¡å¼ : å‘½ä»¤æ¨¡å¼åœ¨å‘½ä»¤æ¨¡å¼ä¸­æ§åˆ¶å…‰æ ‡ç§»åŠ¨å’Œè¾“å…¥å‘½ä»¤ï¼Œå¯å¯¹æ–‡æœ¬è¿›è¡Œå¤åˆ¶ã€ç²˜è´´ã€åˆ é™¤å’ŒæŸ¥æ‰¾ç­‰å·¥ä½œã€‚ ä½¿ç”¨å‘½ä»¤ vim filename åè¿›å…¥ç¼–è¾‘å™¨è§†å›¾åï¼Œé»˜è®¤æ¨¡å¼å°±æ˜¯å‘½ä»¤æ¨¡å¼ï¼Œæ­¤æ—¶æ•²å‡»é”®ç›˜å­—æ¯ä¼šè¢«è¯†åˆ«ä¸ºä¸€ä¸ªå‘½ä»¤ï¼Œä¾‹å¦‚åœ¨é”®ç›˜ä¸Šè¿ç»­æ•²å‡»ä¸¤æ¬¡ dï¼Œå°±ä¼šåˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œã€‚ ä»¥ä¸‹æ˜¯åœ¨å‘½ä»¤æ¨¡å¼ä¸­å¸¸ç”¨çš„å¿«æ·æ“ä½œï¼š æ“ä½œå¿«æ·é”®å…‰æ ‡å·¦ç§»hå…‰æ ‡å³ç§»lï¼ˆå°å†™ Lï¼‰å…‰æ ‡ä¸Šç§»kå…‰æ ‡ä¸‹ç§»jå…‰æ ‡ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯wå…‰æ ‡ç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªå•è¯bç§»åŠ¨æ¸¸æ ‡åˆ°ç¬¬ n è¡ŒnGç§»åŠ¨æ¸¸æ ‡åˆ°ç¬¬ä¸€è¡Œggç§»åŠ¨æ¸¸æ ‡åˆ°æœ€åä¸€è¡ŒGå¿«é€Ÿå›åˆ°ä¸Šä¸€æ¬¡å…‰æ ‡æ‰€åœ¨ä½ç½®Ctrl+oåˆ é™¤å½“å‰å­—ç¬¦xåˆ é™¤å‰ä¸€ä¸ªå­—ç¬¦Xåˆ é™¤æ•´è¡Œddåˆ é™¤ä¸€ä¸ªå•è¯dw æˆ– dawåˆ é™¤è‡³è¡Œå°¾d$æˆ– Dåˆ é™¤è‡³è¡Œé¦–d^åˆ é™¤åˆ°æ–‡æ¡£æœ«å°¾dGåˆ é™¤è‡³æ–‡æ¡£é¦–éƒ¨d1Gåˆ é™¤ n è¡Œnddåˆ é™¤ n ä¸ªè¿ç»­å­—ç¬¦nxå°†å…‰æ ‡æ‰€åœ¨ä½ç½®å­—æ¯å˜æˆå¤§å†™æˆ–å°å†™~å¤åˆ¶æ¸¸æ ‡æ‰€åœ¨çš„æ•´è¡Œyyï¼ˆ3yy è¡¨ç¤ºå¤åˆ¶ 3 è¡Œï¼‰ç²˜è´´è‡³å…‰æ ‡åï¼ˆä¸‹ï¼‰pç²˜è´´è‡³å…‰æ ‡å‰ï¼ˆä¸Šï¼‰På‰ªåˆ‡ddäº¤æ¢ä¸Šä¸‹è¡Œddpæ›¿æ¢æ•´è¡Œï¼Œå³åˆ é™¤æ¸¸æ ‡æ‰€åœ¨è¡Œå¹¶è¿›å…¥æ’å…¥æ¨¡å¼ccæ’¤é”€ä¸€æ¬¡æˆ– n æ¬¡æ“ä½œu{n}æ’¤é”€å½“å‰è¡Œçš„æ‰€æœ‰ä¿®æ”¹Uæ¢å¤æ’¤é”€æ“ä½œCtrl+ræ•´è¡Œå°†å‘å³ç¼©è¿›&gt;&gt;æ•´è¡Œå°†å‘å·¦é€€å›&lt;&lt;è‹¥æ¡£æ¡ˆæ²¡æœ‰æ›´åŠ¨ï¼Œåˆ™ä¸å‚¨å­˜ç¦»å¼€ï¼Œè‹¥æ¡£æ¡ˆå·²ç»è¢«æ›´åŠ¨è¿‡ï¼Œåˆ™å‚¨å­˜åç¦»å¼€ZZ è¾“å…¥æ¨¡å¼åœ¨å‘½ä»¤æ¨¡å¼ä¸‹æŒ‰ i æˆ– a é”®å°±è¿›å…¥äº†è¾“å…¥æ¨¡å¼ï¼Œåœ¨è¾“å…¥æ¨¡å¼ä¸‹ï¼Œæ‚¨å¯ä»¥æ­£å¸¸çš„ä½¿ç”¨é”®ç›˜æŒ‰é”®å¯¹æ–‡æœ¬è¿›è¡Œæ’å…¥å’Œåˆ é™¤ç­‰æ“ä½œã€‚ åº•çº¿å‘½ä»¤æ¨¡å¼åœ¨å‘½ä»¤æ¨¡å¼ä¸‹æŒ‰: é”®å°±è¿›å…¥äº†åº•çº¿å‘½ä»¤æ¨¡å¼ï¼Œåœ¨åº•çº¿å‘½ä»¤æ¨¡å¼ä¸­å¯ä»¥è¾“å…¥å•ä¸ªæˆ–å¤šä¸ªå­—ç¬¦çš„å‘½ä»¤ã€‚ ä»¥ä¸‹æ˜¯åº•çº¿å‘½ä»¤æ¨¡å¼ä¸­å¸¸ç”¨çš„å¿«æ·æ“ä½œï¼š æ“ä½œå‘½ä»¤ä¿å­˜:wé€€å‡º:qä¿å­˜å¹¶é€€å‡º:wqï¼ˆ:wq!è¡¨ç¤ºå¼ºåˆ¶ä¿å­˜é€€å‡ºï¼‰å°†æ–‡ä»¶å¦å­˜ä¸ºå…¶ä»–æ–‡ä»¶å:w new_filenameæ˜¾ç¤ºè¡Œå·:set nuå–æ¶ˆè¡Œå·:set nonuä½¿æœ¬è¡Œå†…å®¹å±…ä¸­:ceä½¿æœ¬è¡Œæ–‡æœ¬é å³:riä½¿æœ¬è¡Œå†…å®¹é å·¦:leå‘å…‰æ ‡ä¹‹ä¸‹å¯»æ‰¾ä¸€ä¸ªåç§°ä¸º word çš„å­—ç¬¦ä¸²:/wordå‘å…‰æ ‡ä¹‹ä¸Šå¯»æ‰¾ä¸€ä¸ªå­—ç¬¦ä¸²åç§°ä¸º word çš„å­—ç¬¦ä¸²:?wordé‡å¤å‰ä¸€ä¸ªæœå¯»çš„åŠ¨ä½œ:nä»ç¬¬ä¸€è¡Œåˆ°æœ€åä¸€è¡Œå¯»æ‰¾ word1 å­—ç¬¦ä¸²ï¼Œå¹¶å°†è¯¥å­—ç¬¦ä¸²å–ä»£ä¸º word2:1,$s/word1/word2/g æˆ– &nbsp;:%s/word1/word2/g æ–‡æœ¬æ–‡ä»¶æŸ¥çœ‹å‘½ä»¤Cat ï¼šæŸ¥çœ‹å†…å®¹è¾ƒå°‘çš„çº¯æ–‡æœ¬æ–‡ä»¶å‘½ä»¤æè¿°ï¼šcat å‘½ä»¤ç”¨äºæŸ¥çœ‹å†…å®¹è¾ƒå°‘çš„çº¯æ–‡æœ¬æ–‡ä»¶ã€‚ å‘½ä»¤æ ¼å¼ï¼šcat [é€‰é¡¹] [æ–‡ä»¶] å‘½ä»¤å‚æ•°è¯´æ˜ï¼š å‚æ•°è¯´æ˜-n æˆ– --numberæ˜¾ç¤ºè¡Œå·-b æˆ– --number-nonblankæ˜¾ç¤ºè¡Œå·ï¼Œä½†æ˜¯ä¸å¯¹ç©ºç™½è¡Œè¿›è¡Œç¼–å·-s æˆ– --squeeze-blankå½“é‡åˆ°æœ‰è¿ç»­ä¸¤è¡Œä»¥ä¸Šçš„ç©ºç™½è¡Œï¼Œåªæ˜¾ç¤ºä¸€è¡Œçš„ç©ºç™½è¡Œ More ï¼šä»å‰å‘ååˆ†é¡µæ˜¾ç¤ºæ–‡ä»¶å†…å®¹å‘½ä»¤æè¿°ï¼šmore å‘½ä»¤ä»å‰å‘ååˆ†é¡µæ˜¾ç¤ºæ–‡ä»¶å†…å®¹ã€‚ å¸¸ç”¨æ“ä½œå‘½ä»¤ï¼š æ“ä½œä½œç”¨Enterå‘ä¸‹ n è¡Œï¼Œn éœ€è¦å®šä¹‰ï¼Œé»˜è®¤ä¸º 1 è¡ŒCtrl+F æˆ–ç©ºæ ¼é”®ï¼ˆSpaceï¼‰å‘ä¸‹æ»šåŠ¨ä¸€é¡µCtrl+Bå‘ä¸Šæ»šåŠ¨ä¸€é¡µ=è¾“å‡ºå½“å‰è¡Œçš„è¡Œå·!å‘½ä»¤è°ƒç”¨ Shell æ‰§è¡Œå‘½ä»¤qé€€å‡º more Less ï¼šå¯¹æ–‡ä»¶æˆ–å…¶å®ƒè¾“å‡ºè¿›è¡Œåˆ†é¡µæ˜¾ç¤ºå‘½ä»¤æè¿°ï¼šless å‘½ä»¤å¯ä»¥å¯¹æ–‡ä»¶æˆ–å…¶å®ƒè¾“å‡ºè¿›è¡Œåˆ†é¡µæ˜¾ç¤ºï¼Œä¸ moe å‘½ä»¤ç›¸ä¼¼ï¼Œä½†ä½¿ç”¨ less å¯ä»¥éšæ„æµè§ˆæ–‡ä»¶ï¼Œè€Œ more ä»…èƒ½å‘å‰ç§»åŠ¨ï¼Œå´ä¸èƒ½å‘åç§»åŠ¨ã€‚ å‘½ä»¤æ ¼å¼ï¼šless [å‚æ•°] æ–‡ä»¶ å‘½ä»¤å‚æ•°è¯´æ˜ï¼š å‚æ•°è¯´æ˜-eå½“æ–‡ä»¶æ˜¾ç¤ºç»“æŸåï¼Œè‡ªåŠ¨ç¦»å¼€-mæ˜¾ç¤ºç±»ä¼¼more å‘½ä»¤çš„ç™¾åˆ†æ¯”-Næ˜¾ç¤ºæ¯è¡Œçš„è¡Œå·-sæ˜¾ç¤ºè¿ç»­ç©ºè¡Œä¸ºä¸€è¡Œ å‘½ä»¤å¸¸ç”¨æ“ä½œï¼š å¿«æ·é”®è¯´æ˜/å­—ç¬¦ä¸²å‘ä¸‹æœç´¢å­—ç¬¦ä¸²?å­—ç¬¦ä¸²å‘ä¸Šæœç´¢å­—ç¬¦ä¸²né‡å¤å‰ä¸€ä¸ªæœç´¢Nåå‘é‡å¤å‰ä¸€ä¸ªæœç´¢b æˆ–pageupé”®å‘ä¸Šç¿»ä¸€é¡µç©ºæ ¼é”®æˆ–pagedowné”®å‘ä¸‹ç¿»ä¸€é¡µuå‘å‰ç¿»åŠé¡µdå‘åç¿»åŠé¡µyå‘å‰æ»šåŠ¨ä¸€è¡Œå›è½¦é”®å‘åæ»šåŠ¨ä¸€è¡Œqé€€å‡ºless å‘½ä»¤ å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š æŸ¥çœ‹å‘½ä»¤å†å²ä½¿ç”¨è®°å½•å¹¶é€šè¿‡less åˆ†é¡µæ˜¾ç¤ºã€‚ 1history | less Head ï¼šæŸ¥çœ‹æ–‡ä»¶å¼€å¤´æŒ‡å®šè¡Œæ•°çš„å†…å®¹å‘½ä»¤æè¿°ï¼šhead å‘½ä»¤ç”¨äºæŸ¥çœ‹æ–‡ä»¶å¼€å¤´æŒ‡å®šè¡Œæ•°çš„å†…å®¹ã€‚ å‘½ä»¤æ ¼å¼ï¼šhead [å‚æ•°] [æ–‡ä»¶] å‘½ä»¤å‚æ•°è¯´æ˜ï¼š å‚æ•°è¯´æ˜-n [è¡Œæ•°]æ˜¾ç¤ºå¼€å¤´æŒ‡å®šè¡Œçš„æ–‡ä»¶å†…å®¹ï¼Œé»˜è®¤ä¸º 10-c [å­—ç¬¦æ•°]æ˜¾ç¤ºå¼€å¤´æŒ‡å®šä¸ªæ•°çš„å­—ç¬¦æ•°-qä¸æ˜¾ç¤ºæ–‡ä»¶åå­—ä¿¡æ¯ï¼Œé€‚ç”¨äºå¤šä¸ªæ–‡ä»¶ï¼Œå¤šæ–‡ä»¶æ—¶é»˜è®¤ä¼šæ˜¾ç¤ºæ–‡ä»¶å å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š æŸ¥çœ‹&#x2F;etc&#x2F;passwd æ–‡ä»¶çš„å‰ 5 è¡Œå†…å®¹ã€‚ 1head -5 /etc/passwd Tail ï¼šæŸ¥çœ‹æ–‡æ¡£çš„å N è¡Œæˆ–æŒç»­åˆ·æ–°å†…å®¹å‘½ä»¤æè¿°ï¼štail å‘½ä»¤ç”¨äºæŸ¥çœ‹æ–‡æ¡£çš„å N è¡Œæˆ–æŒç»­åˆ·æ–°å†…å®¹ã€‚ å‘½ä»¤æ ¼å¼ï¼štail [å‚æ•°] [æ–‡ä»¶] å‘½ä»¤å‚æ•°è¯´æ˜ï¼š å‚æ•°è¯´æ˜-fæ˜¾ç¤ºæ–‡ä»¶æœ€æ–°è¿½åŠ çš„å†…å®¹-qå½“æœ‰å¤šä¸ªæ–‡ä»¶å‚æ•°æ—¶ï¼Œä¸è¾“å‡ºå„ä¸ªæ–‡ä»¶å-vå½“æœ‰å¤šä¸ªæ–‡ä»¶å‚æ•°æ—¶ï¼Œæ€»æ˜¯è¾“å‡ºå„ä¸ªæ–‡ä»¶å-c [å­—èŠ‚æ•°]æ˜¾ç¤ºæ–‡ä»¶çš„å°¾éƒ¨ n ä¸ªå­—èŠ‚å†…å®¹-n [è¡Œæ•°]æ˜¾ç¤ºæ–‡ä»¶çš„å°¾éƒ¨ n è¡Œå†…å®¹ å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š æŸ¥çœ‹&#x2F;var&#x2F;log&#x2F;messages ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶çš„æœ€æ–° 10 è¡Œï¼Œå¹¶ä¿æŒå®æ—¶åˆ·æ–°ã€‚ 1tail -f -n 10 /var/log/messages Stat ï¼šæ˜¾ç¤ºæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯å‘½ä»¤æè¿°ï¼šç”¨æ¥æ˜¾ç¤ºæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ inodeã€atimeã€mtimeã€ctime ç­‰ã€‚ å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š æŸ¥çœ‹&#x2F;etc&#x2F;passwd æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ã€‚ 1stat /etc/passwd Wc ï¼šç»Ÿè®¡æŒ‡å®šæ–‡æœ¬çš„è¡Œæ•°ã€å­—æ•°ã€å­—èŠ‚æ•°å‘½ä»¤æè¿°ï¼šwc å‘½ä»¤ç”¨äºç»Ÿè®¡æŒ‡å®šæ–‡æœ¬çš„è¡Œæ•°ã€å­—æ•°ã€å­—èŠ‚æ•°ã€‚ å‘½ä»¤æ ¼å¼ï¼šwc [å‚æ•°] [æ–‡ä»¶] å‘½ä»¤å‚æ•°è¯´æ˜ï¼š å‚æ•°è¯´æ˜-låªæ˜¾ç¤ºè¡Œæ•°-wåªæ˜¾ç¤ºå•è¯æ•°-cåªæ˜¾ç¤ºå­—èŠ‚æ•° å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š ç»Ÿè®¡&#x2F;etc&#x2F;passwd æ–‡ä»¶çš„è¡Œæ•°ã€‚ 1wc -l /etc/passwd File ï¼šè¾¨è¯†æ–‡ä»¶ç±»å‹å‘½ä»¤æè¿°ï¼š file å‘½ä»¤ç”¨äºè¾¨è¯†æ–‡ä»¶ç±»å‹ã€‚ å‘½ä»¤æ ¼å¼ï¼šfile [å‚æ•°] [æ–‡ä»¶] å‘½ä»¤å‚æ•°è¯´æ˜ï¼š å‚æ•°è¯´æ˜-båˆ—å‡ºè¾¨è¯†ç»“æœæ—¶ï¼Œä¸æ˜¾ç¤ºæ–‡ä»¶åç§°-cè¯¦ç»†æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ï¼Œä¾¿äºæ’é”™æˆ–åˆ†æç¨‹åºæ‰§è¡Œçš„æƒ…å½¢-f [æ–‡ä»¶]æŒ‡å®šåç§°æ–‡ä»¶ï¼Œå…¶å†…å®¹æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶åç§°æ—¶ï¼Œè®© file ä¾åºè¾¨è¯†è¿™äº›æ–‡ä»¶ï¼Œæ ¼å¼ä¸ºæ¯åˆ—ä¸€ä¸ªæ–‡ä»¶åç§°-Lç›´æ¥æ˜¾ç¤ºç¬¦å·è¿æ¥æ‰€æŒ‡å‘çš„æ–‡ä»¶ç±»åˆ« å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š æŸ¥çœ‹&#x2F;var&#x2F;log&#x2F;messages æ–‡ä»¶çš„æ–‡ä»¶ç±»å‹ã€‚ 1file /var/log/messages Diff ï¼šæ¯”è¾ƒæ–‡ä»¶çš„å·®å¼‚å‘½ä»¤æè¿°ï¼šdiff å‘½ä»¤ç”¨äºæ¯”è¾ƒæ–‡ä»¶çš„å·®å¼‚ã€‚ å‘½ä»¤æ ¼å¼ï¼šdiff [æ–‡ä»¶] [æ–‡ä»¶] æ–‡æœ¬å¤„ç†å‘½ä»¤Grep ï¼šæŸ¥æ‰¾æ–‡ä»¶é‡Œç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸²å‘½ä»¤æè¿°ï¼šgrep å‘½ä»¤ç”¨äºæŸ¥æ‰¾æ–‡ä»¶é‡Œç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸²ã€‚ grep å…¨ç§°æ˜¯ Global Regular Expression Printï¼Œè¡¨ç¤ºå…¨å±€æ­£åˆ™è¡¨è¾¾å¼ç‰ˆæœ¬ï¼Œå®ƒèƒ½ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœç´¢æ–‡æœ¬ï¼Œå¹¶æŠŠåŒ¹é…çš„è¡Œæ‰“å°å‡ºæ¥ã€‚ åœ¨ Shell è„šæœ¬ä¸­ï¼Œgrep é€šè¿‡è¿”å›ä¸€ä¸ªçŠ¶æ€å€¼æ¥è¡¨ç¤ºæœç´¢çš„çŠ¶æ€ï¼š 0ï¼šåŒ¹é…æˆåŠŸã€‚ 1ï¼šåŒ¹é…å¤±è´¥ã€‚ 2ï¼šæœç´¢çš„æ–‡ä»¶ä¸å­˜åœ¨ã€‚ å‘½ä»¤æ ¼å¼ï¼šgrep [å‚æ•°] [æ­£åˆ™è¡¨è¾¾å¼] [æ–‡ä»¶] å‘½ä»¤å¸¸ç”¨å‚æ•°è¯´æ˜ï¼š å‚æ•°è¯´æ˜-c æˆ– --countè®¡ç®—ç¬¦åˆæ ·å¼çš„åˆ—æ•°-d recurse æˆ– -ræŒ‡å®šè¦æŸ¥æ‰¾çš„æ˜¯ç›®å½•è€Œéæ–‡ä»¶-e [èŒƒæœ¬æ ·å¼]æŒ‡å®šå­—ç¬¦ä¸²åšä¸ºæŸ¥æ‰¾æ–‡ä»¶å†…å®¹çš„æ ·å¼-E æˆ– --extended-regexpå°†æ ·å¼ä¸ºå»¶ä¼¸çš„æ­£åˆ™è¡¨è¾¾å¼æ¥ä½¿ç”¨-F æˆ– --fixed-regexpå°†æ ·å¼è§†ä¸ºå›ºå®šå­—ç¬¦ä¸²çš„åˆ—è¡¨-G æˆ– --basic-regexpå°†æ ·å¼è§†ä¸ºæ™®é€šçš„è¡¨ç¤ºæ³•æ¥ä½¿ç”¨-i æˆ– --ignore-caseå¿½ç•¥å­—ç¬¦å¤§å°å†™çš„å·®åˆ«-n æˆ– --line-numberåœ¨æ˜¾ç¤ºç¬¦åˆæ ·å¼çš„é‚£ä¸€è¡Œä¹‹å‰ï¼Œæ ‡ç¤ºå‡ºè¯¥è¡Œçš„åˆ—æ•°ç¼–å·-v æˆ– --revert-matchæ˜¾ç¤ºä¸åŒ…å«åŒ¹é…æ–‡æœ¬çš„æ‰€æœ‰è¡Œ å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š æŸ¥çœ‹ sshd æœåŠ¡é…ç½®æ–‡ä»¶ä¸­ç›‘å¬ç«¯å£é…ç½®æ‰€åœ¨è¡Œç¼–å·ã€‚ 1grep -n Port /etc/ssh/ssh_config æŸ¥è¯¢å­—ç¬¦ä¸²åœ¨æ–‡æœ¬ä¸­å‡ºç°çš„è¡Œæ•°ã€‚ 1grep -c localhost /etc/hosts åå‘æŸ¥æ‰¾ï¼Œä¸æ˜¾ç¤ºç¬¦åˆæ¡ä»¶çš„è¡Œã€‚ 12ps -ef | grep sshdps -ef | grep -v grep | grep sshd ä»¥é€’å½’çš„æ–¹å¼æŸ¥æ‰¾ç›®å½•ä¸‹å«æœ‰å…³é”®å­—çš„æ–‡ä»¶ã€‚ 1grep -r *.sh /etc ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é… httpd é…ç½®æ–‡ä»¶ä¸­å¼‚å¸¸çŠ¶æ€ç å“åº”çš„ç›¸å…³é…ç½®ã€‚ 1grep &#x27;ntp[0-9].aliyun.com&#x27; /etc/ntp.conf Sed ï¼šæ–‡æœ¬å¤„ç†å‘½ä»¤æè¿°ï¼šsed æ˜¯ä¸€ç§æµç¼–è¾‘å™¨ï¼Œå®ƒæ˜¯æ–‡æœ¬å¤„ç†ä¸­éå¸¸ä¸­çš„å·¥å…·ï¼Œèƒ½å¤Ÿå®Œç¾çš„é…åˆæ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨ã€‚ å¤„ç†æ—¶ï¼ŒæŠŠå½“å‰å¤„ç†çš„è¡Œå­˜å‚¨åœ¨ä¸´æ—¶ç¼“å†²åŒºä¸­ï¼Œç§°ä¸ºæ¨¡å¼ç©ºé—´ï¼ˆpattern spaceï¼‰ã€‚ æ¥ç€ç”¨ sed å‘½ä»¤å¤„ç†ç¼“å†²åŒºä¸­çš„å†…å®¹ï¼Œå¤„ç†å®Œæˆåï¼ŒæŠŠç¼“å†²åŒºçš„å†…å®¹é€å¾€å±å¹•ã€‚ æ¥ç€å¤„ç†ä¸‹ä¸€è¡Œï¼Œè¿™æ ·ä¸æ–­é‡å¤ï¼Œç›´åˆ°æ–‡ä»¶æœ«å°¾ã€‚ æ³¨æ„ï¼š sed å‘½ä»¤ä¸ä¼šä¿®æ”¹åŸæ–‡ä»¶ï¼Œä¾‹å¦‚åˆ é™¤å‘½ä»¤åªè¡¨ç¤ºæŸäº›è¡Œä¸æ‰“å°è¾“å‡ºï¼Œè€Œä¸æ˜¯ä»åŸæ–‡ä»¶ä¸­åˆ å»ã€‚ å¦‚æœè¦æ”¹å˜æºæ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨ -i é€‰é¡¹ã€‚å‘½ä»¤æ ¼å¼ï¼šsed [å‚æ•°] [åŠ¨ä½œ] [æ–‡ä»¶] å‚æ•°è¯´æ˜ï¼š å‚æ•°è¯´æ˜-e [script]æ‰§è¡Œå¤šä¸ª script-f [script æ–‡ä»¶]æ‰§è¡ŒæŒ‡å®š script æ–‡ä»¶-nä»…æ˜¾ç¤º script å¤„ç†åçš„ç»“æœ-iè¾“å‡ºåˆ°åŸæ–‡ä»¶ï¼Œé™é»˜æ‰§è¡Œï¼ˆä¿®æ”¹åŸæ–‡ä»¶ï¼‰ åŠ¨ä½œè¯´æ˜ï¼š åŠ¨ä½œè¯´æ˜aåœ¨è¡Œåé¢å¢åŠ å†…å®¹cæ›¿æ¢è¡Œdåˆ é™¤è¡Œiåœ¨è¡Œå‰é¢æ’å…¥pæ‰“å°ç›¸å…³çš„è¡Œsæ›¿æ¢å†…å®¹ å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š åˆ é™¤ç¬¬ 3 è¡Œåˆ°æœ€åä¸€è¡Œå†…å®¹ã€‚ 1sed &#x27;3,$d&#x27; /etc/passwd åœ¨æœ€åä¸€è¡Œæ–°å¢è¡Œã€‚ 1sed &#x27;$a admin:x:1000:1000:admin:/home/admin:/bin/bash&#x27; /etc/passwd æ›¿æ¢å†…å®¹ã€‚ 1sed &#x27;s/SELINUX=disabled/SELINUX=enforcing/&#x27; /etc/selinux/config æ›¿æ¢è¡Œã€‚ 1sed &#x27;1c abcdefg&#x27; /etc/passwd Awk ï¼šæ–‡æœ¬å¤„ç†å‘½ä»¤æè¿°ï¼šå’Œ sed å‘½ä»¤ç±»ä¼¼ï¼Œawk å‘½ä»¤ä¹Ÿæ˜¯é€è¡Œæ‰«ææ–‡ä»¶ï¼ˆä»ç¬¬ 1 è¡Œåˆ°æœ€åä¸€è¡Œï¼‰ï¼Œå¯»æ‰¾å«æœ‰ç›®æ ‡æ–‡æœ¬çš„è¡Œï¼Œå¦‚æœåŒ¹é…æˆåŠŸï¼Œåˆ™ä¼šåœ¨è¯¥è¡Œä¸Šæ‰§è¡Œç”¨æˆ·æƒ³è¦çš„æ“ä½œï¼›åä¹‹ï¼Œåˆ™ä¸å¯¹è¡Œåšä»»ä½•å¤„ç†ã€‚ å‘½ä»¤æ ¼å¼ï¼šawk [å‚æ•°] [è„šæœ¬] [æ–‡ä»¶] å‚æ•°è¯´æ˜ï¼š å‚æ•°è¯´æ˜-F fsæŒ‡å®šä»¥ fs ä½œä¸ºè¾“å…¥è¡Œçš„åˆ†éš”ç¬¦ï¼Œawk å‘½ä»¤é»˜è®¤åˆ†éš”ç¬¦ä¸ºç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦-f fileè¯»å– awk è„šæœ¬-v val=valåœ¨æ‰§è¡Œå¤„ç†è¿‡ç¨‹ä¹‹å‰ï¼Œè®¾ç½®ä¸€ä¸ªå˜é‡ varï¼Œå¹¶ç»™å…¶è®¾ç½®åˆå§‹å€¼ä¸º val å†…ç½®å˜é‡ï¼š å˜é‡ç”¨é€”FSå­—æ®µåˆ†éš”ç¬¦$næŒ‡å®šåˆ†éš”çš„ç¬¬ n ä¸ªå­—æ®µï¼Œå¦‚ $1ã€$3 åˆ†åˆ«è¡¨ç¤ºç¬¬ 1ã€ç¬¬ä¸‰åˆ—$0å½“å‰è¯»å…¥çš„æ•´è¡Œæ–‡æœ¬å†…å®¹NFè®°å½•å½“å‰å¤„ç†è¡Œçš„å­—æ®µä¸ªæ•°ï¼ˆåˆ—æ•°ï¼‰NRè®°å½•å½“å‰å·²è¯»å…¥çš„è¡Œæ•°FNRå½“å‰è¡Œåœ¨æºæ–‡ä»¶ä¸­çš„è¡Œå· awk ä¸­è¿˜å¯ä»¥æŒ‡å®šè„šæœ¬å‘½ä»¤çš„è¿è¡Œæ—¶æœºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œawk ä¼šä»è¾“å…¥ä¸­è¯»å–ä¸€è¡Œæ–‡æœ¬ï¼Œç„¶åé’ˆå¯¹è¯¥è¡Œçš„æ•°æ®æ‰§è¡Œç¨‹åºè„šæœ¬ï¼Œä½†æœ‰æ—¶å¯èƒ½éœ€è¦åœ¨å¤„ç†æ•°æ®å‰è¿è¡Œä¸€äº›è„šæœ¬å‘½ä»¤ï¼Œè¿™å°±éœ€è¦ä½¿ç”¨ BEGIN å…³é”®å­—ï¼ŒBEGIN ä¼šåœ¨ awsk è¯»å–æ•°æ®å‰å¼ºåˆ¶æ‰§è¡Œè¯¥å…³é”®å­—åæŒ‡å®šçš„è„šæœ¬å‘½ä»¤ã€‚ å’Œ BEGIN å…³é”®å­—ç›¸å¯¹åº”ï¼ŒEND å…³é”®å­—å…è®¸æˆ‘ä»¬æŒ‡å®šä¸€äº›è„šæœ¬å‘½ä»¤ï¼Œawk ä¼šåœ¨è¯»å®Œæ•°æ®åæ‰§è¡Œå®ƒä»¬ã€‚ å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š æŸ¥çœ‹æœ¬æœº IP åœ°å€ã€‚ 1ifconfig eth0 |awk &#x27;/inet/&#123;print $2&#125;&#x27; æŸ¥çœ‹æœ¬æœºå‰©ä½™ç£ç›˜å®¹é‡ã€‚ 1df -h |awk &#x27;/\\/$/&#123;print $4&#125;&#x27; ç»Ÿè®¡ç³»ç»Ÿç”¨æˆ·ä¸ªæ•°ã€‚ 1awk -F: &#x27;$3&lt;1000&#123;x++&#125; END&#123;print x&#125;&#x27; /etc/passwd è¾“å‡ºå…¶ä¸­ç™»å½• Shell ä¸ä»¥ nologin ç»“å°¾ï¼ˆå¯¹ç¬¬ 7 ä¸ªå­—æ®µåš!~åå‘åŒ¹é…ï¼‰çš„ç”¨æˆ·åã€ç™»å½• Shell ä¿¡æ¯ã€‚ 1awk -F: &#x27;$7!~/nologin$/&#123;print $1,$7&#125;&#x27; /etc/passwd è¾“å‡º&#x2F;etc&#x2F;passwd æ–‡ä»¶ä¸­å‰ä¸‰è¡Œè®°å½•çš„ç”¨æˆ·åå’Œç”¨æˆ· uidã€‚ 1head -3 /etc/passwd | awk &#x27;BEGIN&#123;FS=&quot;:&quot;;print &quot;name\\tuid&quot;&#125;&#123;print $1,&quot;\\t&quot;$3&#125;END&#123;print &quot;sum lines &quot;NR&#125;&#x27; æŸ¥çœ‹ tcp è¿æ¥æ•°ã€‚ 1netstat -na | awk &#x27;/^tcp/ &#123;++S[$NF]&#125; END &#123;for(a in S) print a, S[a]&#125;&#x27; å…³é—­æŒ‡å®šæœåŠ¡çš„æ‰€æœ‰çš„è¿›ç¨‹ã€‚ 1ps -ef | grep httpd | awk &#123;&#x27;print $2&#x27;&#125; | xargs kill -9 Cut ï¼šåˆ‡å‰²å­—ç¬¦ä¸²å‘½ä»¤æè¿°ï¼šcut å‘½ä»¤ä¸»è¦ç”¨æ¥åˆ‡å‰²å­—ç¬¦ä¸²ï¼Œå¯ä»¥å¯¹è¾“å…¥çš„æ•°æ®è¿›è¡Œåˆ‡å‰²ç„¶åè¾“å‡ºã€‚ å‘½ä»¤æ ¼å¼ï¼šcut [å‚æ•°] [æ–‡ä»¶] å‚æ•°è¯´æ˜ï¼š å‚æ•°è¯´æ˜-bä»¥å­—èŠ‚ä¸ºå•ä½è¿›è¡Œåˆ†å‰²-cä»¥å­—ç¬¦ä¸ºå•ä½è¿›è¡Œåˆ†å‰²-dè‡ªå®šä¹‰åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºåˆ¶è¡¨ç¬¦ Tr ï¼šå¯¹æ¥è‡ªæ ‡å‡†è¾“å…¥çš„å­—ç¬¦è¿›è¡Œæ›¿æ¢ã€å‹ç¼©å’Œåˆ é™¤å‘½ä»¤æè¿°ï¼štr å‘½ä»¤ç”¨äºå¯¹æ¥è‡ªæ ‡å‡†è¾“å…¥çš„å­—ç¬¦è¿›è¡Œæ›¿æ¢ã€å‹ç¼©å’Œåˆ é™¤ã€‚ å‘½ä»¤æ ¼å¼ï¼štr [å‚æ•°] [æ–‡æœ¬] å‚æ•°è¯´æ˜ï¼š å‚æ•°è¯´æ˜-cåé€‰æŒ‡å®šå­—ç¬¦-dåˆ é™¤æŒ‡å®šå­—ç¬¦-så°†é‡å¤çš„å­—ç¬¦ç¼©å‡æˆä¸€ä¸ªå­—ç¬¦-t [ç¬¬ä¸€å­—ç¬¦é›†] [ç¬¬äºŒå­—ç¬¦é›†]åˆ é™¤ç¬¬ä¸€å­—ç¬¦é›†è¾ƒç¬¬äºŒå­—ç¬¦é›†å¤šå‡ºçš„å­—ç¬¦ï¼Œä½¿ä¸¤ä¸ªå­—ç¬¦é›†é•¿åº¦ç›¸ç­‰ å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š å°†è¾“å…¥å­—ç¬¦ç”±å¤§å†™è½¬æ¢ä¸ºå°å†™ã€‚ 1echo &quot;HELLO WORLD&quot; | tr &#x27;A-Z&#x27; &#x27;a-z&#x27; åˆ é™¤å­—ç¬¦ã€‚ 1echo &quot;hello 123 world 456&quot; | tr -d &#x27;0-9&#x27; å‹ç¼©å­—ç¬¦ã€‚ 1echo &quot;thissss is a text linnnnnnne.&quot; | tr -s &#x27; sn&#x27; äº§ç”Ÿéšæœºå¯†ç ã€‚ 1cat /dev/urandom | tr -dc a-zA-Z0-9 | head -c 13","categories":[{"name":"Programming Language","slug":"Programming-Language","permalink":"http://blog.sukiu.top/categories/Programming-Language/"},{"name":"Shell","slug":"Programming-Language/Shell","permalink":"http://blog.sukiu.top/categories/Programming-Language/Shell/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://blog.sukiu.top/tags/Linux/"}]},{"title":"LinuxæŒ‡ä»¤ä¹‹æ–‡ä»¶ä¸æƒé™","slug":"Linux-Files-And-Permissions","date":"2021-11-07T08:47:00.000Z","updated":"2021-11-07T08:47:00.000Z","comments":true,"path":"Programming-Language/Shell/Linux-Files-And-Permissions/","link":"","permalink":"http://blog.sukiu.top/Programming-Language/Shell/Linux-Files-And-Permissions/","excerpt":"Linux ç³»ç»Ÿä¸­å¸¸ç”¨çš„æ–‡ä»¶ç›®å½•ç®¡ç†å’Œæ–‡ä»¶æƒé™ç®¡ç†å‘½ä»¤ã€‚","text":"Linux ç³»ç»Ÿä¸­å¸¸ç”¨çš„æ–‡ä»¶ç›®å½•ç®¡ç†å’Œæ–‡ä»¶æƒé™ç®¡ç†å‘½ä»¤ã€‚ æ–‡ä»¶ç›®å½•ç®¡ç†å‘½ä»¤Tree ï¼šä»¥æ ‘çŠ¶å›¾åˆ—å‡ºç›®å½•çš„å†…å®¹å‘½ä»¤æè¿°ï¼štree å‘½ä»¤ç”¨äºä»¥æ ‘çŠ¶å›¾åˆ—å‡ºç›®å½•çš„å†…å®¹ã€‚ tree å‘½ä»¤æ²¡æœ‰å†…ç½®åœ¨ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨ tree å‘½ä»¤éœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…ï¼š 1yum install -y tree å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š 1tree /usr/share/wallpapers/ Ls ï¼šæ˜¾ç¤ºæŒ‡å®šå·¥ä½œç›®å½•ä¸‹çš„å†…å®¹æ³¨æ„æ˜¯ L çš„å°å†™ï¼Œä¸æ˜¯å¤§å†™ I å‘½ä»¤æè¿°ï¼š ls å‘½ä»¤ç”¨äºæ˜¾ç¤ºæŒ‡å®šå·¥ä½œç›®å½•ä¸‹çš„å†…å®¹ã€‚ å‘½ä»¤æ ¼å¼ï¼šls [å‚æ•°] [ç›®å½•å] å‚æ•°è¯´æ˜ï¼š å‚æ•° è¯´æ˜ -a æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶åŠç›®å½•ï¼ˆåŒ…æ‹¬éšè—æ–‡ä»¶ï¼‰ -l å°†æ–‡ä»¶çš„æƒé™ã€æ‹¥æœ‰è€…ã€æ–‡ä»¶å¤§å°ç­‰è¯¦ç»†ä¿¡æ¯åˆ—å‡ºï¼ˆll ç­‰åŒäº ls -lï¼‰ -r å°†æ–‡ä»¶ååºåˆ—å‡ºï¼ˆé»˜è®¤æŒ‰è‹±æ–‡å­—æ¯æ­£åºï¼‰ -t å°†æ–‡ä»¶æŒ‰åˆ›å»ºæ—¶é—´æ­£åºåˆ—å‡º -R é€’å½’éå†ç›®å½•ä¸‹æ–‡ä»¶ Pwd ï¼šè·å–å½“å‰å·¥ä½œç›®å½•çš„ç»å¯¹è·¯å¾„å‘½ä»¤æè¿°ï¼šè·å–å½“å‰å·¥ä½œç›®å½•çš„ç»å¯¹è·¯å¾„ã€‚ å‘½ä»¤ä½¿ç”¨ï¼špwd Cd ï¼šåˆ‡æ¢å·¥ä½œç›®å½•å‘½ä»¤æè¿°ï¼šcd å‘½ä»¤ç”¨äºåˆ‡æ¢å·¥ä½œç›®å½•ã€‚ åœ¨è·¯å¾„è¡¨ç¤ºä¸­ï¼š ä¸€ä¸ªåŠè§’å¥å·ï¼ˆ.ï¼‰è¡¨ç¤ºå½“å‰ç›®å½•ï¼Œä¾‹å¦‚è·¯å¾„.&#x2F;app&#x2F;log ç­‰åŒäº app&#x2F;logã€‚ ä¸¤ä¸ªåŠè§’å¥å·ï¼ˆ..ï¼‰è¡¨ç¤ºä¸Šçº§ç›®å½•ï¼Œä¾‹å¦‚è·¯å¾„&#x2F;usr&#x2F;local&#x2F;..&#x2F;src ç­‰åŒäº&#x2F;usr&#x2F;srcï¼Œå…¶ä¸­ local å’Œ src ç›®å½•åŒçº§ã€‚ cd å‘½ä»¤çš„é»˜è®¤å‚æ•°ä¸º ~ ï¼Œç¬¦å· ~ è¡¨ç¤ºå½“å‰ç”¨æˆ·çš„å®¶ç›®å½•ï¼Œå³åœ¨ root ç”¨æˆ·ç™»å½•æ—¶ï¼Œå‘½ä»¤ cdã€cd ~ å’Œ cd &#x2F;root æ‰§è¡Œæ•ˆæœç›¸åŒã€‚ Touch ï¼šä¿®æ”¹æ–‡ä»¶æˆ–è€…ç›®å½•çš„æ—¶é—´å±æ€§å‘½ä»¤æè¿°ï¼štouch å‘½ä»¤ç”¨äºä¿®æ”¹æ–‡ä»¶æˆ–è€…ç›®å½•çš„æ—¶é—´å±æ€§ï¼ŒåŒ…æ‹¬å­˜å–æ—¶é—´å’Œæ›´æ”¹æ—¶é—´ã€‚è‹¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œç³»ç»Ÿä¼šå»ºç«‹ä¸€ä¸ªæ–°çš„æ–‡ä»¶ã€‚ å‘½ä»¤æ ¼å¼ï¼štouch [å‚æ•°] [æ–‡ä»¶] å‚æ•°è¯´æ˜ï¼š å‚æ•° è¯´æ˜ -c å¦‚æœæŒ‡å®šæ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¸ä¼šå»ºç«‹æ–°æ–‡ä»¶ -r ä½¿ç”¨å‚è€ƒæ–‡ä»¶çš„æ—¶é—´è®°å½• -t è®¾ç½®æ–‡ä»¶çš„æ—¶é—´è®°å½• Mkdir ï¼šæ–°å»ºå­ç›®å½•å‘½ä»¤æè¿°ï¼šmkdir å‘½ä»¤ç”¨äºæ–°å»ºå­ç›®å½•ã€‚-p å‚æ•°ç¡®ä¿ç›®å½•åç§°å­˜åœ¨ï¼Œä¸å­˜åœ¨çš„å°±æ–°å»ºä¸€ä¸ªã€‚ å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š 1mkdir -p a/b/c Rm ï¼šåˆ é™¤ä¸€ä¸ªæ–‡ä»¶æˆ–è€…ç›®å½•å‘½ä»¤æè¿°ï¼šrm å‘½ä»¤ç”¨äºåˆ é™¤ä¸€ä¸ªæ–‡ä»¶æˆ–è€…ç›®å½•ã€‚ å‘½ä»¤æ ¼å¼ï¼šrm [å‚æ•°] [æ–‡ä»¶] å‚æ•°è¯´æ˜ï¼š å‚æ•° è¯´æ˜ -i åˆ é™¤å‰é€ä¸€è¯¢é—®ç¡®è®¤ -f æ— éœ€ç¡®è®¤ï¼Œç›´æ¥åˆ é™¤ -r åˆ é™¤ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ Cp ï¼šå¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•å‘½ä»¤æè¿°ï¼š cp å‘½ä»¤ä¸»è¦ç”¨äºå¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•ã€‚ å‘½ä»¤æ ¼å¼ï¼šcp [å‚æ•°] [æºæ–‡ä»¶] [ç›®æ ‡æ–‡ä»¶] å‚æ•°è¯´æ˜ï¼š å‚æ•° è¯´æ˜ -d å¤åˆ¶æ—¶ä¿ç•™é“¾æ¥ -f è¦†ç›–å·²ç»å­˜åœ¨çš„ç›®æ ‡æ–‡ä»¶è€Œä¸ç»™å‡ºæç¤º -i è¦†ç›–å‰è¯¢é—® -p é™¤å¤åˆ¶æ–‡ä»¶çš„å†…å®¹å¤–ï¼Œè¿˜æŠŠä¿®æ”¹æ—¶é—´å’Œè®¿é—®æƒé™ä¹Ÿå¤åˆ¶åˆ°æ–°æ–‡ä»¶ä¸­ -r å¤åˆ¶ç›®å½•åŠç›®å½•å†…çš„æ‰€æœ‰é¡¹ç›® Mv ï¼šä¸ºæ–‡ä»¶æˆ–ç›®å½•æ”¹å &#x2F; å°†æ–‡ä»¶æˆ–ç›®å½•ç§»å…¥å…¶å®ƒä½ç½®å‘½ä»¤æè¿°ï¼š mv å‘½ä»¤ç”¨æ¥ä¸ºæ–‡ä»¶æˆ–ç›®å½•æ”¹åã€æˆ–å°†æ–‡ä»¶æˆ–ç›®å½•ç§»å…¥å…¶å®ƒä½ç½®ã€‚ å‘½ä»¤æ ¼å¼ï¼šmv [å‚æ•°] [æºæ–‡ä»¶] [ç›®æ ‡æ–‡ä»¶] å‚æ•°è¯´æ˜ï¼š å‚æ•° è¯´æ˜-i è‹¥æŒ‡å®šç›®å½•å·²æœ‰åŒåæ–‡ä»¶ï¼Œåˆ™å…ˆè¯¢é—®æ˜¯å¦è¦†ç›–æ—§æ–‡ä»¶-f å¦‚æœç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œä¸ä¼šè¯¢é—®è€Œç›´æ¥è¦†ç›– Rename ï¼šæ‰¹é‡æ”¹å˜æ–‡ä»¶åå‘½ä»¤æè¿°ï¼šrename å‘½ä»¤ç”¨å­—ç¬¦ä¸²æ›¿æ¢çš„æ–¹å¼æ‰¹é‡æ”¹å˜æ–‡ä»¶åã€‚rename å‘½ä»¤æœ‰ C è¯­è¨€å’Œ Perl è¯­è¨€ä¸¤ä¸ªç‰ˆæœ¬ï¼Œè¿™é‡Œä»‹ç» C è¯­è¨€ç‰ˆæœ¬çš„ rename å‘½ä»¤ï¼Œä¸æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ã€‚ å‘½ä»¤æ ¼å¼ï¼šrename [åŸå€¼] [æ›¿æ¢å€¼] æ–‡ä»¶æƒé™ç®¡ç†ls å‘½ä»¤å¯ä»¥æŸ¥çœ‹ Linux ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ã€ç›®å½•å’Œè®¾å¤‡çš„æƒé™ã€‚ 1ls -l /boot/ ä¸Šè¿° ls -l å‘½ä»¤ä¸­æ˜¾ç¤ºçš„ç¬¬ä¸€åˆ—å°±æ˜¯æ–‡ä»¶æƒé™ä¿¡æ¯ï¼Œå…± 11 ä½å­—ç¬¦ï¼Œåˆ† 5 éƒ¨åˆ†ã€‚ ç¬¬ 1 ä½è¡¨ç¤ºå­˜æ¡£ç±»å‹ï¼Œd è¡¨ç¤ºç›®å½•ï¼Œ- è¡¨ç¤ºä¸€èˆ¬æ–‡ä»¶ã€‚ ç¬¬ 2~4 ä½è¡¨ç¤ºå½“å‰ç”¨æˆ·çš„æƒé™ï¼ˆå±ä¸»æƒé™ï¼‰ã€‚ ç¬¬ 5~7 ä½è¡¨ç¤ºåŒç”¨æˆ·ç»„çš„ç”¨æˆ·æƒé™ï¼ˆå±ç»„æƒé™ï¼‰ã€‚ ç¬¬ 8~10 ä½è¡¨ç¤ºä¸åŒç”¨æˆ·ç»„çš„ç”¨æˆ·æƒé™ï¼ˆå…¶ä»–ç”¨æˆ·æƒé™ï¼‰ã€‚ ç¬¬ 11 ä½æ˜¯ä¸€ä¸ªåŠè§’å¥å·.ï¼Œè¡¨ç¤º SELinux å®‰å…¨æ ‡ç­¾ã€‚ ç”¨æˆ·æƒé™æ¯ç»„ä¸‰ä½ï¼Œrwx åˆ†åˆ«è¡¨ç¤ºè¯»ã€å†™ã€æ‰§è¡Œæƒé™ï¼Œå¯¹åº”å…«è¿›åˆ¶è¡¨ç¤ºä¸º 4ã€2ã€1ã€‚ ä¾‹å¦‚ efi ç›®å½•çš„ root ç”¨æˆ·æƒé™ä¸º drwxr-xr-x.ã€‚ è¯¥ç›®å½•å¯¹ root ç”¨æˆ·å…·æœ‰è¯»å†™å’Œæ‰§è¡Œæ‰€æœ‰æƒé™ã€‚ è¯¥ç›®å½•å¯¹ root ç»„å…¶ä»–ç”¨æˆ·æœ‰è¯»å’Œæ‰§è¡Œæƒé™ã€‚ è¯¥ç›®å½•å¯¹å…¶ä»–ç”¨æˆ·æœ‰è¯»å’Œæ‰§è¡Œæƒé™ã€‚ æ‰€ä»¥è¯¥æƒé™è¡¨ç¤ºå¯¹åº”å…«è¿›åˆ¶æƒé™è¡¨ç¤ºä¸ºï¼š å±ä¸»æƒé™ï¼š4+2+1&#x3D;7ã€‚ å±ç»„æƒé™ï¼š4+1&#x3D;5ã€‚ å…¶ä»–ç”¨æˆ·æƒé™ï¼š4+1&#x3D;5ã€‚ å³ 755ã€‚ Chmod ï¼šä¿®æ”¹æ–‡ä»¶æƒé™chmod å‘½ä»¤ç”¨äºä¿®æ”¹æ–‡ä»¶æƒé™ modeï¼Œ-R å‚æ•°ä»¥é€’å½’æ–¹å¼å¯¹å­ç›®å½•å’Œæ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€‚ å°† hello.sh æ–‡ä»¶å¢åŠ å±ä¸»çš„æ‰§è¡Œæƒé™ã€‚ 1chmod u+x hello.sh å°† hello.sh æ–‡ä»¶æ’¤é”€å±ä¸»çš„æ‰§è¡Œæƒé™ã€‚ 1chmod u-x hello.sh å°† hello.sh æ–‡ä»¶æƒé™ä¿®æ”¹ä¸ºå…«è¿›åˆ¶è¡¨ç¤ºçš„ 744 æƒé™ã€‚ 1chmod 744 hello.sh u+x è¡¨ç¤ºå¢åŠ å±ä¸»çš„æ‰§è¡Œæƒé™ï¼Œu è¡¨ç¤ºå±ä¸»ï¼Œg è¡¨ç¤ºå±ç»„ï¼Œo è¡¨ç¤ºå…¶ä»–ï¼Œa è¡¨ç¤ºæ‰€æœ‰ç”¨æˆ·ã€‚ Chown ï¼šä¿®æ”¹æ–‡ä»¶çš„å±ä¸»å’Œå±ç»„chown å‘½ä»¤ä¿®æ”¹æ–‡ä»¶çš„å±ä¸»å’Œå±ç»„ -R å‚æ•°ä»¥é€’å½’æ–¹å¼å¯¹å­ç›®å½•å’Œæ–‡ä»¶è¿›è¡Œä¿®æ”¹ ls -l å‘½ä»¤æ˜¾ç¤ºçš„ç¬¬ä¸‰åˆ—å’Œç¬¬å››åˆ—å°±æ˜¯æ–‡ä»¶çš„å±ä¸»å’Œå±ç»„ä¿¡æ¯ã€‚ ä¿®æ”¹ test.txt æ–‡ä»¶çš„å±ä¸»ç”¨æˆ·ä¸º testã€‚ 1chown test test.txt ä¿®æ”¹ test.txt æ–‡ä»¶çš„å±ä¸»å’Œå±ç»„ä¸º adminã€‚ 1chown admin:admin test.txt Chgrp ï¼šä¿®æ”¹æ–‡ä»¶çš„å±ç»„chgrp å‘½ä»¤ç”¨äºä¿®æ”¹æ–‡ä»¶çš„å±ç»„ã€‚ å‘½ä»¤ä½¿ç”¨ç¤ºä¾‹ï¼š å°† test.txt æ–‡ä»¶çš„å±ç»„æ”¹ä¸º rootã€‚ 1chgrp root test.txt","categories":[{"name":"Programming Language","slug":"Programming-Language","permalink":"http://blog.sukiu.top/categories/Programming-Language/"},{"name":"Shell","slug":"Programming-Language/Shell","permalink":"http://blog.sukiu.top/categories/Programming-Language/Shell/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://blog.sukiu.top/tags/Linux/"}]},{"title":"äºŒå‰æ ‘éå†","slug":"Binary-Tree-Traversal","date":"2021-11-03T00:47:00.000Z","updated":"2021-11-03T00:47:00.000Z","comments":true,"path":"Computer-Basics/Algorithm/Binary-Tree-Traversal/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Algorithm/Binary-Tree-Traversal/","excerpt":"äºŒå‰æ ‘éå†ä¸»è¦åŒ…æ‹¬ï¼š æ·±åº¦ä¼˜å…ˆéå† å‰åºéå†ï¼ˆé€’å½’æ³•ï¼Œè¿­ä»£æ³•ï¼‰ ä¸­åºéå†ï¼ˆé€’å½’æ³•ï¼Œè¿­ä»£æ³•ï¼‰ ååºéå†ï¼ˆé€’å½’æ³•ï¼Œè¿­ä»£æ³•ï¼‰ å¹¿åº¦ä¼˜å…ˆéå† å±‚æ¬¡éå†ï¼ˆè¿­ä»£æ³•ï¼‰","text":"äºŒå‰æ ‘éå†ä¸»è¦åŒ…æ‹¬ï¼š æ·±åº¦ä¼˜å…ˆéå† å‰åºéå†ï¼ˆé€’å½’æ³•ï¼Œè¿­ä»£æ³•ï¼‰ ä¸­åºéå†ï¼ˆé€’å½’æ³•ï¼Œè¿­ä»£æ³•ï¼‰ ååºéå†ï¼ˆé€’å½’æ³•ï¼Œè¿­ä»£æ³•ï¼‰ å¹¿åº¦ä¼˜å…ˆéå† å±‚æ¬¡éå†ï¼ˆè¿­ä»£æ³•ï¼‰ é€’å½’éå†é€’å½’ä¸‰è¦ç´ ï¼š ç¡®å®šé€’å½’å‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼ï¼š ç¡®å®šå“ªäº›å‚æ•°æ˜¯é€’å½’çš„è¿‡ç¨‹ä¸­éœ€è¦å¤„ç†çš„ï¼Œé‚£ä¹ˆå°±åœ¨é€’å½’å‡½æ•°é‡ŒåŠ ä¸Šè¿™ä¸ªå‚æ•°ï¼Œ å¹¶ä¸”è¿˜è¦æ˜ç¡®æ¯æ¬¡é€’å½’çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆè¿›è€Œç¡®å®šé€’å½’å‡½æ•°çš„è¿”å›ç±»å‹ã€‚ ç¡®å®šç»ˆæ­¢æ¡ä»¶ï¼š å†™å®Œäº†é€’å½’ç®—æ³•, è¿è¡Œçš„æ—¶å€™ï¼Œç»å¸¸ä¼šé‡åˆ°æ ˆæº¢å‡ºçš„é”™è¯¯ï¼Œå°±æ˜¯æ²¡å†™ç»ˆæ­¢æ¡ä»¶æˆ–è€…ç»ˆæ­¢æ¡ä»¶å†™çš„ä¸å¯¹ï¼Œæ“ä½œç³»ç»Ÿä¹Ÿæ˜¯ç”¨ä¸€ä¸ªæ ˆçš„ç»“æ„æ¥ä¿å­˜æ¯ä¸€å±‚é€’å½’çš„ä¿¡æ¯ï¼Œå¦‚æœé€’å½’æ²¡æœ‰ç»ˆæ­¢ï¼Œæ“ä½œç³»ç»Ÿçš„å†…å­˜æ ˆå¿…ç„¶å°±ä¼šæº¢å‡ºã€‚ ç¡®å®šå•å±‚é€’å½’çš„é€»è¾‘ï¼š ç¡®å®šæ¯ä¸€å±‚é€’å½’éœ€è¦å¤„ç†çš„ä¿¡æ¯ã€‚åœ¨è¿™é‡Œä¹Ÿå°±ä¼šé‡å¤è°ƒç”¨è‡ªå·±æ¥å®ç°é€’å½’çš„è¿‡ç¨‹ã€‚ å‰åºéå†å³ æ ¹ - å·¦ - å³ 1234567891011121314func preorderTraversal(root *TreeNode) []int &#123; ans := make([]int, 0) var preOrder func(root *TreeNode) preOrder = func(root *TreeNode) &#123; if root == nil &#123; return &#125; ans = append(ans, root.Val) preOrder(root.Left) preOrder(root.Right) &#125; preOrder(root) return ans&#125; ä¸­åºéå†å³ å·¦ - æ ¹ - å³ 1234567891011121314func inorderTraversal(root *TreeNode) []int &#123; ans := make([]int, 0) var inOrder func(root *TreeNode) inOrder = func(root *TreeNode) &#123; if root == nil &#123; return &#125; inOrder(root.Left) ans = append(ans, root.Val) inOrder(root.Right) &#125; inOrder(root) return ans&#125; ååºéå†å³ å·¦ - å³ - æ ¹ 1234567891011121314func postorderTraversal(root *TreeNode) []int &#123; ans := make([]int, 0) var postorder func(root *TreeNode) postorder = func(root *TreeNode) &#123; if root == nil &#123; return &#125; postorder(root.Left) postorder(root.Right) ans = append(ans, root.Val) &#125; postorder(root) return ans&#125; è¿­ä»£éå†è¦å¤„ç†çš„èŠ‚ç‚¹æ”¾å…¥æ ˆä¹‹åï¼Œç´§æ¥ç€æ”¾å…¥ä¸€ä¸ªç©ºæŒ‡é’ˆä½œä¸ºæ ‡è®°ã€‚ é€šè¿‡è¿™ç§æ ‡è®°æ³•å®ç°äºŒå‰æ ‘çš„ç»Ÿä¸€è¿­ä»£éå†ã€‚ å‰åºéå†12345678910111213141516171819202122232425262728func preorderTraversal(root *TreeNode) []int &#123; if root == nil &#123; return nil &#125; ans := make([]int, 0) stack := list.New() stack.PushBack(root) var node *TreeNode for stack.Len() &gt; 0 &#123; back := stack.Back() stack.Remove(back) if back.Value != nil &#123; node = back.Value.(*TreeNode) // interface ä¸º nil æ— æ³• æ–­è¨€ç±»å‹è½¬æ¢ if node.Right != nil &#123; stack.PushBack(node.Right) // å³ &#125; if node.Left != nil &#123; stack.PushBack(node.Left) // å·¦ &#125; stack.PushBack(node) // æ ¹ stack.PushBack(nil) &#125; else &#123; node = stack.Remove(stack.Back()).(*TreeNode) ans = append(ans, node.Val) &#125; &#125; return ans&#125; ä¸­åºéå†12345678910111213141516171819202122232425262728func inorderTraversal(root *TreeNode) []int &#123; if root == nil &#123; return nil &#125; ans := make([]int, 0) stack := list.New() stack.PushBack(root) var node *TreeNode for stack.Len() &gt; 0 &#123; back := stack.Back() stack.Remove(back) if back.Value != nil &#123; node = back.Value.(*TreeNode) // interface ä¸º nil æ— æ³• æ–­è¨€ç±»å‹è½¬æ¢ if node.Right != nil &#123; stack.PushBack(node.Right) // å³ &#125; stack.PushBack(node) // æ ¹ stack.PushBack(nil) if node.Left != nil &#123; stack.PushBack(node.Left) // å·¦ &#125; &#125; else &#123; node = stack.Remove(stack.Back()).(*TreeNode) ans = append(ans, node.Val) &#125; &#125; return ans&#125; ååºéå†12345678910111213141516171819202122232425262728func postorderTraversal(root *TreeNode) []int &#123; if root == nil &#123; return nil &#125; ans := make([]int, 0) stack := list.New() stack.PushBack(root) var node *TreeNode for stack.Len() &gt; 0 &#123; back := stack.Back() stack.Remove(back) if back.Value != nil &#123; node = back.Value.(*TreeNode) // interface ä¸º nil æ— æ³• æ–­è¨€ç±»å‹è½¬æ¢ stack.PushBack(node) // æ ¹ stack.PushBack(nil) if node.Right != nil &#123; stack.PushBack(node.Right) // å³ &#125; if node.Left != nil &#123; stack.PushBack(node.Left) // å·¦ &#125; &#125; else &#123; node = stack.Remove(stack.Back()).(*TreeNode) ans = append(ans, node.Val) &#125; &#125; return ans&#125; å±‚åºéå†12345678910111213141516171819202122232425func levelOrder(root *TreeNode) [][]int &#123; ans := [][]int&#123;&#125; if root == nil &#123; return ans &#125; queue := list.New() queue.PushBack(root) t := make([]int, 0) for queue.Len() &gt; 0 &#123; l := queue.Len() for i := 0; i &lt; l; i++ &#123; node := queue.Remove(queue.Front()).(*TreeNode) t = append(t, node.Val) if node.Left != nil &#123; queue.PushBack(node.Left) &#125; if node.Right != nil &#123; queue.PushBack(node.Right) &#125; &#125; ans = append(ans, t) t = []int&#123;&#125; &#125; return ans&#125;","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Algorithm","slug":"Computer-Basics/Algorithm","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Algorithm/"}],"tags":[{"name":"Tree","slug":"Tree","permalink":"http://blog.sukiu.top/tags/Tree/"}]},{"title":"å¸¸è§å®¹å™¨åº•å±‚","slug":"Common-Container","date":"2021-11-02T01:10:00.000Z","updated":"2021-11-02T01:10:00.000Z","comments":true,"path":"Computer-Basics/Data-Structure/Common-Container/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Data-Structure/Common-Container/","excerpt":"å„ç§è¯­è¨€ä¸‹ï¼Œå¸¸è§å®¹å™¨åº•å±‚æ•´ç†ã€‚","text":"å„ç§è¯­è¨€ä¸‹ï¼Œå¸¸è§å®¹å™¨åº•å±‚æ•´ç†ã€‚ C++Vectorå…¶åº•å±‚æ•°æ®ç»“æ„æ˜¯æ•°ç»„ï¼Œç”±äºèƒ½åŠ¨æ€æ‰©å®¹ï¼Œæ‰€ä»¥ä¹Ÿç§°åŠ¨æ€æ•°ç»„ ç‰¹ç‚¹ï¼š éšæœºè®¿é—®ï¼š$O(1)$ éšæœºæ’å…¥åˆ é™¤ï¼š $O(n)$ï¼Œä¸­é—´æ’å…¥ä¼šå¼•èµ·åé¢æ•°æ®çš„æ‹·è´ï¼Œå°¾éƒ¨å¯å¿«é€Ÿå¢åˆ  æ‰©å®¹è§„åˆ™ï¼š æ–°å»ºæ—¶åˆå§‹åŒ–ä¸€ç‰‡ç©ºé—´ æ’å…¥å…ƒç´ å¼•èµ·æ‰©å®¹çš„æ—¶å€™ï¼Œgcc ä¼šç”³è¯· 2 å€çš„ç©ºé—´ï¼Œæ‹·è´åŸæœ‰æ•°æ® é‡Šæ”¾åŸæ¥ç©ºé—´ åœ¨è¿›è¡Œè¿­ä»£å™¨ç›¸å…³çš„ä¿®æ”¹æ“ä½œæ—¶ï¼ˆåŒ…æ‹¬æ‰©å®¹ï¼‰ï¼Œæ‰€æœ‰è¿­ä»£å™¨å’ŒæŒ‡é’ˆå¼•ç”¨éƒ½ä¼šå¤±æ•ˆ Map &amp; Multimap &amp; Set &amp; Multisetmap æä¾›ä¸€å¯¹ä¸€ key-value çš„æ•°æ®å¤„ç†èƒ½åŠ›ï¼›set å¯ä»¥ç†è§£ä¸ºå…³é”®å­—å³å€¼ï¼Œå³åªä¿å­˜å…³é”®å­—çš„å®¹å™¨ã€‚ ä¸ multi çš„åŒºåˆ«åœ¨äºï¼Œmulti å…è®¸å…³é”®å­—é‡å¤ï¼Œè€Œä¸Šé¢ 2 ä¸ªä¸å…è®¸é‡å¤ã€‚ åº•å±‚æ•°æ®ç»“æ„å‡ä¸ºçº¢é»‘æ ‘ï¼Œå¯ä»¥å‚è€ƒ [æ•™ä½ é€å½»äº†è§£çº¢é»‘æ ‘](The-Art-Of-Programming-By-July&#x2F;03.01.md at master Â· julycoding&#x2F;The-Art-Of-Programming-By-July (github.com))ã€‚ ç‰¹ç‚¹ï¼š è®¿é—®ã€æŸ¥æ‰¾ã€åˆ é™¤ï¼š$O(logn)$ unordered_map &amp; unordered_multimap &amp; unordered_set &amp; unordered_mutiseté¡¾åæ€ä¹‰ï¼Œä»¥ä¸Šå®¹å™¨æ˜¯æ— åºçš„ï¼Œæ‰€ä»¥åº•å±‚å®ç°ä¸ºå“ˆå¸Œè¡¨ï¼Œå› æ­¤å…¶æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ç†è®ºä¸Šè¾¾åˆ°äº†O(n) ç‰¹ç‚¹ï¼š è®¿é—®ã€æŸ¥æ‰¾ã€åˆ é™¤ï¼š$O(1)$ï¼Œä½†æ˜¯å®é™…ä¸Šè¦è€ƒè™‘ç¢°æ’çš„é—®é¢˜ GoGo è¯­è¨€ä¸æ·»åŠ å…¶ä»–åŒ…çš„è¯ï¼Œåªæä¾›äº†ä¸€ä¸ª map å®¹å™¨ï¼Œä¸è¿‡å…¶ä»–å®¹å™¨é€‚é…å™¨ä¹‹ç±»å¯ä»¥ç”¨ä¸‡èƒ½çš„æ•°ç»„åˆ‡ç‰‡å®ç° Mapåº•å±‚æ•°æ®ç»“æ„æ˜¯å“ˆå¸Œè¡¨ ç‰¹ç‚¹ï¼š è®¿é—®ã€æŸ¥æ‰¾ã€åˆ é™¤ï¼š$O(1)$","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Data Structure","slug":"Computer-Basics/Data-Structure","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Data-Structure/"}],"tags":[{"name":"Container","slug":"Container","permalink":"http://blog.sukiu.top/tags/Container/"}]},{"title":"Goä¸­çš„ä¼˜å…ˆé˜Ÿåˆ—","slug":"Go-Priority-Queue","date":"2021-11-01T14:13:00.000Z","updated":"2021-11-01T14:13:00.000Z","comments":true,"path":"Computer-Basics/Data-Structure/Go-Priority-Queue/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Data-Structure/Go-Priority-Queue/","excerpt":"è®ºå¦‚ä½•åœ¨ Go è¯­è¨€ä¸­ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ã€‚*","text":"è®ºå¦‚ä½•åœ¨ Go è¯­è¨€ä¸­ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ã€‚* ä»‹ç»Go æä¾›äº† container&#x2F;heap è¿™ä¸ªåŒ…æ¥å®ç°å †çš„æ“ä½œã€‚å †å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ ‘çš„ç»“æ„ï¼Œæ¯ä¸ªå…ƒç´ çš„å€¼éƒ½æ˜¯å®ƒçš„å­æ ‘ä¸­æœ€å°çš„ï¼Œå› æ­¤æ ¹èŠ‚ç‚¹ index = 0 çš„å€¼æ˜¯æœ€å°çš„ï¼Œå³æœ€å°å †ã€‚ å †ä¹Ÿæ˜¯å®ç°ä¼˜å…ˆé˜Ÿåˆ— Priority Queue çš„å¸¸ç”¨æ–¹å¼ã€‚ å †ä¸­å…ƒç´ çš„ç±»å‹éœ€è¦å®ç° heap.Interface è¿™ä¸ªæ¥å£ï¼š 12345type Interface interface &#123; sort.Interface Push(x interface&#123;&#125;) // add x as element Len() Pop() interface&#123;&#125; // remove and return element Len() - 1.&#125; å…¶ä¸­ sort.Interface åŒ…æ‹¬ Len(), Less, Swap æ–¹æ³•ã€‚ å®ç°1234567891011121314151617181920212223242526272829303132333435363738394041type IntHeap [][2]int // 0 key 1 valuefunc (h IntHeap) Len() int &#123; return len(h) &#125;func (h IntHeap) Less(i, j int) bool &#123; return h[i][1] &lt; h[j][1] &#125;func (h IntHeap) Swap(i, j int) &#123; h[i], h[j] = h[j], h[i] &#125;func (h *IntHeap) Push(x interface&#123;&#125;) &#123; *h = append(*h, x.([2]int))&#125;func (h *IntHeap) Pop() interface&#123;&#125; &#123; old := *h n := len(old) x := old[n-1] *h = old[0 : n-1] return x&#125;// 347. å‰ K ä¸ªé«˜é¢‘å…ƒç´ // https://leetcode-cn.com/problems/top-k-frequent-elements/func topKFrequent(nums []int, k int) []int &#123; m := make(map[int]int) ans := make([]int, k) h := &amp;IntHeap&#123;&#125; heap.Init(h) for _, v := range nums &#123; m[v]++ &#125; for key, value := range m &#123; heap.Push(h, [2]int&#123;key, value&#125;) if h.Len() &gt; k &#123; heap.Pop(h) &#125; &#125; for k &gt; 0 &#123; k-- ans[k] = heap.Pop(h).([2]int)[0] &#125; return ans&#125;","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Data Structure","slug":"Computer-Basics/Data-Structure","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Data-Structure/"}],"tags":[{"name":"Queue","slug":"Queue","permalink":"http://blog.sukiu.top/tags/Queue/"}]},{"title":"å•è°ƒé˜Ÿåˆ— Monotone Queue","slug":"Monotone-Queue","date":"2021-11-01T13:19:00.000Z","updated":"2021-11-01T13:19:00.000Z","comments":true,"path":"Computer-Basics/Data-Structure/Monotone-Queue/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Data-Structure/Monotone-Queue/","excerpt":"*â€œå¦‚æœä¸€ä¸ªé€‰æ‰‹æ¯”ä½ å°è¿˜æ¯”ä½ å¼ºï¼Œä½ å°±å¯ä»¥é€€å½¹äº†ã€‚â€â€”â€”å•è°ƒé˜Ÿåˆ—çš„åŸç† *","text":"*â€œå¦‚æœä¸€ä¸ªé€‰æ‰‹æ¯”ä½ å°è¿˜æ¯”ä½ å¼ºï¼Œä½ å°±å¯ä»¥é€€å½¹äº†ã€‚â€â€”â€”å•è°ƒé˜Ÿåˆ—çš„åŸç† * ä»‹ç»å•è°ƒé˜Ÿåˆ—çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œç»´æŠ¤ä¸€ä¸ªåŒå‘é˜Ÿåˆ—ï¼ˆdequeï¼‰ï¼Œéå†åºåˆ—ï¼Œä»…å½“ä¸€ä¸ªå…ƒç´ å¯èƒ½æˆä¸ºæŸä¸ªåŒºé—´æœ€å€¼æ—¶æ‰ä¿ç•™å®ƒã€‚ è®¾è®¡å•è°ƒé˜Ÿåˆ—çš„æ—¶å€™ï¼Œpopï¼Œå’Œ push æ“ä½œè¦ä¿æŒå¦‚ä¸‹è§„åˆ™ï¼š pop(value)ï¼šå¦‚æœçª—å£ç§»é™¤çš„å…ƒç´  value ç­‰äºå•è°ƒé˜Ÿåˆ—çš„å‡ºå£å…ƒç´ ï¼Œé‚£ä¹ˆé˜Ÿåˆ—å¼¹å‡ºå…ƒç´ ï¼Œå¦åˆ™ä¸ç”¨ä»»ä½•æ“ä½œ push(value)ï¼šå¦‚æœ push çš„å…ƒç´  value å¤§äºå…¥å£å…ƒç´ çš„æ•°å€¼ï¼Œé‚£ä¹ˆå°±å°†é˜Ÿåˆ—å…¥å£çš„å…ƒç´ å¼¹å‡ºï¼Œç›´åˆ° push å…ƒç´ çš„æ•°å€¼å°äºç­‰äºé˜Ÿåˆ—å…¥å£å…ƒç´ çš„æ•°å€¼ä¸ºæ­¢ ä¿æŒå¦‚ä¸Šè§„åˆ™ï¼Œæ¯æ¬¡çª—å£ç§»åŠ¨çš„æ—¶å€™ï¼Œåªè¦é—® que.front() å°±å¯ä»¥è¿”å›å½“å‰çª—å£çš„æœ€å¤§å€¼ã€‚ ä»¥é¢˜ç›®ç¤ºä¾‹ä¸ºä¾‹ï¼Œè¾“å…¥: nums &#x3D; [1,3,-1,-3,5,3,6,7], å’Œ k &#x3D; 3ï¼ŒåŠ¨ç”»å¦‚ä¸‹ï¼š å®ç° ä¿è¯é˜Ÿåˆ—é‡Œå•è°ƒé€’å‡æˆ–é€’å¢çš„åŸåˆ™ï¼Œæ‰€ä»¥å«åšå•è°ƒé˜Ÿåˆ—ã€‚ ä»¥ä¸‹ä¸æ˜¯å›ºå®šå†™æ³•ï¼š 12345678910111213141516171819202122232425262728293031323334type MonotoneQueue struct &#123; queue []int&#125;func Constructor() MonotoneQueue &#123; return MonotoneQueue&#123; queue: make([]int, 0), &#125;&#125;func (this *MonotoneQueue) Front() int &#123; return this.queue[0]&#125;func (this *MonotoneQueue) Back() int &#123; return this.queue[len(this.queue)-1]&#125;func (this *MonotoneQueue) Empty() bool &#123; return len(this.queue) == 0&#125;func (this *MonotoneQueue) Push(x int) &#123; for !this.Empty() &amp;&amp; x &gt; this.Back() &#123; this.queue = this.queue[:len(this.queue)-1] &#125; this.queue = append(this.queue, x)&#125;func (this *MonotoneQueue) Pop(x int) &#123; if !this.Empty() &amp;&amp; this.Front() == x &#123; this.queue = this.queue[1:] &#125;&#125;","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Data Structure","slug":"Computer-Basics/Data-Structure","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Data-Structure/"}],"tags":[{"name":"Queue","slug":"Queue","permalink":"http://blog.sukiu.top/tags/Queue/"}]},{"title":"é˜Ÿåˆ— Queue","slug":"Queue","date":"2021-10-28T07:00:00.000Z","updated":"2021-10-28T07:00:00.000Z","comments":true,"path":"Computer-Basics/Data-Structure/Queue/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Data-Structure/Queue/","excerpt":"ä¸æ ˆç±»ä¼¼ï¼Œé˜Ÿåˆ—æ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºçš„å®¹å™¨é€‚é…å™¨ã€‚","text":"ä¸æ ˆç±»ä¼¼ï¼Œé˜Ÿåˆ—æ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºçš„å®¹å™¨é€‚é…å™¨ã€‚ å®šä¹‰ åœ¨ FIFO æ•°æ®ç»“æ„ä¸­ï¼Œå°†é¦–å…ˆå¤„ç†æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œé˜Ÿåˆ—æ˜¯å…¸å‹çš„ FIFO æ•°æ®ç»“æ„ã€‚æ’å…¥ï¼ˆinsertï¼‰æ“ä½œä¹Ÿç§°ä½œå…¥é˜Ÿï¼ˆenqueueï¼‰ï¼Œæ–°å…ƒç´ å§‹ç»ˆè¢«æ·»åŠ åœ¨é˜Ÿåˆ—çš„æœ«å°¾ã€‚ åˆ é™¤ï¼ˆdeleteï¼‰æ“ä½œä¹Ÿè¢«ç§°ä¸ºå‡ºé˜Ÿï¼ˆdequeue)ã€‚ ä½ åªèƒ½ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ å®ç°ä¸ºäº†å®ç°é˜Ÿåˆ—ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŠ¨æ€æ•°ç»„å’ŒæŒ‡å‘é˜Ÿåˆ—å¤´éƒ¨çš„ç´¢å¼•ã€‚ ç®€å•çš„å‚è€ƒå®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849#include &lt;iostream&gt;class MyQueue &#123; private: // store elements vector&lt;int&gt; data; // a pointer to indicate the start position int p_start; public: MyQueue() &#123;p_start = 0;&#125; /** Insert an element into the queue. Return true if the operation is successful. */ bool enQueue(int x) &#123; data.push_back(x); return true; &#125; /** Delete an element from the queue. Return true if the operation is successful. */ bool deQueue() &#123; if (isEmpty()) &#123; return false; &#125; p_start++; return true; &#125;; /** Get the front item from the queue. */ int Front() &#123; return data[p_start]; &#125;; /** Checks whether the queue is empty or not. */ bool isEmpty() &#123; return p_start &gt;= data.size(); &#125;&#125;;int main() &#123; MyQueue q; q.enQueue(5); q.enQueue(3); if (!q.isEmpty()) &#123; cout &lt;&lt; q.Front() &lt;&lt; endl; &#125; q.deQueue(); if (!q.isEmpty()) &#123; cout &lt;&lt; q.Front() &lt;&lt; endl; &#125; q.deQueue(); if (!q.isEmpty()) &#123; cout &lt;&lt; q.Front() &lt;&lt; endl; &#125;&#125; ç¼ºç‚¹ä¸Šé¢çš„å®ç°å¾ˆç®€å•ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹æ•ˆç‡å¾ˆä½ã€‚ éšç€èµ·å§‹æŒ‡é’ˆçš„ç§»åŠ¨ï¼Œæµªè´¹äº†è¶Šæ¥è¶Šå¤šçš„ç©ºé—´ã€‚ å½“æˆ‘ä»¬æœ‰ç©ºé—´é™åˆ¶æ—¶ï¼Œè¿™å°†æ˜¯éš¾ä»¥æ¥å—çš„ã€‚ æ‰€ä»¥åº”è¯¥è§„å®šæ•°ç»„çš„é•¿åº¦ï¼Œä¸€ç»„ä¸€ç»„é˜Ÿåˆ—çš„è¿›è¡Œä½¿ç”¨ã€‚","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Data Structure","slug":"Computer-Basics/Data-Structure","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Data-Structure/"}],"tags":[{"name":"Queue","slug":"Queue","permalink":"http://blog.sukiu.top/tags/Queue/"}]},{"title":"æ ˆ Stack","slug":"Stack","date":"2021-10-28T06:32:00.000Z","updated":"2021-10-28T06:32:00.000Z","comments":true,"path":"Computer-Basics/Data-Structure/Stack/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Data-Structure/Stack/","excerpt":"æ ˆæ˜¯ä»¥åº•å±‚å®¹å™¨å®Œæˆå…¶æ‰€æœ‰çš„å·¥ä½œï¼Œå¯¹å¤–æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œåº•å±‚å®¹å™¨æ˜¯å¯æ’æ‹”çš„ï¼ˆå³å¯ä»¥æ§åˆ¶ä½¿ç”¨å“ªç§å®¹å™¨æ¥å®ç°æ ˆçš„åŠŸèƒ½ï¼‰ã€‚ STL ä¸­æ ˆå¾€å¾€ä¸è¢«å½’ç±»ä¸ºå®¹å™¨ï¼Œè€Œè¢«å½’ç±»ä¸º container adapterï¼ˆå®¹å™¨é€‚é…å™¨ï¼‰ã€‚","text":"æ ˆæ˜¯ä»¥åº•å±‚å®¹å™¨å®Œæˆå…¶æ‰€æœ‰çš„å·¥ä½œï¼Œå¯¹å¤–æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œåº•å±‚å®¹å™¨æ˜¯å¯æ’æ‹”çš„ï¼ˆå³å¯ä»¥æ§åˆ¶ä½¿ç”¨å“ªç§å®¹å™¨æ¥å®ç°æ ˆçš„åŠŸèƒ½ï¼‰ã€‚ STL ä¸­æ ˆå¾€å¾€ä¸è¢«å½’ç±»ä¸ºå®¹å™¨ï¼Œè€Œè¢«å½’ç±»ä¸º container adapterï¼ˆå®¹å™¨é€‚é…å™¨ï¼‰ã€‚ ä»‹ç»åœ¨ LIFO æ•°æ®ç»“æ„ä¸­ï¼Œå°†é¦–å…ˆå¤„ç†æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­çš„æœ€æ–°å…ƒç´ ã€‚ ä¸é˜Ÿåˆ—ä¸åŒï¼Œæ ˆæ˜¯ä¸€ä¸ª LIFO æ•°æ®ç»“æ„ã€‚é€šå¸¸ï¼Œæ’å…¥æ“ä½œåœ¨æ ˆä¸­è¢«ç§°ä½œå…¥æ ˆ push ã€‚ä¸é˜Ÿåˆ—ç±»ä¼¼ï¼Œæ€»æ˜¯åœ¨å †æ ˆçš„æœ«å°¾æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ ã€‚ä½†æ˜¯ï¼Œåˆ é™¤æ“ä½œï¼Œé€€æ ˆ pop ï¼Œå°†å§‹ç»ˆåˆ é™¤é˜Ÿåˆ—ä¸­ç›¸å¯¹äºå®ƒçš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚ å®ç°ä»ä¸‹å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œæ ˆçš„å†…éƒ¨ç»“æ„ï¼Œæ ˆçš„åº•å±‚å®ç°å¯ä»¥æ˜¯ vectorï¼Œdequeï¼Œlist éƒ½æ˜¯å¯ä»¥çš„ï¼Œ ä¸»è¦å°±æ˜¯æ•°ç»„å’Œé“¾è¡¨çš„åº•å±‚å®ç°ã€‚ å¸¸ç”¨çš„ SGI STLï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåº•å±‚å®ç°çš„è¯ï¼Œé»˜è®¤æ˜¯ä»¥ deque ä¸ºç¼ºçœæƒ…å†µä¸‹æ ˆçš„ä½å±‚ç»“æ„ã€‚ deque æ˜¯ä¸€ä¸ªåŒå‘é˜Ÿåˆ—ï¼Œåªè¦å°ä½ä¸€æ®µï¼Œåªå¼€é€šå¦ä¸€ç«¯å°±å¯ä»¥å®ç°æ ˆçš„é€»è¾‘äº†ã€‚ SGI STL ä¸­ é˜Ÿåˆ—åº•å±‚å®ç°ç¼ºçœæƒ…å†µä¸‹ä¸€æ ·ä½¿ç”¨ deque å®ç°çš„ã€‚ 12std::stack&lt;int, std::vector&lt;int&gt; &gt; third; // ä½¿ç”¨vectorä¸ºåº•å±‚å®¹å™¨çš„æ ˆstd::queue&lt;int, std::list&lt;int&gt;&gt; third; // å®šä¹‰ä»¥listä¸ºåº•å±‚å®¹å™¨çš„é˜Ÿåˆ— åŠ¨æ€æ•°ç»„å®ç°å‚è€ƒï¼š 12345678910111213141516171819202122232425262728293031323334353637383940#include &lt;iostream&gt;class MyStack &#123; private: vector&lt;int&gt; data; // store elements public: /** Insert an element into the stack. */ void push(int x) &#123; data.push_back(x); &#125; /** Checks whether the queue is empty or not. */ bool isEmpty() &#123; return data.empty(); &#125; /** Get the top item from the queue. */ int top() &#123; return data.back(); &#125; /** Delete an element from the queue. Return true if the operation is successful. */ bool pop() &#123; if (isEmpty()) &#123; return false; &#125; data.pop_back(); return true; &#125;&#125;;int main() &#123; MyStack s; s.push(1); s.push(2); s.push(3); for (int i = 0; i &lt; 4; ++i) &#123; if (!s.isEmpty()) &#123; cout &lt;&lt; s.top() &lt;&lt; endl; &#125; cout &lt;&lt; (s.pop() ? &quot;true&quot; : &quot;false&quot;) &lt;&lt; endl; &#125;&#125;","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Data Structure","slug":"Computer-Basics/Data-Structure","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Data-Structure/"}],"tags":[{"name":"Stack","slug":"Stack","permalink":"http://blog.sukiu.top/tags/Stack/"}]},{"title":"KMP ç®—æ³•","slug":"String-KMP","date":"2021-10-19T11:56:00.000Z","updated":"2021-10-19T11:56:00.000Z","comments":true,"path":"Computer-Basics/Algorithm/String-KMP/","link":"","permalink":"http://blog.sukiu.top/Computer-Basics/Algorithm/String-KMP/","excerpt":"KMP ä¸»è¦åº”ç”¨åœ¨å­—ç¬¦ä¸²åŒ¹é…ä¸Šã€‚ KMP çš„ä¸»è¦æ€æƒ³æ˜¯å½“å‡ºç°å­—ç¬¦ä¸²ä¸åŒ¹é…æ—¶ï¼Œå¯ä»¥çŸ¥é“ä¸€éƒ¨åˆ†ä¹‹å‰å·²ç»åŒ¹é…çš„æ–‡æœ¬å†…å®¹ï¼Œå¯ä»¥åˆ©ç”¨è¿™äº›ä¿¡æ¯é¿å…ä»å¤´å†å»åšåŒ¹é…äº†ã€‚","text":"KMP ä¸»è¦åº”ç”¨åœ¨å­—ç¬¦ä¸²åŒ¹é…ä¸Šã€‚ KMP çš„ä¸»è¦æ€æƒ³æ˜¯å½“å‡ºç°å­—ç¬¦ä¸²ä¸åŒ¹é…æ—¶ï¼Œå¯ä»¥çŸ¥é“ä¸€éƒ¨åˆ†ä¹‹å‰å·²ç»åŒ¹é…çš„æ–‡æœ¬å†…å®¹ï¼Œå¯ä»¥åˆ©ç”¨è¿™äº›ä¿¡æ¯é¿å…ä»å¤´å†å»åšåŒ¹é…äº†ã€‚ è¯´æ˜å€Ÿç”¨äº† è¿™ç¯‡åšå®¢ çš„ä¸€äº›æ’å›¾å’Œç†è§£ next æ•°ç»„å°±æ˜¯ä¸€ä¸ªå‰ç¼€è¡¨ï¼ˆprefix tableï¼‰ï¼šå‰ç¼€è¡¨æ˜¯ç”¨æ¥å›é€€çš„ï¼Œå®ƒè®°å½•äº†æ¨¡å¼ä¸²ä¸ä¸»ä¸² (æ–‡æœ¬ä¸²) ä¸åŒ¹é…çš„æ—¶å€™ï¼Œæ¨¡å¼ä¸²åº”è¯¥ä»å“ªé‡Œå¼€å§‹é‡æ–°åŒ¹é…ã€‚ å‡è®¾ åŒ¹é…ä¸² Sï¼Œ æ¨¡å¼ä¸² T æœ€é•¿å…¬å…±å‰åç¼€ ï¼š ABCAB å…¬å…±å‰åç¼€ æ˜¯ AB ABABA å…¬å…±å‰åç¼€ æ˜¯ ABA ABCABC å…¬å…±å‰åç¼€ æ˜¯ ABC å¦‚å›¾ï¼ŒS[3]!&#x3D;T[3]ï¼ˆi&#x3D;3ï¼Œj&#x3D;3ï¼‰ï¼Œä½†å‰é¢çš„ ABA æœ‰å…¬å…±å‰åç¼€ A (æœ€é•¿å…¬å…±å‰åç¼€ä¸èƒ½ç­‰äºå‰é¢çš„ä¸²é•¿)ï¼Œé•¿åº¦ä¸º 1ï¼Œæ‰€ä»¥æŠŠ j ç§»åˆ° 1ï¼ˆå‰ç¼€ç§»åˆ°åç¼€å¤„ï¼‰ï¼Œ å¦‚ä¸‹å›¾ åˆæ¯”å¦‚ ä¸‹å›¾ä¸­ï¼ŒS[5]!&#x3D;T[5]ï¼ˆi&#x3D;5ï¼Œj&#x3D;5ï¼‰ï¼Œæœ‰å…¬å…±å‰åç¼€ ABï¼Œé•¿åº¦ 2 å°† j ç§»åˆ° 2 ï¼ˆi&#x3D;5ï¼Œj&#x3D;2ï¼‰ æ‰€ä»¥ï¼Œé‡ç‚¹è¦æ±‚ next æ•°ç»„ï¼š next[i] : æ»¡è¶³ x[i-kâ€¦i-1]&#x3D;x[0â€¦k-1] çš„æœ€å¤§ k å€¼ï¼ˆæœ€é•¿å…¬å…±å‰åç¼€çš„é•¿åº¦ï¼‰ è€ƒè™‘å››ç§æƒ…å†µï¼š â‘  j &#x3D; 0 ï¼Œ å¦‚æœä¸åŒ¹é…ï¼Œj å·²ç»åœ¨æœ€å·¦è¾¹ï¼Œæ— æ³•å›é€€ï¼Œæ‰€ä»¥è¦å³ç§»ï¼Œå³åˆå§‹åŒ– next [ 0 ] &#x3D; -1 â‘¡ j &#x3D; 1 , å¦‚æœä¸åŒ¹é…ï¼Œåªèƒ½å·¦ç§»åˆ° 0 ï¼Œæ‰€ä»¥ next [ 1 ] &#x3D; 0 â‘¢ X [ k ] &#x3D; X [ j ] åŒ¹é…åˆ°è¿™ä¸ªä½ç½®è¯´æ˜å¤±é…ä½ç½®å‰ å…¬å…±å‰åç¼€ç›¸ç­‰ï¼Œå³ X [ 0â€¦k-1 ] &#x3D; X [ j-kâ€¦j-1] ï¼ˆk ä¸ºå…¬å…±å‰åç¼€é•¿åº¦ï¼‰ é‚£ä¹ˆï¼ŒX [ 0â€¦k ] &#x3D; X [ j-kâ€¦j ] æ‰€ä»¥ï¼Œnext [ j+1 ] &#x3D; k+1 (æ•°ç»„ä¸‹æ ‡ä» 0 å¼€å§‹ï¼Œé•¿åº¦ä¸º k+1) â‘£ X [ k ] !&#x3D; X [ j ] next[i] : æ»¡è¶³ x[j-kâ€¦i-1]&#x3D;x[0â€¦j-1] çš„æœ€å¤§ k å€¼ (k ä¸ºæœ€é•¿å…¬å…±å‰åç¼€) æ­¤æ—¶ï¼Œå°†å‰ç¼€ç§»åˆ°åç¼€ä½ç½®ï¼Œå³æŒ‡é’ˆå‰ç§»åˆ°æœ€é•¿å…¬å…±å‰åç¼€çš„é•¿åº¦ä½ç½®ï¼Œå¯ä»¥å¾—å‡ºï¼š k &#x3D; next [ k ] ä¸è¿‡ï¼Œè¿™æ ·æ±‚å¾—çš„ next æ•°ç»„è¿˜æœ‰ç¼ºé™·ï¼š æŒ‰ç…§å‰è¿°ï¼Œj ç§»åˆ° æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦ 1 çš„ä½ç½®ï¼š è¿™ä¸€æ­¥æ˜¯å®Œå…¨æ²¡æœ‰æ„ä¹‰çš„ã€‚å› ä¸ºåé¢çš„ B å·²ç»ä¸åŒ¹é…äº†ï¼Œé‚£å‰é¢çš„ B ä¹Ÿä¸€å®šæ˜¯ä¸åŒ¹é…çš„ï¼Œå³ X[ j ] &#x3D; X[ next[ j ] ] çš„æƒ…å†µæ²¡æœ‰æ„ä¹‰ ä»£ç éšæƒ³å½•åŠ¨å›¾ç¤ºä¾‹ï¼š ä»£ç GO12345678910111213141516171819202122232425262728293031323334353637383940func getNext(next []int, s string) &#123; i, j := 0, -1 next[0] = j for i &lt; len(s) &#123; for j !=-1 &amp;&amp; s[i] != s[j] &#123; // å‰åç¼€ä¸åŒï¼Œå‘å‰å›é€€ j = next[j] &#125; i++ j++ if i &gt;= len(s) || j &gt;= len(s) &#123; return &#125; if s[i] == s[j] &#123; // ä¼˜åŒ–å»é‡ next[i] = next[j] &#125; else &#123; next[i] = j &#125; &#125;&#125;func strStr(haystack string, needle string) int &#123; if len(needle) == 0 &#123; return 0 &#125; next := make([]int, len(needle)) getNext(next, needle) i, j := 0, 0 for i &lt; len(haystack) &amp;&amp; j &lt; len(needle) &#123; for j !=-1 &amp;&amp; haystack[i] != needle[j] &#123; j = next[j] &#125; i++ j++ &#125; if j == len(needle) &#123; return i - j &#125; else &#123; return -1 &#125;&#125; C++123456789101112131415161718192021222324252627int nx[maxn];void getnx(string x)&#123; int m=x.size(); int i,j; j=nx[0]=-1; i=0; while (i&lt;m)&#123; while (-1!=j &amp;&amp; x[i]!=x[j]) j=nx[j]; if (x[++i]==x[++j]) nx[i]=nx[j]; else nx[i]=j; &#125;&#125;//è¾“å‡ºç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®int kmp(string s, string t) &#123; //sä¸ºåŒ¹é…ä¸²ï¼Œtä¸ºæ¨¡å¼ä¸² int n=s.size(); int m=t.size(); int i=0,j=0; getnx(t); while (i&lt;n &amp;&amp; j&lt;m) &#123; while (-1!=j &amp;&amp; s[i]!=t[j]) j=nx[j]; i++; j++; &#125; if (j==m) return i-j; else return -1;&#125; æ€§è´¨æ•°ç»„é•¿åº¦å‡å»æœ€é•¿ç›¸åŒå‰åç¼€çš„é•¿åº¦ç›¸å½“äºæ˜¯ç¬¬ä¸€ä¸ªå‘¨æœŸçš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå‘¨æœŸçš„é•¿åº¦ï¼Œå¦‚æœè¿™ä¸ªå‘¨æœŸå¯ä»¥è¢«æ•´é™¤ï¼Œå°±è¯´æ˜æ•´ä¸ªæ•°ç»„å°±æ˜¯è¿™ä¸ªå‘¨æœŸçš„å¾ªç¯ã€‚ å³æœ€å°çš„å¾ªç¯èŠ‚ 12345678910111213141516171819202122232425func getNext(next []int, s string) &#123; // è®¡ç®—åç¼€ï¼Œä¸éœ€è¦å»é‡ i, j := 0, -1 next[0] = j for i &lt; len(s) &#123; for j != -1 &amp;&amp; s[i] != s[j] &#123; // å‰åç¼€ä¸åŒï¼Œå‘å‰å›é€€ j = next[j] &#125; i++ j++ next[i] = j &#125;&#125;func repeatedSubstringPattern(s string) bool &#123; // if len(s) == 0 &#123; return false &#125; next := make([]int, len(s)+1) // å¤š+1 è®¡ç®—æœ«ä½æœ€é•¿å‰åç¼€ getNext(next, s) l := len(s) if next[l] != 0 &amp;&amp; l%(l-next[l]) == 0 &#123; return true &#125; return false&#125;","categories":[{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Algorithm","slug":"Computer-Basics/Algorithm","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Algorithm/"}],"tags":[{"name":"String","slug":"String","permalink":"http://blog.sukiu.top/tags/String/"}]},{"title":"Kotlin","slug":"Language-Kotlin","date":"2021-10-01T11:45:00.000Z","updated":"2021-10-01T11:45:00.000Z","comments":true,"path":"Programming-Language/Kotlin/Language-Kotlin/","link":"","permalink":"http://blog.sukiu.top/Programming-Language/Kotlin/Language-Kotlin/","excerpt":"Kotlin æ˜¯ä¸€ç§åœ¨ Java è™šæ‹Ÿæœºä¸Šè¿è¡Œçš„é™æ€ç±»å‹ç¼–ç¨‹è¯­è¨€ï¼Œè¢«ç§°ä¹‹ä¸º Android ä¸–ç•Œçš„ Swiftï¼Œç”± JetBrains è®¾è®¡å¼€å‘å¹¶å¼€æºã€‚ Kotlin å¯ä»¥ç¼–è¯‘æˆ Java å­—èŠ‚ç ï¼Œä¹Ÿå¯ä»¥ç¼–è¯‘æˆ JavaScriptï¼Œæ–¹ä¾¿åœ¨æ²¡æœ‰ JVM çš„è®¾å¤‡ä¸Šè¿è¡Œã€‚ ç”¨äº† Kotlin å°±ä¸æƒ³å›åˆ° Javaï¼Œæœ¬æ–‡ä¸»è¦è®°å½•ä¸€äº›é«˜çº§ç”¨æ³•","text":"Kotlin æ˜¯ä¸€ç§åœ¨ Java è™šæ‹Ÿæœºä¸Šè¿è¡Œçš„é™æ€ç±»å‹ç¼–ç¨‹è¯­è¨€ï¼Œè¢«ç§°ä¹‹ä¸º Android ä¸–ç•Œçš„ Swiftï¼Œç”± JetBrains è®¾è®¡å¼€å‘å¹¶å¼€æºã€‚ Kotlin å¯ä»¥ç¼–è¯‘æˆ Java å­—èŠ‚ç ï¼Œä¹Ÿå¯ä»¥ç¼–è¯‘æˆ JavaScriptï¼Œæ–¹ä¾¿åœ¨æ²¡æœ‰ JVM çš„è®¾å¤‡ä¸Šè¿è¡Œã€‚ ç”¨äº† Kotlin å°±ä¸æƒ³å›åˆ° Javaï¼Œæœ¬æ–‡ä¸»è¦è®°å½•ä¸€äº›é«˜çº§ç”¨æ³• æ›´å¤šç»†èŠ‚å¯æŸ¥çœ‹ï¼šåŸºæœ¬è¯­æ³• - Kotlin è¯­è¨€ä¸­æ–‡ç«™ (kotlincn.net) åŸºæœ¬çŸ¥è¯†åŒºé—´ å·¦é—­å³é—­ï¼š0..10 å·¦é—­å³å¼€ï¼š0 unitil 10 (step 2) é™åºï¼ˆå·¦é—­å³é—­ï¼‰ï¼š10 downto 1 ç±»ä¸»æ„é€ å‡½æ•°12345class Examle(...)&#123; init&#123; ... &#125;&#125; æ¬¡æ„é€ å‡½æ•°ä¸å¸¸ç”¨ï¼Œä¸€èˆ¬ç›´æ¥æŒ‡å®šé»˜è®¤å€¼ 1234class Examle(...)&#123; constructor(...) : this(...)&#123;&#125; sonstructor() : this (...)&#123;&#125;&#125; ä¿®é¥°ç¬¦ publicï¼šï¼ˆé»˜è®¤ï¼‰å¯¹æ‰€æœ‰ç±»å¯è§ privateï¼šå¯¹å½“å‰ç±»å†…éƒ¨å¯è§ protectedï¼šå¯¹å½“å‰ç±»å’Œå­ç±»å¯è§ internalï¼šå¯¹åŒä¸€æ¨¡å—çš„ç±»å¯è§ æ•°æ®ç±»å’Œå•ä¾‹ç±» æ•°æ®ç±»ï¼šdata classï¼Œç­‰åŒäº Java ä¸­ä¸€é•¿ä¸²çš„ bean å•ä¾‹ç±»ï¼šobjectï¼Œç­‰åŒäº Java ä¸­çš„å•ä¾‹æ¨¡å¼ï¼ˆå…¨å±€è‡³å¤šåªæœ‰ä¸€ä¸ªå®ä¾‹ï¼‰ Lambdaç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’çš„ä»£ç ã€‚ å¤ªå¸¸ç”¨ä¹Ÿå¤ªå¤šäº†ï¼Œå†™å†™å°±ä¼šäº† æ ‡å‡†å‡½æ•°åªä»‹ç»æœ€å¸¸ç”¨çš„ 3 ä¸ª Withä¸€ä¸ªéæ‰©å±•å‡½æ•°ï¼šä¸Šä¸‹æ–‡å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œä½†æ˜¯åœ¨ lambda è¡¨è¾¾å¼å†…éƒ¨ï¼Œå®ƒå¯ä»¥ä½œä¸ºæ¥æ”¶è€…ï¼ˆthisï¼‰ä½¿ç”¨ã€‚ è¿”å›å€¼æ˜¯ lambda è¡¨è¾¾å¼ç»“æœã€‚ æ¥æ”¶ 2 ä¸ªå‚æ•°ï¼š ä»»æ„ç±»å‹çš„å¯¹è±¡ Lambda è¡¨è¾¾å¼ 12345678910val result = with(obj)&#123; // obj ä¸Šä¸‹æ–‡ &quot;value&quot; // with è¿”å›å€¼&#125;val numbers = mutableListOf(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;)with(numbers) &#123; println(&quot;&#x27;with&#x27; is called with argument $this&quot;) println(&quot;It contains $size elements&quot;)&#125; Runä¸Šä¸‹æ–‡å¯¹è±¡ ä½œä¸ºæ¥æ”¶è€…ï¼ˆthisï¼‰æ¥è®¿é—®ã€‚ è¿”å›å€¼ æ˜¯ lambda è¡¨è¾¾å¼ç»“æœã€‚ run å’Œ with åšåŒæ ·çš„äº‹æƒ…ï¼Œä½†æ˜¯è°ƒç”¨æ–¹å¼å’Œ let ä¸€æ ·â€”â€”ä½œä¸ºä¸Šä¸‹æ–‡å¯¹è±¡çš„æ‰©å±•å‡½æ•°. å½“ lambda è¡¨è¾¾å¼åŒæ—¶åŒ…å«å¯¹è±¡åˆå§‹åŒ–å’Œè¿”å›å€¼çš„è®¡ç®—æ—¶ï¼Œrun å¾ˆæœ‰ç”¨ã€‚ 12345678910val result = service.run &#123; port = 8080 query(prepareRequest() + &quot; to port $port&quot;)&#125;// åŒæ ·çš„ä»£ç å¦‚æœç”¨ let() å‡½æ•°æ¥å†™:val letResult = service.let &#123; it.port = 8080 it.query(it.prepareRequest() + &quot; to port $&#123;it.port&#125;&quot;)&#125; Applyä¸Šä¸‹æ–‡å¯¹è±¡ ä½œä¸ºæ¥æ”¶è€…ï¼ˆthisï¼‰æ¥è®¿é—®ã€‚ è¿”å›å€¼ æ˜¯ä¸Šä¸‹æ–‡å¯¹è±¡æœ¬èº«ã€‚ å¯¹äºä¸è¿”å›å€¼ä¸”ä¸»è¦åœ¨æ¥æ”¶è€…ï¼ˆthisï¼‰å¯¹è±¡çš„æˆå‘˜ä¸Šè¿è¡Œçš„ä»£ç å—ä½¿ç”¨ applyã€‚apply çš„å¸¸è§æƒ…å†µæ˜¯å¯¹è±¡é…ç½®ã€‚è¿™æ ·çš„è°ƒç”¨å¯ä»¥ç†è§£ä¸ºâ€œå°†ä»¥ä¸‹èµ‹å€¼æ“ä½œåº”ç”¨äºå¯¹è±¡â€ã€‚ 12345val adam = Person(&quot;Adam&quot;).apply &#123; age = 32 city = &quot;London&quot; &#125;println(adam) å‡½æ•°é€‰æ‹©ä¸ºäº†é€‰æ‹©åˆé€‚çš„ä½œç”¨åŸŸå‡½æ•°ï¼Œå®ƒä»¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ«è¡¨ã€‚ å‡½æ•° å¯¹è±¡å¼•ç”¨ è¿”å›å€¼ æ˜¯å¦æ˜¯æ‰©å±•å‡½æ•° let it Lambda è¡¨è¾¾å¼ç»“æœ æ˜¯ run this Lambda è¡¨è¾¾å¼ç»“æœ æ˜¯ run - Lambda è¡¨è¾¾å¼ç»“æœ ä¸æ˜¯ï¼šè°ƒç”¨æ— éœ€ä¸Šä¸‹æ–‡å¯¹è±¡ with this Lambda è¡¨è¾¾å¼ç»“æœ ä¸æ˜¯ï¼šæŠŠä¸Šä¸‹æ–‡å¯¹è±¡å½“åšå‚æ•° apply this ä¸Šä¸‹æ–‡å¯¹è±¡ æ˜¯ also it ä¸Šä¸‹æ–‡å¯¹è±¡ æ˜¯ æ‹“å±•å‡½æ•°å’Œè¿ç®—ç¬¦é‡è½½æ‹“å±•å‡½æ•°åŸºæœ¬æ ¼å¼ï¼š 123fun ClassName.methodName(pararm: Int):Int&#123; return 0&#125; ä¾‹å­ï¼š 123fun String.showToast(duration: Int = Toast.LENGTH_SHORT) &#123; Toast.makeToast(MyApp.context, this, duration).show()&#125; è¿ç®—ç¬¦é‡è½½ä¾‹å­ï¼š 12345class Money(val value:Int)&#123; operator fun plus(money:Money):Money&#123; return Money(value+money.value) &#125;&#125; é«˜é˜¶å‡½æ•°å’Œå†…è”å‡½æ•°é«˜é˜¶å‡½æ•°å¦‚æœä¸€ä¸ªå‡½æ•°æ¥æ”¶å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæˆ–è€…éŸ©éå­çš„ç±»å‹æ˜¯å¦ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™ç§°ä¹‹ä¸ºé«˜é˜¶å‡½æ•°ã€‚ åŸºæœ¬è§„åˆ™ï¼š() -&gt; Unit ä¾‹å­å¦‚ä¸‹ï¼Œç›¸å½“äºèƒ½åµŒå¥—å‡½æ•° 123fun CardItem( onClick: () -&gt; Unit = &#123;&#125;) å†…è”å‡½æ•°é«˜é˜¶å‡½æ•°å®ç°çš„ Lambda è¡¨è¾¾å¼åœ¨åº•å±‚è¢«è½¬æ¢ä¸ºåŒ¿åç±»ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„åŒ¿åç±»å®ä¾‹ï¼Œé€ æˆé¢å¤–å¼€é”€ å‡½æ•°å‰æ·»åŠ  inline å¯æ¶ˆé™¤å¼€é”€ï¼šinline fun example()&#123;&#125; æ³›å‹å’Œå§”æ‰˜æ³›å‹ä¸€èˆ¬ç¼–ç¨‹æ¨¡å¼ä¸‹ï¼Œéœ€è¦ç»™ä»»ä½•ä¸€ä¸ªå˜é‡æŒ‡å®šå…·ä½“çš„ç±»å‹ï¼Œè€Œæ³›å‹å…è®¸æˆ‘ä»¬åœ¨ä¸æŒ‡å®šå…·ä½“ç±»å‹çš„æƒ…å†µä¸‹è¿›è¡Œç¼–ç¨‹ï¼Œè¿™æ ·çš„ä»£ç ä¼šæœ‰æ›´å¥½çš„æ‹“å±•æ€§ã€‚ æ³›å‹ç±»ï¼š 12345678class MyClass&lt;T&gt;&#123; fun method(param: T): T&#123; return param &#125;&#125;val myClass = MyClass&lt;Int&gt;() // æŒ‡å®š Int æ³›å‹val result = myClass.method(123) // å¾—åˆ° Int è¿”å›å€¼ æ³›å‹æ–¹æ³•ï¼š 1234567891011class MyClass&#123; fun &lt;T&gt; method(param: T): T&#123; return param &#125;&#125;val myClass = MyClass()val result = myClass.method&lt;Int&gt;(123)// kotlin å¯ä»¥è‡ªåŠ¨è¯†åˆ«val result = myClass.method(123) èŒƒå›´ï¼š å¯é€šè¿‡ &lt;T : Number&gt; çš„å½¢å¼æŒ‡å®šèŒƒå›´ï¼Œæ­¤æ—¶åªå…è®¸æ•°å­—ç±»å‹ï¼Œå­—ç¬¦ä¸²ä¼šæŠ¥é”™ é»˜è®¤ç±»å‹å¯ç©ºï¼Œå³ Any?ï¼Œä¸æƒ³ä¸ºç©ºå¯æ”¹ä¸º Any å§”æ‰˜å§”æ‰˜æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œæ“ä½œå¯¹è±¡è‡ªå·±ä¸ä¼šå»å¤„ç†æŸæ®µé€»è¾‘ï¼Œè€Œæ˜¯æŠŠå·¥ä½œå§”æ‰˜ç»™å¦å¤–ä¸€ä¸ªè¾…åŠ©å¯¹è±¡å¤„ç†ã€‚ ç±»å§”æ‰˜ï¼š å€ŸåŠ©å§”æ‰˜å¯ä»¥è½»æ¾è‡ªå·±å®ç°ç±»ï¼Œä»¥ä¸‹é€šè¿‡ Hashset è‡ªå®šä¹‰ä¸€ä¸ªç±»ï¼šby æ˜¯å®ç°å§”æ‰˜çš„å…³é”®å­— 1234class MySet&lt;T&gt;(val helperSet: HashSet&lt;T&gt;) : Set&lt;T&gt; by helperSet&#123; fun helloworld() = println(&quot;hello world&quot;) override fun isEmpty = false&#125; å±æ€§å§”æ‰˜ï¼š å°†ä¸€ä¸ªå±æ€§ï¼ˆå­—æ®µï¼‰çš„å…·ä½“å®ç°å§”æ‰˜ç»™å¦ä¸€ä¸ªç±»å»å®Œæˆ 1234567891011121314151617181920class MyClass&#123; val p by Delegate()&#125;// è°ƒç”¨ p æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨ Delegateç±»çš„ getValue æ–¹æ³•ï¼Œèµ‹å€¼æ—¶è°ƒç”¨ setValue æ–¹æ³•// ä»¥ä¸‹æ˜¯æ ‡å‡†çš„å®ç°class Delegate&#123; var propValue: Any? = null // å‚æ•°1: æŒ‡å®šè¯¥ç±»çš„å§”æ‰˜åœ¨ä»€ä¹ˆç±»å¯ä»¥ä½¿ç”¨ // å‚æ•°2: Kotlinå±æ€§æ“ä½œç±»ï¼Œå¯ç”¨äºè·å–å„ç§å±æ€§ç›¸å…³çš„å€¼ operator fun getValue(myClass: MyClass, prop: Kproperty&lt;*&gt;): Any?&#123; return propValue &#125; operator fun setValue(myClass: MyClass, prop: Kproperty&lt;*&gt;, value: Any?): Any?&#123; propValue = value &#125; &#125; æ³›å‹å®åŒ–æŒ‡å®šæ³›å‹çš„å®é™…ç±»å‹ inline fun &lt;reified T&gt; start(block: Intent.() -&gt; Unit = &#123;&#125;)&#123;&#125; æ­¤æ—¶å°±å¯ä»¥å¾—åˆ° T::class.java ç±»å‹ï¼š 1val intent = Intent(context, T::class.java) æ³›å‹åå˜å’Œé€†å˜ Todo åç¨‹å¯ä»¥ç†è§£ä¸ºè½»é‡çº§çš„çº¿ç¨‹ï¼Œå¯ä»¥åœ¨å•çº¿ç¨‹ä¸­æ¨¡æ‹Ÿå¤šçº¿ç¨‹æ•ˆæœï¼Œä¸çº¿ç¨‹ä¸åŒç‚¹åœ¨äºï¼š çº¿ç¨‹ä¾é æ“ä½œç³»ç»Ÿè°ƒåº¦å®ç°ä¸åŒçº¿ç¨‹åˆ‡æ¢ åç¨‹åœ¨ç¼–ç¨‹è¯­è¨€å±‚é¢å®ç°ä¸åŒåç¨‹åˆ‡æ¢ï¼Œå¤§å¤§æé«˜å¹¶å‘ç¼–ç¨‹çš„è¿è¡Œæ•ˆç‡ ç‰¹ç‚¹ï¼šåç¨‹æ˜¯æˆ‘ä»¬åœ¨ Android ä¸Šè¿›è¡Œå¼‚æ­¥ç¼–ç¨‹çš„æ¨èè§£å†³æ–¹æ¡ˆã€‚å€¼å¾—å…³æ³¨çš„ç‰¹ç‚¹åŒ…æ‹¬ï¼š è½»é‡ï¼šå¯ä»¥åœ¨å•ä¸ªçº¿ç¨‹ä¸Šè¿è¡Œå¤šä¸ªåç¨‹ï¼Œå› ä¸ºåç¨‹æ”¯æŒæŒ‚èµ·ï¼Œä¸ä¼šä½¿æ­£åœ¨è¿è¡Œåç¨‹çš„çº¿ç¨‹é˜»å¡ã€‚æŒ‚èµ·æ¯”é˜»å¡èŠ‚çœå†…å­˜ï¼Œä¸”æ”¯æŒå¤šä¸ªå¹¶è¡Œæ“ä½œã€‚ å†…å­˜æ³„æ¼æ›´å°‘ï¼šä½¿ç”¨ç»“æ„åŒ–å¹¶å‘æœºåˆ¶åœ¨ä¸€ä¸ªä½œç”¨åŸŸå†…æ‰§è¡Œå¤šé¡¹æ“ä½œã€‚ å†…ç½®å–æ¶ˆæ”¯æŒï¼šå–æ¶ˆæ“ä½œä¼šè‡ªåŠ¨åœ¨è¿è¡Œä¸­çš„æ•´ä¸ªåç¨‹å±‚æ¬¡ç»“æ„å†…ä¼ æ’­ã€‚ Jetpack é›†æˆï¼šè®¸å¤š Jetpack åº“éƒ½åŒ…å«æä¾›å…¨é¢åç¨‹æ”¯æŒçš„æ‰©å±•ã€‚æŸäº›åº“è¿˜æä¾›è‡ªå·±çš„åç¨‹ä½œç”¨åŸŸï¼Œå¯ä¾›æ‚¨ç”¨äºç»“æ„åŒ–å¹¶å‘ã€‚ ä½œç”¨åŸŸæ„å»ºå™¨Tipsï¼š delay()ï¼šè®©å½“å‰åç¨‹å»¶è¿ŸæŒ‡å®šæ—¶é—´å†è¿è¡Œï¼Œä¼šé˜»å¡æŒ‚èµ·å‡½æ•°ï¼Œåªä¼šæŒ‚èµ·å½“å‰åç¨‹ï¼Œä¸ä¼šå½±å“å…¶ä»–åç¨‹æ‰§è¡Œ suspendï¼šå°†ä»»æ„å‡½æ•°å£°æ˜ä¸ºæŒ‚èµ·å‡½æ•°ï¼ŒæŒ‚èµ·å‡½æ•°é—´å¯ä»¥äº’ç›¸è°ƒç”¨ ä½œç”¨åŸŸ GlobalScope.launch&#123;&#125;ï¼šé¡¶å±‚åç¨‹ï¼ˆä¸å»ºè®®ç”¨ï¼‰ runBlocking&#123;&#125;ï¼šä½œç”¨åŸŸå†…æ‰€æœ‰ä»£ç å’Œå­åç¨‹æ²¡æœ‰å…¨éƒ¨æ‰§è¡Œå®Œä¹‹å‰ä¸€ç›´é˜»å¡å½“å‰çº¿ç¨‹ï¼ˆæµ‹è¯•ç”¨ï¼Œç”Ÿäº§å¯èƒ½æœ‰æ€§èƒ½é—®é¢˜ï¼‰ launchï¼šåœ¨ä½œç”¨åŸŸå†…åˆ›å»ºå¤šä¸ªåç¨‹ coroutineScope&#123;&#125;ï¼šç»§æ‰¿å¤–éƒ¨åç¨‹ä½œç”¨åŸŸå¹¶åˆ›å»ºä¸€ä¸ªå­åç¨‹ï¼Œé…åˆ suspend ä½¿ç”¨ï¼Œå’Œ runBlocking ç±»ä¼¼ï¼Œç”¨äºç”Ÿäº§ç¯å¢ƒ 123suspend fun printDot() = coroutineScope&#123; launch&#123;&#125;&#125; å¸¸ç”¨å†™æ³• 123456val job = Job()val scope = CoroutineScope(job)scope.launch&#123; //...&#125;job.cancel() // å–æ¶ˆä½œç”¨åŸŸå†…æ‰€æœ‰åç¨‹ è·å–æ‰§è¡Œç»“æœè°ƒç”¨ async åï¼Œä»£ç ç«‹å³æ‰§è¡Œï¼Œå¦‚æœè°ƒç”¨ await() æ—¶è¿˜æ²¡æ‰§è¡Œå®Œï¼Œåˆ™ä¼šé˜»å¡å½“å‰åç¨‹ï¼Œç›´åˆ°è·å¾— async æ‰§è¡Œç»“æœ 12345runBlocking&#123; val result = async&#123; 5+5 &#125;.await()&#125; withContext æ˜¯ä¸€ä¸ªæŒ‚èµ·å‡½æ•°ï¼Œå¯ä»¥ç†è§£ä¸º async çš„ä¸€ç§ç®€åŒ–ç‰ˆå†™æ³•ï¼š 12345runBlocking&#123; val result = withContext(Dispatchers.Default)&#123; 5+5 &#125;&#125; çº¿ç¨‹å‚æ•°é™¤äº† coroutineScopeï¼Œå…¶ä»–å‡½æ•°éƒ½å¯ä»¥æŒ‡å®šçº¿ç¨‹å‚æ•°ï¼ŒwithContext å¿…é¡»ï¼Œå…¶ä»–å¯é€‰ Dispatchers.Defaultï¼šé»˜è®¤ä½å¹¶å‘çº¿ç¨‹ç­–ç•¥ Dispatchers.IOï¼šè¾ƒé«˜å¹¶å‘çš„çº¿ç¨‹ç­–ç•¥ Dispatchers.Mainï¼šä¸ä¼šå¼€å¯å­çº¿ç¨‹ï¼Œåœ¨ Android ä¸»çº¿ç¨‹æ‰§è¡Œï¼ˆåªåœ¨å®‰å“ä¸­ä½¿ç”¨ï¼‰ Android ä¸­è¦æ±‚ç½‘ç»œè¯·æ±‚å¿…é¡»åœ¨çº¿ç¨‹æ‰§è¡Œï¼Œå®šä¹‰åç¨‹ä¹Ÿä¸è¡Œ","categories":[{"name":"Programming Language","slug":"Programming-Language","permalink":"http://blog.sukiu.top/categories/Programming-Language/"},{"name":"Kotlin","slug":"Programming-Language/Kotlin","permalink":"http://blog.sukiu.top/categories/Programming-Language/Kotlin/"}],"tags":[{"name":"Kotlin","slug":"Kotlin","permalink":"http://blog.sukiu.top/tags/Kotlin/"}]},{"title":"Jetpack Lifecycle","slug":"Jetpack-Lifecycle","date":"2021-10-01T11:37:00.000Z","updated":"2021-10-01T11:37:00.000Z","comments":true,"path":"Android/Jetpack/Jetpack-Lifecycle/","link":"","permalink":"http://blog.sukiu.top/Android/Jetpack/Jetpack-Lifecycle/","excerpt":"Lifecycle ç»„ä»¶å¯ä»¥è®©ä»»ä½•ä¸€ä¸ªç±»éƒ½èƒ½è½»æ¾æ„ŸçŸ¥åˆ° Activity çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒæ—¶ä¸éœ€è¦å† Activity ä¸­ç¼–å†™å¤ªå¤šé¢å¤–çš„é€»è¾‘ã€‚","text":"Lifecycle ç»„ä»¶å¯ä»¥è®©ä»»ä½•ä¸€ä¸ªç±»éƒ½èƒ½è½»æ¾æ„ŸçŸ¥åˆ° Activity çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒæ—¶ä¸éœ€è¦å† Activity ä¸­ç¼–å†™å¤ªå¤šé¢å¤–çš„é€»è¾‘ã€‚ ç”Ÿå‘½å‘¨æœŸç”Ÿå‘½å‘¨æœŸå’ŒçŠ¶æ€äº‹ä»¶å¦‚å›¾æ‰€ç¤ºï¼š Lifecycles çš„æœ€ä½³å®è·µä¸€èˆ¬åœ¨ ViewModel ä¸­è§‚å¯Ÿå’Œæ§åˆ¶ç•Œé¢ã€‚ ä¿æŒ UI æ§åˆ¶å™¨ï¼ˆActivity å’Œ Fragmentï¼‰å°½å¯èƒ½çš„ç²¾ç®€ã€‚å®ƒä»¬ä¸åº”è¯¥è¯•å›¾å»è·å–å®ƒä»¬æ‰€éœ€çš„æ•°æ®ï¼›ç›¸åï¼Œè¦ç”¨ ViewModel æ¥è·å–ï¼Œå¹¶ä¸”è§‚å¯Ÿ LiveData å°†æ•°æ®å˜åŒ–åæ˜ åˆ°è§†å›¾ä¸­ã€‚ å°è¯•ç¼–å†™æ•°æ®é©±åŠ¨ï¼ˆdata-drivenï¼‰çš„ UIï¼Œå³ UI æ§åˆ¶å™¨çš„è´£ä»»æ˜¯åœ¨æ•°æ®æ”¹å˜æ—¶æ›´æ–°è§†å›¾æˆ–è€…å°†ç”¨æˆ·çš„æ“ä½œé€šçŸ¥ç»™ ViewModelã€‚ å°†æ•°æ®é€»è¾‘æ”¾åˆ° ViewModel ç±»ä¸­ã€‚ViewModel åº”è¯¥ä½œä¸º UI æ§åˆ¶å™¨å’Œåº”ç”¨ç¨‹åºå…¶å®ƒéƒ¨åˆ†çš„è¿æ¥æœåŠ¡ã€‚æ³¨æ„ï¼šä¸æ˜¯ç”± ViewModel è´Ÿè´£è·å–æ•°æ®ï¼ˆä¾‹å¦‚ï¼šä»ç½‘ç»œè·å–ï¼‰ã€‚ç›¸åï¼ŒViewModel è°ƒç”¨ç›¸åº”çš„ç»„ä»¶è·å–æ•°æ®ï¼Œç„¶åå°†æ•°æ®è·å–ç»“æœæä¾›ç»™ UI æ§åˆ¶å™¨ã€‚ ä½¿ç”¨ Data Binding æ¥ä¿æŒè§†å›¾å’Œ UI æ§åˆ¶å™¨ä¹‹é—´çš„æ¥å£å¹²å‡€ã€‚è¿™æ ·å¯ä»¥è®©è§†å›¾æ›´å…·å£°æ˜æ€§ï¼Œå¹¶ä¸”å°½å¯èƒ½å‡å°‘åœ¨ Activity å’Œ Fragment ä¸­ç¼–å†™æ›´æ–°ä»£ç ã€‚å¦‚æœä½ å–œæ¬¢åœ¨ Java ä¸­æ‰§è¡Œè¯¥æ“ä½œï¼Œè¯·ä½¿ç”¨åƒ Butter Knife è¿™æ ·çš„åº“æ¥é¿å…ä½¿ç”¨æ ·æ¿ä»£ç å¹¶è¿›è¡Œæ›´å¥½çš„æŠ½è±¡åŒ–ã€‚ å¦‚æœ UI å¾ˆå¤æ‚ï¼Œå¯ä»¥è€ƒè™‘åˆ›å»ºä¸€ä¸ª Presenter ç±»æ¥å¤„ç† UI çš„ä¿®æ”¹ã€‚è™½ç„¶é€šå¸¸è¿™æ ·åšä¸æ˜¯å¿…è¦çš„ï¼Œä½†å¯èƒ½ä¼šè®© UI æ›´å®¹æ˜“æµ‹è¯•ã€‚ ä¸è¦åœ¨ ViewModel ä¸­å¼•ç”¨ View æˆ–è€… Activity çš„ contextã€‚å› ä¸ºå¦‚æœ ViewModel å­˜æ´»çš„æ¯” Activity æ—¶é—´é•¿ï¼ˆåœ¨é…ç½®æ›´æ”¹çš„æƒ…å†µä¸‹ï¼‰ï¼ŒActivity å°†ä¼šè¢«æ³„æ¼å¹¶ä¸”æ— æ³•è¢«æ­£ç¡®çš„å›æ”¶ã€‚","categories":[{"name":"Android","slug":"Android","permalink":"http://blog.sukiu.top/categories/Android/"},{"name":"Jetpack","slug":"Android/Jetpack","permalink":"http://blog.sukiu.top/categories/Android/Jetpack/"}],"tags":[{"name":"Jetpack","slug":"Jetpack","permalink":"http://blog.sukiu.top/tags/Jetpack/"}]},{"title":"Androidå››å¤§ç»„ä»¶ä¹‹Service","slug":"Android-Service","date":"2021-10-01T00:18:00.000Z","updated":"2021-10-01T00:18:00.000Z","comments":true,"path":"Android/Android-Service/","link":"","permalink":"http://blog.sukiu.top/Android/Android-Service/","excerpt":"Service æ˜¯ä¸€ç§å¯åœ¨åå°æ‰§è¡Œé•¿æ—¶é—´è¿è¡Œæ“ä½œè€Œä¸æä¾›ç•Œé¢çš„åº”ç”¨ç»„ä»¶ã€‚æœåŠ¡å¯ç”±å…¶ä»–åº”ç”¨ç»„ä»¶å¯åŠ¨ï¼Œè€Œä¸”å³ä½¿ç”¨æˆ·åˆ‡æ¢åˆ°å…¶ä»–åº”ç”¨ï¼ŒæœåŠ¡ä»å°†åœ¨åå°ç»§ç»­è¿è¡Œã€‚ ç®€å•åœ°è¯´ï¼ŒæœåŠ¡æ˜¯ä¸€ç§å³ä½¿ç”¨æˆ·æœªä¸åº”ç”¨äº¤äº’ä¹Ÿå¯åœ¨åå°è¿è¡Œçš„ç»„ä»¶ï¼Œå› æ­¤ï¼Œåªæœ‰åœ¨éœ€è¦æœåŠ¡æ—¶æ‰åº”åˆ›å»ºæœåŠ¡ã€‚","text":"Service æ˜¯ä¸€ç§å¯åœ¨åå°æ‰§è¡Œé•¿æ—¶é—´è¿è¡Œæ“ä½œè€Œä¸æä¾›ç•Œé¢çš„åº”ç”¨ç»„ä»¶ã€‚æœåŠ¡å¯ç”±å…¶ä»–åº”ç”¨ç»„ä»¶å¯åŠ¨ï¼Œè€Œä¸”å³ä½¿ç”¨æˆ·åˆ‡æ¢åˆ°å…¶ä»–åº”ç”¨ï¼ŒæœåŠ¡ä»å°†åœ¨åå°ç»§ç»­è¿è¡Œã€‚ ç®€å•åœ°è¯´ï¼ŒæœåŠ¡æ˜¯ä¸€ç§å³ä½¿ç”¨æˆ·æœªä¸åº”ç”¨äº¤äº’ä¹Ÿå¯åœ¨åå°è¿è¡Œçš„ç»„ä»¶ï¼Œå› æ­¤ï¼Œåªæœ‰åœ¨éœ€è¦æœåŠ¡æ—¶æ‰åº”åˆ›å»ºæœåŠ¡ã€‚ å¤šçº¿ç¨‹ä¸€èˆ¬è€—æ—¶çš„æœåŠ¡éƒ½éœ€è¦æ”¾åœ¨å­çº¿ç¨‹ä¸­è¿è¡Œï¼Œå¦åˆ™ä¼šé€ æˆä¸»çº¿ç¨‹é˜»å¡ï¼Œä»è€Œå½±å“ç”¨æˆ·ä½¿ç”¨ã€‚ åŸºæœ¬ç”¨æ³• ç»§æ‰¿ Thread 1234567class MyThread : Thread()&#123; override fun fun()&#123; // ... &#125;&#125;// å¼€å§‹è¿è¡ŒMyThread().start() ä¸Šé¢çš„æ–¹æ³•è€¦åˆæ€§è¿‡é«˜ï¼Œä¸€èˆ¬ä½¿ç”¨ Runnable æ¥å£ 12345678class MyThread : Runnable&#123; override fun fun()&#123; // ... &#125;&#125;// å¼€å§‹è¿è¡Œval myThread = MyThread()Thread(myThread).start() æ›´ä¸ºå¸¸è§çš„æ–¹æ³•æ˜¯ä½¿ç”¨ Lambda è¡¨è¾¾å¼ï¼Œä¸éœ€è¦ä¸“é—¨å®šä¹‰ä¸€ä¸ªç±» 123456789Thread &#123; // ...&#125;.start()// åœ¨Kotlinä¸­å¯ä»¥å†™ä¸ºï¼š ä¸éœ€è¦è°ƒç”¨ start()thread&#123; // ...&#125; å­çº¿ç¨‹æ›´æ–° UIAndroid çš„ UI æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œç›´æ¥åœ¨å­çº¿ç¨‹ä¸­è¿›è¡Œ UI æ“ä½œä¼šå‡ºç°å¼‚å¸¸ã€‚ä¸è¿‡ï¼ŒAndroid æä¾›äº†å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶ Handlerã€‚ ä¸»è¦åŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š Messageï¼šçº¿ç¨‹é—´ä¼ é€’çš„æ¶ˆæ¯ï¼Œå¯ä»¥åœ¨å†…éƒ¨æºå¸¦å°‘é‡æ¶ˆæ¯ Handlerï¼šå¤„ç†è€…ï¼Œç”¨äºå‘é€å’Œå¤„ç†æ¶ˆæ¯ MessageQueueï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”¨äºå­˜æ”¾é€šè¿‡ Handler å‘é€çš„æ¶ˆæ¯ï¼Œæ¯ä¸ªçº¿ç¨‹åªæœ‰ä¸€ä¸ª Looperï¼šæ¯ä¸ªçº¿ç¨‹ä¸­ MessageQueue çš„ç®¡å®¶ï¼Œè°ƒç”¨ Looper çš„ loop() åå¼€å§‹å¾ªç¯å–å‡º MessageQueue ä¸­çš„æ¶ˆæ¯ï¼Œå¹¶ä¼ é€’åˆ° Handler çš„ handleMessage() ä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹åªæœ‰ä¸€ä¸ª 12345678910111213141516val updateText = 1val handler = object : Handler(Looper.getMainLooper()) &#123; override fun handleMessage(msg: Message) &#123; super.handleMessage(msg) when (msg.what) &#123; updateText -&gt; //... // ... &#125; &#125; &#125;thread&#123; val msg = Message() msg.what = updateText handler.sendMessage(msg) // å‘é€æ¶ˆæ¯&#125; AsyncTask åœ¨ API30 è¢« Google åºŸå¼ƒï¼Œè½¬è€Œæ¨èä½¿ç”¨ å°† Kotlin åç¨‹ä¸ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥å‹ç»„ä»¶ä¸€èµ·ä½¿ç”¨ | Android å¼€å‘è€… | Android Developers Service ç”Ÿå‘½å‘¨æœŸæœ€å¸¸ä½¿ç”¨çš„å›è°ƒæ–¹æ³•æ˜¯ï¼šonBind()ã€onCreateã€onStartCommandã€onDestroy onCreateï¼šåœ¨ Service åˆ›å»ºï¼ˆä»…ç¬¬ä¸€æ¬¡ï¼‰çš„æ—¶å€™è°ƒç”¨ onStartCommandï¼šåœ¨ Service å¯åŠ¨ï¼ˆæ¯æ¬¡ï¼‰çš„æ—¶å€™è°ƒç”¨ onDestroyï¼šåœ¨ Service é”€æ¯æ—¶è°ƒç”¨ æ¯ä¸ª Service åªä¼šå­˜åœ¨ä¸€ä¸ªå®ä¾‹ Service åŸºæœ¬ç”¨æ³•å¯åŠ¨å’Œåœæ­¢123val intent = Intent(this, MyService::class.java)startService(intent) // å¯åŠ¨stopService(intent) // åœæ­¢ ä¸ Activity é€šä¿¡åœ¨æ´»åŠ¨ä¸­æ§åˆ¶æœåŠ¡çš„å…·ä½“æ‰§è¡Œï¼Œè€Œä¸æ˜¯å¯åŠ¨åå°±æ— æ³•æ§åˆ¶ã€‚ é€šè¿‡ Bind å®ç°ï¼š 123456789101112131415class MyService : Service() &#123; private val mBinder = DownloadBinder() override fun onBind(intent: Intent): IBinder &#123; return mBinder &#125; class DownloadBinder : Binder() &#123; fun startDownload() &#123; //... &#125; &#125;&#125; åœ¨æ´»åŠ¨ä¸­åˆ›å»ºï¼š 1234567891011121314151617var downloadBinder = MyService.DownloadBinder()private val connection = object:ServiceConnection&#123; // åŒ¿åç±» override fun onServiceConnected(p0: ComponentName?, p1: IBinder?) &#123; // ç»‘å®šæ—¶è°ƒç”¨ downloadBinder = p1 as MyService.DownloadBinder downloadBinder.startDownload() // å¯è‡ªç”±é€‰æ‹© Service ä¸­çš„æ–¹æ³• &#125; override fun onServiceDisconnected(p0: ComponentName?) &#123; // è¿›ç¨‹å´©æºƒæˆ–è¢«æ€æ‰æ—¶è°ƒç”¨ï¼Œä¸å¸¸ç”¨ TODO(&quot;Not yet implemented&quot;) &#125;&#125;val intent = Intent(this, MyService::class.java)bindService(intent, connection, Context.BIND_AUTO_CREATE) // ç»‘å®šService// BIND_AUTO_CREATE: è‡ªåŠ¨åˆ›å»ºServiceï¼Œè°ƒç”¨ onCreateï¼Œå¿½ç•¥ onStartCommamdunbindService(connection) // è§£ç»‘Service ä»»ä½• Service å¯ä»¥å’Œä»»æ„ Activity ç»‘å®šï¼Œä¸”ç»‘å®šåè·å¾—ç›¸åŒå®ä¾‹ å‰å°æœåŠ¡å‰å°æœåŠ¡æ˜¯ç”¨æˆ·ä¸»åŠ¨æ„è¯†åˆ°çš„ä¸€ç§æœåŠ¡ï¼Œå› æ­¤åœ¨å†…å­˜ä¸è¶³æ—¶ï¼Œç³»ç»Ÿä¹Ÿä¸ä¼šè€ƒè™‘å°†å…¶ç»ˆæ­¢ã€‚ å‰å°æœåŠ¡å¿…é¡»ä¸ºçŠ¶æ€æ æä¾›é€šçŸ¥ï¼Œå°†å…¶æ”¾åœ¨è¿è¡Œä¸­çš„æ ‡é¢˜ä¸‹æ–¹ã€‚è¿™æ„å‘³ç€é™¤éå°†æœåŠ¡åœæ­¢æˆ–ä»å‰å°ç§»é™¤ï¼Œå¦åˆ™ä¸èƒ½æ¸…é™¤è¯¥é€šçŸ¥ã€‚ ä» Android 9.0 å¼€å§‹éœ€è¦ç”³è¯·æƒé™ android.permission.FOREGROUND_SERVICE åœ¨ onCreate ä¸­ï¼š 1234567891011121314val pendingIntent: PendingIntent = Intent(this, ExampleActivity::class.java).let &#123; notificationIntent -&gt; PendingIntent.getActivity(this, 0, notificationIntent, 0) &#125;val notification: Notification = Notification.Builder(this, CHANNEL_DEFAULT_IMPORTANCE) .setContentTitle(getText(R.string.notification_title)) .setContentText(getText(R.string.notification_message)) .setSmallIcon(R.drawable.icon) .setContentIntent(pendingIntent) .setTicker(getText(R.string.ticker_text)) .build()startForeground(ONGOING_NOTIFICATION_ID, notification) IntentServiceç”¨æ¥æ‰§è¡Œè€—æ—¶æ“ä½œçš„ Service çš„å­ç±»ã€‚ å®ç° onHandleIntent()ï¼Œè¯¥æ–¹æ³•ä¼šæ¥æ”¶æ¯ä¸ªå¯åŠ¨è¯·æ±‚çš„ Intentï¼Œä»¥ä¾¿æ‚¨æ‰§è¡Œåå°å·¥ä½œã€‚ 1234567891011121314151617181920212223/** * A constructor is required, and must call the super [android.app.IntentService.IntentService] * constructor with a name for the worker thread. */class HelloIntentService : IntentService(&quot;HelloIntentService&quot;) &#123; /** * The IntentService calls this method from the default worker thread with * the intent that started the service. When this method returns, IntentService * stops the service, as appropriate. */ override fun onHandleIntent(intent: Intent?) &#123; // Normally we would do some work here, like download a file. // For our sample, we just sleep for 5 seconds. try &#123; Thread.sleep(5000) &#125; catch (e: InterruptedException) &#123; // Restore interrupt status. Thread.currentThread().interrupt() &#125; &#125;&#125; é‡å†™å…¶ä»–å›è°ƒæ–¹æ³•ï¼Œï¼ˆå¦‚ onCreate()ã€onStartCommand() æˆ– onDestroy()ï¼‰ï¼Œè¯·ç¡®ä¿è°ƒç”¨è¶…ç±»å®ç° ä¾‹å¦‚ï¼ŒonStartCommand() å¿…é¡»è¿”å›é»˜è®¤å®ç°ï¼Œå³å¦‚ä½•å°† Intent ä¼ é€’ç»™ onHandleIntent()ï¼š 1234override fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int &#123; Toast.makeText(this, &quot;service starting&quot;, Toast.LENGTH_SHORT).show() return super.onStartCommand(intent, flags, startId)&#125; å¯åŠ¨ 123Intent(this, HelloService::class.java).also &#123; intent -&gt; startService(intent)&#125; æ‰©å±•æœåŠ¡ç±»å€ŸåŠ© IntentServiceï¼Œæ‚¨å¯ä»¥éå¸¸è½»æ¾åœ°å®ç°å¯åŠ¨æœåŠ¡ã€‚ä½†æ˜¯ï¼Œè‹¥è¦æ±‚æœåŠ¡æ‰§è¡Œå¤šçº¿ç¨‹ï¼ˆè€Œéé€šè¿‡å·¥ä½œé˜Ÿåˆ—å¤„ç†å¯åŠ¨è¯·æ±‚ï¼‰ï¼Œåˆ™å¯é€šè¿‡æ‰©å±• Service ç±»æ¥å¤„ç†æ¯ä¸ª Intentã€‚ ä¸ºè¿›è¡Œæ¯”è¾ƒï¼Œä»¥ä¸‹ç¤ºä¾‹ä»£ç å±•ç¤ºäº† Service ç±»çš„å®ç°ï¼Œè¯¥ç±»æ‰§è¡Œçš„å·¥ä½œä¸ä¸Šè¿°ä½¿ç”¨ IntentService çš„ç¤ºä¾‹å®Œå…¨ç›¸åŒã€‚æ¢è¨€ä¹‹ï¼Œå¯¹äºæ¯ä¸ªå¯åŠ¨è¯·æ±‚ï¼Œå…¶å‡ä½¿ç”¨å·¥ä½œçº¿ç¨‹æ¥æ‰§è¡Œä½œä¸šï¼Œä¸”æ¯æ¬¡ä»…å¤„ç†ä¸€ä¸ªè¯·æ±‚ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061class HelloService : Service() &#123; private var serviceLooper: Looper? = null private var serviceHandler: ServiceHandler? = null // Handler that receives messages from the thread private inner class ServiceHandler(looper: Looper) : Handler(looper) &#123; override fun handleMessage(msg: Message) &#123; // Normally we would do some work here, like download a file. // For our sample, we just sleep for 5 seconds. try &#123; Thread.sleep(5000) &#125; catch (e: InterruptedException) &#123; // Restore interrupt status. Thread.currentThread().interrupt() &#125; // Stop the service using the startId, so that we don&#x27;t stop // the service in the middle of handling another job stopSelf(msg.arg1) &#125; &#125; override fun onCreate() &#123; // Start up the thread running the service. Note that we create a // separate thread because the service normally runs in the process&#x27;s // main thread, which we don&#x27;t want to block. We also make it // background priority so CPU-intensive work will not disrupt our UI. HandlerThread(&quot;ServiceStartArguments&quot;, Process.THREAD_PRIORITY_BACKGROUND).apply &#123; start() // Get the HandlerThread&#x27;s Looper and use it for our Handler serviceLooper = looper serviceHandler = ServiceHandler(looper) &#125; &#125; override fun onStartCommand(intent: Intent, flags: Int, startId: Int): Int &#123; Toast.makeText(this, &quot;service starting&quot;, Toast.LENGTH_SHORT).show() // For each start request, send a message to start a job and deliver the // start ID so we know which request we&#x27;re stopping when we finish the job serviceHandler?.obtainMessage()?.also &#123; msg -&gt; msg.arg1 = startId serviceHandler?.sendMessage(msg) &#125; // If we get killed, after returning from here, restart return START_STICKY &#125; override fun onBind(intent: Intent): IBinder? &#123; // We don&#x27;t provide binding, so return null return null &#125; override fun onDestroy() &#123; Toast.makeText(this, &quot;service done&quot;, Toast.LENGTH_SHORT).show() &#125;&#125;","categories":[{"name":"Android","slug":"Android","permalink":"http://blog.sukiu.top/categories/Android/"}],"tags":[{"name":"Component","slug":"Component","permalink":"http://blog.sukiu.top/tags/Component/"}]},{"title":"Jetpack ViewModel","slug":"Jetpack-ViewModel","date":"2021-09-30T00:58:00.000Z","updated":"2021-09-30T00:58:00.000Z","comments":true,"path":"Android/Jetpack/Jetpack-ViewModel/","link":"","permalink":"http://blog.sukiu.top/Android/Jetpack/Jetpack-ViewModel/","excerpt":"ViewModel ç±»æ—¨åœ¨ä»¥æ³¨é‡ç”Ÿå‘½å‘¨æœŸçš„æ–¹å¼å­˜å‚¨å’Œç®¡ç†ç•Œé¢ç›¸å…³çš„æ•°æ®ã€‚ViewModel ç±»è®©æ•°æ®å¯åœ¨å‘ç”Ÿå±å¹•æ—‹è½¬ç­‰é…ç½®æ›´æ”¹åç»§ç»­ç•™å­˜ã€‚ ViewModel å…·æœ‰ç”Ÿå‘½å‘¨æœŸæ„è¯†ï¼Œä¼šè‡ªåŠ¨å­˜å‚¨å’Œç®¡ç† UI ç›¸å…³çš„æ•°æ®ï¼Œå³ä½¿è®¾å¤‡é…ç½®å‘ç”Ÿå˜åŒ–åæ•°æ®è¿˜ä¼šå­˜åœ¨ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦åœ¨ onSaveInstanceState ä¿å­˜æ•°æ®ï¼Œåœ¨ onCreate ä¸­æ¢å¤æ•°æ®äº†ï¼Œä½¿ç”¨ ViewModel è¿™éƒ¨åˆ†å·¥ä½œå°±ä¸éœ€è¦æˆ‘ä»¬åšäº†ï¼Œå¾ˆå¥½åœ°å°†è§†å›¾ä¸é€»è¾‘åˆ†ç¦»å¼€æ¥ã€‚","text":"ViewModel ç±»æ—¨åœ¨ä»¥æ³¨é‡ç”Ÿå‘½å‘¨æœŸçš„æ–¹å¼å­˜å‚¨å’Œç®¡ç†ç•Œé¢ç›¸å…³çš„æ•°æ®ã€‚ViewModel ç±»è®©æ•°æ®å¯åœ¨å‘ç”Ÿå±å¹•æ—‹è½¬ç­‰é…ç½®æ›´æ”¹åç»§ç»­ç•™å­˜ã€‚ ViewModel å…·æœ‰ç”Ÿå‘½å‘¨æœŸæ„è¯†ï¼Œä¼šè‡ªåŠ¨å­˜å‚¨å’Œç®¡ç† UI ç›¸å…³çš„æ•°æ®ï¼Œå³ä½¿è®¾å¤‡é…ç½®å‘ç”Ÿå˜åŒ–åæ•°æ®è¿˜ä¼šå­˜åœ¨ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦åœ¨ onSaveInstanceState ä¿å­˜æ•°æ®ï¼Œåœ¨ onCreate ä¸­æ¢å¤æ•°æ®äº†ï¼Œä½¿ç”¨ ViewModel è¿™éƒ¨åˆ†å·¥ä½œå°±ä¸éœ€è¦æˆ‘ä»¬åšäº†ï¼Œå¾ˆå¥½åœ°å°†è§†å›¾ä¸é€»è¾‘åˆ†ç¦»å¼€æ¥ã€‚ ç”Ÿå‘½å‘¨æœŸViewModel çš„ä¸€ä¸ªé‡è¦ä½œç”¨æ˜¯å¸®åŠ© Activity åˆ†æ‹…éƒ¨åˆ†å·¥ä½œï¼Œä¸“é—¨ç”¨æ¥å­˜æ”¾ä¸ç•Œé¢ç›¸å…³çš„æ•°æ®ï¼Œå‡è½» Activity è´Ÿæ‹…ã€‚ å¦å¤–ï¼Œå¦‚æœç³»ç»Ÿé”€æ¯æˆ–é‡æ–°åˆ›å»ºç•Œé¢æ§åˆ¶å™¨ï¼Œåˆ™å­˜å‚¨åœ¨å…¶ä¸­çš„ä»»ä½•ç¬æ€ç•Œé¢ç›¸å…³æ•°æ®éƒ½ä¼šä¸¢å¤±ã€‚è€Œ ViewModel çš„ç”Ÿå‘½å‘¨æœŸå’Œ Activity ä¸åŒï¼Œåªæœ‰ Activity é€€å‡ºæ—¶æ‰ä¼šè·Ÿç€ä¸€èµ·é”€æ¯ã€‚ ViewModel å¯¹è±¡å­˜åœ¨çš„æ—¶é—´èŒƒå›´æ˜¯è·å– ViewModel æ—¶ä¼ é€’ç»™ ViewModelProvider çš„ Lifecycleã€‚ViewModel å°†ä¸€ç›´ç•™åœ¨å†…å­˜ä¸­ï¼Œç›´åˆ°é™å®šå…¶å­˜åœ¨æ—¶é—´èŒƒå›´çš„ Lifecycle æ°¸ä¹…æ¶ˆå¤±ï¼š å¯¹äº activityï¼Œæ˜¯åœ¨ activity å®Œæˆæ—¶ï¼› å¯¹äº fragmentï¼Œæ˜¯åœ¨ fragment åˆ†ç¦»æ—¶ã€‚ é€šå¸¸åœ¨ç³»ç»Ÿé¦–æ¬¡è°ƒç”¨ Activity å¯¹è±¡çš„ onCreate() æ–¹æ³•æ—¶è¯·æ±‚ ViewModel todo","categories":[{"name":"Android","slug":"Android","permalink":"http://blog.sukiu.top/categories/Android/"},{"name":"Jetpack","slug":"Android/Jetpack","permalink":"http://blog.sukiu.top/categories/Android/Jetpack/"}],"tags":[{"name":"Jetpack","slug":"Jetpack","permalink":"http://blog.sukiu.top/tags/Jetpack/"}]},{"title":"Jetpack Compose","slug":"Jetpack-Compose","date":"2021-09-29T13:30:00.000Z","updated":"2021-09-29T13:30:00.000Z","comments":true,"path":"Android/Jetpack/Jetpack-Compose/","link":"","permalink":"http://blog.sukiu.top/Android/Jetpack/Jetpack-Compose/","excerpt":"ä½¿ç”¨ JetpackCompose çš„ä¸€äº›ç¬”è®°ã€‚","text":"ä½¿ç”¨ JetpackCompose çš„ä¸€äº›ç¬”è®°ã€‚ å…³é”®æœ¯è¯­ - ç»„åˆï¼šJetpack Compose åœ¨æ‰§è¡Œå¯ç»„åˆé¡¹æ—¶æ„å»ºçš„ç•Œé¢æè¿°ã€‚åˆå§‹ç»„åˆï¼šé€šè¿‡é¦–æ¬¡è¿è¡Œå¯ç»„åˆé¡¹åˆ›å»ºç»„åˆã€‚é‡ç»„ï¼šåœ¨æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶é‡æ–°è¿è¡Œå¯ç»„åˆé¡¹ä»¥æ›´æ–°ç»„åˆã€‚ &#39;Surface&#39; A surface container using the &#39;background&#39; color from the theme &#39;Divider&#39; is a provided composable function that creates a horizontal divider. å¯ç»„åˆé¡¹ä¸­çš„çŠ¶æ€å¯ç»„åˆå‡½æ•°å¯ä»¥ä½¿ç”¨ remember å¯ç»„åˆé¡¹è®°ä½å•ä¸ªå¯¹è±¡ã€‚ ç³»ç»Ÿä¼šåœ¨åˆå§‹ç»„åˆæœŸé—´å°†ç”± remember è®¡ç®—çš„å€¼å­˜å‚¨åœ¨ç»„åˆä¸­ï¼Œå¹¶åœ¨é‡ç»„æœŸé—´è¿”å›å­˜å‚¨çš„å€¼ã€‚ remember æ—¢å¯ç”¨äºå­˜å‚¨å¯å˜å¯¹è±¡ï¼Œåˆå¯ç”¨äºå­˜å‚¨ä¸å¯å˜å¯¹è±¡ã€‚ mutableStateOf ä¼šåˆ›å»ºå¯è§‚å¯Ÿçš„ MutableState ä¼šåˆ›å»ºå¯è§‚å¯Ÿçš„ MutableStateï¼Œåè€…æ˜¯ä¸ Compose è¿è¡Œæ—¶é›†æˆçš„å¯è§‚å¯Ÿç±»å‹ã€‚ åœ¨å¯ç»„åˆé¡¹ä¸­å£°æ˜ MutableState å¯¹è±¡çš„æ–¹æ³•æœ‰ä¸‰ç§ï¼ˆç­‰ä»·ï¼‰ï¼š val mutableState = remember &#123; mutableStateOf(default) &#125; var value by remember &#123; mutableStateOf(default) &#125; val (value, setValue) = remember &#123; mutableStateOf(default) &#125; 1234567@Composablefun Counter() &#123; val count = remember &#123; mutableStateOf(0) &#125; Button(onClick = &#123; count.value++ &#125;) &#123; Text(&quot;I&#x27;ve been clicked $&#123;count.value&#125; times&quot;) &#125;&#125; Color primaryï¼šmain brand color secondaryï¼šprovide accents Typography","categories":[{"name":"Android","slug":"Android","permalink":"http://blog.sukiu.top/categories/Android/"},{"name":"Jetpack","slug":"Android/Jetpack","permalink":"http://blog.sukiu.top/categories/Android/Jetpack/"}],"tags":[{"name":"Jetpack","slug":"Jetpack","permalink":"http://blog.sukiu.top/tags/Jetpack/"}]},{"title":"Androidå››å¤§ç»„ä»¶ä¹‹ContentProvider","slug":"Android-ContentProvider","date":"2021-09-28T14:05:00.000Z","updated":"2021-09-28T14:05:00.000Z","comments":true,"path":"Android/Android-ContentProvider/","link":"","permalink":"http://blog.sukiu.top/Android/Android-ContentProvider/","excerpt":"å†…å®¹æä¾›ç¨‹åºä¸»è¦ç›®çš„æ˜¯ä¸åŒåº”ç”¨ç¨‹åºé—´çš„æ•°æ®å…±äº«ã€‚ å®ƒæä¾›äº†ä¸€å¥—å®Œæ•´çš„æœºåˆ¶ï¼Œå…è®¸ä¸€ä¸ªç¨‹åºè®¿é—®å¦ä¸€ä¸ªç¨‹åºçš„æ•°æ®ï¼ŒåŒæ—¶ä¿è¯è¢«è®¿é—®æ•°æ®çš„å®‰å…¨æ€§ã€‚ ç›®å‰ï¼Œä½¿ç”¨ ContentProvider æ˜¯ Android å®ç°è·¨ç¨‹åºå…±äº«æ•°æ®çš„æ ‡å‡†æ–¹å¼ã€‚","text":"å†…å®¹æä¾›ç¨‹åºä¸»è¦ç›®çš„æ˜¯ä¸åŒåº”ç”¨ç¨‹åºé—´çš„æ•°æ®å…±äº«ã€‚ å®ƒæä¾›äº†ä¸€å¥—å®Œæ•´çš„æœºåˆ¶ï¼Œå…è®¸ä¸€ä¸ªç¨‹åºè®¿é—®å¦ä¸€ä¸ªç¨‹åºçš„æ•°æ®ï¼ŒåŒæ—¶ä¿è¯è¢«è®¿é—®æ•°æ®çš„å®‰å…¨æ€§ã€‚ ç›®å‰ï¼Œä½¿ç”¨ ContentProvider æ˜¯ Android å®ç°è·¨ç¨‹åºå…±äº«æ•°æ®çš„æ ‡å‡†æ–¹å¼ã€‚ todo","categories":[{"name":"Android","slug":"Android","permalink":"http://blog.sukiu.top/categories/Android/"}],"tags":[{"name":"Component","slug":"Component","permalink":"http://blog.sukiu.top/tags/Component/"}]},{"title":"Androidå››å¤§ç»„ä»¶ä¹‹BroadcastReceiver","slug":"Android-BroadcastReceiver","date":"2021-09-28T11:37:00.000Z","updated":"2021-09-28T11:37:00.000Z","comments":true,"path":"Android/Android-BroadcastReceiver/","link":"","permalink":"http://blog.sukiu.top/Android/Android-BroadcastReceiver/","excerpt":"Android åº”ç”¨ä¸ Android ç³»ç»Ÿå’Œå…¶ä»– Android åº”ç”¨ä¹‹é—´å¯ä»¥ç›¸äº’æ”¶å‘å¹¿æ’­æ¶ˆæ¯ï¼Œè¿™ä¸ å‘å¸ƒ-è®¢é˜… è®¾è®¡æ¨¡å¼ç›¸ä¼¼ã€‚è¿™äº›å¹¿æ’­ä¼šåœ¨æ‰€å…³æ³¨çš„äº‹ä»¶å‘ç”Ÿæ—¶å‘é€ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œå¹¿æ’­å¯ä½œä¸ºè·¨åº”ç”¨å’Œæ™®é€šç”¨æˆ·æµä¹‹å¤–çš„æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿã€‚","text":"Android åº”ç”¨ä¸ Android ç³»ç»Ÿå’Œå…¶ä»– Android åº”ç”¨ä¹‹é—´å¯ä»¥ç›¸äº’æ”¶å‘å¹¿æ’­æ¶ˆæ¯ï¼Œè¿™ä¸ å‘å¸ƒ-è®¢é˜… è®¾è®¡æ¨¡å¼ç›¸ä¼¼ã€‚è¿™äº›å¹¿æ’­ä¼šåœ¨æ‰€å…³æ³¨çš„äº‹ä»¶å‘ç”Ÿæ—¶å‘é€ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œå¹¿æ’­å¯ä½œä¸ºè·¨åº”ç”¨å’Œæ™®é€šç”¨æˆ·æµä¹‹å¤–çš„æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿã€‚ å¹¿æ’­ç±»å‹ æ ‡å‡†å¹¿æ’­ï¼šå¼‚æ­¥æ‰§è¡Œï¼Œæ‰€æœ‰çš„ BroadcastReceiver å‡ä¼šæ”¶åˆ°æ¶ˆæ¯ï¼Œæ²¡æœ‰å…ˆåé¡ºåºã€‚ ä¼˜ç‚¹ï¼šæ•ˆç‡é«˜ ç¼ºç‚¹ï¼šæ— æ³•è¢«æˆªæ–­ ç³»ç»Ÿå¹¿æ’­ï¼šåŒæ­¥æ‰§è¡Œï¼ŒåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ª BroadcastReceiver èƒ½æ”¶åˆ°æ¶ˆæ¯ï¼Œé€»è¾‘æ‰§è¡Œå®Œæ¯•æ‰ä¼šç»§ç»­ä¼ é€’ï¼Œæœ‰å…ˆåé¡ºåºã€‚ ä¼˜ç‚¹ï¼šä¼˜å…ˆçº§é«˜çš„ BroadcastReceiver èƒ½å…ˆæ”¶åˆ°æ¶ˆæ¯ï¼Œå¹¶èƒ½æˆªæ–­å¹¿æ’­ ç¼ºç‚¹ï¼šæ•ˆç‡æ²¡æœ‰æ ‡å‡†å¹¿æ’­é«˜ ç³»ç»Ÿå¹¿æ’­Android å†…ç½®å¾ˆå¤šç³»ç»Ÿçº§åˆ«çš„å¹¿æ’­ï¼Œå¯ä»¥ç›‘å¬è¿™äº›å¹¿æ’­æ¥å¾—åˆ°å„ç§ç³»ç»ŸçŠ¶æ€ä¿¡æ¯ã€‚ å¯ä»¥åœ¨ &lt;Android SDK&gt;/platforms/&lt;ä»»æ„api&gt;/data/broadcast_actions.txt ä¸­æŸ¥çœ‹ åŠ¨æ€æ³¨å†Œç¨‹åºå¯åŠ¨ä¹‹åæ‰èƒ½æ¥æ”¶å¹¿æ’­ 1234567891011121314151617181920212223242526lateinit var timeChangeReceiver: TimeChangeReceiveroverride fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) val intentFilter = IntentFilter() intentFilter.addAction(&quot;android.intent.action.TIME_TICK&quot;) // ç³»ç»Ÿå¹¿æ’­åŠ¨ä½œ timeChangeReceiver = TimeChangeReceiver() registerReceiver(timeChangeReceiver, intentFilter) // åŠ¨æ€æ³¨å†Œ&#125;override fun onDestroy() &#123; super.onDestroy() unregisterReceiver(timeChangeReceiver) // å–æ¶ˆæ³¨å†Œ&#125;// å†…éƒ¨ç±»æ³¨å†Œinner class TimeChangeReceiver : BroadcastReceiver() &#123; // ç»§æ‰¿ BroadcastReceiver override fun onReceive(p0: Context?, p1: Intent?) &#123; // ä¸å…è®¸å¤šçº¿ç¨‹ï¼Œæ‰€ä»¥ä¸èƒ½æ‰§è¡Œè€—æ—¶æ“ä½œ p0?.let &#123; &quot;Time has changed&quot;.showToast(it) &#125; &#125;&#125; é™æ€æ³¨å†Œç”±äºå¤§é‡æ¶æ„ç¨‹åºåˆ©ç”¨é™æ€æ³¨å†Œæœºåˆ¶åœ¨ç¨‹åºæœªå¯åŠ¨æ—¶ç›‘å¬ç³»ç»Ÿå¹¿æ’­ï¼Œä»è€Œä½¿ä»»æ„åº”ç”¨éƒ½å¯ä»¥é¢‘ç¹ä»åå°å”¤é†’ï¼Œå› æ­¤ Android æ¯ä¸ªç‰ˆæœ¬éƒ½åœ¨å‰Šå‡é™æ€æ³¨å†Œ BroadcastReceiver çš„åŠŸèƒ½ã€‚ Android 8.0 ä»¥åï¼Œæ‰€æœ‰éšå¼å¹¿æ’­ï¼ˆæ²¡æœ‰æŒ‡å®šå‘é€ç»™å“ªä¸ªç¨‹åºçš„å¹¿æ’­ï¼Œå¤§å¤šæ•°ç³»ç»Ÿå¹¿æ’­éƒ½å±äºæ­¤ï¼‰éƒ½ä¸å…è®¸ä½¿ç”¨é™æ€æ³¨å†Œæ¥æ”¶ã€‚ ä¾‹å¤–æƒ…å†µè§ éšå¼å¹¿æ’­ä¾‹å¤–æƒ…å†µ | Android å¼€å‘è€… | Android Developers æ³¨æ„ï¼šå°½ç®¡è¿™äº›éšå¼å¹¿æ’­ä»åœ¨åå°è¿è¡Œï¼Œä½†åº”é¿å…ä¸ºå…¶æ³¨å†Œç›‘å¬å™¨ 1234567&lt;receiver android:name=&quot;.MyBroadcastReceiver&quot; android:exported=&quot;true&quot;&gt; &lt;intent-filter&gt; &lt;!-- éœ€è¦æƒé™ android.permission.RECEIVE_BOOT_COMPLETED--&gt; &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot;/&gt; &lt;action android:name=&quot;android.intent.action.INPUT_METHOD_CHANGED&quot; /&gt; &lt;/intent-filter&gt;&lt;/receiver&gt; è‡ªå®šä¹‰å¹¿æ’­ å‘é€æ ‡å‡†å¹¿æ’­åˆ›å»º BroadcastReceiver12345class MyBroadcastReceiver : BroadcastReceiver() &#123; override fun onReceive(p0: Context?, p1: Intent?) &#123; // TODO: 2021/9/28 &#125;&#125; æ³¨å†Œå¹¿æ’­12345&lt;receiver android:name=&quot;.MyBroadcastReceiver&quot; android:exported=&quot;true&quot;&gt; &lt;intent-filter&gt; &lt;action android:name=&quot;com.example.MY_BROADCAST&quot;/&gt; &lt;/intent-filter&gt;&lt;/receiver&gt; å‘é€å¹¿æ’­123val intent = Intent(&quot;com.example.MY_BROADCAST&quot;)intent.setPackage(packageName) // æŒ‡å®šåŒ…åï¼Œä½¿å…¶æˆä¸ºæ˜¾ç¤ºå¹¿æ’­sendBroadcast(intent) å‘é€æœ‰åºå¹¿æ’­å‰é¢ä¸æ ‡å‡†å¹¿æ’­ç›¸åŒï¼Œå‘é€å¹¿æ’­æ—¶é€‰æ‹© sendOrderedBroadcast(intent,null) ï¼ˆå‚æ•° 2 æ˜¯ä¸æƒé™ç›¸å…³çš„å­—ç¬¦ä¸²ï¼‰ è®¾ç½®ä¼˜å…ˆçº§å› ä¸ºæœ‰åºå¹¿æ’­å¯ä»¥è¢«æˆªæ–­ï¼Œåœ¨é™æ€æ³¨å†Œæ—¶æŒ‡å®šä¼˜å…ˆçº§ï¼š &lt;intent-filter android:priority=&quot;100&quot;&gt; æˆªæ–­ä½¿ç”¨ abortBroadcast() 123456class MyBroadcastReceiver : BroadcastReceiver() &#123; override fun onReceive(p0: Context?, p1: Intent?) &#123; // TODO: 2021/9/28 abortBroadcast() &#125;&#125;","categories":[{"name":"Android","slug":"Android","permalink":"http://blog.sukiu.top/categories/Android/"}],"tags":[{"name":"Component","slug":"Component","permalink":"http://blog.sukiu.top/tags/Component/"}]},{"title":"Androidå››å¤§ç»„ä»¶ä¹‹Activity","slug":"Android-Activity","date":"2021-09-28T00:45:00.000Z","updated":"2021-09-28T00:45:00.000Z","comments":true,"path":"Android/Android-Activity/","link":"","permalink":"http://blog.sukiu.top/Android/Android-Activity/","excerpt":"Activity ç±»æ˜¯ Android åº”ç”¨çš„å…³é”®ç»„ä»¶ï¼Œè€Œ Activity çš„å¯åŠ¨å’Œç»„åˆæ–¹å¼åˆ™æ˜¯è¯¥å¹³å°åº”ç”¨æ¨¡å‹çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ã€‚ åœ¨ç¼–ç¨‹èŒƒå¼ä¸­ï¼Œåº”ç”¨æ˜¯é€šè¿‡ main() æ–¹æ³•å¯åŠ¨çš„ï¼Œè€Œ Android ç³»ç»Ÿä¸æ­¤ä¸åŒï¼Œå®ƒä¼šè°ƒç”¨ä¸å…¶ç”Ÿå‘½å‘¨æœŸç‰¹å®šé˜¶æ®µç›¸å¯¹åº”çš„ç‰¹å®šå›è°ƒæ–¹æ³•æ¥å¯åŠ¨ Activity å®ä¾‹ä¸­çš„ä»£ç ã€‚","text":"Activity ç±»æ˜¯ Android åº”ç”¨çš„å…³é”®ç»„ä»¶ï¼Œè€Œ Activity çš„å¯åŠ¨å’Œç»„åˆæ–¹å¼åˆ™æ˜¯è¯¥å¹³å°åº”ç”¨æ¨¡å‹çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ã€‚ åœ¨ç¼–ç¨‹èŒƒå¼ä¸­ï¼Œåº”ç”¨æ˜¯é€šè¿‡ main() æ–¹æ³•å¯åŠ¨çš„ï¼Œè€Œ Android ç³»ç»Ÿä¸æ­¤ä¸åŒï¼Œå®ƒä¼šè°ƒç”¨ä¸å…¶ç”Ÿå‘½å‘¨æœŸç‰¹å®šé˜¶æ®µç›¸å¯¹åº”çš„ç‰¹å®šå›è°ƒæ–¹æ³•æ¥å¯åŠ¨ Activity å®ä¾‹ä¸­çš„ä»£ç ã€‚ ç”Ÿå‘½å‘¨æœŸçŠ¶æ€æ¯ä¸ª Activity è‡³å¤šæœ‰ 4 ç§çŠ¶æ€ï¼š è¿è¡ŒçŠ¶æ€ï¼šActivity ä½äºè¿”å›æ ˆæ ˆé¡¶ï¼ˆç³»ç»Ÿä¸å›æ”¶ï¼‰ æš‚åœçŠ¶æ€ï¼šActivity ä¸å¤„äºæ ˆé¡¶ï¼Œä½†ä»ç„¶å¯è§ï¼ˆåªæœ‰å†…å­˜æä½æ—¶æ‰å¯èƒ½è¢«ç³»ç»Ÿå›æ”¶ï¼‰ åœæ­¢çŠ¶æ€ï¼šActivity ä¸å¤„äºæ ˆé¡¶ï¼Œå¹¶ä¸å¯è§ï¼ˆç³»ç»Ÿä»ç„¶ä¿ç•™ç›¸åº”çš„çŠ¶æ€å’Œæˆå‘˜å˜é‡ï¼Œå½“å…¶ä»–åœ°æ–¹éœ€è¦å†…å­˜æ—¶æ‰å¯èƒ½è¢«å›æ”¶ï¼‰ é”€æ¯çŠ¶æ€ï¼šActivity ä»è¿”å›æ ˆç§»é™¤ï¼ˆç³»ç»Ÿå›æ”¶ï¼‰ ç”Ÿå­˜æœŸä¸ºäº†åœ¨ Activity ç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªé˜¶æ®µä¹‹é—´å¯¼èˆªè½¬æ¢ï¼ŒActivity ç±»æä¾›å…­ä¸ªæ ¸å¿ƒå›è°ƒï¼šonCreate()ã€onStart()ã€onResume()ã€onPause()ã€onStop() å’Œ onDestroy()ï¼Œå¦æœ‰ä¸€ä¸ª onRestart()ã€‚å½“ Activity è¿›å…¥æ–°çŠ¶æ€æ—¶ï¼Œç³»ç»Ÿä¼šè°ƒç”¨å…¶ä¸­æ¯ä¸ªå›è°ƒã€‚ onCreate()ï¼šé¦–æ¬¡åˆ›å»º Activity æ—¶è°ƒç”¨ï¼Œåœ¨å…¶ä¸­å®Œæˆåˆå§‹åŒ–æ“ä½œï¼Œæ¯”å¦‚åŠ è½½å¸ƒå±€ã€ç»‘å®šäº‹ä»¶ç­‰ã€‚ä¼šç›¸ç»§è°ƒç”¨ onStart() å’Œ onResume() æ–¹æ³• onStart()ï¼šç”±ä¸å¯è§åˆ°å¯è§æ—¶è°ƒç”¨ã€‚ä¼šéå¸¸å¿«é€Ÿåœ°å®Œæˆï¼Œä¸€æ—¦æ­¤å›è°ƒç»“æŸä¾¿ä¼šè¿›å…¥ onResume() onResume()ï¼šå½“å‡†å¤‡å¥½å’Œç”¨æˆ·äº¤äº’æ—¶è°ƒç”¨ã€‚æ­¤æ—¶ Activity å¤„äºè¿”å›æ ˆæ ˆé¡¶ï¼Œå¹¶ä¸”å¤„äºè¿è¡ŒçŠ¶æ€ onPause()ï¼šå½“å‡†å¤‡å»å¯åŠ¨æˆ–æ¢å¤å¦ä¸€ä¸ª Activity æ—¶è°ƒç”¨ï¼Œåœ¨å…¶ä¸­é‡Šæ”¾æ¶ˆè€— CPU çš„èµ„æºï¼Œä¿å­˜å…³é”®æ•°æ® onStop() ï¼šå½“å®Œå…¨ä¸å¯è§æ—¶è°ƒç”¨ã€‚ä¸ onPause() çš„åŒºåˆ«åœ¨äºï¼šå¦‚æœæ–°æ´»åŠ¨æ˜¯å¯¹è¯æ¡†ï¼ŒonPause() æ‰§è¡Œï¼Œå®ƒä¸æ‰§è¡Œ onDestroy()ï¼šåœ¨è¢«é”€æ¯å‰è°ƒç”¨ï¼Œåœ¨å…¶ä¸­é‡Šæ”¾å†…å­˜ã€‚ä¹‹å Activity å˜ä¸ºæ¶ˆè´¹çŠ¶æ€ onRestart()ï¼šç”±åœæ­¢åˆ°è¿è¡Œæ—¶è°ƒç”¨ï¼Œå³æ´»åŠ¨è¢«é‡å¯ ä»¥ä¸Šé™¤äº† onRestart() ä¸¤ä¸¤å¯¹åº”ï¼Œå³ï¼š å®Œæ•´ç”Ÿå­˜æœŸï¼šonCreate()â†’onDestroy() å¯è§ç”Ÿå­˜æœŸï¼šonStart()â†’onStop() å‰å°ç”Ÿå­˜æœŸï¼šonResume()â†’onPause() å¯åŠ¨æ¨¡å¼é€šè¿‡ AndroidManifest.xml ä¸­ä¸º &lt;activity&gt; æŒ‡å®š android:launchMode Standardé»˜è®¤å€¼ã€‚æ¯æ¬¡åˆ›å»º Activity çš„æ–°å®ä¾‹ï¼Œå¹¶å°† intent ä¼ é€ç»™è¯¥å®ä¾‹ã€‚ Activity å¯ä»¥å¤šæ¬¡å®ä¾‹åŒ–ï¼Œæ¯ä¸ªå®ä¾‹å¯ä»¥å±äºä¸åŒçš„ä»»åŠ¡ï¼Œä¸€ä¸ªä»»åŠ¡å¯ä»¥æ‹¥æœ‰å¤šä¸ªå®ä¾‹ã€‚ singleTopåœ¨å¯åŠ¨ Activity æ—¶å¦‚æœå‘ç°è¿”å›æ ˆæ ˆé¡¶å·²ç»æ˜¯è¯¥ Activityï¼Œåˆ™ç›´æ¥ä½¿ç”¨è€Œä¸åˆ›å»ºã€‚ Activity å¯ä»¥å¤šæ¬¡å®ä¾‹åŒ–ï¼Œæ¯ä¸ªå®ä¾‹å¯ä»¥å±äºä¸åŒçš„ä»»åŠ¡ï¼Œä¸€ä¸ªä»»åŠ¡å¯ä»¥æ‹¥æœ‰å¤šä¸ªå®ä¾‹ï¼ˆä½†å‰ææ˜¯è¿”å›å †æ ˆé¡¶éƒ¨çš„ Activity ä¸æ˜¯è¯¥ Activity çš„ç°æœ‰å®ä¾‹ï¼‰ã€‚ singleTaskåœ¨å¯åŠ¨ Activity æ—¶å¦‚æœè¿”å›æ ˆä¸­å·²ç»æœ‰äº†è¯¥å®ä¾‹ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ï¼Œå¹¶æŠŠåœ¨æ­¤ Activity ä¹‹ä¸Šçš„æ‰€æœ‰å…¶ä»– Activity å‡ºæ ˆï¼Œæ²¡æœ‰åˆ™æ–°å»ºå®ä¾‹ã€‚ Activity ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹å­˜åœ¨ã€‚ æ³¨æ„ï¼šè™½ç„¶ Activity åœ¨æ–°ä»»åŠ¡ä¸­å¯åŠ¨ï¼Œä½†ç”¨æˆ·æŒ‰è¿”å›æŒ‰é’®ä»ä¼šè¿”å›åˆ°ä¸Šä¸€ä¸ª Activityã€‚ singleInstanceä¸ &quot;singleTask&quot; ç›¸ä¼¼ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ç³»ç»Ÿä¸ä¼šå°†ä»»ä½•å…¶ä»– Activity å¯åŠ¨åˆ°åŒ…å«è¯¥å®ä¾‹çš„ä»»åŠ¡ä¸­ã€‚ è¯¥ Activity å§‹ç»ˆæ˜¯å…¶ä»»åŠ¡å”¯ä¸€çš„æˆå‘˜ï¼›ç”±è¯¥ Activity å¯åŠ¨çš„ä»»ä½• Activity éƒ½ä¼šåœ¨å…¶ä»–çš„ä»»åŠ¡ä¸­æ‰“å¼€ã€‚ å³æœ‰å•ç‹¬çš„è¿”å›æ ˆç®¡ç†æ­¤ Activityï¼Œä¸ç®¡å“ªä¸ªåº”ç”¨è®¿é—®è¿™ä¸ªæ´»åŠ¨ï¼Œéƒ½å…±ç”¨ä¸€ä¸ªè¿”å›æ ˆã€‚ ç”¨äºå…¶ä»–åº”ç”¨ä¸­è°ƒç”¨æ­¤ Activityã€‚ æ„å›¾æ˜¾ç¤º Intent12val intent = Intent(this, SecondActivity::class.java)startActivity(intent) éšå¼ Intentåœ¨ &lt;activity&gt; ä¸‹é…ç½® &lt;intent-filter&gt;ï¼Œåœ¨ &lt;action&gt; ä¸­æŒ‡åå¯ä»¥ç›¸åº”çš„ actionï¼Œ&lt;category&gt; ä¸­æ·»åŠ é™„åŠ ä¿¡æ¯ï¼Œåªæœ‰ &lt;action&gt; å’Œ &lt;category&gt; åŒæ—¶åŒ¹é…ï¼Œå½“å‰æ´»åŠ¨æ‰ä¼šå“åº” intent 123456&lt;activity android:name=&quot;.ExampleActivity&quot; android:icon=&quot;@drawable/app_icon&quot;&gt; &lt;intent-filter&gt; &lt;action android:name=&quot;com.example.activitytest.ACTION_START&quot; /&gt; &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt; &lt;/intent-filter&gt;&lt;/activity&gt; 12val intent = Intent(com.example.activitytest.ACTION_START) // default é»˜è®¤æ·»åŠ categorystartActivity(intent) å‘ä¸‹ä¸€ä¸ª Activity ä¼ é€’æ•°æ®åœ¨æ˜¾ç¤º intent ä¸­æ·»åŠ ï¼šintent.putExtra() å‘ä¸Šä¸€ä¸ª Activity ä¼ é€’æ•°æ®SecondActivity.kt 1234567override fun onBackPressed() &#123; super.onBackPressed() val intent = Intent() intent.putExtra(&quot;data_return&quot;,&quot;msg...&quot;) setResult(RESULT_OK, intent) finish()&#125; FirstActivity.ky 1234567891011val intent = ...startActivityForResult(intent, 1) // å‚æ•°2æ˜¯è¯·æ±‚ç ï¼Œå”¯ä¸€å€¼å³å¯override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) &#123; super.onActivityResult(requestCode, resultCode, data) when (requestCode) &#123; 1 -&gt; if (requestCode = RESULT_OK) &#123; val retrunedData = data?.getStringExtra(&quot;data_return&quot;) &#125; &#125;&#125;","categories":[{"name":"Android","slug":"Android","permalink":"http://blog.sukiu.top/categories/Android/"}],"tags":[{"name":"Component","slug":"Component","permalink":"http://blog.sukiu.top/tags/Component/"}]},{"title":"Android ViewBinding","slug":"Android-ViewBinding","date":"2021-09-27T14:29:00.000Z","updated":"2021-09-27T14:29:00.000Z","comments":true,"path":"Android/Android-ViewBinding/","link":"","permalink":"http://blog.sukiu.top/Android/Android-ViewBinding/","excerpt":"é€šè¿‡è§†å›¾ç»‘å®šåŠŸèƒ½ï¼Œå¯ä»¥æ›´è½»æ¾åœ°ç¼–å†™å¯ä¸è§†å›¾äº¤äº’çš„ä»£ç ã€‚åœ¨æ¨¡å—ä¸­å¯ç”¨è§†å›¾ç»‘å®šä¹‹åï¼Œç³»ç»Ÿä¼šä¸ºè¯¥æ¨¡å—ä¸­çš„æ¯ä¸ª XML å¸ƒå±€æ–‡ä»¶ç”Ÿæˆä¸€ä¸ªç»‘å®šç±»ã€‚ç»‘å®šç±»çš„å®ä¾‹åŒ…å«å¯¹åœ¨ç›¸åº”å¸ƒå±€ä¸­å…·æœ‰ ID çš„æ‰€æœ‰è§†å›¾çš„ç›´æ¥å¼•ç”¨ã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè§†å›¾ç»‘å®šä¼šæ›¿ä»£ findViewByIdã€‚","text":"é€šè¿‡è§†å›¾ç»‘å®šåŠŸèƒ½ï¼Œå¯ä»¥æ›´è½»æ¾åœ°ç¼–å†™å¯ä¸è§†å›¾äº¤äº’çš„ä»£ç ã€‚åœ¨æ¨¡å—ä¸­å¯ç”¨è§†å›¾ç»‘å®šä¹‹åï¼Œç³»ç»Ÿä¼šä¸ºè¯¥æ¨¡å—ä¸­çš„æ¯ä¸ª XML å¸ƒå±€æ–‡ä»¶ç”Ÿæˆä¸€ä¸ªç»‘å®šç±»ã€‚ç»‘å®šç±»çš„å®ä¾‹åŒ…å«å¯¹åœ¨ç›¸åº”å¸ƒå±€ä¸­å…·æœ‰ ID çš„æ‰€æœ‰è§†å›¾çš„ç›´æ¥å¼•ç”¨ã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè§†å›¾ç»‘å®šä¼šæ›¿ä»£ findViewByIdã€‚ å®ç°åŸç†åœ¨ Android å¼€å‘æ›´æ–°è¿­ä»£ä¸­ï¼ŒKotlin é€æ¸å–ä»£ Java æˆä¸ºä¸»æµå¼€å‘è¯­è¨€ï¼ŒåŸæ¥ä¸€äº›æ—§çš„ä½¿ç”¨æ–¹æ³•ä¹Ÿéšä¹‹è¢«å–ä»£ã€‚Android-Kotlin-Extensions å› ä¸ºå®‰å…¨é—®é¢˜è¢«å®˜æ–¹åºŸå¼ƒï¼Œéšä¹‹å°±æœ‰äº† view bindingï¼ˆè§†å›¾ç»‘å®šï¼‰æ¥ç»§æ‰¿å¯¹ findViewById çš„æ›¿æ¢ã€‚ ç”¨äºæ›´åŠ è½»é‡åœ°å®ç°è§†å›¾ç»‘å®šï¼ˆè§†å›¾ä¸å˜é‡çš„ç»‘å®šï¼‰ï¼Œå¯ä»¥ç†è§£ä¸ºè½»é‡ç‰ˆæœ¬çš„ DataBindingã€‚ Android Gradle æ’ä»¶ä¼šä¸ºæ¯ä¸ª XML å¸ƒå±€æ–‡ä»¶åˆ›å»ºä¸€ä¸ªç»‘å®šç±»ï¼Œç»‘å®šç±»ä¸­åŒ…å«å¸ƒå±€æ–‡ä»¶ä¸­æ¯ä¸ªå®šä¹‰äº† android:id å±æ€§çš„ View å¼•ç”¨ã€‚å‡è®¾å¸ƒå±€æ–‡ä»¶ä¸º fragment_test.xmlï¼Œåˆ™ç”Ÿæˆç»‘å®šç±» FragmentTestBinding.javaï¼› ä½¿ç”¨æ–¹æ³•å¼€å¯è§†å›¾ç»‘å®šåœ¨æ¨¡å—çš„ build.gradle/.kts ä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹å¼€å¯ï¼š 123456android &#123; ... buildFeatures &#123; viewBinding = true &#125;&#125; å¦‚æœå¸Œæœ›ç”Ÿæˆç»‘å®šç±»æ—¶å¿½ç•¥æŸä¸ªå¸ƒå±€æ–‡ä»¶ï¼Œåœ¨ç›¸åº”çš„ XML é‡ŒåŠ å…¥ï¼š 12345&lt;LinearLayout ... tools:viewBindingIgnore=&quot;true&quot; &gt; ...&lt;/LinearLayout&gt; Activity ä¸­ä½¿ç”¨åœ¨ Activity çš„ onCreate() æ–¹æ³•ä¸­æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š è°ƒç”¨ç”Ÿæˆçš„ç»‘å®šç±»ä¸­åŒ…å«çš„é™æ€ inflate() æ–¹æ³•ã€‚æ­¤æ“ä½œä¼šåˆ›å»ºè¯¥ç»‘å®šç±»çš„å®ä¾‹ä»¥ä¾› Activity ä½¿ç”¨ã€‚ é€šè¿‡è°ƒç”¨ getRoot() æ–¹æ³•æˆ–ä½¿ç”¨ Kotlin å±æ€§è¯­æ³• è·å–å¯¹æ ¹è§†å›¾çš„å¼•ç”¨ã€‚ å°†æ ¹è§†å›¾ä¼ é€’åˆ° setContentView()ï¼Œä½¿å…¶æˆä¸ºå±å¹•ä¸Šçš„æ´»åŠ¨è§†å›¾ã€‚ 123456789101112 private lateinit var binding: ResultProfileBinding override fun onCreate(savedInstanceState: Bundle) &#123; super.onCreate(savedInstanceState) binding = ResultProfileBinding.inflate(layoutInflater) val view = binding.root setContentView(view) &#125;// åç»­é€šè¿‡ä»¥ä¸‹æ–¹æ³•å¼•ç”¨viewbinding.name.text = viewModel.name binding.button.setOnClickListener &#123; viewModel.userClicked() &#125; Fragment ä¸­ä½¿ç”¨åœ¨ Fragment çš„ onCreateView() æ–¹æ³•ä¸­æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š è°ƒç”¨ç”Ÿæˆçš„ç»‘å®šç±»ä¸­åŒ…å«çš„é™æ€ inflate() æ–¹æ³•ã€‚æ­¤æ“ä½œä¼šåˆ›å»ºè¯¥ç»‘å®šç±»çš„å®ä¾‹ä»¥ä¾› Fragment ä½¿ç”¨ã€‚ é€šè¿‡è°ƒç”¨ getRoot() æ–¹æ³•æˆ–ä½¿ç”¨ Kotlin å±æ€§è¯­æ³• è·å–å¯¹æ ¹è§†å›¾çš„å¼•ç”¨ã€‚ ä» onCreateView() æ–¹æ³•è¿”å›æ ¹è§†å›¾ï¼Œä½¿å…¶æˆä¸ºå±å¹•ä¸Šçš„æ´»åŠ¨è§†å›¾ã€‚ æ³¨æ„ï¼šinflate() æ–¹æ³•ä¼šè¦æ±‚æ‚¨ä¼ å…¥å¸ƒå±€è†¨èƒ€å™¨ã€‚å¦‚æœå¸ƒå±€å·²è†¨èƒ€ï¼Œå¯ä»¥è°ƒç”¨ç»‘å®šç±»çš„é™æ€ bind() æ–¹æ³•ã€‚å¦‚éœ€äº†è§£è¯¦æƒ…ï¼Œè¯·æŸ¥çœ‹ è§†å›¾ç»‘å®š GitHub ç¤ºä¾‹ä¸­çš„ä¾‹å­ã€‚ 1234567891011121314151617181920212223 private var _binding: ResultProfileBinding? = null // This property is only valid between onCreateView and // onDestroyView. private val binding get() = _binding!! override fun onCreateView( inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle? ): View? &#123; _binding = ResultProfileBinding.inflate(inflater, container, false) val view = binding.root return view &#125;// Fragment çš„å­˜åœ¨æ—¶é—´æ¯”å…¶è§†å›¾é•¿ã€‚è¯·åŠ¡å¿…åœ¨ Fragment çš„ onDestroyView() æ–¹æ³•ä¸­æ¸…é™¤å¯¹ç»‘å®šç±»å®ä¾‹çš„æ‰€æœ‰å¼•ç”¨ã€‚ override fun onDestroyView() &#123; super.onDestroyView() _binding = null &#125;// åç»­ä½¿ç”¨binding.name.text = viewModel.name binding.button.setOnClickListener &#123; viewModel.userClicked() &#125; ä¸ºä»€ä¹ˆ Fragment#onDestroyView() é‡Œéœ€è¦ç½®ç©ºç»‘å®šç±»å¯¹è±¡ï¼Œè€Œ Activity é‡Œä¸éœ€è¦ï¼Ÿ ç­”ï¼šActivity å®ä¾‹å’Œ Activity è§†å›¾çš„ç”Ÿå‘½å‘¨æœŸæ˜¯åŒæ­¥çš„ï¼Œè€Œ Fragment å®ä¾‹å’Œ Fragment è§†å›¾çš„ç”Ÿå‘½å‘¨æœŸå¹¶ä¸æ˜¯å®Œå…¨åŒæ­¥çš„ï¼Œå› æ­¤éœ€è¦åœ¨ Fragment è§†å›¾é”€æ¯æ—¶ï¼Œæ‰‹åŠ¨å›æ”¶ç»‘å®šç±»å¯¹è±¡ï¼Œå¦åˆ™é€ æˆå†…å­˜æ³„éœ²ã€‚ ä¾‹å¦‚ï¼šdetach Fragmentï¼Œæˆ–è€… remove Fragment å¹¶ä¸”äº‹åŠ¡è¿›å…¥è¿”å›æ ˆï¼Œæ­¤æ—¶ Fragment è§†å›¾é”€æ¯ä½† Fragment å®ä¾‹å­˜åœ¨ã€‚ æ€»ä¹‹ï¼Œåœ¨è§†å›¾é”€æ¯ä½†æ˜¯æ§åˆ¶ç±»å¯¹è±¡å®ä¾‹è¿˜å­˜æ´»çš„æ—¶æœºï¼Œä½ å°±éœ€è¦æ‰‹åŠ¨å›æ”¶ç»‘å®šç±»å¯¹è±¡ï¼Œå¦åˆ™é€ æˆå†…å­˜æ³„éœ²ã€‚ ä¸å…¶ä»–æ–¹æ¡ˆå¯¹æ¯” è§’åº¦ findViewById ButterKnife Kotlin Synthetics DataBinding ViewBinding ç®€æ´æ€§ âœ– âœ– âœ” âœ” âœ” ç¼–è¯‘æœŸæ£€æŸ¥ âœ– âœ– âœ– âœ” âœ” ç¼–è¯‘é€Ÿåº¦ âœ” âœ– âœ” âœ– âœ” æ”¯æŒ Kotlin &amp; Java âœ” âœ” âœ– âœ” âœ” æ”¶æ•›æ¨¡æ¿ä»£ç  âœ– âœ– âœ” âœ– âœ– ç®€æ´æ€§ï¼š findViewById å’Œ ButterKnife éœ€è¦åœ¨ä»£ç ä¸­å£°æ˜å¾ˆå¤šå˜é‡ï¼Œå…¶ä»–å‡ ç§æ–¹æ¡ˆä»£ç ç®€æ´è¯»è¾ƒå¥½ï¼› ç¼–è¯‘æ£€æŸ¥ï¼š ç¼–è¯‘æœŸé—´ä¸»è¦æœ‰ä¸¤ä¸ªæ–¹é¢çš„æ£€æŸ¥ï¼šç±»å‹æ£€æŸ¥ + åªèƒ½è®¿é—®å½“å‰å¸ƒå±€ä¸­çš„ idã€‚findViewByIdã€ButterKnife å’Œ Kotlin Synthetics åœ¨è¿™æ–¹é¢è¡¨ç°è¾ƒå·®ï¼› ç¼–è¯‘é€Ÿåº¦ï¼š findViewById çš„ç¼–è¯‘é€Ÿåº¦æ˜¯æœ€å¿«çš„ï¼Œè€Œ ButterKnife å’Œ DataBinding ä¸­å­˜åœ¨æ³¨è§£å¤„ç†ï¼Œç¼–è¯‘é€Ÿåº¦ç•¥é€Šè‰²äº Kotlin Synthetics å’Œ ViewBindingï¼› æ”¯æŒ Kotlin &amp; Javaï¼š Kotlin Synthetics åªæ”¯æŒ Kotlin è¯­è¨€ï¼› æ”¶æ•›æ¨¡æ¿ä»£ç ï¼š åŸºæœ¬ä¸Šæ¯ç§æ–¹æ¡ˆéƒ½å¸¦æœ‰ä¸€å®šé‡çš„æ¨¡æ¿ä»£ç ï¼Œåªæœ‰ Kotlin Synthetics çš„æ¨¡æ¿ä»£ç æ˜¯è¾ƒå°‘çš„ã€‚","categories":[{"name":"Android","slug":"Android","permalink":"http://blog.sukiu.top/categories/Android/"}],"tags":[{"name":"Component","slug":"Component","permalink":"http://blog.sukiu.top/tags/Component/"}]},{"title":"Gradle Build æ„å»ºé…ç½®","slug":"Gradle-Build","date":"2021-09-26T12:02:00.000Z","updated":"2021-09-26T12:02:00.000Z","comments":true,"path":"Android/Gradle/Gradle-Build/","link":"","permalink":"http://blog.sukiu.top/Android/Gradle/Gradle-Build/","excerpt":"Android æ„å»ºç³»ç»Ÿä¼šç¼–è¯‘åº”ç”¨èµ„æºå’Œæºä»£ç ï¼Œç„¶åå°†å®ƒä»¬æ‰“åŒ…åˆ° APK æˆ– Android App Bundle ä¸­ï¼Œä¾›æµ‹è¯•ã€éƒ¨ç½²ã€ç­¾åå’Œåˆ†å‘ã€‚ Android Studio ä¼šä½¿ç”¨é«˜çº§æ„å»ºå·¥å…·åŒ… Gradle è‡ªåŠ¨æ‰§è¡Œå’Œç®¡ç†æ„å»ºæµç¨‹ï¼ŒåŒæ—¶ä¹Ÿå…è®¸å®šä¹‰çµæ´»çš„è‡ªå®šä¹‰ build é…ç½®ã€‚","text":"Android æ„å»ºç³»ç»Ÿä¼šç¼–è¯‘åº”ç”¨èµ„æºå’Œæºä»£ç ï¼Œç„¶åå°†å®ƒä»¬æ‰“åŒ…åˆ° APK æˆ– Android App Bundle ä¸­ï¼Œä¾›æµ‹è¯•ã€éƒ¨ç½²ã€ç­¾åå’Œåˆ†å‘ã€‚ Android Studio ä¼šä½¿ç”¨é«˜çº§æ„å»ºå·¥å…·åŒ… Gradle è‡ªåŠ¨æ‰§è¡Œå’Œç®¡ç†æ„å»ºæµç¨‹ï¼ŒåŒæ—¶ä¹Ÿå…è®¸å®šä¹‰çµæ´»çš„è‡ªå®šä¹‰ build é…ç½®ã€‚ æ„å»ºæµç¨‹å…¸å‹ Android åº”ç”¨æ¨¡å—çš„æ„å»ºæµç¨‹æŒ‰ç…§ä»¥ä¸‹å¸¸è§„æ­¥éª¤æ‰§è¡Œï¼š ç¼–è¯‘å™¨å°†æ‚¨çš„æºä»£ç è½¬æ¢æˆ DEX æ–‡ä»¶ï¼ˆDalvik å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…æ‹¬åœ¨ Android è®¾å¤‡ä¸Šè¿è¡Œçš„å­—èŠ‚ç ï¼‰ï¼Œå¹¶å°†å…¶ä»–æ‰€æœ‰å†…å®¹è½¬æ¢æˆç¼–è¯‘åçš„èµ„æºã€‚ æ‰“åŒ…å™¨å°† DEX æ–‡ä»¶å’Œç¼–è¯‘åçš„èµ„æºç»„åˆæˆ APK æˆ– AABï¼ˆå…·ä½“å–å†³äºæ‰€é€‰çš„ build ç›®æ ‡ï¼‰ã€‚ å¿…é¡»å…ˆä¸º APK æˆ– AAB ç­¾åï¼Œç„¶åæ‰èƒ½å°†åº”ç”¨å®‰è£…åˆ° Android è®¾å¤‡æˆ–åˆ†å‘åˆ° Google Play ç­‰å•†åº—ã€‚ æ‰“åŒ…å™¨ä½¿ç”¨è°ƒè¯•æˆ–å‘å¸ƒå¯†é’¥åº“ä¸º APK æˆ– AAB ç­¾åï¼š å¦‚æœæ‚¨æ„å»ºçš„æ˜¯è°ƒè¯•ç‰ˆåº”ç”¨ï¼ˆå³ä¸“é—¨ç”¨æ¥æµ‹è¯•å’Œåˆ†æçš„åº”ç”¨ï¼‰ï¼Œåˆ™æ‰“åŒ…å™¨ä¼šä½¿ç”¨è°ƒè¯•å¯†é’¥åº“ä¸ºåº”ç”¨ç­¾åã€‚Android Studio ä¼šè‡ªåŠ¨ä½¿ç”¨è°ƒè¯•å¯†é’¥åº“é…ç½®æ–°é¡¹ç›®ã€‚ å¦‚æœæ‚¨æ„å»ºçš„æ˜¯æ‰“ç®—å¯¹å¤–å‘å¸ƒçš„å‘å¸ƒç‰ˆåº”ç”¨ï¼Œåˆ™æ‰“åŒ…å™¨ä¼šä½¿ç”¨å‘å¸ƒå¯†é’¥åº“ï¼ˆæ‚¨éœ€è¦è¿›è¡Œé…ç½®ï¼‰ä¸ºåº”ç”¨ç­¾åã€‚å¦‚éœ€åˆ›å»ºå‘å¸ƒå¯†é’¥åº“ï¼Œè¯·å‚é˜… åœ¨ Android Studio ä¸­ä¸ºåº”ç”¨ç­¾åã€‚ åœ¨ç”Ÿæˆæœ€ç»ˆ APK ä¹‹å‰ï¼Œæ‰“åŒ…å™¨ä¼šä½¿ç”¨ zipalign å·¥å…·å¯¹åº”ç”¨è¿›è¡Œä¼˜åŒ–ï¼Œä»¥å‡å°‘å…¶åœ¨è®¾å¤‡ä¸Šè¿è¡Œæ—¶æ‰€å ç”¨çš„å†…å­˜ã€‚ æ„å»ºæµç¨‹ç»“æŸæ—¶ï¼Œæ‚¨å°†è·å¾—åº”ç”¨çš„è°ƒè¯•ç‰ˆæˆ–å‘å¸ƒç‰ˆ APK&#x2F;AABï¼Œä»¥ç”¨äºéƒ¨ç½²ã€æµ‹è¯•æˆ–å‘å¤–éƒ¨ç”¨æˆ·å‘å¸ƒã€‚ é…ç½®æ–‡ä»¶Gradle è®¾ç½®æ–‡ä»¶settings.gradle æ–‡ä»¶ä½äºé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œç”¨äºæŒ‡ç¤º Gradle åœ¨æ„å»ºåº”ç”¨æ—¶åº”å°†å“ªäº›æ¨¡å—åŒ…å«åœ¨å†…ã€‚ 123456789dependencyResolutionManagement &#123; repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS) repositories &#123; google() mavenCentral() &#125;&#125;rootProject.name = &quot;hhuer&quot;include(&quot;:app&quot;) é¡¹ç›® Build æ–‡ä»¶é¡¶å±‚ build.gradle æ–‡ä»¶ä½äºé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œç”¨äºå®šä¹‰é€‚ç”¨äºé¡¹ç›®ä¸­æ‰€æœ‰æ¨¡å—çš„æ„å»ºé…ç½®ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œé¡¶å±‚ build æ–‡ä»¶ä½¿ç”¨ buildscript ä»£ç å—å®šä¹‰é¡¹ç›®ä¸­æ‰€æœ‰æ¨¡å—å…±ç”¨çš„ Gradle ä»£ç åº“å’Œä¾èµ–é¡¹ã€‚ 1234567891011121314151617buildscript &#123; // gradleè„šæœ¬æ‰§è¡Œæ‰€éœ€ä¾èµ– repositories &#123; // é…ç½®è¿œç¨‹ä»“åº“ google() // å¼•ç”¨googleä¸Šçš„å¼€æºé¡¹ç›® mavenCentral() // å¼•ç”¨ jcenterä¸Šçš„å¼€æºé¡¹ç›®ï¼Œç°å·²ç»æ›¿æ¢ä¸º mavenCenter &#125; dependencies &#123; // é…ç½®æ„å»ºå·¥å…· classpath(&quot;com.android.tools.build:gradle:7.0.2&quot;) classpath(&quot;org.jetbrains.kotlin:kotlin-gradle-plugin:1.6.0-M1&quot;) &#125;&#125;// è¿è¡Œgradle cleanæ—¶ï¼Œæ‰§è¡Œæ­¤å¤„å®šä¹‰çš„taskä»»åŠ¡ã€‚// è¯¥ä»»åŠ¡ç»§æ‰¿è‡ªDeleteï¼Œåˆ é™¤æ ¹ç›®å½•ä¸­çš„buildç›®å½•ã€‚// ç›¸å½“äºæ‰§è¡ŒDelete.delete(rootProject.buildDir)ã€‚tasks.register(&quot;Delete&quot;, Delete::class) &#123; delete(rootProject.buildDir)&#125; é…ç½®é¡¹ç›®å…¨å±€å±æ€§é¡¹ç›®åŒ…å«å¤šä¸ªæ¨¡å—æ—¶ï¼Œå¯ä»¥åœ¨æ–‡ä»¶ä¸­æ·»åŠ å…¬ç”¨é…ç½®ã€‚ 123456789101112buildscript &#123;...&#125;allprojects &#123;...&#125;// ä½¿ç”¨mapextra[&quot;compileSdkVersion&quot;] = 28// You can also create properties to specify versions for dependencies.// Having consistent versions between modules can avoid conflicts with behavior.extra[&quot;supportLibVersion&quot;] = &quot;28.0.0&quot;// æˆ–è€…ä½¿ç”¨ Kotlin å§”æ‰˜ https://www.runoob.com/kotlin/kotlin-delegated.htmlval compileSdkVersion by extra(31)val supportLibVersion by extra(&quot;28.0.0&quot;) åœ¨æ¨¡å—ä¸­ä½¿ç”¨ä»¥ä¸‹ä»£ç å¼•ç”¨å³å¯ï¼š 123val sdkVersion: Int by rootProject.extra...compileSdkVersion(sdkVersion) æ³¨æ„ï¼šè™½ç„¶ Gradle å¯è®©æ‚¨åœ¨æ¨¡å—çº§åˆ«å®šä¹‰é¡¹ç›®å…¨å±€å±æ€§ï¼Œä½†æ‚¨åº”é¿å…è¿™æ ·åšï¼Œå› ä¸ºè¿™æ ·ä¼šå¯¼è‡´å…±äº«è¿™äº›å±æ€§çš„æ¨¡å—ç›¸äº’ç»“åˆã€‚æ¨¡å—ç»“åˆä½¿å¾—ä»¥åå°†æ¨¡å—ä½œä¸ºç‹¬ç«‹é¡¹ç›®å¯¼å‡ºæ›´åŠ å›°éš¾ï¼Œå¹¶å®é™…å¦¨ç¢ Gradle åˆ©ç”¨å¹¶è¡Œé¡¹ç›®æ‰§è¡Œ åŠ å¿«å¤šæ¨¡å—æ„å»ºã€‚ æ¨¡å— Build æ–‡ä»¶æ¨¡å—çº§ build.gradle æ–‡ä»¶ä½äºæ¯ä¸ª project/module/ ç›®å½•ä¸‹ï¼Œç”¨äºä¸ºå…¶æ‰€åœ¨çš„ç‰¹å®šæ¨¡å—é…ç½®æ„å»ºè®¾ç½®ã€‚æ‚¨å¯ä»¥é€šè¿‡é…ç½®è¿™äº› build è®¾ç½®æä¾›è‡ªå®šä¹‰æ‰“åŒ…é€‰é¡¹ï¼ˆå¦‚é¢å¤–çš„ build ç±»å‹å’Œäº§å“å˜ç§ï¼‰ï¼Œä»¥åŠæ›¿æ¢ main/ åº”ç”¨æ¸…å•æˆ–é¡¶å±‚ build.gradle æ–‡ä»¶ä¸­çš„è®¾ç½®ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162//å£°æ˜æ˜¯Androidç¨‹åºï¼Œ//com.android.application è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºæ¨¡å—//com.android.library æ ‡è¯†è¿™æ˜¯ä¸€ä¸ªåº“æ¨¡å—plugins &#123; id(&quot;com.android.application&quot;) id(&quot;kotlin-android&quot;)&#125;// ä¸Šé¢å…¨å±€é…ç½®çš„å¼•ç”¨val androidTargetSdkVersion: Int by rootProject.extra// é…ç½®é¡¹ç›®æ„å»ºçš„å„ç§å±æ€§android &#123; compileSdk = androidCompileSdkVersion //è®¾ç½®ç¼–è¯‘æ—¶ç”¨çš„Androidç‰ˆæœ¬ ... defaultConfig &#123; // app ç›¸å…³ applicationId = defaultManagerPackageName // åŒ…å minSdk = androidMinSdkVersion // æœ€ä½å…¼å®¹ç‰ˆæœ¬ targetSdk = androidTargetSdkVersion // ç›®æ ‡å®‰å“ç‰ˆæœ¬ versionCode = verCode // ç‰ˆæœ¬å· versionName = verName // ç‰ˆæœ¬åç§° //è‹¥ä½¿ç”¨AndroidJUnitRunnerè¿›è¡Œå•å…ƒæµ‹è¯• //testInstrumentationRunner = &quot;android.support.test.runner.AndroidJUnitRunner&quot; &#125; //æŒ‡å®šç”Ÿæˆå®‰è£…æ–‡ä»¶çš„ä¸»è¦é…ç½®ï¼Œä¸€èˆ¬åŒ…å«ä¸¤ä¸ªå­é—­åŒ…: //ä¸€ä¸ªæ˜¯debugé—­åŒ…ï¼Œç”¨äºæŒ‡å®šç”Ÿæˆæµ‹è¯•ç‰ˆå®‰è£…æ–‡ä»¶çš„é…ç½®ï¼Œå¯ä»¥å¿½ç•¥ä¸å†™ï¼› //å¦ä¸€ä¸ªæ˜¯releaseé—­åŒ…ï¼Œç”¨äºæŒ‡å®šç”Ÿæˆæ­£å¼ç‰ˆå®‰è£…æ–‡ä»¶çš„é…ç½®ã€‚ buildTypes &#123; release &#123; // ä¸€èˆ¬ä½¿ç”¨å¦‚ä¸‹ä¸¤é¡¹ isMinifyEnabled = false //æ˜¯å¦å¯¹ä»£ç è¿›è¡Œæ··æ·† proguardFiles(&quot;proguard-rules.pro&quot;) //æŒ‡å®šæ··æ·†çš„è§„åˆ™æ–‡ä»¶ &#125; &#125; compileOptions &#123; sourceCompatibility(androidSourceCompatibility) targetCompatibility(androidTargetCompatibility) &#125; kotlinOptions &#123; jvmTarget = &quot;1.8&quot; &#125; packagingOptions&#123;//æ‰“åŒ…æ—¶çš„ç›¸å…³é…ç½® //è¿™ä¸ªæ˜¯åœ¨åŒæ—¶ä½¿ç”¨butterknifeã€dagger2åšçš„ä¸€ä¸ªå¤„ç†ã€‚åŒç†ï¼Œé‡åˆ°ç±»ä¼¼çš„é—®é¢˜ï¼Œåªè¦æ ¹æ®gradleçš„æç¤ºï¼Œåšç±»ä¼¼å¤„ç†å³å¯ã€‚ exclude &#x27;META-INF/services/javax.annotation.processing.Processor&#x27; &#125;&#125;dependencies &#123; // é¡¹ç›®çš„ä¾èµ– // Dependency on a local library module implementation project(&quot;:mylibrary&quot;) // Dependency on local binaries implementation fileTree(dir: &#x27;libs&#x27;, include: [&#x27;*.jar&#x27;]) // Dependency on a remote binary implementation &#x27;com.example.android:app-magic:12.3&#x27; ...&#125;configurations.all &#123; exclude(group = &quot;androidx.appcompat&quot;, module = &quot;appcompat&quot;)&#125; æ›´å¤šæ¨¡å—é…ç½®é¡¹è®¾ç½®åº”ç”¨ IDæ·»åŠ æ„å»ºä¾èµ–é¡¹Android Gradle æ’ä»¶å¯ä»¥ä½¿ç”¨çš„åŸç”Ÿä¾èµ–é¡¹ä¼˜åŒ–æ„å»ºé€Ÿåº¦æ’æŸ¥æ„å»ºæ€§èƒ½é—®é¢˜åˆ†ææ„å»ºæ€§èƒ½é…ç½® build å˜ä½“æ„å»ºå¤šä¸ª APKåˆå¹¶å¤šä¸ªæ¸…å•æ–‡ä»¶å°†æ„å»ºå˜é‡æ³¨å…¥æ¸…å•ç¼©å‡ã€æ··æ·†å¤„ç†å’Œä¼˜åŒ–åº”ç”¨ä¸ºæ–¹æ³•æ•°è¶…è¿‡ 64K çš„åº”ç”¨å¯ç”¨ MultiDexä½¿ç”¨ APK åˆ†æå™¨åˆ†ææ‚¨çš„ buildä½¿ç”¨ Maven Publish æ’ä»¶Gradle æç¤ºä¸è¯€çªå°†æ„å»ºé…ç½®ä» Groovy è¿ç§»åˆ° KTS","categories":[{"name":"Android","slug":"Android","permalink":"http://blog.sukiu.top/categories/Android/"},{"name":"Gradle","slug":"Android/Gradle","permalink":"http://blog.sukiu.top/categories/Android/Gradle/"}],"tags":[{"name":"Gradle","slug":"Gradle","permalink":"http://blog.sukiu.top/tags/Gradle/"}]},{"title":"ä»Groovyè¿ç§»åˆ°KTS","slug":"Gradle-Gradle2kts","date":"2021-09-25T14:29:00.000Z","updated":"2021-09-25T14:29:00.000Z","comments":true,"path":"Android/Gradle/Gradle-Gradle2kts/","link":"","permalink":"http://blog.sukiu.top/Android/Gradle/Gradle-Gradle2kts/","excerpt":"åœ¨ Android Studio ä¸­å°† Gradle é…ç½®ä» Groovy è¿ç§»åˆ° KTSï¼Œå³ç”¨ Kotlin ä»£æ›¿ Groovy ç¼–å†™ Gradle è„šæœ¬ã€‚","text":"åœ¨ Android Studio ä¸­å°† Gradle é…ç½®ä» Groovy è¿ç§»åˆ° KTSï¼Œå³ç”¨ Kotlin ä»£æ›¿ Groovy ç¼–å†™ Gradle è„šæœ¬ã€‚ è½¬æ¢è§„åˆ™ Groovy å…è®¸ä½¿ç”¨å•å¼•å·æ¥å®šä¹‰å­—ç¬¦ä¸²ï¼Œè€Œ Kotlin åˆ™è¦æ±‚ä½¿ç”¨åŒå¼•å·ï¼š å³ include &#39;:app&#39; -&gt; include &quot;:app&quot; // &#39;(.*?[^\\\\])&#39; æ­£åˆ™æ›¿æ¢ &quot;$1&quot; åœ¨ Groovy ä¸­ä½¿ç”¨ $ å‰ç¼€æ¥è¡¨ç¤ºåŸºäºå¥ç‚¹è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²æ’å€¼ï¼Œä½†åœ¨ Kotlin ä¸­éœ€è¦ä½¿ç”¨å¤§æ‹¬å·æ‹¬ä½æ•´ä¸ªå˜é‡ï¼š å³ myRootDirectory = &quot;$project.rootDir/tools&quot; æ”¹ä¸ºï¼šmyRootDirectory = &quot;$&#123;project.rootDir&#125;/tools&quot; æ˜¾å¼å’Œéšå¼ buildTypesï¼šåœ¨ KTS ä¸­ï¼Œä»… debug å’Œ release buildTypes æ˜¯éšå¼æä¾›çš„ï¼Œè€Œ staging åˆ™å¿…é¡»æ‰‹åŠ¨åˆ›å»º 12345678910buildTypes getByName(&quot;debug&quot;) &#123; ... &#125; getByName(&quot;release&quot;) &#123; ... &#125; create(&quot;staging&quot;) &#123; ... &#125; ä½¿ç”¨ plugins ä»£ç å—ï¼šç»™æ–¹æ³•è°ƒç”¨åŠ ä¸Šæ‹¬å· 1234567// (\\w+) (([^=\\&#123;\\s]+)(.*)) æ­£åˆ™æ›¿æ¢ $1($2)plugins &#123; id(&quot;com.android.application&quot;) id(&quot;kotlin-android&quot;) id(&quot;kotlin-kapt&quot;) id(&quot;androidx.navigation.safeargs.kotlin&quot;)&#125; æ›´å¤šè¯·å‚è€ƒ Gradle | Kotlin (kotlinlang.org) é€ä¸ªè¿ç§»æŒ‰ä¸Šè¿°è½¬æ¢è§„åˆ™é€ä¸ªè¿ç§»ä»¥ä¸‹æ–‡ä»¶ï¼Œæ¯è¿ç§»ä¸€ä¸ªæ–‡ä»¶ï¼Œéƒ½ sync ä¸€éæŸ¥çœ‹æ˜¯å¦å‡ºç°é—®é¢˜ã€‚ ä¸‹åˆ—æ¯ä¸ªè¿ç§»å‰ï¼Œå…ˆæŠŠæ–‡ä»¶æ‰©å±•åæ·»åŠ ä¸º *.gradle.kts è¿ç§» setting.gradle123456789dependencyResolutionManagement &#123; repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS) repositories &#123; google() mavenCentral() &#125;&#125;rootProject.name = &quot;your app name&quot;include(&quot;:app&quot;) è¿ç§»é¡¹ç›®çš„ build.gradle1234567891011121314buildscript &#123; repositories &#123; google() mavenCentral() &#125; dependencies &#123; classpath(&quot;com.android.tools.build:gradle:7.0.2&quot;) classpath(&quot;org.jetbrains.kotlin:kotlin-gradle-plugin:1.5.20&quot;) &#125;&#125;tasks.register(&quot;Delete&quot;, Delete::class) &#123; delete(rootProject.buildDir)&#125; è¿ç§»æ¨¡å—çš„ build.gradle123456789101112131415161718192021222324252627282930313233343536373839404142plugins &#123; id(&quot;com.android.application&quot;) id(&quot;kotlin-android&quot;)&#125;android &#123; compileSdk = 30 defaultConfig &#123; applicationId = &quot;github.sukieva.hhuer&quot; minSdk = 24 targetSdk = 30 versionCode = 1 versionName = &quot;1.0&quot; &#125; buildTypes &#123; release &#123; isMinifyEnabled = false proguardFiles(&quot;proguard-rules.pro&quot;) &#125; &#125; compileOptions &#123; sourceCompatibility(JavaVersion.VERSION_1_8) targetCompatibility(JavaVersion.VERSION_1_8) &#125; kotlinOptions &#123; jvmTarget = &quot;1.8&quot; &#125;&#125;dependencies &#123; implementation(&quot;androidx.core:core-ktx:1.6.0&quot;) implementation(&quot;androidx.appcompat:appcompat:1.3.1&quot;) implementation(&quot;com.google.android.material:material:1.4.0&quot;) implementation(&quot;androidx.constraintlayout:constraintlayout:2.1.0&quot;) testImplementation(&quot;junit:junit:4.+&quot;) androidTestImplementation(&quot;androidx.test.ext:junit:1.1.3&quot;) androidTestImplementation(&quot;androidx.test.espresso:espresso-core:3.4.0&quot;)&#125; ä»£ç ä¼˜åŒ–å¯ä»¥åœ¨é¡¹ç›®çš„ build.gradle.kts é‡Œæ·»åŠ å®šä¹‰å±æ€§ï¼Œåœ¨å…¶ä»–é…ç½®æ–‡ä»¶å¯ç›´æ¥è®¿é—®ã€‚ 12345678910val defaultManagerPackageName by extra(&quot;github.sukieva.hhuer&quot;)val verCode by extra(20210924)val verName by extra(&quot;1.0&quot;)val androidTargetSdkVersion by extra(31)val androidMinSdkVersion by extra(27)val androidBuildToolsVersion by extra(&quot;31.0.0&quot;)val androidCompileSdkVersion by extra(31)val androidCompileNdkVersion by extra(&quot;23.0.7599858&quot;)val androidSourceCompatibility by extra(JavaVersion.VERSION_11)val androidTargetCompatibility by extra(JavaVersion.VERSION_11) å¯èƒ½å‡ºç°çš„é—®é¢˜code Insight unavailableå› ä¸ºæœŸé—´é‡å¯è¿‡å‡ æ¬¡ Android Studio ä¸å¤ªç¡®å®šæ€ä¹ˆæ’é™¤çš„ï¼Œå¯èƒ½åˆ‡æ¢ kotlin åˆ° dev ç‰ˆèƒ½è§£å†³æ­¤é—®é¢˜ã€‚","categories":[{"name":"Android","slug":"Android","permalink":"http://blog.sukiu.top/categories/Android/"},{"name":"Gradle","slug":"Android/Gradle","permalink":"http://blog.sukiu.top/categories/Android/Gradle/"}],"tags":[{"name":"Gradle","slug":"Gradle","permalink":"http://blog.sukiu.top/tags/Gradle/"}]}],"categories":[{"name":"Programming Language","slug":"Programming-Language","permalink":"http://blog.sukiu.top/categories/Programming-Language/"},{"name":"Java","slug":"Programming-Language/Java","permalink":"http://blog.sukiu.top/categories/Programming-Language/Java/"},{"name":"Framework","slug":"Framework","permalink":"http://blog.sukiu.top/categories/Framework/"},{"name":"Message Queue","slug":"Framework/Message-Queue","permalink":"http://blog.sukiu.top/categories/Framework/Message-Queue/"},{"name":"Flutter","slug":"Framework/Flutter","permalink":"http://blog.sukiu.top/categories/Framework/Flutter/"},{"name":"Projects","slug":"Projects","permalink":"http://blog.sukiu.top/categories/Projects/"},{"name":"Problems","slug":"Projects/Problems","permalink":"http://blog.sukiu.top/categories/Projects/Problems/"},{"name":"Build Tools","slug":"Build-Tools","permalink":"http://blog.sukiu.top/categories/Build-Tools/"},{"name":"Gradle","slug":"Build-Tools/Gradle","permalink":"http://blog.sukiu.top/categories/Build-Tools/Gradle/"},{"name":"SSM","slug":"Framework/SSM","permalink":"http://blog.sukiu.top/categories/Framework/SSM/"},{"name":"System Design","slug":"System-Design","permalink":"http://blog.sukiu.top/categories/System-Design/"},{"name":"Design Pattern","slug":"System-Design/Design-Pattern","permalink":"http://blog.sukiu.top/categories/System-Design/Design-Pattern/"},{"name":"Go","slug":"Programming-Language/Go","permalink":"http://blog.sukiu.top/categories/Programming-Language/Go/"},{"name":"Mixed","slug":"Mixed","permalink":"http://blog.sukiu.top/categories/Mixed/"},{"name":"Computer Basics","slug":"Computer-Basics","permalink":"http://blog.sukiu.top/categories/Computer-Basics/"},{"name":"Computer Network","slug":"Computer-Basics/Computer-Network","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Computer-Network/"},{"name":"Database","slug":"Database","permalink":"http://blog.sukiu.top/categories/Database/"},{"name":"Redis","slug":"Database/Redis","permalink":"http://blog.sukiu.top/categories/Database/Redis/"},{"name":"Interview","slug":"Mixed/Interview","permalink":"http://blog.sukiu.top/categories/Mixed/Interview/"},{"name":"Algorithm","slug":"Computer-Basics/Algorithm","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Algorithm/"},{"name":"Operating System","slug":"Computer-Basics/Operating-System","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Operating-System/"},{"name":"Shell","slug":"Programming-Language/Shell","permalink":"http://blog.sukiu.top/categories/Programming-Language/Shell/"},{"name":"Share","slug":"Mixed/Share","permalink":"http://blog.sukiu.top/categories/Mixed/Share/"},{"name":"Data Structure","slug":"Computer-Basics/Data-Structure","permalink":"http://blog.sukiu.top/categories/Computer-Basics/Data-Structure/"},{"name":"Kotlin","slug":"Programming-Language/Kotlin","permalink":"http://blog.sukiu.top/categories/Programming-Language/Kotlin/"},{"name":"Android","slug":"Android","permalink":"http://blog.sukiu.top/categories/Android/"},{"name":"Jetpack","slug":"Android/Jetpack","permalink":"http://blog.sukiu.top/categories/Android/Jetpack/"},{"name":"Gradle","slug":"Android/Gradle","permalink":"http://blog.sukiu.top/categories/Android/Gradle/"}],"tags":[{"name":"Annotation","slug":"Annotation","permalink":"http://blog.sukiu.top/tags/Annotation/"},{"name":"Message Queue","slug":"Message-Queue","permalink":"http://blog.sukiu.top/tags/Message-Queue/"},{"name":"Flutter","slug":"Flutter","permalink":"http://blog.sukiu.top/tags/Flutter/"},{"name":"Kotlin","slug":"Kotlin","permalink":"http://blog.sukiu.top/tags/Kotlin/"},{"name":"Redis","slug":"Redis","permalink":"http://blog.sukiu.top/tags/Redis/"},{"name":"Spring Boot","slug":"Spring-Boot","permalink":"http://blog.sukiu.top/tags/Spring-Boot/"},{"name":"Gradle","slug":"Gradle","permalink":"http://blog.sukiu.top/tags/Gradle/"},{"name":"Java","slug":"Java","permalink":"http://blog.sukiu.top/tags/Java/"},{"name":"SSM","slug":"SSM","permalink":"http://blog.sukiu.top/tags/SSM/"},{"name":"MyBatis","slug":"MyBatis","permalink":"http://blog.sukiu.top/tags/MyBatis/"},{"name":"Patterns","slug":"Patterns","permalink":"http://blog.sukiu.top/tags/Patterns/"},{"name":"Go","slug":"Go","permalink":"http://blog.sukiu.top/tags/Go/"},{"name":"Test","slug":"Test","permalink":"http://blog.sukiu.top/tags/Test/"},{"name":"CloudFlare Worker","slug":"CloudFlare-Worker","permalink":"http://blog.sukiu.top/tags/CloudFlare-Worker/"},{"name":"HTTP","slug":"HTTP","permalink":"http://blog.sukiu.top/tags/HTTP/"},{"name":"Interview","slug":"Interview","permalink":"http://blog.sukiu.top/tags/Interview/"},{"name":"Simulation","slug":"Simulation","permalink":"http://blog.sukiu.top/tags/Simulation/"},{"name":"File","slug":"File","permalink":"http://blog.sukiu.top/tags/File/"},{"name":"Device","slug":"Device","permalink":"http://blog.sukiu.top/tags/Device/"},{"name":"Memory","slug":"Memory","permalink":"http://blog.sukiu.top/tags/Memory/"},{"name":"Sort","slug":"Sort","permalink":"http://blog.sukiu.top/tags/Sort/"},{"name":"Thread","slug":"Thread","permalink":"http://blog.sukiu.top/tags/Thread/"},{"name":"DP","slug":"DP","permalink":"http://blog.sukiu.top/tags/DP/"},{"name":"Shell","slug":"Shell","permalink":"http://blog.sukiu.top/tags/Shell/"},{"name":"Backtracking","slug":"Backtracking","permalink":"http://blog.sukiu.top/tags/Backtracking/"},{"name":"Network","slug":"Network","permalink":"http://blog.sukiu.top/tags/Network/"},{"name":"App","slug":"App","permalink":"http://blog.sukiu.top/tags/App/"},{"name":"Database","slug":"Database","permalink":"http://blog.sukiu.top/tags/Database/"},{"name":"SQL","slug":"SQL","permalink":"http://blog.sukiu.top/tags/SQL/"},{"name":"Tree","slug":"Tree","permalink":"http://blog.sukiu.top/tags/Tree/"},{"name":"Bit Operation","slug":"Bit-Operation","permalink":"http://blog.sukiu.top/tags/Bit-Operation/"},{"name":"Hash","slug":"Hash","permalink":"http://blog.sukiu.top/tags/Hash/"},{"name":"Search","slug":"Search","permalink":"http://blog.sukiu.top/tags/Search/"},{"name":"Thanox","slug":"Thanox","permalink":"http://blog.sukiu.top/tags/Thanox/"},{"name":"License","slug":"License","permalink":"http://blog.sukiu.top/tags/License/"},{"name":"Linux","slug":"Linux","permalink":"http://blog.sukiu.top/tags/Linux/"},{"name":"Container","slug":"Container","permalink":"http://blog.sukiu.top/tags/Container/"},{"name":"Queue","slug":"Queue","permalink":"http://blog.sukiu.top/tags/Queue/"},{"name":"Stack","slug":"Stack","permalink":"http://blog.sukiu.top/tags/Stack/"},{"name":"String","slug":"String","permalink":"http://blog.sukiu.top/tags/String/"},{"name":"Jetpack","slug":"Jetpack","permalink":"http://blog.sukiu.top/tags/Jetpack/"},{"name":"Component","slug":"Component","permalink":"http://blog.sukiu.top/tags/Component/"}]}